(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var Yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function S0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function iw(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var C0={exports:{}},au={},N0={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ul=Symbol.for("react.element"),ow=Symbol.for("react.portal"),aw=Symbol.for("react.fragment"),lw=Symbol.for("react.strict_mode"),cw=Symbol.for("react.profiler"),uw=Symbol.for("react.provider"),dw=Symbol.for("react.context"),hw=Symbol.for("react.forward_ref"),fw=Symbol.for("react.suspense"),pw=Symbol.for("react.memo"),mw=Symbol.for("react.lazy"),sm=Symbol.iterator;function gw(n){return n===null||typeof n!="object"?null:(n=sm&&n[sm]||n["@@iterator"],typeof n=="function"?n:null)}var j0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k0=Object.assign,E0={};function Oo(n,e,t){this.props=n,this.context=e,this.refs=E0,this.updater=t||j0}Oo.prototype.isReactComponent={};Oo.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Oo.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function T0(){}T0.prototype=Oo.prototype;function Nf(n,e,t){this.props=n,this.context=e,this.refs=E0,this.updater=t||j0}var jf=Nf.prototype=new T0;jf.constructor=Nf;k0(jf,Oo.prototype);jf.isPureReactComponent=!0;var im=Array.isArray,A0=Object.prototype.hasOwnProperty,kf={current:null},P0={key:!0,ref:!0,__self:!0,__source:!0};function D0(n,e,t){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)A0.call(e,r)&&!P0.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(r in l=n.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ul,type:n,key:i,ref:o,props:s,_owner:kf.current}}function yw(n,e){return{$$typeof:ul,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Ef(n){return typeof n=="object"&&n!==null&&n.$$typeof===ul}function xw(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var om=/\/+/g;function Mu(n,e){return typeof n=="object"&&n!==null&&n.key!=null?xw(""+n.key):e.toString(36)}function ec(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case ul:case ow:o=!0}}if(o)return o=n,s=s(o),n=r===""?"."+Mu(o,0):r,im(s)?(t="",n!=null&&(t=n.replace(om,"$&/")+"/"),ec(s,e,t,"",function(u){return u})):s!=null&&(Ef(s)&&(s=yw(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(om,"$&/")+"/")+n)),e.push(s)),1;if(o=0,r=r===""?".":r+":",im(n))for(var l=0;l<n.length;l++){i=n[l];var c=r+Mu(i,l);o+=ec(i,e,t,c,s)}else if(c=gw(n),typeof c=="function")for(n=c.call(n),l=0;!(i=n.next()).done;)i=i.value,c=r+Mu(i,l++),o+=ec(i,e,t,c,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wl(n,e,t){if(n==null)return n;var r=[],s=0;return ec(n,r,"","",function(i){return e.call(t,i,s++)}),r}function vw(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Qt={current:null},tc={transition:null},bw={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:tc,ReactCurrentOwner:kf};function O0(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:wl,forEach:function(n,e,t){wl(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return wl(n,function(){e++}),e},toArray:function(n){return wl(n,function(e){return e})||[]},only:function(n){if(!Ef(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ae.Component=Oo;Ae.Fragment=aw;Ae.Profiler=cw;Ae.PureComponent=Nf;Ae.StrictMode=lw;Ae.Suspense=fw;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bw;Ae.act=O0;Ae.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=k0({},n.props),s=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=kf.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)A0.call(e,c)&&!P0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=t;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ul,type:n.type,key:s,ref:i,props:r,_owner:o}};Ae.createContext=function(n){return n={$$typeof:dw,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:uw,_context:n},n.Consumer=n};Ae.createElement=D0;Ae.createFactory=function(n){var e=D0.bind(null,n);return e.type=n,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(n){return{$$typeof:hw,render:n}};Ae.isValidElement=Ef;Ae.lazy=function(n){return{$$typeof:mw,_payload:{_status:-1,_result:n},_init:vw}};Ae.memo=function(n,e){return{$$typeof:pw,type:n,compare:e===void 0?null:e}};Ae.startTransition=function(n){var e=tc.transition;tc.transition={};try{n()}finally{tc.transition=e}};Ae.unstable_act=O0;Ae.useCallback=function(n,e){return Qt.current.useCallback(n,e)};Ae.useContext=function(n){return Qt.current.useContext(n)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(n){return Qt.current.useDeferredValue(n)};Ae.useEffect=function(n,e){return Qt.current.useEffect(n,e)};Ae.useId=function(){return Qt.current.useId()};Ae.useImperativeHandle=function(n,e,t){return Qt.current.useImperativeHandle(n,e,t)};Ae.useInsertionEffect=function(n,e){return Qt.current.useInsertionEffect(n,e)};Ae.useLayoutEffect=function(n,e){return Qt.current.useLayoutEffect(n,e)};Ae.useMemo=function(n,e){return Qt.current.useMemo(n,e)};Ae.useReducer=function(n,e,t){return Qt.current.useReducer(n,e,t)};Ae.useRef=function(n){return Qt.current.useRef(n)};Ae.useState=function(n){return Qt.current.useState(n)};Ae.useSyncExternalStore=function(n,e,t){return Qt.current.useSyncExternalStore(n,e,t)};Ae.useTransition=function(){return Qt.current.useTransition()};Ae.version="18.3.1";N0.exports=Ae;var N=N0.exports;const Le=S0(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww=N,_w=Symbol.for("react.element"),Sw=Symbol.for("react.fragment"),Cw=Object.prototype.hasOwnProperty,Nw=ww.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jw={key:!0,ref:!0,__self:!0,__source:!0};function I0(n,e,t){var r,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Cw.call(e,r)&&!jw.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:_w,type:n,key:i,ref:o,props:s,_owner:Nw.current}}au.Fragment=Sw;au.jsx=I0;au.jsxs=I0;C0.exports=au;var a=C0.exports,Ed={},R0={exports:{}},Dn={},M0={exports:{}},L0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(P,z){var U=P.length;P.push(z);e:for(;0<U;){var L=U-1>>>1,V=P[L];if(0<s(V,z))P[L]=z,P[U]=V,U=L;else break e}}function t(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var z=P[0],U=P.pop();if(U!==z){P[0]=U;e:for(var L=0,V=P.length,S=V>>>1;L<S;){var W=2*(L+1)-1,G=P[W],D=W+1,ne=P[D];if(0>s(G,U))D<V&&0>s(ne,G)?(P[L]=ne,P[D]=U,L=D):(P[L]=G,P[W]=U,L=W);else if(D<V&&0>s(ne,U))P[L]=ne,P[D]=U,L=D;else break e}}return z}function s(P,z){var U=P.sortIndex-z.sortIndex;return U!==0?U:P.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,x=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(P){for(var z=t(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=P)r(u),z.sortIndex=z.expirationTime,e(c,z);else break;z=t(u)}}function v(P){if(g=!1,b(P),!x)if(t(c)!==null)x=!0,B(_);else{var z=t(u);z!==null&&H(v,z.startTime-P)}}function _(P,z){x=!1,g&&(g=!1,m(k),k=-1),p=!0;var U=f;try{for(b(z),d=t(c);d!==null&&(!(d.expirationTime>z)||P&&!A());){var L=d.callback;if(typeof L=="function"){d.callback=null,f=d.priorityLevel;var V=L(d.expirationTime<=z);z=n.unstable_now(),typeof V=="function"?d.callback=V:d===t(c)&&r(c),b(z)}else r(c);d=t(c)}if(d!==null)var S=!0;else{var W=t(u);W!==null&&H(v,W.startTime-z),S=!1}return S}finally{d=null,f=U,p=!1}}var C=!1,j=null,k=-1,E=5,M=-1;function A(){return!(n.unstable_now()-M<E)}function $(){if(j!==null){var P=n.unstable_now();M=P;var z=!0;try{z=j(!0,P)}finally{z?O():(C=!1,j=null)}}else C=!1}var O;if(typeof y=="function")O=function(){y($)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,I=T.port2;T.port1.onmessage=$,O=function(){I.postMessage(null)}}else O=function(){w($,0)};function B(P){j=P,C||(C=!0,O())}function H(P,z){k=w(function(){P(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_continueExecution=function(){x||p||(x=!0,B(_))},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(P){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var U=f;f=z;try{return P()}finally{f=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(P,z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var U=f;f=P;try{return z()}finally{f=U}},n.unstable_scheduleCallback=function(P,z,U){var L=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?L+U:L):U=L,P){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=U+V,P={id:h++,callback:z,priorityLevel:P,startTime:U,expirationTime:V,sortIndex:-1},U>L?(P.sortIndex=U,e(u,P),t(c)===null&&P===t(u)&&(g?(m(k),k=-1):g=!0,H(v,U-L))):(P.sortIndex=V,e(c,P),x||p||(x=!0,B(_))),P},n.unstable_shouldYield=A,n.unstable_wrapCallback=function(P){var z=f;return function(){var U=f;f=z;try{return P.apply(this,arguments)}finally{f=U}}}})(L0);M0.exports=L0;var kw=M0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew=N,Tn=kw;function re(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $0=new Set,Ra={};function Si(n,e){go(n,e),go(n+"Capture",e)}function go(n,e){for(Ra[n]=e,n=0;n<e.length;n++)$0.add(e[n])}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Td=Object.prototype.hasOwnProperty,Tw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,am={},lm={};function Aw(n){return Td.call(lm,n)?!0:Td.call(am,n)?!1:Tw.test(n)?lm[n]=!0:(am[n]=!0,!1)}function Pw(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Dw(n,e,t,r){if(e===null||typeof e>"u"||Pw(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jt(n,e,t,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){It[n]=new Jt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];It[e]=new Jt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){It[n]=new Jt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){It[n]=new Jt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){It[n]=new Jt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){It[n]=new Jt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){It[n]=new Jt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){It[n]=new Jt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){It[n]=new Jt(n,5,!1,n.toLowerCase(),null,!1,!1)});var Tf=/[\-:]([a-z])/g;function Af(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Tf,Af);It[e]=new Jt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Tf,Af);It[e]=new Jt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Tf,Af);It[e]=new Jt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){It[n]=new Jt(n,1,!1,n.toLowerCase(),null,!1,!1)});It.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){It[n]=new Jt(n,1,!1,n.toLowerCase(),null,!0,!0)});function Pf(n,e,t,r){var s=It.hasOwnProperty(e)?It[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Dw(e,t,s,r)&&(t=null),r||s===null?Aw(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Jr=Ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_l=Symbol.for("react.element"),Bi=Symbol.for("react.portal"),Ui=Symbol.for("react.fragment"),Df=Symbol.for("react.strict_mode"),Ad=Symbol.for("react.profiler"),z0=Symbol.for("react.provider"),F0=Symbol.for("react.context"),Of=Symbol.for("react.forward_ref"),Pd=Symbol.for("react.suspense"),Dd=Symbol.for("react.suspense_list"),If=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),B0=Symbol.for("react.offscreen"),cm=Symbol.iterator;function Bo(n){return n===null||typeof n!="object"?null:(n=cm&&n[cm]||n["@@iterator"],typeof n=="function"?n:null)}var at=Object.assign,Lu;function ea(n){if(Lu===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Lu=e&&e[1]||""}return`
`+Lu+n}var $u=!1;function zu(n,e){if(!n||$u)return"";$u=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{$u=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ea(n):""}function Ow(n){switch(n.tag){case 5:return ea(n.type);case 16:return ea("Lazy");case 13:return ea("Suspense");case 19:return ea("SuspenseList");case 0:case 2:case 15:return n=zu(n.type,!1),n;case 11:return n=zu(n.type.render,!1),n;case 1:return n=zu(n.type,!0),n;default:return""}}function Od(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ui:return"Fragment";case Bi:return"Portal";case Ad:return"Profiler";case Df:return"StrictMode";case Pd:return"Suspense";case Dd:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case F0:return(n.displayName||"Context")+".Consumer";case z0:return(n._context.displayName||"Context")+".Provider";case Of:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case If:return e=n.displayName||null,e!==null?e:Od(n.type)||"Memo";case is:e=n._payload,n=n._init;try{return Od(n(e))}catch{}}return null}function Iw(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Od(e);case 8:return e===Df?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function As(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function U0(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Rw(n){var e=U0(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Sl(n){n._valueTracker||(n._valueTracker=Rw(n))}function V0(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=U0(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function _c(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Id(n,e){var t=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function um(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=As(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function W0(n,e){e=e.checked,e!=null&&Pf(n,"checked",e,!1)}function Rd(n,e){W0(n,e);var t=As(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Md(n,e.type,t):e.hasOwnProperty("defaultValue")&&Md(n,e.type,As(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function dm(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Md(n,e,t){(e!=="number"||_c(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ta=Array.isArray;function ro(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+As(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function Ld(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function hm(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(re(92));if(ta(t)){if(1<t.length)throw Error(re(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:As(t)}}function H0(n,e){var t=As(e.value),r=As(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function fm(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function q0(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $d(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?q0(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Cl,X0=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Cl=Cl||document.createElement("div"),Cl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cl.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ma(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ha={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mw=["Webkit","ms","Moz","O"];Object.keys(ha).forEach(function(n){Mw.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ha[e]=ha[n]})});function G0(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ha.hasOwnProperty(n)&&ha[n]?(""+e).trim():e+"px"}function Y0(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=G0(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var Lw=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zd(n,e){if(e){if(Lw[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function Fd(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bd=null;function Rf(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ud=null,so=null,io=null;function pm(n){if(n=fl(n)){if(typeof Ud!="function")throw Error(re(280));var e=n.stateNode;e&&(e=hu(e),Ud(n.stateNode,n.type,e))}}function K0(n){so?io?io.push(n):io=[n]:so=n}function Q0(){if(so){var n=so,e=io;if(io=so=null,pm(n),e)for(n=0;n<e.length;n++)pm(e[n])}}function J0(n,e){return n(e)}function Z0(){}var Fu=!1;function ey(n,e,t){if(Fu)return n(e,t);Fu=!0;try{return J0(n,e,t)}finally{Fu=!1,(so!==null||io!==null)&&(Z0(),Q0())}}function La(n,e){var t=n.stateNode;if(t===null)return null;var r=hu(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(re(231,e,typeof t));return t}var Vd=!1;if(Hr)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){Vd=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{Vd=!1}function $w(n,e,t,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var fa=!1,Sc=null,Cc=!1,Wd=null,zw={onError:function(n){fa=!0,Sc=n}};function Fw(n,e,t,r,s,i,o,l,c){fa=!1,Sc=null,$w.apply(zw,arguments)}function Bw(n,e,t,r,s,i,o,l,c){if(Fw.apply(this,arguments),fa){if(fa){var u=Sc;fa=!1,Sc=null}else throw Error(re(198));Cc||(Cc=!0,Wd=u)}}function Ci(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function ty(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function mm(n){if(Ci(n)!==n)throw Error(re(188))}function Uw(n){var e=n.alternate;if(!e){if(e=Ci(n),e===null)throw Error(re(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return mm(s),n;if(i===r)return mm(s),e;i=i.sibling}throw Error(re(188))}if(t.return!==r.return)t=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===t){o=!0,t=s,r=i;break}if(l===r){o=!0,r=s,t=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===t){o=!0,t=i,r=s;break}if(l===r){o=!0,r=i,t=s;break}l=l.sibling}if(!o)throw Error(re(189))}}if(t.alternate!==r)throw Error(re(190))}if(t.tag!==3)throw Error(re(188));return t.stateNode.current===t?n:e}function ny(n){return n=Uw(n),n!==null?ry(n):null}function ry(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=ry(n);if(e!==null)return e;n=n.sibling}return null}var sy=Tn.unstable_scheduleCallback,gm=Tn.unstable_cancelCallback,Vw=Tn.unstable_shouldYield,Ww=Tn.unstable_requestPaint,pt=Tn.unstable_now,Hw=Tn.unstable_getCurrentPriorityLevel,Mf=Tn.unstable_ImmediatePriority,iy=Tn.unstable_UserBlockingPriority,Nc=Tn.unstable_NormalPriority,qw=Tn.unstable_LowPriority,oy=Tn.unstable_IdlePriority,lu=null,Cr=null;function Xw(n){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(lu,n,void 0,(n.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:Kw,Gw=Math.log,Yw=Math.LN2;function Kw(n){return n>>>=0,n===0?32:31-(Gw(n)/Yw|0)|0}var Nl=64,jl=4194304;function na(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function jc(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var l=o&~s;l!==0?r=na(l):(i&=o,i!==0&&(r=na(i)))}else o=t&~s,o!==0?r=na(o):i!==0&&(r=na(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-cr(e),s=1<<t,r|=n[t],e&=~s;return r}function Qw(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jw(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-cr(i),l=1<<o,c=s[o];c===-1?(!(l&t)||l&r)&&(s[o]=Qw(l,e)):c<=e&&(n.expiredLanes|=l),i&=~l}}function Hd(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ay(){var n=Nl;return Nl<<=1,!(Nl&4194240)&&(Nl=64),n}function Bu(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function dl(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-cr(e),n[e]=t}function Zw(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-cr(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function Lf(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-cr(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var ze=0;function ly(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var cy,$f,uy,dy,hy,qd=!1,kl=[],xs=null,vs=null,bs=null,$a=new Map,za=new Map,cs=[],e1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ym(n,e){switch(n){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":$a.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":za.delete(e.pointerId)}}function Vo(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fl(e),e!==null&&$f(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function t1(n,e,t,r,s){switch(e){case"focusin":return xs=Vo(xs,n,e,t,r,s),!0;case"dragenter":return vs=Vo(vs,n,e,t,r,s),!0;case"mouseover":return bs=Vo(bs,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return $a.set(i,Vo($a.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,za.set(i,Vo(za.get(i)||null,n,e,t,r,s)),!0}return!1}function fy(n){var e=si(n.target);if(e!==null){var t=Ci(e);if(t!==null){if(e=t.tag,e===13){if(e=ty(t),e!==null){n.blockedOn=e,hy(n.priority,function(){uy(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function nc(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Xd(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Bd=r,t.target.dispatchEvent(r),Bd=null}else return e=fl(t),e!==null&&$f(e),n.blockedOn=t,!1;e.shift()}return!0}function xm(n,e,t){nc(n)&&t.delete(e)}function n1(){qd=!1,xs!==null&&nc(xs)&&(xs=null),vs!==null&&nc(vs)&&(vs=null),bs!==null&&nc(bs)&&(bs=null),$a.forEach(xm),za.forEach(xm)}function Wo(n,e){n.blockedOn===e&&(n.blockedOn=null,qd||(qd=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,n1)))}function Fa(n){function e(s){return Wo(s,n)}if(0<kl.length){Wo(kl[0],n);for(var t=1;t<kl.length;t++){var r=kl[t];r.blockedOn===n&&(r.blockedOn=null)}}for(xs!==null&&Wo(xs,n),vs!==null&&Wo(vs,n),bs!==null&&Wo(bs,n),$a.forEach(e),za.forEach(e),t=0;t<cs.length;t++)r=cs[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<cs.length&&(t=cs[0],t.blockedOn===null);)fy(t),t.blockedOn===null&&cs.shift()}var oo=Jr.ReactCurrentBatchConfig,kc=!0;function r1(n,e,t,r){var s=ze,i=oo.transition;oo.transition=null;try{ze=1,zf(n,e,t,r)}finally{ze=s,oo.transition=i}}function s1(n,e,t,r){var s=ze,i=oo.transition;oo.transition=null;try{ze=4,zf(n,e,t,r)}finally{ze=s,oo.transition=i}}function zf(n,e,t,r){if(kc){var s=Xd(n,e,t,r);if(s===null)Qu(n,e,r,Ec,t),ym(n,r);else if(t1(s,n,e,t,r))r.stopPropagation();else if(ym(n,r),e&4&&-1<e1.indexOf(n)){for(;s!==null;){var i=fl(s);if(i!==null&&cy(i),i=Xd(n,e,t,r),i===null&&Qu(n,e,r,Ec,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else Qu(n,e,r,null,t)}}var Ec=null;function Xd(n,e,t,r){if(Ec=null,n=Rf(r),n=si(n),n!==null)if(e=Ci(n),e===null)n=null;else if(t=e.tag,t===13){if(n=ty(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Ec=n,null}function py(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hw()){case Mf:return 1;case iy:return 4;case Nc:case qw:return 16;case oy:return 536870912;default:return 16}default:return 16}}var hs=null,Ff=null,rc=null;function my(){if(rc)return rc;var n,e=Ff,t=e.length,r,s="value"in hs?hs.value:hs.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===s[i-r];r++);return rc=s.slice(n,1<r?1-r:void 0)}function sc(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function El(){return!0}function vm(){return!1}function On(n){function e(t,r,s,i,o){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?El:vm,this.isPropagationStopped=vm,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=El)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=El)},persist:function(){},isPersistent:El}),e}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bf=On(Io),hl=at({},Io,{view:0,detail:0}),i1=On(hl),Uu,Vu,Ho,cu=at({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ho&&(Ho&&n.type==="mousemove"?(Uu=n.screenX-Ho.screenX,Vu=n.screenY-Ho.screenY):Vu=Uu=0,Ho=n),Uu)},movementY:function(n){return"movementY"in n?n.movementY:Vu}}),bm=On(cu),o1=at({},cu,{dataTransfer:0}),a1=On(o1),l1=at({},hl,{relatedTarget:0}),Wu=On(l1),c1=at({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),u1=On(c1),d1=at({},Io,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h1=On(d1),f1=at({},Io,{data:0}),wm=On(f1),p1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y1(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=g1[n])?!!e[n]:!1}function Uf(){return y1}var x1=at({},hl,{key:function(n){if(n.key){var e=p1[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=sc(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?m1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uf,charCode:function(n){return n.type==="keypress"?sc(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?sc(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),v1=On(x1),b1=at({},cu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_m=On(b1),w1=at({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uf}),_1=On(w1),S1=at({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),C1=On(S1),N1=at({},cu,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),j1=On(N1),k1=[9,13,27,32],Vf=Hr&&"CompositionEvent"in window,pa=null;Hr&&"documentMode"in document&&(pa=document.documentMode);var E1=Hr&&"TextEvent"in window&&!pa,gy=Hr&&(!Vf||pa&&8<pa&&11>=pa),Sm=" ",Cm=!1;function yy(n,e){switch(n){case"keyup":return k1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xy(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Vi=!1;function T1(n,e){switch(n){case"compositionend":return xy(e);case"keypress":return e.which!==32?null:(Cm=!0,Sm);case"textInput":return n=e.data,n===Sm&&Cm?null:n;default:return null}}function A1(n,e){if(Vi)return n==="compositionend"||!Vf&&yy(n,e)?(n=my(),rc=Ff=hs=null,Vi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gy&&e.locale!=="ko"?null:e.data;default:return null}}var P1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nm(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!P1[n.type]:e==="textarea"}function vy(n,e,t,r){K0(r),e=Tc(e,"onChange"),0<e.length&&(t=new Bf("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var ma=null,Ba=null;function D1(n){Ay(n,0)}function uu(n){var e=qi(n);if(V0(e))return n}function O1(n,e){if(n==="change")return e}var by=!1;if(Hr){var Hu;if(Hr){var qu="oninput"in document;if(!qu){var jm=document.createElement("div");jm.setAttribute("oninput","return;"),qu=typeof jm.oninput=="function"}Hu=qu}else Hu=!1;by=Hu&&(!document.documentMode||9<document.documentMode)}function km(){ma&&(ma.detachEvent("onpropertychange",wy),Ba=ma=null)}function wy(n){if(n.propertyName==="value"&&uu(Ba)){var e=[];vy(e,Ba,n,Rf(n)),ey(D1,e)}}function I1(n,e,t){n==="focusin"?(km(),ma=e,Ba=t,ma.attachEvent("onpropertychange",wy)):n==="focusout"&&km()}function R1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return uu(Ba)}function M1(n,e){if(n==="click")return uu(e)}function L1(n,e){if(n==="input"||n==="change")return uu(e)}function $1(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var fr=typeof Object.is=="function"?Object.is:$1;function Ua(n,e){if(fr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!Td.call(e,s)||!fr(n[s],e[s]))return!1}return!0}function Em(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Tm(n,e){var t=Em(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Em(t)}}function _y(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?_y(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Sy(){for(var n=window,e=_c();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=_c(n.document)}return e}function Wf(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function z1(n){var e=Sy(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&_y(t.ownerDocument.documentElement,t)){if(r!==null&&Wf(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=Tm(t,i);var o=Tm(t,r);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var F1=Hr&&"documentMode"in document&&11>=document.documentMode,Wi=null,Gd=null,ga=null,Yd=!1;function Am(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Yd||Wi==null||Wi!==_c(r)||(r=Wi,"selectionStart"in r&&Wf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ga&&Ua(ga,r)||(ga=r,r=Tc(Gd,"onSelect"),0<r.length&&(e=new Bf("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Wi)))}function Tl(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Hi={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionend:Tl("Transition","TransitionEnd")},Xu={},Cy={};Hr&&(Cy=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function du(n){if(Xu[n])return Xu[n];if(!Hi[n])return n;var e=Hi[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Cy)return Xu[n]=e[t];return n}var Ny=du("animationend"),jy=du("animationiteration"),ky=du("animationstart"),Ey=du("transitionend"),Ty=new Map,Pm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(n,e){Ty.set(n,e),Si(e,[n])}for(var Gu=0;Gu<Pm.length;Gu++){var Yu=Pm[Gu],B1=Yu.toLowerCase(),U1=Yu[0].toUpperCase()+Yu.slice(1);Is(B1,"on"+U1)}Is(Ny,"onAnimationEnd");Is(jy,"onAnimationIteration");Is(ky,"onAnimationStart");Is("dblclick","onDoubleClick");Is("focusin","onFocus");Is("focusout","onBlur");Is(Ey,"onTransitionEnd");go("onMouseEnter",["mouseout","mouseover"]);go("onMouseLeave",["mouseout","mouseover"]);go("onPointerEnter",["pointerout","pointerover"]);go("onPointerLeave",["pointerout","pointerover"]);Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Si("onBeforeInput",["compositionend","keypress","textInput","paste"]);Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ra));function Dm(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Bw(r,e,void 0,n),n.currentTarget=null}function Ay(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Dm(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Dm(s,l,u),i=c}}}if(Cc)throw n=Wd,Cc=!1,Wd=null,n}function Ye(n,e){var t=e[eh];t===void 0&&(t=e[eh]=new Set);var r=n+"__bubble";t.has(r)||(Py(e,n,2,!1),t.add(r))}function Ku(n,e,t){var r=0;e&&(r|=4),Py(t,n,r,e)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Va(n){if(!n[Al]){n[Al]=!0,$0.forEach(function(t){t!=="selectionchange"&&(V1.has(t)||Ku(t,!1,n),Ku(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Al]||(e[Al]=!0,Ku("selectionchange",!1,e))}}function Py(n,e,t,r){switch(py(e)){case 1:var s=r1;break;case 4:s=s1;break;default:s=zf}t=s.bind(null,e,t,n),s=void 0,!Vd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Qu(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=si(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}ey(function(){var u=i,h=Rf(t),d=[];e:{var f=Ty.get(n);if(f!==void 0){var p=Bf,x=n;switch(n){case"keypress":if(sc(t)===0)break e;case"keydown":case"keyup":p=v1;break;case"focusin":x="focus",p=Wu;break;case"focusout":x="blur",p=Wu;break;case"beforeblur":case"afterblur":p=Wu;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=a1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=_1;break;case Ny:case jy:case ky:p=u1;break;case Ey:p=C1;break;case"scroll":p=i1;break;case"wheel":p=j1;break;case"copy":case"cut":case"paste":p=h1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=_m}var g=(e&4)!==0,w=!g&&n==="scroll",m=g?f!==null?f+"Capture":null:f;g=[];for(var y=u,b;y!==null;){b=y;var v=b.stateNode;if(b.tag===5&&v!==null&&(b=v,m!==null&&(v=La(y,m),v!=null&&g.push(Wa(y,v,b)))),w)break;y=y.return}0<g.length&&(f=new p(f,x,null,t,h),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==Bd&&(x=t.relatedTarget||t.fromElement)&&(si(x)||x[qr]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(x=t.relatedTarget||t.toElement,p=u,x=x?si(x):null,x!==null&&(w=Ci(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=u),p!==x)){if(g=bm,v="onMouseLeave",m="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(g=_m,v="onPointerLeave",m="onPointerEnter",y="pointer"),w=p==null?f:qi(p),b=x==null?f:qi(x),f=new g(v,y+"leave",p,t,h),f.target=w,f.relatedTarget=b,v=null,si(h)===u&&(g=new g(m,y+"enter",x,t,h),g.target=b,g.relatedTarget=w,v=g),w=v,p&&x)t:{for(g=p,m=x,y=0,b=g;b;b=Ti(b))y++;for(b=0,v=m;v;v=Ti(v))b++;for(;0<y-b;)g=Ti(g),y--;for(;0<b-y;)m=Ti(m),b--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=Ti(g),m=Ti(m)}g=null}else g=null;p!==null&&Om(d,f,p,g,!1),x!==null&&w!==null&&Om(d,w,x,g,!0)}}e:{if(f=u?qi(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=O1;else if(Nm(f))if(by)_=L1;else{_=R1;var C=I1}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=M1);if(_&&(_=_(n,u))){vy(d,_,t,h);break e}C&&C(n,f,u),n==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Md(f,"number",f.value)}switch(C=u?qi(u):window,n){case"focusin":(Nm(C)||C.contentEditable==="true")&&(Wi=C,Gd=u,ga=null);break;case"focusout":ga=Gd=Wi=null;break;case"mousedown":Yd=!0;break;case"contextmenu":case"mouseup":case"dragend":Yd=!1,Am(d,t,h);break;case"selectionchange":if(F1)break;case"keydown":case"keyup":Am(d,t,h)}var j;if(Vf)e:{switch(n){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Vi?yy(n,t)&&(k="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(k="onCompositionStart");k&&(gy&&t.locale!=="ko"&&(Vi||k!=="onCompositionStart"?k==="onCompositionEnd"&&Vi&&(j=my()):(hs=h,Ff="value"in hs?hs.value:hs.textContent,Vi=!0)),C=Tc(u,k),0<C.length&&(k=new wm(k,n,null,t,h),d.push({event:k,listeners:C}),j?k.data=j:(j=xy(t),j!==null&&(k.data=j)))),(j=E1?T1(n,t):A1(n,t))&&(u=Tc(u,"onBeforeInput"),0<u.length&&(h=new wm("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=j))}Ay(d,e)})}function Wa(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Tc(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=La(n,t),i!=null&&r.unshift(Wa(n,i,s)),i=La(n,e),i!=null&&r.push(Wa(n,i,s))),n=n.return}return r}function Ti(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Om(n,e,t,r,s){for(var i=e._reactName,o=[];t!==null&&t!==r;){var l=t,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=La(t,i),c!=null&&o.unshift(Wa(t,c,l))):s||(c=La(t,i),c!=null&&o.push(Wa(t,c,l)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var W1=/\r\n?/g,H1=/\u0000|\uFFFD/g;function Im(n){return(typeof n=="string"?n:""+n).replace(W1,`
`).replace(H1,"")}function Pl(n,e,t){if(e=Im(e),Im(n)!==e&&t)throw Error(re(425))}function Ac(){}var Kd=null,Qd=null;function Jd(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zd=typeof setTimeout=="function"?setTimeout:void 0,q1=typeof clearTimeout=="function"?clearTimeout:void 0,Rm=typeof Promise=="function"?Promise:void 0,X1=typeof queueMicrotask=="function"?queueMicrotask:typeof Rm<"u"?function(n){return Rm.resolve(null).then(n).catch(G1)}:Zd;function G1(n){setTimeout(function(){throw n})}function Ju(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),Fa(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);Fa(e)}function ws(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Mm(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ro=Math.random().toString(36).slice(2),wr="__reactFiber$"+Ro,Ha="__reactProps$"+Ro,qr="__reactContainer$"+Ro,eh="__reactEvents$"+Ro,Y1="__reactListeners$"+Ro,K1="__reactHandles$"+Ro;function si(n){var e=n[wr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[qr]||t[wr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Mm(n);n!==null;){if(t=n[wr])return t;n=Mm(n)}return e}n=t,t=n.parentNode}return null}function fl(n){return n=n[wr]||n[qr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function qi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(re(33))}function hu(n){return n[Ha]||null}var th=[],Xi=-1;function Rs(n){return{current:n}}function Ke(n){0>Xi||(n.current=th[Xi],th[Xi]=null,Xi--)}function qe(n,e){Xi++,th[Xi]=n.current,n.current=e}var Ps={},Vt=Rs(Ps),un=Rs(!1),gi=Ps;function yo(n,e){var t=n.type.contextTypes;if(!t)return Ps;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function dn(n){return n=n.childContextTypes,n!=null}function Pc(){Ke(un),Ke(Vt)}function Lm(n,e,t){if(Vt.current!==Ps)throw Error(re(168));qe(Vt,e),qe(un,t)}function Dy(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(re(108,Iw(n)||"Unknown",s));return at({},t,r)}function Dc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ps,gi=Vt.current,qe(Vt,n),qe(un,un.current),!0}function $m(n,e,t){var r=n.stateNode;if(!r)throw Error(re(169));t?(n=Dy(n,e,gi),r.__reactInternalMemoizedMergedChildContext=n,Ke(un),Ke(Vt),qe(Vt,n)):Ke(un),qe(un,t)}var Lr=null,fu=!1,Zu=!1;function Oy(n){Lr===null?Lr=[n]:Lr.push(n)}function Q1(n){fu=!0,Oy(n)}function Ms(){if(!Zu&&Lr!==null){Zu=!0;var n=0,e=ze;try{var t=Lr;for(ze=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Lr=null,fu=!1}catch(s){throw Lr!==null&&(Lr=Lr.slice(n+1)),sy(Mf,Ms),s}finally{ze=e,Zu=!1}}return null}var Gi=[],Yi=0,Oc=null,Ic=0,Un=[],Vn=0,yi=null,Br=1,Ur="";function Ks(n,e){Gi[Yi++]=Ic,Gi[Yi++]=Oc,Oc=n,Ic=e}function Iy(n,e,t){Un[Vn++]=Br,Un[Vn++]=Ur,Un[Vn++]=yi,yi=n;var r=Br;n=Ur;var s=32-cr(r)-1;r&=~(1<<s),t+=1;var i=32-cr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Br=1<<32-cr(e)+s|t<<s|r,Ur=i+n}else Br=1<<i|t<<s|r,Ur=n}function Hf(n){n.return!==null&&(Ks(n,1),Iy(n,1,0))}function qf(n){for(;n===Oc;)Oc=Gi[--Yi],Gi[Yi]=null,Ic=Gi[--Yi],Gi[Yi]=null;for(;n===yi;)yi=Un[--Vn],Un[Vn]=null,Ur=Un[--Vn],Un[Vn]=null,Br=Un[--Vn],Un[Vn]=null}var kn=null,Cn=null,Ze=!1,ar=null;function Ry(n,e){var t=Wn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function zm(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,kn=n,Cn=ws(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,kn=n,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=yi!==null?{id:Br,overflow:Ur}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Wn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,kn=n,Cn=null,!0):!1;default:return!1}}function nh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function rh(n){if(Ze){var e=Cn;if(e){var t=e;if(!zm(n,e)){if(nh(n))throw Error(re(418));e=ws(t.nextSibling);var r=kn;e&&zm(n,e)?Ry(r,t):(n.flags=n.flags&-4097|2,Ze=!1,kn=n)}}else{if(nh(n))throw Error(re(418));n.flags=n.flags&-4097|2,Ze=!1,kn=n}}}function Fm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;kn=n}function Dl(n){if(n!==kn)return!1;if(!Ze)return Fm(n),Ze=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Jd(n.type,n.memoizedProps)),e&&(e=Cn)){if(nh(n))throw My(),Error(re(418));for(;e;)Ry(n,e),e=ws(e.nextSibling)}if(Fm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(re(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Cn=ws(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Cn=null}}else Cn=kn?ws(n.stateNode.nextSibling):null;return!0}function My(){for(var n=Cn;n;)n=ws(n.nextSibling)}function xo(){Cn=kn=null,Ze=!1}function Xf(n){ar===null?ar=[n]:ar.push(n)}var J1=Jr.ReactCurrentBatchConfig;function qo(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(re(309));var r=t.stateNode}if(!r)throw Error(re(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(re(284));if(!t._owner)throw Error(re(290,n))}return n}function Ol(n,e){throw n=Object.prototype.toString.call(e),Error(re(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Bm(n){var e=n._init;return e(n._payload)}function Ly(n){function e(m,y){if(n){var b=m.deletions;b===null?(m.deletions=[y],m.flags|=16):b.push(y)}}function t(m,y){if(!n)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function s(m,y){return m=Ns(m,y),m.index=0,m.sibling=null,m}function i(m,y,b){return m.index=b,n?(b=m.alternate,b!==null?(b=b.index,b<y?(m.flags|=2,y):b):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return n&&m.alternate===null&&(m.flags|=2),m}function l(m,y,b,v){return y===null||y.tag!==6?(y=od(b,m.mode,v),y.return=m,y):(y=s(y,b),y.return=m,y)}function c(m,y,b,v){var _=b.type;return _===Ui?h(m,y,b.props.children,v,b.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===is&&Bm(_)===y.type)?(v=s(y,b.props),v.ref=qo(m,y,b),v.return=m,v):(v=dc(b.type,b.key,b.props,null,m.mode,v),v.ref=qo(m,y,b),v.return=m,v)}function u(m,y,b,v){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=ad(b,m.mode,v),y.return=m,y):(y=s(y,b.children||[]),y.return=m,y)}function h(m,y,b,v,_){return y===null||y.tag!==7?(y=ci(b,m.mode,v,_),y.return=m,y):(y=s(y,b),y.return=m,y)}function d(m,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=od(""+y,m.mode,b),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case _l:return b=dc(y.type,y.key,y.props,null,m.mode,b),b.ref=qo(m,null,y),b.return=m,b;case Bi:return y=ad(y,m.mode,b),y.return=m,y;case is:var v=y._init;return d(m,v(y._payload),b)}if(ta(y)||Bo(y))return y=ci(y,m.mode,b,null),y.return=m,y;Ol(m,y)}return null}function f(m,y,b,v){var _=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:l(m,y,""+b,v);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _l:return b.key===_?c(m,y,b,v):null;case Bi:return b.key===_?u(m,y,b,v):null;case is:return _=b._init,f(m,y,_(b._payload),v)}if(ta(b)||Bo(b))return _!==null?null:h(m,y,b,v,null);Ol(m,b)}return null}function p(m,y,b,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return m=m.get(b)||null,l(y,m,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _l:return m=m.get(v.key===null?b:v.key)||null,c(y,m,v,_);case Bi:return m=m.get(v.key===null?b:v.key)||null,u(y,m,v,_);case is:var C=v._init;return p(m,y,b,C(v._payload),_)}if(ta(v)||Bo(v))return m=m.get(b)||null,h(y,m,v,_,null);Ol(y,v)}return null}function x(m,y,b,v){for(var _=null,C=null,j=y,k=y=0,E=null;j!==null&&k<b.length;k++){j.index>k?(E=j,j=null):E=j.sibling;var M=f(m,j,b[k],v);if(M===null){j===null&&(j=E);break}n&&j&&M.alternate===null&&e(m,j),y=i(M,y,k),C===null?_=M:C.sibling=M,C=M,j=E}if(k===b.length)return t(m,j),Ze&&Ks(m,k),_;if(j===null){for(;k<b.length;k++)j=d(m,b[k],v),j!==null&&(y=i(j,y,k),C===null?_=j:C.sibling=j,C=j);return Ze&&Ks(m,k),_}for(j=r(m,j);k<b.length;k++)E=p(j,m,k,b[k],v),E!==null&&(n&&E.alternate!==null&&j.delete(E.key===null?k:E.key),y=i(E,y,k),C===null?_=E:C.sibling=E,C=E);return n&&j.forEach(function(A){return e(m,A)}),Ze&&Ks(m,k),_}function g(m,y,b,v){var _=Bo(b);if(typeof _!="function")throw Error(re(150));if(b=_.call(b),b==null)throw Error(re(151));for(var C=_=null,j=y,k=y=0,E=null,M=b.next();j!==null&&!M.done;k++,M=b.next()){j.index>k?(E=j,j=null):E=j.sibling;var A=f(m,j,M.value,v);if(A===null){j===null&&(j=E);break}n&&j&&A.alternate===null&&e(m,j),y=i(A,y,k),C===null?_=A:C.sibling=A,C=A,j=E}if(M.done)return t(m,j),Ze&&Ks(m,k),_;if(j===null){for(;!M.done;k++,M=b.next())M=d(m,M.value,v),M!==null&&(y=i(M,y,k),C===null?_=M:C.sibling=M,C=M);return Ze&&Ks(m,k),_}for(j=r(m,j);!M.done;k++,M=b.next())M=p(j,m,k,M.value,v),M!==null&&(n&&M.alternate!==null&&j.delete(M.key===null?k:M.key),y=i(M,y,k),C===null?_=M:C.sibling=M,C=M);return n&&j.forEach(function($){return e(m,$)}),Ze&&Ks(m,k),_}function w(m,y,b,v){if(typeof b=="object"&&b!==null&&b.type===Ui&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case _l:e:{for(var _=b.key,C=y;C!==null;){if(C.key===_){if(_=b.type,_===Ui){if(C.tag===7){t(m,C.sibling),y=s(C,b.props.children),y.return=m,m=y;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===is&&Bm(_)===C.type){t(m,C.sibling),y=s(C,b.props),y.ref=qo(m,C,b),y.return=m,m=y;break e}t(m,C);break}else e(m,C);C=C.sibling}b.type===Ui?(y=ci(b.props.children,m.mode,v,b.key),y.return=m,m=y):(v=dc(b.type,b.key,b.props,null,m.mode,v),v.ref=qo(m,y,b),v.return=m,m=v)}return o(m);case Bi:e:{for(C=b.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){t(m,y.sibling),y=s(y,b.children||[]),y.return=m,m=y;break e}else{t(m,y);break}else e(m,y);y=y.sibling}y=ad(b,m.mode,v),y.return=m,m=y}return o(m);case is:return C=b._init,w(m,y,C(b._payload),v)}if(ta(b))return x(m,y,b,v);if(Bo(b))return g(m,y,b,v);Ol(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(t(m,y.sibling),y=s(y,b),y.return=m,m=y):(t(m,y),y=od(b,m.mode,v),y.return=m,m=y),o(m)):t(m,y)}return w}var vo=Ly(!0),$y=Ly(!1),Rc=Rs(null),Mc=null,Ki=null,Gf=null;function Yf(){Gf=Ki=Mc=null}function Kf(n){var e=Rc.current;Ke(Rc),n._currentValue=e}function sh(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function ao(n,e){Mc=n,Gf=Ki=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(cn=!0),n.firstContext=null)}function Kn(n){var e=n._currentValue;if(Gf!==n)if(n={context:n,memoizedValue:e,next:null},Ki===null){if(Mc===null)throw Error(re(308));Ki=n,Mc.dependencies={lanes:0,firstContext:n}}else Ki=Ki.next=n;return e}var ii=null;function Qf(n){ii===null?ii=[n]:ii.push(n)}function zy(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,Qf(e)):(t.next=s.next,s.next=t),e.interleaved=t,Xr(n,r)}function Xr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var os=!1;function Jf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fy(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Wr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function _s(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Xr(n,t)}return s=r.interleaved,s===null?(e.next=e,Qf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Xr(n,t)}function ic(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Lf(n,t)}}function Um(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Lc(n,e,t,r){var s=n.updateQueue;os=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=n,g=l;switch(f=e,p=t,g.tag){case 1:if(x=g.payload,typeof x=="function"){d=x.call(p,d,f);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,f=typeof x=="function"?x.call(p,d,f):x,f==null)break e;d=at({},d,f);break e;case 2:os=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);vi|=o,n.lanes=o,n.memoizedState=d}}function Vm(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(re(191,s));s.call(r)}}}var pl={},Nr=Rs(pl),qa=Rs(pl),Xa=Rs(pl);function oi(n){if(n===pl)throw Error(re(174));return n}function Zf(n,e){switch(qe(Xa,e),qe(qa,n),qe(Nr,pl),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$d(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=$d(e,n)}Ke(Nr),qe(Nr,e)}function bo(){Ke(Nr),Ke(qa),Ke(Xa)}function By(n){oi(Xa.current);var e=oi(Nr.current),t=$d(e,n.type);e!==t&&(qe(qa,n),qe(Nr,t))}function ep(n){qa.current===n&&(Ke(Nr),Ke(qa))}var rt=Rs(0);function $c(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ed=[];function tp(){for(var n=0;n<ed.length;n++)ed[n]._workInProgressVersionPrimary=null;ed.length=0}var oc=Jr.ReactCurrentDispatcher,td=Jr.ReactCurrentBatchConfig,xi=0,ot=null,_t=null,kt=null,zc=!1,ya=!1,Ga=0,Z1=0;function Lt(){throw Error(re(321))}function np(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!fr(n[t],e[t]))return!1;return!0}function rp(n,e,t,r,s,i){if(xi=i,ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oc.current=n===null||n.memoizedState===null?r_:s_,n=t(r,s),ya){i=0;do{if(ya=!1,Ga=0,25<=i)throw Error(re(301));i+=1,kt=_t=null,e.updateQueue=null,oc.current=i_,n=t(r,s)}while(ya)}if(oc.current=Fc,e=_t!==null&&_t.next!==null,xi=0,kt=_t=ot=null,zc=!1,e)throw Error(re(300));return n}function sp(){var n=Ga!==0;return Ga=0,n}function yr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?ot.memoizedState=kt=n:kt=kt.next=n,kt}function Qn(){if(_t===null){var n=ot.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var e=kt===null?ot.memoizedState:kt.next;if(e!==null)kt=e,_t=n;else{if(n===null)throw Error(re(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},kt===null?ot.memoizedState=kt=n:kt=kt.next=n}return kt}function Ya(n,e){return typeof e=="function"?e(n):e}function nd(n){var e=Qn(),t=e.queue;if(t===null)throw Error(re(311));t.lastRenderedReducer=n;var r=_t,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((xi&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=r):c=c.next=d,ot.lanes|=h,vi|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,fr(r,e.memoizedState)||(cn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,ot.lanes|=i,vi|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function rd(n){var e=Qn(),t=e.queue;if(t===null)throw Error(re(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=n(i,o.action),o=o.next;while(o!==s);fr(i,e.memoizedState)||(cn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function Uy(){}function Vy(n,e){var t=ot,r=Qn(),s=e(),i=!fr(r.memoizedState,s);if(i&&(r.memoizedState=s,cn=!0),r=r.queue,ip(qy.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||kt!==null&&kt.memoizedState.tag&1){if(t.flags|=2048,Ka(9,Hy.bind(null,t,r,s,e),void 0,null),Et===null)throw Error(re(349));xi&30||Wy(t,e,s)}return s}function Wy(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Hy(n,e,t,r){e.value=t,e.getSnapshot=r,Xy(e)&&Gy(n)}function qy(n,e,t){return t(function(){Xy(e)&&Gy(n)})}function Xy(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!fr(n,t)}catch{return!0}}function Gy(n){var e=Xr(n,1);e!==null&&ur(e,n,1,-1)}function Wm(n){var e=yr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:n},e.queue=n,n=n.dispatch=n_.bind(null,ot,n),[e.memoizedState,n]}function Ka(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Yy(){return Qn().memoizedState}function ac(n,e,t,r){var s=yr();ot.flags|=n,s.memoizedState=Ka(1|e,t,void 0,r===void 0?null:r)}function pu(n,e,t,r){var s=Qn();r=r===void 0?null:r;var i=void 0;if(_t!==null){var o=_t.memoizedState;if(i=o.destroy,r!==null&&np(r,o.deps)){s.memoizedState=Ka(e,t,i,r);return}}ot.flags|=n,s.memoizedState=Ka(1|e,t,i,r)}function Hm(n,e){return ac(8390656,8,n,e)}function ip(n,e){return pu(2048,8,n,e)}function Ky(n,e){return pu(4,2,n,e)}function Qy(n,e){return pu(4,4,n,e)}function Jy(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Zy(n,e,t){return t=t!=null?t.concat([n]):null,pu(4,4,Jy.bind(null,e,n),t)}function op(){}function ex(n,e){var t=Qn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&np(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function tx(n,e){var t=Qn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&np(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function nx(n,e,t){return xi&21?(fr(t,e)||(t=ay(),ot.lanes|=t,vi|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,cn=!0),n.memoizedState=t)}function e_(n,e){var t=ze;ze=t!==0&&4>t?t:4,n(!0);var r=td.transition;td.transition={};try{n(!1),e()}finally{ze=t,td.transition=r}}function rx(){return Qn().memoizedState}function t_(n,e,t){var r=Cs(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},sx(n))ix(e,t);else if(t=zy(n,e,t,r),t!==null){var s=Kt();ur(t,n,r,s),ox(t,e,r)}}function n_(n,e,t){var r=Cs(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(sx(n))ix(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,t);if(s.hasEagerState=!0,s.eagerState=l,fr(l,o)){var c=e.interleaved;c===null?(s.next=s,Qf(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}t=zy(n,e,s,r),t!==null&&(s=Kt(),ur(t,n,r,s),ox(t,e,r))}}function sx(n){var e=n.alternate;return n===ot||e!==null&&e===ot}function ix(n,e){ya=zc=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function ox(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Lf(n,t)}}var Fc={readContext:Kn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},r_={readContext:Kn,useCallback:function(n,e){return yr().memoizedState=[n,e===void 0?null:e],n},useContext:Kn,useEffect:Hm,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ac(4194308,4,Jy.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ac(4194308,4,n,e)},useInsertionEffect:function(n,e){return ac(4,2,n,e)},useMemo:function(n,e){var t=yr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=yr();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=t_.bind(null,ot,n),[r.memoizedState,n]},useRef:function(n){var e=yr();return n={current:n},e.memoizedState=n},useState:Wm,useDebugValue:op,useDeferredValue:function(n){return yr().memoizedState=n},useTransition:function(){var n=Wm(!1),e=n[0];return n=e_.bind(null,n[1]),yr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=ot,s=yr();if(Ze){if(t===void 0)throw Error(re(407));t=t()}else{if(t=e(),Et===null)throw Error(re(349));xi&30||Wy(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,Hm(qy.bind(null,r,i,n),[n]),r.flags|=2048,Ka(9,Hy.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=yr(),e=Et.identifierPrefix;if(Ze){var t=Ur,r=Br;t=(r&~(1<<32-cr(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ga++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Z1++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},s_={readContext:Kn,useCallback:ex,useContext:Kn,useEffect:ip,useImperativeHandle:Zy,useInsertionEffect:Ky,useLayoutEffect:Qy,useMemo:tx,useReducer:nd,useRef:Yy,useState:function(){return nd(Ya)},useDebugValue:op,useDeferredValue:function(n){var e=Qn();return nx(e,_t.memoizedState,n)},useTransition:function(){var n=nd(Ya)[0],e=Qn().memoizedState;return[n,e]},useMutableSource:Uy,useSyncExternalStore:Vy,useId:rx,unstable_isNewReconciler:!1},i_={readContext:Kn,useCallback:ex,useContext:Kn,useEffect:ip,useImperativeHandle:Zy,useInsertionEffect:Ky,useLayoutEffect:Qy,useMemo:tx,useReducer:rd,useRef:Yy,useState:function(){return rd(Ya)},useDebugValue:op,useDeferredValue:function(n){var e=Qn();return _t===null?e.memoizedState=n:nx(e,_t.memoizedState,n)},useTransition:function(){var n=rd(Ya)[0],e=Qn().memoizedState;return[n,e]},useMutableSource:Uy,useSyncExternalStore:Vy,useId:rx,unstable_isNewReconciler:!1};function sr(n,e){if(n&&n.defaultProps){e=at({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function ih(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:at({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var mu={isMounted:function(n){return(n=n._reactInternals)?Ci(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Kt(),s=Cs(n),i=Wr(r,s);i.payload=e,t!=null&&(i.callback=t),e=_s(n,i,s),e!==null&&(ur(e,n,s,r),ic(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Kt(),s=Cs(n),i=Wr(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=_s(n,i,s),e!==null&&(ur(e,n,s,r),ic(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Kt(),r=Cs(n),s=Wr(t,r);s.tag=2,e!=null&&(s.callback=e),e=_s(n,s,r),e!==null&&(ur(e,n,r,t),ic(e,n,r))}};function qm(n,e,t,r,s,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ua(t,r)||!Ua(s,i):!0}function ax(n,e,t){var r=!1,s=Ps,i=e.contextType;return typeof i=="object"&&i!==null?i=Kn(i):(s=dn(e)?gi:Vt.current,r=e.contextTypes,i=(r=r!=null)?yo(n,s):Ps),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mu,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function Xm(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&mu.enqueueReplaceState(e,e.state,null)}function oh(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},Jf(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Kn(i):(i=dn(e)?gi:Vt.current,s.context=yo(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ih(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&mu.enqueueReplaceState(s,s.state,null),Lc(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function wo(n,e){try{var t="",r=e;do t+=Ow(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function sd(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function ah(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var o_=typeof WeakMap=="function"?WeakMap:Map;function lx(n,e,t){t=Wr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Uc||(Uc=!0,yh=r),ah(n,e)},t}function cx(n,e,t){t=Wr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){ah(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){ah(n,e),typeof r!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Gm(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new o_;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=b_.bind(null,n,e,t),e.then(n,n))}function Ym(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Km(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Wr(-1,1),e.tag=2,_s(t,e,1))),t.lanes|=1),n)}var a_=Jr.ReactCurrentOwner,cn=!1;function Gt(n,e,t,r){e.child=n===null?$y(e,null,t,r):vo(e,n.child,t,r)}function Qm(n,e,t,r,s){t=t.render;var i=e.ref;return ao(e,s),r=rp(n,e,t,r,i,s),t=sp(),n!==null&&!cn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Gr(n,e,s)):(Ze&&t&&Hf(e),e.flags|=1,Gt(n,e,r,s),e.child)}function Jm(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!pp(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,ux(n,e,i,r,s)):(n=dc(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:Ua,t(o,r)&&n.ref===e.ref)return Gr(n,e,s)}return e.flags|=1,n=Ns(i,r),n.ref=e.ref,n.return=e,e.child=n}function ux(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(Ua(i,r)&&n.ref===e.ref)if(cn=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(cn=!0);else return e.lanes=n.lanes,Gr(n,e,s)}return lh(n,e,t,r,s)}function dx(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Ji,bn),bn|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,qe(Ji,bn),bn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,qe(Ji,bn),bn|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,qe(Ji,bn),bn|=r;return Gt(n,e,s,t),e.child}function hx(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function lh(n,e,t,r,s){var i=dn(t)?gi:Vt.current;return i=yo(e,i),ao(e,s),t=rp(n,e,t,r,i,s),r=sp(),n!==null&&!cn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Gr(n,e,s)):(Ze&&r&&Hf(e),e.flags|=1,Gt(n,e,t,s),e.child)}function Zm(n,e,t,r,s){if(dn(t)){var i=!0;Dc(e)}else i=!1;if(ao(e,s),e.stateNode===null)lc(n,e),ax(e,t,r),oh(e,t,r,s),r=!0;else if(n===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Kn(u):(u=dn(t)?gi:Vt.current,u=yo(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Xm(e,o,r,u),os=!1;var f=e.memoizedState;o.state=f,Lc(e,r,o,s),c=e.memoizedState,l!==r||f!==c||un.current||os?(typeof h=="function"&&(ih(e,t,h,r),c=e.memoizedState),(l=os||qm(e,t,l,r,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Fy(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:sr(e.type,l),o.props=u,d=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=Kn(c):(c=dn(t)?gi:Vt.current,c=yo(e,c));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&Xm(e,o,r,c),os=!1,f=e.memoizedState,o.state=f,Lc(e,r,o,s);var x=e.memoizedState;l!==d||f!==x||un.current||os?(typeof p=="function"&&(ih(e,t,p,r),x=e.memoizedState),(u=os||qm(e,t,u,r,f,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return ch(n,e,t,r,i,s)}function ch(n,e,t,r,s,i){hx(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&$m(e,t,!1),Gr(n,e,i);r=e.stateNode,a_.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=vo(e,n.child,null,i),e.child=vo(e,null,l,i)):Gt(n,e,l,i),e.memoizedState=r.state,s&&$m(e,t,!0),e.child}function fx(n){var e=n.stateNode;e.pendingContext?Lm(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Lm(n,e.context,!1),Zf(n,e.containerInfo)}function eg(n,e,t,r,s){return xo(),Xf(s),e.flags|=256,Gt(n,e,t,r),e.child}var uh={dehydrated:null,treeContext:null,retryLane:0};function dh(n){return{baseLanes:n,cachePool:null,transitions:null}}function px(n,e,t){var r=e.pendingProps,s=rt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),qe(rt,s&1),n===null)return rh(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=xu(o,r,0,null),n=ci(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=dh(t),e.memoizedState=uh,n):ap(e,o));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return l_(n,e,o,r,l,s,t);if(i){i=r.fallback,o=e.mode,s=n.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ns(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ns(l,i):(i=ci(i,o,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=n.child.memoizedState,o=o===null?dh(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=uh,r}return i=n.child,n=i.sibling,r=Ns(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function ap(n,e){return e=xu({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Il(n,e,t,r){return r!==null&&Xf(r),vo(e,n.child,null,t),n=ap(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function l_(n,e,t,r,s,i,o){if(t)return e.flags&256?(e.flags&=-257,r=sd(Error(re(422))),Il(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=xu({mode:"visible",children:r.children},s,0,null),i=ci(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&vo(e,n.child,null,o),e.child.memoizedState=dh(o),e.memoizedState=uh,i);if(!(e.mode&1))return Il(n,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(re(419)),r=sd(i,r,void 0),Il(n,e,o,r)}if(l=(o&n.childLanes)!==0,cn||l){if(r=Et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xr(n,s),ur(r,n,s,-1))}return fp(),r=sd(Error(re(421))),Il(n,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=w_.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,Cn=ws(s.nextSibling),kn=e,Ze=!0,ar=null,n!==null&&(Un[Vn++]=Br,Un[Vn++]=Ur,Un[Vn++]=yi,Br=n.id,Ur=n.overflow,yi=e),e=ap(e,r.children),e.flags|=4096,e)}function tg(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),sh(n.return,e,t)}function id(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function mx(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Gt(n,e,r.children,t),r=rt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tg(n,t,e);else if(n.tag===19)tg(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(qe(rt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&$c(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),id(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&$c(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}id(e,!0,t,null,i);break;case"together":id(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lc(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Gr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),vi|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(re(153));if(e.child!==null){for(n=e.child,t=Ns(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ns(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function c_(n,e,t){switch(e.tag){case 3:fx(e),xo();break;case 5:By(e);break;case 1:dn(e.type)&&Dc(e);break;case 4:Zf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;qe(Rc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(qe(rt,rt.current&1),e.flags|=128,null):t&e.child.childLanes?px(n,e,t):(qe(rt,rt.current&1),n=Gr(n,e,t),n!==null?n.sibling:null);qe(rt,rt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return mx(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),qe(rt,rt.current),r)break;return null;case 22:case 23:return e.lanes=0,dx(n,e,t)}return Gr(n,e,t)}var gx,hh,yx,xx;gx=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};hh=function(){};yx=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,oi(Nr.current);var i=null;switch(t){case"input":s=Id(n,s),r=Id(n,r),i=[];break;case"select":s=at({},s,{value:void 0}),r=at({},r,{value:void 0}),i=[];break;case"textarea":s=Ld(n,s),r=Ld(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Ac)}zd(t,r);var o;t=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ra.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(i||(i=[]),i.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ra.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ye("scroll",n),i||l===c||(i=[])):(i=i||[]).push(u,c))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};xx=function(n,e,t,r){t!==r&&(e.flags|=4)};function Xo(n,e){if(!Ze)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function $t(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function u_(n,e,t){var r=e.pendingProps;switch(qf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return dn(e.type)&&Pc(),$t(e),null;case 3:return r=e.stateNode,bo(),Ke(un),Ke(Vt),tp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Dl(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ar!==null&&(bh(ar),ar=null))),hh(n,e),$t(e),null;case 5:ep(e);var s=oi(Xa.current);if(t=e.type,n!==null&&e.stateNode!=null)yx(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(re(166));return $t(e),null}if(n=oi(Nr.current),Dl(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[wr]=e,r[Ha]=i,n=(e.mode&1)!==0,t){case"dialog":Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":case"embed":Ye("load",r);break;case"video":case"audio":for(s=0;s<ra.length;s++)Ye(ra[s],r);break;case"source":Ye("error",r);break;case"img":case"image":case"link":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"input":um(r,i),Ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ye("invalid",r);break;case"textarea":hm(r,i),Ye("invalid",r)}zd(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Pl(r.textContent,l,n),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Pl(r.textContent,l,n),s=["children",""+l]):Ra.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ye("scroll",r)}switch(t){case"input":Sl(r),dm(r,i,!0);break;case"textarea":Sl(r),fm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ac)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=q0(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[wr]=e,n[Ha]=r,gx(n,e,!1,!1),e.stateNode=n;e:{switch(o=Fd(t,r),t){case"dialog":Ye("cancel",n),Ye("close",n),s=r;break;case"iframe":case"object":case"embed":Ye("load",n),s=r;break;case"video":case"audio":for(s=0;s<ra.length;s++)Ye(ra[s],n);s=r;break;case"source":Ye("error",n),s=r;break;case"img":case"image":case"link":Ye("error",n),Ye("load",n),s=r;break;case"details":Ye("toggle",n),s=r;break;case"input":um(n,r),s=Id(n,r),Ye("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=at({},r,{value:void 0}),Ye("invalid",n);break;case"textarea":hm(n,r),s=Ld(n,r),Ye("invalid",n);break;default:s=r}zd(t,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Y0(n,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&X0(n,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&Ma(n,c):typeof c=="number"&&Ma(n,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ra.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ye("scroll",n):c!=null&&Pf(n,i,c,o))}switch(t){case"input":Sl(n),dm(n,r,!1);break;case"textarea":Sl(n),fm(n);break;case"option":r.value!=null&&n.setAttribute("value",""+As(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?ro(n,!!r.multiple,i,!1):r.defaultValue!=null&&ro(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Ac)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(n&&e.stateNode!=null)xx(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(re(166));if(t=oi(Xa.current),oi(Nr.current),Dl(e)){if(r=e.stateNode,t=e.memoizedProps,r[wr]=e,(i=r.nodeValue!==t)&&(n=kn,n!==null))switch(n.tag){case 3:Pl(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Pl(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[wr]=e,e.stateNode=r}return $t(e),null;case 13:if(Ke(rt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ze&&Cn!==null&&e.mode&1&&!(e.flags&128))My(),xo(),e.flags|=98560,i=!1;else if(i=Dl(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(re(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(re(317));i[wr]=e}else xo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),i=!1}else ar!==null&&(bh(ar),ar=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||rt.current&1?St===0&&(St=3):fp())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return bo(),hh(n,e),n===null&&Va(e.stateNode.containerInfo),$t(e),null;case 10:return Kf(e.type._context),$t(e),null;case 17:return dn(e.type)&&Pc(),$t(e),null;case 19:if(Ke(rt),i=e.memoizedState,i===null)return $t(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Xo(i,!1);else{if(St!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=$c(n),o!==null){for(e.flags|=128,Xo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return qe(rt,rt.current&1|2),e.child}n=n.sibling}i.tail!==null&&pt()>_o&&(e.flags|=128,r=!0,Xo(i,!1),e.lanes=4194304)}else{if(!r)if(n=$c(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Xo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ze)return $t(e),null}else 2*pt()-i.renderingStartTime>_o&&t!==1073741824&&(e.flags|=128,r=!0,Xo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=pt(),e.sibling=null,t=rt.current,qe(rt,r?t&1|2:t&1),e):($t(e),null);case 22:case 23:return hp(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bn&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function d_(n,e){switch(qf(e),e.tag){case 1:return dn(e.type)&&Pc(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return bo(),Ke(un),Ke(Vt),tp(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return ep(e),null;case 13:if(Ke(rt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(re(340));xo()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ke(rt),null;case 4:return bo(),null;case 10:return Kf(e.type._context),null;case 22:case 23:return hp(),null;case 24:return null;default:return null}}var Rl=!1,zt=!1,h_=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Qi(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ct(n,e,r)}else t.current=null}function fh(n,e,t){try{t()}catch(r){ct(n,e,r)}}var ng=!1;function f_(n,e){if(Kd=kc,n=Sy(),Wf(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var p;d!==t||s!==0&&d.nodeType!==3||(l=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===t&&++u===s&&(l=o),f===i&&++h===r&&(c=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(Qd={focusedElem:n,selectionRange:t},kc=!1,ge=e;ge!==null;)if(e=ge,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ge=n;else for(;ge!==null;){e=ge;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,w=x.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:sr(e.type,g),w);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(v){ct(e,e.return,v)}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}return x=ng,ng=!1,x}function xa(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&fh(e,t,i)}s=s.next}while(s!==r)}}function gu(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function ph(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function vx(n){var e=n.alternate;e!==null&&(n.alternate=null,vx(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[wr],delete e[Ha],delete e[eh],delete e[Y1],delete e[K1])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function bx(n){return n.tag===5||n.tag===3||n.tag===4}function rg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||bx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mh(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ac));else if(r!==4&&(n=n.child,n!==null))for(mh(n,e,t),n=n.sibling;n!==null;)mh(n,e,t),n=n.sibling}function gh(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(gh(n,e,t),n=n.sibling;n!==null;)gh(n,e,t),n=n.sibling}var Pt=null,ir=!1;function es(n,e,t){for(t=t.child;t!==null;)wx(n,e,t),t=t.sibling}function wx(n,e,t){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(lu,t)}catch{}switch(t.tag){case 5:zt||Qi(t,e);case 6:var r=Pt,s=ir;Pt=null,es(n,e,t),Pt=r,ir=s,Pt!==null&&(ir?(n=Pt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Pt.removeChild(t.stateNode));break;case 18:Pt!==null&&(ir?(n=Pt,t=t.stateNode,n.nodeType===8?Ju(n.parentNode,t):n.nodeType===1&&Ju(n,t),Fa(n)):Ju(Pt,t.stateNode));break;case 4:r=Pt,s=ir,Pt=t.stateNode.containerInfo,ir=!0,es(n,e,t),Pt=r,ir=s;break;case 0:case 11:case 14:case 15:if(!zt&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&fh(t,e,o),s=s.next}while(s!==r)}es(n,e,t);break;case 1:if(!zt&&(Qi(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(l){ct(t,e,l)}es(n,e,t);break;case 21:es(n,e,t);break;case 22:t.mode&1?(zt=(r=zt)||t.memoizedState!==null,es(n,e,t),zt=r):es(n,e,t);break;default:es(n,e,t)}}function sg(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new h_),e.forEach(function(r){var s=__.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function er(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Pt=l.stateNode,ir=!1;break e;case 3:Pt=l.stateNode.containerInfo,ir=!0;break e;case 4:Pt=l.stateNode.containerInfo,ir=!0;break e}l=l.return}if(Pt===null)throw Error(re(160));wx(i,o,s),Pt=null,ir=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ct(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_x(e,n),e=e.sibling}function _x(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(er(e,n),gr(n),r&4){try{xa(3,n,n.return),gu(3,n)}catch(g){ct(n,n.return,g)}try{xa(5,n,n.return)}catch(g){ct(n,n.return,g)}}break;case 1:er(e,n),gr(n),r&512&&t!==null&&Qi(t,t.return);break;case 5:if(er(e,n),gr(n),r&512&&t!==null&&Qi(t,t.return),n.flags&32){var s=n.stateNode;try{Ma(s,"")}catch(g){ct(n,n.return,g)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&W0(s,i),Fd(l,o);var u=Fd(l,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Y0(s,d):h==="dangerouslySetInnerHTML"?X0(s,d):h==="children"?Ma(s,d):Pf(s,h,d,u)}switch(l){case"input":Rd(s,i);break;case"textarea":H0(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ro(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?ro(s,!!i.multiple,i.defaultValue,!0):ro(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ha]=i}catch(g){ct(n,n.return,g)}}break;case 6:if(er(e,n),gr(n),r&4){if(n.stateNode===null)throw Error(re(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(g){ct(n,n.return,g)}}break;case 3:if(er(e,n),gr(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Fa(e.containerInfo)}catch(g){ct(n,n.return,g)}break;case 4:er(e,n),gr(n);break;case 13:er(e,n),gr(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(up=pt())),r&4&&sg(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(zt=(u=zt)||h,er(e,n),zt=u):er(e,n),gr(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(ge=n,h=n.child;h!==null;){for(d=ge=h;ge!==null;){switch(f=ge,p=f.child,f.tag){case 0:case 11:case 14:case 15:xa(4,f,f.return);break;case 1:Qi(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(g){ct(r,t,g)}}break;case 5:Qi(f,f.return);break;case 22:if(f.memoizedState!==null){og(d);continue}}p!==null?(p.return=f,ge=p):og(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=G0("display",o))}catch(g){ct(n,n.return,g)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){ct(n,n.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:er(e,n),gr(n),r&4&&sg(n);break;case 21:break;default:er(e,n),gr(n)}}function gr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(bx(t)){var r=t;break e}t=t.return}throw Error(re(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ma(s,""),r.flags&=-33);var i=rg(n);gh(n,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=rg(n);mh(n,l,o);break;default:throw Error(re(161))}}catch(c){ct(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function p_(n,e,t){ge=n,Sx(n)}function Sx(n,e,t){for(var r=(n.mode&1)!==0;ge!==null;){var s=ge,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Rl;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||zt;l=Rl;var u=zt;if(Rl=o,(zt=c)&&!u)for(ge=s;ge!==null;)o=ge,c=o.child,o.tag===22&&o.memoizedState!==null?ag(s):c!==null?(c.return=o,ge=c):ag(s);for(;i!==null;)ge=i,Sx(i),i=i.sibling;ge=s,Rl=l,zt=u}ig(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ge=i):ig(n)}}function ig(n){for(;ge!==null;){var e=ge;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zt||gu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zt)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:sr(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Vm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Vm(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Fa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}zt||e.flags&512&&ph(e)}catch(f){ct(e,e.return,f)}}if(e===n){ge=null;break}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}}function og(n){for(;ge!==null;){var e=ge;if(e===n){ge=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ge=t;break}ge=e.return}}function ag(n){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{gu(4,e)}catch(c){ct(e,t,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ct(e,s,c)}}var i=e.return;try{ph(e)}catch(c){ct(e,i,c)}break;case 5:var o=e.return;try{ph(e)}catch(c){ct(e,o,c)}}}catch(c){ct(e,e.return,c)}if(e===n){ge=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ge=l;break}ge=e.return}}var m_=Math.ceil,Bc=Jr.ReactCurrentDispatcher,lp=Jr.ReactCurrentOwner,Gn=Jr.ReactCurrentBatchConfig,Oe=0,Et=null,xt=null,Dt=0,bn=0,Ji=Rs(0),St=0,Qa=null,vi=0,yu=0,cp=0,va=null,an=null,up=0,_o=1/0,Or=null,Uc=!1,yh=null,Ss=null,Ml=!1,fs=null,Vc=0,ba=0,xh=null,cc=-1,uc=0;function Kt(){return Oe&6?pt():cc!==-1?cc:cc=pt()}function Cs(n){return n.mode&1?Oe&2&&Dt!==0?Dt&-Dt:J1.transition!==null?(uc===0&&(uc=ay()),uc):(n=ze,n!==0||(n=window.event,n=n===void 0?16:py(n.type)),n):1}function ur(n,e,t,r){if(50<ba)throw ba=0,xh=null,Error(re(185));dl(n,t,r),(!(Oe&2)||n!==Et)&&(n===Et&&(!(Oe&2)&&(yu|=t),St===4&&us(n,Dt)),hn(n,r),t===1&&Oe===0&&!(e.mode&1)&&(_o=pt()+500,fu&&Ms()))}function hn(n,e){var t=n.callbackNode;Jw(n,e);var r=jc(n,n===Et?Dt:0);if(r===0)t!==null&&gm(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&gm(t),e===1)n.tag===0?Q1(lg.bind(null,n)):Oy(lg.bind(null,n)),X1(function(){!(Oe&6)&&Ms()}),t=null;else{switch(ly(r)){case 1:t=Mf;break;case 4:t=iy;break;case 16:t=Nc;break;case 536870912:t=oy;break;default:t=Nc}t=Px(t,Cx.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Cx(n,e){if(cc=-1,uc=0,Oe&6)throw Error(re(327));var t=n.callbackNode;if(lo()&&n.callbackNode!==t)return null;var r=jc(n,n===Et?Dt:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Wc(n,r);else{e=r;var s=Oe;Oe|=2;var i=jx();(Et!==n||Dt!==e)&&(Or=null,_o=pt()+500,li(n,e));do try{x_();break}catch(l){Nx(n,l)}while(!0);Yf(),Bc.current=i,Oe=s,xt!==null?e=0:(Et=null,Dt=0,e=St)}if(e!==0){if(e===2&&(s=Hd(n),s!==0&&(r=s,e=vh(n,s))),e===1)throw t=Qa,li(n,0),us(n,r),hn(n,pt()),t;if(e===6)us(n,r);else{if(s=n.current.alternate,!(r&30)&&!g_(s)&&(e=Wc(n,r),e===2&&(i=Hd(n),i!==0&&(r=i,e=vh(n,i))),e===1))throw t=Qa,li(n,0),us(n,r),hn(n,pt()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(re(345));case 2:Qs(n,an,Or);break;case 3:if(us(n,r),(r&130023424)===r&&(e=up+500-pt(),10<e)){if(jc(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){Kt(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Zd(Qs.bind(null,n,an,Or),e);break}Qs(n,an,Or);break;case 4:if(us(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var o=31-cr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*m_(r/1960))-r,10<r){n.timeoutHandle=Zd(Qs.bind(null,n,an,Or),r);break}Qs(n,an,Or);break;case 5:Qs(n,an,Or);break;default:throw Error(re(329))}}}return hn(n,pt()),n.callbackNode===t?Cx.bind(null,n):null}function vh(n,e){var t=va;return n.current.memoizedState.isDehydrated&&(li(n,e).flags|=256),n=Wc(n,e),n!==2&&(e=an,an=t,e!==null&&bh(e)),n}function bh(n){an===null?an=n:an.push.apply(an,n)}function g_(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!fr(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function us(n,e){for(e&=~cp,e&=~yu,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-cr(e),r=1<<t;n[t]=-1,e&=~r}}function lg(n){if(Oe&6)throw Error(re(327));lo();var e=jc(n,0);if(!(e&1))return hn(n,pt()),null;var t=Wc(n,e);if(n.tag!==0&&t===2){var r=Hd(n);r!==0&&(e=r,t=vh(n,r))}if(t===1)throw t=Qa,li(n,0),us(n,e),hn(n,pt()),t;if(t===6)throw Error(re(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Qs(n,an,Or),hn(n,pt()),null}function dp(n,e){var t=Oe;Oe|=1;try{return n(e)}finally{Oe=t,Oe===0&&(_o=pt()+500,fu&&Ms())}}function bi(n){fs!==null&&fs.tag===0&&!(Oe&6)&&lo();var e=Oe;Oe|=1;var t=Gn.transition,r=ze;try{if(Gn.transition=null,ze=1,n)return n()}finally{ze=r,Gn.transition=t,Oe=e,!(Oe&6)&&Ms()}}function hp(){bn=Ji.current,Ke(Ji)}function li(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,q1(t)),xt!==null)for(t=xt.return;t!==null;){var r=t;switch(qf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pc();break;case 3:bo(),Ke(un),Ke(Vt),tp();break;case 5:ep(r);break;case 4:bo();break;case 13:Ke(rt);break;case 19:Ke(rt);break;case 10:Kf(r.type._context);break;case 22:case 23:hp()}t=t.return}if(Et=n,xt=n=Ns(n.current,null),Dt=bn=e,St=0,Qa=null,cp=yu=vi=0,an=va=null,ii!==null){for(e=0;e<ii.length;e++)if(t=ii[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}t.pending=r}ii=null}return n}function Nx(n,e){do{var t=xt;try{if(Yf(),oc.current=Fc,zc){for(var r=ot.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zc=!1}if(xi=0,kt=_t=ot=null,ya=!1,Ga=0,lp.current=null,t===null||t.return===null){St=1,Qa=e,xt=null;break}e:{var i=n,o=t.return,l=t,c=e;if(e=Dt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Ym(o);if(p!==null){p.flags&=-257,Km(p,o,l,i,e),p.mode&1&&Gm(i,u,e),e=p,c=u;var x=e.updateQueue;if(x===null){var g=new Set;g.add(c),e.updateQueue=g}else x.add(c);break e}else{if(!(e&1)){Gm(i,u,e),fp();break e}c=Error(re(426))}}else if(Ze&&l.mode&1){var w=Ym(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Km(w,o,l,i,e),Xf(wo(c,l));break e}}i=c=wo(c,l),St!==4&&(St=2),va===null?va=[i]:va.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=lx(i,c,e);Um(i,m);break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ss===null||!Ss.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var v=cx(i,l,e);Um(i,v);break e}}i=i.return}while(i!==null)}Ex(t)}catch(_){e=_,xt===t&&t!==null&&(xt=t=t.return);continue}break}while(!0)}function jx(){var n=Bc.current;return Bc.current=Fc,n===null?Fc:n}function fp(){(St===0||St===3||St===2)&&(St=4),Et===null||!(vi&268435455)&&!(yu&268435455)||us(Et,Dt)}function Wc(n,e){var t=Oe;Oe|=2;var r=jx();(Et!==n||Dt!==e)&&(Or=null,li(n,e));do try{y_();break}catch(s){Nx(n,s)}while(!0);if(Yf(),Oe=t,Bc.current=r,xt!==null)throw Error(re(261));return Et=null,Dt=0,St}function y_(){for(;xt!==null;)kx(xt)}function x_(){for(;xt!==null&&!Vw();)kx(xt)}function kx(n){var e=Ax(n.alternate,n,bn);n.memoizedProps=n.pendingProps,e===null?Ex(n):xt=e,lp.current=null}function Ex(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=d_(t,e),t!==null){t.flags&=32767,xt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{St=6,xt=null;return}}else if(t=u_(t,e,bn),t!==null){xt=t;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=n}while(e!==null);St===0&&(St=5)}function Qs(n,e,t){var r=ze,s=Gn.transition;try{Gn.transition=null,ze=1,v_(n,e,t,r)}finally{Gn.transition=s,ze=r}return null}function v_(n,e,t,r){do lo();while(fs!==null);if(Oe&6)throw Error(re(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(re(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(Zw(n,i),n===Et&&(xt=Et=null,Dt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Ml||(Ml=!0,Px(Nc,function(){return lo(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Gn.transition,Gn.transition=null;var o=ze;ze=1;var l=Oe;Oe|=4,lp.current=null,f_(n,t),_x(t,n),z1(Qd),kc=!!Kd,Qd=Kd=null,n.current=t,p_(t),Ww(),Oe=l,ze=o,Gn.transition=i}else n.current=t;if(Ml&&(Ml=!1,fs=n,Vc=s),i=n.pendingLanes,i===0&&(Ss=null),Xw(t.stateNode),hn(n,pt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(Uc)throw Uc=!1,n=yh,yh=null,n;return Vc&1&&n.tag!==0&&lo(),i=n.pendingLanes,i&1?n===xh?ba++:(ba=0,xh=n):ba=0,Ms(),null}function lo(){if(fs!==null){var n=ly(Vc),e=Gn.transition,t=ze;try{if(Gn.transition=null,ze=16>n?16:n,fs===null)var r=!1;else{if(n=fs,fs=null,Vc=0,Oe&6)throw Error(re(331));var s=Oe;for(Oe|=4,ge=n.current;ge!==null;){var i=ge,o=i.child;if(ge.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ge=u;ge!==null;){var h=ge;switch(h.tag){case 0:case 11:case 15:xa(8,h,i)}var d=h.child;if(d!==null)d.return=h,ge=d;else for(;ge!==null;){h=ge;var f=h.sibling,p=h.return;if(vx(h),h===u){ge=null;break}if(f!==null){f.return=p,ge=f;break}ge=p}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}ge=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ge=o;else e:for(;ge!==null;){if(i=ge,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xa(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,ge=m;break e}ge=i.return}}var y=n.current;for(ge=y;ge!==null;){o=ge;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ge=b;else e:for(o=y;ge!==null;){if(l=ge,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:gu(9,l)}}catch(_){ct(l,l.return,_)}if(l===o){ge=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,ge=v;break e}ge=l.return}}if(Oe=s,Ms(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(lu,n)}catch{}r=!0}return r}finally{ze=t,Gn.transition=e}}return!1}function cg(n,e,t){e=wo(t,e),e=lx(n,e,1),n=_s(n,e,1),e=Kt(),n!==null&&(dl(n,1,e),hn(n,e))}function ct(n,e,t){if(n.tag===3)cg(n,n,t);else for(;e!==null;){if(e.tag===3){cg(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ss===null||!Ss.has(r))){n=wo(t,n),n=cx(e,n,1),e=_s(e,n,1),n=Kt(),e!==null&&(dl(e,1,n),hn(e,n));break}}e=e.return}}function b_(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Kt(),n.pingedLanes|=n.suspendedLanes&t,Et===n&&(Dt&t)===t&&(St===4||St===3&&(Dt&130023424)===Dt&&500>pt()-up?li(n,0):cp|=t),hn(n,e)}function Tx(n,e){e===0&&(n.mode&1?(e=jl,jl<<=1,!(jl&130023424)&&(jl=4194304)):e=1);var t=Kt();n=Xr(n,e),n!==null&&(dl(n,e,t),hn(n,t))}function w_(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Tx(n,t)}function __(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(e),Tx(n,t)}var Ax;Ax=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||un.current)cn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return cn=!1,c_(n,e,t);cn=!!(n.flags&131072)}else cn=!1,Ze&&e.flags&1048576&&Iy(e,Ic,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;lc(n,e),n=e.pendingProps;var s=yo(e,Vt.current);ao(e,t),s=rp(null,e,r,n,s,t);var i=sp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(r)?(i=!0,Dc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jf(e),s.updater=mu,e.stateNode=s,s._reactInternals=e,oh(e,r,n,t),e=ch(null,e,r,!0,i,t)):(e.tag=0,Ze&&i&&Hf(e),Gt(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(lc(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=C_(r),n=sr(r,n),s){case 0:e=lh(null,e,r,n,t);break e;case 1:e=Zm(null,e,r,n,t);break e;case 11:e=Qm(null,e,r,n,t);break e;case 14:e=Jm(null,e,r,sr(r.type,n),t);break e}throw Error(re(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sr(r,s),lh(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sr(r,s),Zm(n,e,r,s,t);case 3:e:{if(fx(e),n===null)throw Error(re(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Fy(n,e),Lc(e,r,null,t);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=wo(Error(re(423)),e),e=eg(n,e,r,t,s);break e}else if(r!==s){s=wo(Error(re(424)),e),e=eg(n,e,r,t,s);break e}else for(Cn=ws(e.stateNode.containerInfo.firstChild),kn=e,Ze=!0,ar=null,t=$y(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(xo(),r===s){e=Gr(n,e,t);break e}Gt(n,e,r,t)}e=e.child}return e;case 5:return By(e),n===null&&rh(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,o=s.children,Jd(r,s)?o=null:i!==null&&Jd(r,i)&&(e.flags|=32),hx(n,e),Gt(n,e,o,t),e.child;case 6:return n===null&&rh(e),null;case 13:return px(n,e,t);case 4:return Zf(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=vo(e,null,r,t):Gt(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sr(r,s),Qm(n,e,r,s,t);case 7:return Gt(n,e,e.pendingProps,t),e.child;case 8:return Gt(n,e,e.pendingProps.children,t),e.child;case 12:return Gt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,qe(Rc,r._currentValue),r._currentValue=o,i!==null)if(fr(i.value,o)){if(i.children===s.children&&!un.current){e=Gr(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Wr(-1,t&-t),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),sh(i.return,t,e),l.lanes|=t;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(re(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),sh(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Gt(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ao(e,t),s=Kn(s),r=r(s),e.flags|=1,Gt(n,e,r,t),e.child;case 14:return r=e.type,s=sr(r,e.pendingProps),s=sr(r.type,s),Jm(n,e,r,s,t);case 15:return ux(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sr(r,s),lc(n,e),e.tag=1,dn(r)?(n=!0,Dc(e)):n=!1,ao(e,t),ax(e,r,s),oh(e,r,s,t),ch(null,e,r,!0,n,t);case 19:return mx(n,e,t);case 22:return dx(n,e,t)}throw Error(re(156,e.tag))};function Px(n,e){return sy(n,e)}function S_(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(n,e,t,r){return new S_(n,e,t,r)}function pp(n){return n=n.prototype,!(!n||!n.isReactComponent)}function C_(n){if(typeof n=="function")return pp(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Of)return 11;if(n===If)return 14}return 2}function Ns(n,e){var t=n.alternate;return t===null?(t=Wn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function dc(n,e,t,r,s,i){var o=2;if(r=n,typeof n=="function")pp(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ui:return ci(t.children,s,i,e);case Df:o=8,s|=8;break;case Ad:return n=Wn(12,t,e,s|2),n.elementType=Ad,n.lanes=i,n;case Pd:return n=Wn(13,t,e,s),n.elementType=Pd,n.lanes=i,n;case Dd:return n=Wn(19,t,e,s),n.elementType=Dd,n.lanes=i,n;case B0:return xu(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case z0:o=10;break e;case F0:o=9;break e;case Of:o=11;break e;case If:o=14;break e;case is:o=16,r=null;break e}throw Error(re(130,n==null?n:typeof n,""))}return e=Wn(o,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function ci(n,e,t,r){return n=Wn(7,n,r,e),n.lanes=t,n}function xu(n,e,t,r){return n=Wn(22,n,r,e),n.elementType=B0,n.lanes=t,n.stateNode={isHidden:!1},n}function od(n,e,t){return n=Wn(6,n,null,e),n.lanes=t,n}function ad(n,e,t){return e=Wn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function N_(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bu(0),this.expirationTimes=Bu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mp(n,e,t,r,s,i,o,l,c){return n=new N_(n,e,t,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Wn(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jf(i),n}function j_(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bi,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Dx(n){if(!n)return Ps;n=n._reactInternals;e:{if(Ci(n)!==n||n.tag!==1)throw Error(re(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(n.tag===1){var t=n.type;if(dn(t))return Dy(n,t,e)}return e}function Ox(n,e,t,r,s,i,o,l,c){return n=mp(t,r,!0,n,s,i,o,l,c),n.context=Dx(null),t=n.current,r=Kt(),s=Cs(t),i=Wr(r,s),i.callback=e??null,_s(t,i,s),n.current.lanes=s,dl(n,s,r),hn(n,r),n}function vu(n,e,t,r){var s=e.current,i=Kt(),o=Cs(s);return t=Dx(t),e.context===null?e.context=t:e.pendingContext=t,e=Wr(i,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=_s(s,e,o),n!==null&&(ur(n,s,o,i),ic(n,s,o)),o}function Hc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ug(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function gp(n,e){ug(n,e),(n=n.alternate)&&ug(n,e)}function k_(){return null}var Ix=typeof reportError=="function"?reportError:function(n){console.error(n)};function yp(n){this._internalRoot=n}bu.prototype.render=yp.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(re(409));vu(n,e,null,null)};bu.prototype.unmount=yp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;bi(function(){vu(null,n,null,null)}),e[qr]=null}};function bu(n){this._internalRoot=n}bu.prototype.unstable_scheduleHydration=function(n){if(n){var e=dy();n={blockedOn:null,target:n,priority:e};for(var t=0;t<cs.length&&e!==0&&e<cs[t].priority;t++);cs.splice(t,0,n),t===0&&fy(n)}};function xp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function wu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function dg(){}function E_(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Hc(o);i.call(u)}}var o=Ox(e,r,n,0,null,!1,!1,"",dg);return n._reactRootContainer=o,n[qr]=o.current,Va(n.nodeType===8?n.parentNode:n),bi(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Hc(c);l.call(u)}}var c=mp(n,0,!1,null,null,!1,!1,"",dg);return n._reactRootContainer=c,n[qr]=c.current,Va(n.nodeType===8?n.parentNode:n),bi(function(){vu(e,c,t,r)}),c}function _u(n,e,t,r,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Hc(o);l.call(c)}}vu(e,o,n,s)}else o=E_(t,e,n,s,r);return Hc(o)}cy=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=na(e.pendingLanes);t!==0&&(Lf(e,t|1),hn(e,pt()),!(Oe&6)&&(_o=pt()+500,Ms()))}break;case 13:bi(function(){var r=Xr(n,1);if(r!==null){var s=Kt();ur(r,n,1,s)}}),gp(n,1)}};$f=function(n){if(n.tag===13){var e=Xr(n,134217728);if(e!==null){var t=Kt();ur(e,n,134217728,t)}gp(n,134217728)}};uy=function(n){if(n.tag===13){var e=Cs(n),t=Xr(n,e);if(t!==null){var r=Kt();ur(t,n,e,r)}gp(n,e)}};dy=function(){return ze};hy=function(n,e){var t=ze;try{return ze=n,e()}finally{ze=t}};Ud=function(n,e,t){switch(e){case"input":if(Rd(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=hu(r);if(!s)throw Error(re(90));V0(r),Rd(r,s)}}}break;case"textarea":H0(n,t);break;case"select":e=t.value,e!=null&&ro(n,!!t.multiple,e,!1)}};J0=dp;Z0=bi;var T_={usingClientEntryPoint:!1,Events:[fl,qi,hu,K0,Q0,dp]},Go={findFiberByHostInstance:si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A_={bundleType:Go.bundleType,version:Go.version,rendererPackageName:Go.rendererPackageName,rendererConfig:Go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ny(n),n===null?null:n.stateNode},findFiberByHostInstance:Go.findFiberByHostInstance||k_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{lu=Ll.inject(A_),Cr=Ll}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T_;Dn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xp(e))throw Error(re(200));return j_(n,e,null,t)};Dn.createRoot=function(n,e){if(!xp(n))throw Error(re(299));var t=!1,r="",s=Ix;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=mp(n,1,!1,null,null,t,!1,r,s),n[qr]=e.current,Va(n.nodeType===8?n.parentNode:n),new yp(e)};Dn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(re(188)):(n=Object.keys(n).join(","),Error(re(268,n)));return n=ny(e),n=n===null?null:n.stateNode,n};Dn.flushSync=function(n){return bi(n)};Dn.hydrate=function(n,e,t){if(!wu(e))throw Error(re(200));return _u(null,n,e,!0,t)};Dn.hydrateRoot=function(n,e,t){if(!xp(n))throw Error(re(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",o=Ix;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Ox(e,null,n,1,t??null,s,!1,i,o),n[qr]=e.current,Va(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new bu(e)};Dn.render=function(n,e,t){if(!wu(e))throw Error(re(200));return _u(null,n,e,!1,t)};Dn.unmountComponentAtNode=function(n){if(!wu(n))throw Error(re(40));return n._reactRootContainer?(bi(function(){_u(null,null,n,!1,function(){n._reactRootContainer=null,n[qr]=null})}),!0):!1};Dn.unstable_batchedUpdates=dp;Dn.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!wu(t))throw Error(re(200));if(n==null||n._reactInternals===void 0)throw Error(re(38));return _u(n,e,t,!1,r)};Dn.version="18.3.1-next-f1338f8080-20240426";function Rx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rx)}catch(n){console.error(n)}}Rx(),R0.exports=Dn;var Tt=R0.exports,hg=Tt;Ed.createRoot=hg.createRoot,Ed.hydrateRoot=hg.hydrateRoot;const P_="modulepreload",D_=function(n){return"/goldenstore/"+n},fg={},ml=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=D_(c),c in fg)return;fg[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":P_,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},O_=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ml(async()=>{const{default:r}=await Promise.resolve().then(()=>Mo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class vp extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class I_ extends vp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class pg extends vp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class mg extends vp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var wh;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(wh||(wh={}));var R_=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};class M_{constructor(e,{headers:t={},customFetch:r,region:s=wh.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=O_(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return R_(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=t;let l={},{region:c}=t;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let h;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(l["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(l["Content-Type"]="application/json",h=JSON.stringify(o)));const d=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:h}).catch(g=>{throw new I_(g)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new pg(d);if(!d.ok)throw new mg(d);let p=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return p==="application/json"?x=yield d.json():p==="application/octet-stream"?x=yield d.blob():p==="text/event-stream"?x=d:p==="multipart/form-data"?x=yield d.formData():x=yield d.text(),{data:x,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof mg||s instanceof pg?s.context:void 0}}})}}var ln={},bp={},Su={},gl={},Cu={},Nu={},L_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},So=L_();const $_=So.fetch,Mx=So.fetch.bind(So),Lx=So.Headers,z_=So.Request,F_=So.Response,Mo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lx,Request:z_,Response:F_,default:Mx,fetch:$_},Symbol.toStringTag,{value:"Module"})),B_=iw(Mo);var ju={};Object.defineProperty(ju,"__esModule",{value:!0});let U_=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ju.default=U_;var $x=Yn&&Yn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Nu,"__esModule",{value:!0});const V_=$x(B_),W_=$x(ju);let H_=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=V_.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,h=null,d=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=m:h=JSON.parse(m))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&w&&w.length>1&&(d=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,d=null,f=406,p="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const g=await i.text();try{u=JSON.parse(g),Array.isArray(u)&&i.status===404&&(h=[],u=null,f=200,p="OK")}catch{i.status===404&&g===""?(f=204,p="No Content"):u={message:g}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,p="OK"),u&&this.shouldThrowOnError)throw new W_.default(u)}return{error:u,data:h,count:d,status:f,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};Nu.default=H_;var q_=Yn&&Yn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Cu,"__esModule",{value:!0});const X_=q_(Nu);let G_=class extends X_.default{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Cu.default=G_;var Y_=Yn&&Yn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(gl,"__esModule",{value:!0});const K_=Y_(Cu);let Q_=class extends K_.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};gl.default=Q_;var J_=Yn&&Yn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Su,"__esModule",{value:!0});const Yo=J_(gl);let Z_=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=t,this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Yo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Yo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new Yo.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new Yo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Yo.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Su.default=Z_;var ku={},Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.version=void 0;Eu.version="0.0.0-automated";Object.defineProperty(ku,"__esModule",{value:!0});ku.DEFAULT_HEADERS=void 0;const eS=Eu;ku.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${eS.version}`};var zx=Yn&&Yn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(bp,"__esModule",{value:!0});const tS=zx(Su),nS=zx(gl),rS=ku;let sS=class Fx{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},rS.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new tS.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Fx(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{l.searchParams.append(h,d)})):(o="POST",c=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new nS.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};bp.default=sS;var Lo=Yn&&Yn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ln,"__esModule",{value:!0});ln.PostgrestError=ln.PostgrestBuilder=ln.PostgrestTransformBuilder=ln.PostgrestFilterBuilder=ln.PostgrestQueryBuilder=ln.PostgrestClient=void 0;const Bx=Lo(bp);ln.PostgrestClient=Bx.default;const Ux=Lo(Su);ln.PostgrestQueryBuilder=Ux.default;const Vx=Lo(gl);ln.PostgrestFilterBuilder=Vx.default;const Wx=Lo(Cu);ln.PostgrestTransformBuilder=Wx.default;const Hx=Lo(Nu);ln.PostgrestBuilder=Hx.default;const qx=Lo(ju);ln.PostgrestError=qx.default;var iS=ln.default={PostgrestClient:Bx.default,PostgrestQueryBuilder:Ux.default,PostgrestFilterBuilder:Vx.default,PostgrestTransformBuilder:Wx.default,PostgrestBuilder:Hx.default,PostgrestError:qx.default};const{PostgrestClient:oS,PostgrestQueryBuilder:X2,PostgrestFilterBuilder:G2,PostgrestTransformBuilder:Y2,PostgrestBuilder:K2,PostgrestError:Q2}=iS;class aS{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const lS="2.15.1",cS=`realtime-js/${lS}`,uS="1.0.0",_h=1e4,dS=1e3,hS=100;var wa;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(wa||(wa={}));var vt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(vt||(vt={}));var or;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(or||(or={}));var Sh;(function(n){n.websocket="websocket"})(Sh||(Sh={}));var ei;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ei||(ei={}));class fS{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Xx{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var He;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(He||(He={}));const gg=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=pS(o,n,e,s),i),{})},pS=(n,e,t,r)=>{const s=e.find(l=>l.name===n),i=s==null?void 0:s.type,o=t[n];return i&&!r.includes(i)?Gx(i,o):Ch(o)},Gx=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return xS(e,t)}switch(n){case He.bool:return mS(e);case He.float4:case He.float8:case He.int2:case He.int4:case He.int8:case He.numeric:case He.oid:return gS(e);case He.json:case He.jsonb:return yS(e);case He.timestamp:return vS(e);case He.abstime:case He.date:case He.daterange:case He.int4range:case He.int8range:case He.money:case He.reltime:case He.text:case He.time:case He.timestamptz:case He.timetz:case He.tsrange:case He.tstzrange:return Ch(e);default:return Ch(e)}},Ch=n=>n,mS=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},gS=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},yS=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},xS=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Gx(e,l))}return n},vS=n=>typeof n=="string"?n.replace(" ","T"):n,Yx=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ld{constructor(e,t,r={},s=_h){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var yg;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(yg||(yg={}));class _a{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_a.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=_a.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=_a.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(i,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const d=i[u];if(d){const f=h.map(w=>w.presence_ref),p=d.map(w=>w.presence_ref),x=h.filter(w=>p.indexOf(w.presence_ref)<0),g=d.filter(w=>f.indexOf(w.presence_ref)<0);x.length>0&&(l[u]=x),g.length>0&&(c[u]=g)}else l[u]=h}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const h=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),h.length>0){const d=e[l].map(p=>p.presence_ref),f=h.filter(p=>d.indexOf(p.presence_ref)<0);e[l].unshift(...f)}r(l,h,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const h=c.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xg;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(xg||(xg={}));var Sa;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Sa||(Sa={}));var Ir;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Ir||(Ir={}));class wp{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ld(this,or.join,this.params,this.timeout),this.rejoinTimer=new Xx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(or.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new _a(this),this.broadcastEndpointURL=Yx(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==vt.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[Sa.PRESENCE]&&this.bindings[Sa.PRESENCE].length>0,h={},d={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(Ir.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(Ir.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){e==null||e(Ir.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,g=(p=x==null?void 0:x.length)!==null&&p!==void 0?p:0,w=[];for(let m=0;m<g;m++){const y=x[m],{filter:{event:b,schema:v,table:_,filter:C}}=y,j=f&&f[m];if(j&&j.event===b&&j.schema===v&&j.table===_&&j.filter===C)w.push(Object.assign(Object.assign({},y),{id:j.id}));else{this.unsubscribe(),this.state=vt.errored,e==null||e(Ir.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Ir.SUBSCRIBED);return}}).receive("error",f=>{this.state=vt.errored,e==null||e(Ir.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ir.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===vt.joined&&e===Sa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=vt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(or.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new ld(this,or.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ld(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>hS){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=or;if(r&&[l,c,u,h].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,t,r);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var x,g,w;return((x=p.filter)===null||x===void 0?void 0:x.event)==="*"||((w=(g=p.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var x,g,w,m,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const v=p.id,_=(x=p.filter)===null||x===void 0?void 0:x.event;return v&&((g=t.ids)===null||g===void 0?void 0:g.includes(v))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const v=(y=(m=p==null?void 0:p.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return v==="*"||v===((b=t==null?void 0:t.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:g,table:w,commit_timestamp:m,type:y,errors:b}=x;f=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:m,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(x))}p.callback(f,r)})}_isClosed(){return this.state===vt.closed}_isJoined(){return this.state===vt.joined}_isJoining(){return this.state===vt.joining}_isLeaving(){return this.state===vt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&wp.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(or.close,{},e)}_onError(e){this._on(or.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=gg(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=gg(e.columns,e.old_record)),t}}const vg=()=>{},$l={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bS=[1e3,2e3,5e3,1e4],wS=1e4,_S=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class SS{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_h,this.transport=null,this.heartbeatIntervalMs=$l.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vg,this.ref=0,this.reconnectTimer=null,this.logger=vg,this.conn=null,this.sendBuffer=[],this.serializer=new fS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>ml(async()=>{const{default:l}=await Promise.resolve().then(()=>Mo);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Sh.websocket}`,this.httpEndpoint=Yx(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=aS.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:uS}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case wa.connecting:return ei.Connecting;case wa.open:return ei.Open;case wa.closing:return ei.Closing;default:return ei.Closed}}isConnected(){return this.connectionState()===ei.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new wp(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(dS,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},$l.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=t,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(or.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([_S],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:cS};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(or.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Xx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$l.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,i,o,l,c,u;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:_h,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:$l.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>bS[h-1]||wS,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,d)=>d(JSON.stringify(h)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class _p extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function jt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class CS extends _p{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Nh extends _p{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var NS=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};const Kx=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ml(async()=>{const{default:r}=await Promise.resolve().then(()=>Mo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},jS=()=>NS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ml(()=>Promise.resolve().then(()=>Mo),void 0)).Response:Response}),jh=n=>{if(Array.isArray(n))return n.map(t=>jh(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=jh(r)}),e},kS=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ni=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};const cd=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),ES=(n,e,t)=>Ni(void 0,void 0,void 0,function*(){const r=yield jS();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{const i=n.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new CS(cd(s),i,o))}).catch(s=>{e(new Nh(cd(s),s))}):e(new Nh(cd(n),n))}),TS=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?s:(kS(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function yl(n,e,t,r,s,i){return Ni(this,void 0,void 0,function*(){return new Promise((o,l)=>{n(t,TS(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>ES(c,l,r))})})}function qc(n,e,t,r){return Ni(this,void 0,void 0,function*(){return yl(n,"GET",e,t,r)})}function Rr(n,e,t,r,s){return Ni(this,void 0,void 0,function*(){return yl(n,"POST",e,r,s,t)})}function kh(n,e,t,r,s){return Ni(this,void 0,void 0,function*(){return yl(n,"PUT",e,r,s,t)})}function AS(n,e,t,r){return Ni(this,void 0,void 0,function*(){return yl(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Qx(n,e,t,r,s){return Ni(this,void 0,void 0,function*(){return yl(n,"DELETE",e,r,s,t)})}var sn=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};const PS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class DS{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Kx(s)}uploadOrUpdate(e,t,r,s){return sn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},bg),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(t),h=this._getFinalPath(u),d=yield(e=="PUT"?kh:Rr)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(jt(i))return{data:null,error:i};throw i}})}upload(e,t,r){return sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return sn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:bg.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const d=yield kh(this.fetch,l.toString(),c,{headers:h});return{data:{path:i,fullPath:d.Key},error:null}}catch(c){if(jt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return sn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield Rr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new _p("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(jt(r))return{data:null,error:r};throw r}})}update(e,t,r){return sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return sn(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(jt(s))return{data:null,error:s};throw s}})}copy(e,t,r){return sn(this,void 0,void 0,function*(){try{return{data:{path:(yield Rr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(jt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return sn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Rr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(jt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return sn(this,void 0,void 0,function*(){try{const s=yield Rr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(jt(s))return{data:null,error:s};throw s}})}download(e,t){return sn(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield qc(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(jt(l))return{data:null,error:l};throw l}})}info(e){return sn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield qc(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:jh(r),error:null}}catch(r){if(jt(r))return{data:null,error:r};throw r}})}exists(e){return sn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield AS(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(jt(r)&&r instanceof Nh){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return sn(this,void 0,void 0,function*(){try{return{data:yield Qx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(jt(t))return{data:null,error:t};throw t}})}list(e,t,r){return sn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},PS),t),{prefix:e||""});return{data:yield Rr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(jt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const OS="2.10.5",IS={"X-Client-Info":`storage-js/${OS}`};var Ai=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};class RS{constructor(e,t={},r,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},IS),t),this.fetch=Kx(r)}listBuckets(){return Ai(this,void 0,void 0,function*(){try{return{data:yield qc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(jt(e))return{data:null,error:e};throw e}})}getBucket(e){return Ai(this,void 0,void 0,function*(){try{return{data:yield qc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(jt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ai(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(jt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Ai(this,void 0,void 0,function*(){try{return{data:yield kh(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(jt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ai(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(jt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ai(this,void 0,void 0,function*(){try{return{data:yield Qx(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(jt(t))return{data:null,error:t};throw t}})}}class MS extends RS{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new DS(this.url,this.headers,e,this.fetch)}}const LS="2.55.0";let sa="";typeof Deno<"u"?sa="deno":typeof document<"u"?sa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sa="react-native":sa="node";const $S={"X-Client-Info":`supabase-js-${sa}/${LS}`},zS={headers:$S},FS={schema:"public"},BS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},US={};var VS=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};const WS=n=>{let e;return n?e=n:typeof fetch>"u"?e=Mx:e=fetch,(...t)=>e(...t)},HS=()=>typeof Headers>"u"?Lx:Headers,qS=(n,e,t)=>{const r=WS(t),s=HS();return(i,o)=>VS(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:n;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var XS=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};function GS(n){return n.endsWith("/")?n:n+"/"}function YS(n,e){var t,r;const{db:s,auth:i,realtime:o,global:l}=n,{db:c,auth:u,realtime:h,global:d}=e,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(t=d==null?void 0:d.headers)!==null&&t!==void 0?t:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>XS(this,void 0,void 0,function*(){return""})};return n.accessToken?f.accessToken=n.accessToken:delete f.accessToken,f}const Jx="2.71.1",$i=30*1e3,Eh=3,ud=Eh*$i,KS="http://localhost:9999",QS="supabase.auth.token",JS={"X-Client-Info":`gotrue-js/${Jx}`},Th="X-Supabase-Api-Version",Zx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ZS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,eC=10*60*1e3;class Sp extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Ce(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class tC extends Sp{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function nC(n){return Ce(n)&&n.name==="AuthApiError"}class ev extends Sp{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ls extends Sp{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class ss extends Ls{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rC(n){return Ce(n)&&n.name==="AuthSessionMissingError"}class zl extends Ls{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fl extends Ls{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Bl extends Ls{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sC(n){return Ce(n)&&n.name==="AuthImplicitGrantRedirectError"}class wg extends Ls{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ah extends Ls{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function dd(n){return Ce(n)&&n.name==="AuthRetryableFetchError"}class _g extends Ls{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Ph extends Ls{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Sg=` 	
\r=`.split(""),iC=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Sg.length;e+=1)n[Sg[e].charCodeAt(0)]=-2;for(let e=0;e<Xc.length;e+=1)n[Xc[e].charCodeAt(0)]=e;return n})();function Cg(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Xc[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Xc[r]),e.queuedBits-=6}}function tv(n,e,t){const r=iC[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Ng(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{lC(o,r,t)};for(let o=0;o<n.length;o+=1)tv(n.charCodeAt(o),s,i);return e.join("")}function oC(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function aC(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}oC(r,e)}}function lC(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function cC(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)tv(n.charCodeAt(s),t,r);return new Uint8Array(e)}function uC(n){const e=[];return aC(n,t=>e.push(t)),new Uint8Array(e)}function dC(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>Cg(s,t,r)),Cg(null,t,r),e.join("")}function hC(n){return Math.round(Date.now()/1e3)+n}function fC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const tr=()=>typeof window<"u"&&typeof document<"u",Vs={tested:!1,writable:!1},nv=()=>{if(!tr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vs.tested)return Vs.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Vs.tested=!0,Vs.writable=!0}catch{Vs.tested=!0,Vs.writable=!1}return Vs.writable};function pC(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const rv=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ml(async()=>{const{default:r}=await Promise.resolve().then(()=>Mo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},mC=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",zi=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Ws=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ts=async(n,e)=>{await n.removeItem(e)};class Tu{constructor(){this.promise=new Tu.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Tu.promiseConstructor=Promise;function hd(n){const e=n.split(".");if(e.length!==3)throw new Ph("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ZS.test(e[r]))throw new Ph("JWT not in base64url format");return{header:JSON.parse(Ng(e[0])),payload:JSON.parse(Ng(e[1])),signature:cC(e[2]),raw:{header:e[0],payload:e[1]}}}async function gC(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function yC(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function xC(n){return("0"+n.toString(16)).substr(-2)}function vC(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,xC).join("")}async function bC(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function wC(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await bC(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pi(n,e,t=!1){const r=vC();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await zi(n,`${e}-code-verifier`,s);const i=await wC(r);return[i,r===i?"plain":"s256"]}const _C=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function SC(n){const e=n.headers.get(Th);if(!e||!e.match(_C))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function CC(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function NC(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const jC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Di(n){if(!jC.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fd(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jg(n){return JSON.parse(JSON.stringify(n))}var kC=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const Js=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),EC=[502,503,504];async function kg(n){var e;if(!mC(n))throw new Ah(Js(n),0);if(EC.includes(n.status))throw new Ah(Js(n),n.status);let t;try{t=await n.json()}catch(i){throw new ev(Js(i),i)}let r;const s=SC(n);if(s&&s.getTime()>=Zx["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new _g(Js(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ss}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new _g(Js(t),n.status,t.weak_password.reasons);throw new tC(Js(t),n.status||500,r)}const TC=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function Te(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Th]||(i[Th]=Zx["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await AC(n,e,t+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function AC(n,e,t,r,s,i){const o=TC(e,r,s,i);let l;try{l=await n(t,Object.assign({},o))}catch(c){throw console.error(c),new Ah(Js(c),0)}if(l.ok||await kg(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await kg(c)}}function Pr(n){var e;let t=null;IC(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=hC(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Eg(n){const e=Pr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ds(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function PC(n){return{data:n,error:null}}function DC(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,o=kC(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function OC(n){return n}function IC(n){return n.access_token&&n.refresh_token&&n.expires_in}const pd=["global","local","others"];var RC=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class MC{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=rv(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=pd[0]){if(pd.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pd.join(", ")}`);try{return await Te(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Te(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ds})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=RC(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:DC,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Ce(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ds})}catch(t){if(Ce(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await Te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:OC});if(h.error)throw h.error;const d=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(Ce(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Di(e);try{return await Te(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ds})}catch(t){if(Ce(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Di(e);try{return await Te(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ds})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Di(e);try{return await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ds})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Di(e.userId);try{const{data:t,error:r}=await Te(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Di(e.userId),Di(e.id);try{return{data:await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}}function Tg(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function LC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Oi={debug:!!(globalThis&&nv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class $C extends sv{}async function zC(n,e,t){Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new $C(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Oi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}LC();const FC={url:KS,storageKey:QS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:JS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ag(n,e,t){return await t()}const Ii={};class Ja{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ja.nextInstanceID,Ja.nextInstanceID+=1,this.instanceID>0&&tr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},FC),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new MC({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=rv(s.fetch),this.lock=s.lock||Ag,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:tr()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=zC:this.lock=Ag,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:nv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tg(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Tg(this.memoryStorage)),tr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Ii[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Ii[this.storageKey]=Object.assign(Object.assign({},Ii[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Ii[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ii[this.storageKey]=Object.assign(Object.assign({},Ii[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Jx}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=pC(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),tr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),sC(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ce(t)?{error:t}:{error:new ev("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Pr}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Ce(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:h,password:d,options:f}=e;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await Pi(this.storage,this.storageKey)),i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:d,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:x},xform:Pr})}else if("phone"in e){const{phone:h,password:d,options:f}=e;i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Pr})}else throw new Fl("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Ce(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Eg})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Eg})}else throw new Fl("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new zl}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,i,o,l,c,u,h,d,f,p;let x,g;if("message"in e)x=e.message,g=e.signature;else{const{chain:w,wallet:m,statement:y,options:b}=e;let v;if(tr())if(typeof m=="object")v=m;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))v=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=m}const _=new URL((t=b==null?void 0:b.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in v&&v.signIn){const C=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),y?{statement:y}:null));let j;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")j=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)j=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)x=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),g=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${_.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(h=b==null?void 0:b.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const C=await v.signMessage(new TextEncoder().encode(x),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:w,error:m}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:dC(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Pr});if(m)throw m;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new zl}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:m})}catch(w){if(Ce(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const t=await Ws(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:o}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Pr});if(await ts(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new zl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Ce(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:o}=e,l=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Pr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new zl}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Pi(this.storage,this.storageKey));const{error:d}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:h}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new Fl("You must provide either an email or phone number.")}catch(l){if(Ce(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Pr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Pi(this.storage,this.storageKey)),await Te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:PC})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ss;const{error:s}=await Te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Ce(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:l}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Fl("You must provide either an email or phone number and a type")}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ws(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ud:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Ws(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=fd()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,h)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,h))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ds}):await this._useSession(async t=>{var r,s,i;const{data:o,error:l}=t;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ss}:await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ds})})}catch(t){if(Ce(t))return rC(t)&&(await this._removeSession(),await ts(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new ss;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Pi(this.storage,this.storageKey));const{data:u,error:h}=await Te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:ds});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ss;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:o}=hd(e.access_token);if(o.exp&&(r=o.exp,s=r<=t),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Ce(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ss;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!tr())throw new Bl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Bl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new wg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bl("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new wg("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new Bl("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(l);let f=h+d;c&&(f=parseInt(c));const p=f-h;p*1e3<=$i&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const x=f-d;h-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,h):h-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,h);const{data:g,error:w}=await this._getUser(i);if(w)throw w;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(r){if(Ce(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ws(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(nC(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await ts(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=fC(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Pi(this.storage,this.storageKey,!0));try{return await Te(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,c,u,h;const{data:d,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Te(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return tr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ce(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)throw o;return await Te(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await yC(async s=>(s>0&&await gC(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Pr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&dd(i)&&Date.now()+o-r<$i})}catch(r){if(this._debug(t,"error",r),Ce(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),tr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Ws(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Ws(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await zi(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:fd()}else if(s&&!s.user&&!s.user){const o=await Ws(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await ts(this.storage,this.storageKey+"-user"),await zi(this.storage,this.storageKey,s)):s.user=fd()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<ud;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${ud}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),dd(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ss;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Tu;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ss;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Ce(i)){const o={session:null,error:i};return dd(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await zi(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=jg(s);await zi(this.storage,this.storageKey,i)}else{const s=jg(t);await zi(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ts(this.storage,this.storageKey),await ts(this.storage,this.storageKey+"-code-verifier"),await ts(this.storage,this.storageKey+"-user"),this.userStorage&&await ts(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&tr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$i);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/$i);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${$i}ms, refresh threshold is ${Eh} ticks`),s<=Eh&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Pi(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await Te(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await Te(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=hd(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+eC>s)return r;const{data:i,error:o}=await Te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:p,error:x}=await this.getSession();if(x||!p.session)return{data:null,error:x};r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=hd(r);t!=null&&t.allowExpired||CC(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const h=NC(s.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,uC(`${l}.${c}`)))throw new Ph("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}}Ja.nextInstanceID=0;const BC=Ja;class UC extends BC{constructor(e){super(e)}}var VC=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};class WC{constructor(e,t,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=GS(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:FS,realtime:US,auth:Object.assign(Object.assign({},BS),{storageKey:u}),global:zS},d=YS(r??{},h);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=qS(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new oS(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new MS(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new M_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return VC(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new UC({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new SS(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const HC=(n,e,t)=>new WC(n,e,t);function qC(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}qC()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ko="https://nmlroqlmtelytoghuyos.supabase.co",Ul="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5tbHJvcWxtdGVseXRvZ2h1eW9zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxMTA0OTgsImV4cCI6MjA3MDY4NjQ5OH0.qnAd6-BSzNMZux6RxtQmGr5OyPYkne--y1ekccVlCeE",XC=()=>{const n=navigator.userAgent.toLowerCase(),e=/iphone|ipad|ipod|android/.test(n),t=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;return e&&t},GC=()=>{const n=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod|android|mobile/.test(n)};let ue=null;try{if(!Ko.startsWith("https://")||!Ko.includes(".supabase.co"))throw new Error(`Invalid Supabase URL format: ${Ko}`);const n=GC(),e=XC();ue=HC(Ko,Ul,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1},realtime:{params:{eventsPerSecond:n?1:10},timeout:n?18e4:15e3,heartbeatIntervalMs:n?3e5:3e4},global:{fetch:(r,s={})=>{const i=new AbortController,o=setTimeout(()=>i.abort(),n?18e4:15e3),l=new Headers;return s.headers&&(s.headers instanceof Headers?s.headers.forEach((c,u)=>l.set(u,c)):typeof s.headers=="object"&&Object.entries(s.headers).forEach(([c,u])=>{typeof u=="string"&&l.set(c,u)})),l.set("apikey",Ul),l.set("Authorization",`Bearer ${Ul}`),l.set("Content-Type","application/json"),l.set("Accept","application/json"),l.set("X-Requested-With","XMLHttpRequest"),n?(l.set("X-Client-Info",`golden-store-mobile-${e?"pwa":"browser"}`),l.set("Cache-Control","no-cache, no-store, must-revalidate"),l.set("Pragma","no-cache"),l.set("Expires","0")):(l.set("Cache-Control","no-cache"),l.set("X-Client-Info","golden-store-desktop")),fetch(r,{...s,signal:i.signal,mode:"cors",credentials:"omit",headers:l,...n&&{referrerPolicy:"no-referrer",keepalive:!1,redirect:"follow"}}).then(c=>(clearTimeout(o),c)).catch(c=>{throw clearTimeout(o),c})}}})}catch{ue=null}const iv=N.createContext(void 0),Cp=()=>{const n=N.useContext(iv);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},YC=({children:n})=>{const[e,t]=N.useState(null),[r,s]=N.useState(null),[i,o]=N.useState(!0);N.useEffect(()=>{(async()=>{try{if(!ue){const x={id:"local-user",email:"local@user.com",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),aud:"authenticated",role:"authenticated"};t(x),s({user:x});return}const{data:{session:f}}=await ue.auth.getSession();s(f),t((f==null?void 0:f.user)??null);const{data:{subscription:p}}=ue.auth.onAuthStateChange(async(x,g)=>{s(g),t((g==null?void 0:g.user)??null)});return()=>p.unsubscribe()}catch(f){console.error("Auth initialization failed:",f);const p={id:"local-user",email:"local@user.com",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),aud:"authenticated",role:"authenticated"};t(p),s({user:p})}finally{o(!1)}})()},[]);const h={user:e,session:r,loading:i,signIn:async(d,f)=>{if(!ue)return{error:{message:"Supabase not configured"}};const{error:p}=await ue.auth.signInWithPassword({email:d,password:f});return{error:p}},signUp:async(d,f)=>{if(!ue)return{error:{message:"Supabase not configured"}};const{error:p}=await ue.auth.signUp({email:d,password:f});return{error:p}},signOut:async()=>{ue&&await ue.auth.signOut()}};return a.jsx(iv.Provider,{value:h,children:n})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),we=(n,e)=>{const t=N.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>N.createElement("svg",{ref:h,...KC,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${QC(n)}`,l].join(" "),...u},[...e.map(([d,f])=>N.createElement(d,f)),...Array.isArray(c)?c:[c]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=we("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=we("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=we("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=we("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=we("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=we("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=we("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=we("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=we("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=we("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=we("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=we("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=we("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=we("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=we("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=we("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=we("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=we("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=we("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=we("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=we("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=we("Milk",[["path",{d:"M8 2h8",key:"1ssgc1"}],["path",{d:"M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2",key:"qtp12x"}],["path",{d:"M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"ygeh44"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=we("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=we("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=we("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=we("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=we("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=we("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=we("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=we("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=we("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=we("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=we("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=we("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=we("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=we("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=we("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=we("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=we("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=we("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),kN="GoldenStoreDB",EN=1,Vl="priceList",Wl="overItems",Hl="orderCategories",ql="orderTemplates",Xl="orders";class TN{constructor(){this.db=null}async initDB(){return new Promise((e,t)=>{const r=indexedDB.open(kN,EN);r.onerror=()=>{console.error("Failed to open GoldenStoreDB:",r.error),t(r.error)},r.onsuccess=()=>{this.db=r.result,console.log("GoldenStoreDB initialized successfully"),e()},r.onupgradeneeded=s=>{const i=s.target.result;i.objectStoreNames.contains(Vl)||i.createObjectStore(Vl,{keyPath:"id"}),i.objectStoreNames.contains(Wl)||i.createObjectStore(Wl,{keyPath:"id"}),i.objectStoreNames.contains(Hl)||i.createObjectStore(Hl,{keyPath:"id"}),i.objectStoreNames.contains(ql)||i.createObjectStore(ql,{keyPath:"id"}),i.objectStoreNames.contains(Xl)||i.createObjectStore(Xl,{keyPath:"id"})}})}async saveAll(e,t){if(!this.db)throw new Error("Database not initialized");return new Promise((r,s)=>{const i=this.db.transaction([e],"readwrite"),o=i.objectStore(e),l=o.clear();l.onsuccess=()=>{t.forEach(c=>o.put(c))},i.oncomplete=()=>r(),i.onerror=()=>s(i.error)})}async getAll(e){if(!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const o=this.db.transaction([e],"readonly").objectStore(e).getAll();o.onsuccess=()=>t(o.result||[]),o.onerror=()=>r(o.error)})}async savePriceListItems(e){return this.saveAll(Vl,e)}async getPriceListItems(){return this.getAll(Vl)}async saveOverItems(e){return this.saveAll(Wl,e)}async getOverItems(){return this.getAll(Wl)}async saveOrderCategories(e){return this.saveAll(Hl,e)}async getOrderCategories(){return this.getAll(Hl)}async saveOrderTemplates(e){return this.saveAll(ql,e)}async getOrderTemplates(){return this.getAll(ql)}async saveOrders(e){return this.saveAll(Xl,e)}async getOrders(){return this.getAll(Xl)}}const xe=new TN,hv=N.createContext(void 0),zo=()=>{const n=N.useContext(hv);if(!n)throw new Error("usePriceList must be used within a PriceListProvider");return n},Pg=n=>n.trim().split(" ").filter(e=>e.length>0).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),AN=({children:n})=>{Cp();const[e,t]=N.useState([]),[r,s]=N.useState(""),[i,o]=N.useState("date-desc"),[l,c]=N.useState(!0),[u,h]=N.useState(null);N.useEffect(()=>{(async()=>{try{if(c(!0),h(null),ue)try{const b=await Promise.race([ue.from("price_items").select("id").limit(1),new Promise((j,k)=>setTimeout(()=>k(new Error("Connection timeout")),1e4))]),{data:v,error:_}=await ue.from("price_items").select("*").order("created_at",{ascending:!1});if(_)throw _;const C=(v||[]).map(j=>({id:j.id,name:j.name,price:j.price,grossPrice:isNaN(j.gross_price)?0:j.gross_price??0,createdAt:new Date(j.created_at),lastEditedAt:j.last_edited_at?new Date(j.last_edited_at):void 0}));t(C),await xe.initDB(),await xe.savePriceListItems(C.map(j=>{var k;return{...j,createdAt:j.createdAt.toISOString(),lastEditedAt:(k=j.lastEditedAt)==null?void 0:k.toISOString()}}))}catch{await xe.initDB();const _=(await xe.getPriceListItems()).map(C=>({...C,grossPrice:isNaN(C.grossPrice)?0:C.grossPrice||0,createdAt:new Date(C.createdAt),lastEditedAt:C.lastEditedAt?new Date(C.lastEditedAt):void 0}));t(_)}else{await xe.initDB();const v=(await xe.getPriceListItems()).map(_=>({..._,grossPrice:isNaN(_.grossPrice)?0:_.grossPrice||0,createdAt:new Date(_.createdAt),lastEditedAt:_.lastEditedAt?new Date(_.lastEditedAt):void 0}));t(v)}}catch{h("Failed to load items. Using offline mode."),t([])}finally{c(!1)}})()},[]),N.useEffect(()=>{let y=null;return(async()=>{if(ue)try{y=ue.channel("price_items_changes").on("postgres_changes",{event:"*",schema:"public",table:"price_items"},v=>{if(v.eventType==="INSERT"){const _={id:v.new.id,name:v.new.name,price:Number(v.new.price),grossPrice:isNaN(Number(v.new.gross_price))?0:Number(v.new.gross_price)||0,createdAt:new Date(v.new.created_at),lastEditedAt:v.new.last_edited_at?new Date(v.new.last_edited_at):void 0};t(C=>{if(C.find(k=>k.id===_.id))return C;const j=[_,...C];return xe.savePriceListItems(j.map(k=>{var E;return{...k,createdAt:k.createdAt.toISOString(),lastEditedAt:(E=k.lastEditedAt)==null?void 0:E.toISOString()}})),j})}else if(v.eventType==="UPDATE"){const _={id:v.new.id,name:v.new.name,price:Number(v.new.price),grossPrice:isNaN(Number(v.new.gross_price))?0:Number(v.new.gross_price)||0,createdAt:new Date(v.new.created_at),lastEditedAt:v.new.last_edited_at?new Date(v.new.last_edited_at):void 0};t(C=>{const j=C.map(k=>k.id===_.id?_:k);return xe.savePriceListItems(j.map(k=>{var E;return{...k,createdAt:k.createdAt.toISOString(),lastEditedAt:(E=k.lastEditedAt)==null?void 0:E.toISOString()}})),j})}else v.eventType==="DELETE"&&t(_=>{const C=_.filter(j=>j.id!==v.old.id);return xe.savePriceListItems(C.map(j=>{var k;return{...j,createdAt:j.createdAt.toISOString(),lastEditedAt:(k=j.lastEditedAt)==null?void 0:k.toISOString()}})),C})}).subscribe(v=>{})}catch{}})(),()=>{y&&(ue==null||ue.removeChannel(y))}},[]);const d=async(y,b,v)=>{try{const _=Pg(y);if(!_||_.trim().length===0)throw new Error("Item name is required");if(isNaN(b)||b<=0)throw new Error("Valid price is required");const C=v!==void 0?isNaN(v)?0:v:0,j={id:crypto.randomUUID(),name:_,price:b,grossPrice:C,createdAt:new Date},k=[j,...e];t(k);try{xe.savePriceListItems(k.map(E=>{var M;return{...E,createdAt:E.createdAt.toISOString(),lastEditedAt:(M=E.lastEditedAt)==null?void 0:M.toISOString()}})),console.log(" Item saved to localStorage successfully")}catch(E){throw console.error(" localStorage save failed:",E),new Error("Failed to save item to device storage")}if(ue&&navigator.onLine)try{const E=ue.from("price_items").insert({id:j.id,name:j.name,price:j.price,gross_price:j.grossPrice,created_at:j.createdAt.toISOString()}),M=new Promise(($,O)=>{setTimeout(()=>O(new Error("Request timeout - please check your connection")),15e3)}),{error:A}=await Promise.race([E,M]);A?console.warn(" Supabase sync failed, but localStorage succeeded:",A):console.log(" Item synced to Supabase successfully")}catch(E){console.warn(" Supabase sync failed, but localStorage succeeded:",E)}else navigator.onLine?console.log(" Supabase not available: Item saved to localStorage only"):console.log(" Offline mode: Item saved to localStorage only")}catch(_){throw console.error(" Add item failed completely:",_),h("Failed to add item. Please try again."),_}},f=async(y,b,v,_)=>{var C;try{const j=Pg(b),k=e.find($=>$.id===y);if(!k)throw new Error("Item not found");const E=_!==void 0?isNaN(_)?0:_:isNaN(k.grossPrice)?0:k.grossPrice,M=k.name!==j||k.price!==v||k.grossPrice!==E,A={...k,name:j,price:v,grossPrice:E,...M&&{lastEditedAt:new Date}};if(ue){const{error:$}=await ue.from("price_items").update({name:A.name,price:A.price,gross_price:A.grossPrice,...M&&{last_edited_at:(C=A.lastEditedAt)==null?void 0:C.toISOString()}}).eq("id",y);if($)throw $;t(O=>O.map(T=>T.id===y?A:T))}else{const $=e.map(O=>O.id===y?A:O);t($),xe.savePriceListItems($.map(O=>{var T;return{...O,createdAt:O.createdAt.toISOString(),lastEditedAt:(T=O.lastEditedAt)==null?void 0:T.toISOString()}}))}}catch(j){throw h("Failed to update item. Please try again."),j}},p=async y=>{try{if(ue){const{error:b}=await ue.from("price_items").delete().eq("id",y);if(b)throw b;t(v=>v.filter(_=>_.id!==y))}else{const b=e.filter(v=>v.id!==y);t(b),xe.savePriceListItems(b.map(v=>{var _;return{...v,createdAt:v.createdAt.toISOString(),lastEditedAt:(_=v.lastEditedAt)==null?void 0:_.toISOString()}}))}}catch(b){throw h("Failed to delete item. Please try again."),b}},x=async y=>{try{if(c(!0),ue){const{error:b}=await ue.from("price_items").delete().gte("created_at","1900-01-01");if(b)throw b;const v=y.map(C=>{var j;return{id:C.id,name:C.name,price:C.price,created_at:C.createdAt.toISOString(),last_edited_at:(j=C.lastEditedAt)==null?void 0:j.toISOString()}}),{error:_}=await ue.from("price_items").insert(v);if(_)throw _;t(y)}else t(y),xe.savePriceListItems(y.map(b=>{var v;return{...b,createdAt:b.createdAt.toISOString(),lastEditedAt:(v=b.lastEditedAt)==null?void 0:v.toISOString()}}))}catch(b){throw h("Failed to import items. Please try again."),b}finally{c(!1)}},g=y=>{if(!y.trim())return w(e,i);const b=y.toLowerCase(),v=e.filter(_=>_.name.toLowerCase().includes(b));return w(v,i)},w=(y,b)=>{const v=[...y];switch(b){case"name-asc":return v.sort((_,C)=>_.name.localeCompare(C.name));case"name-desc":return v.sort((_,C)=>C.name.localeCompare(_.name));case"price-asc":return v.sort((_,C)=>_.price-C.price);case"price-desc":return v.sort((_,C)=>C.price-_.price);case"date-asc":return v.sort((_,C)=>_.createdAt.getTime()-C.createdAt.getTime());case"date-desc":return v.sort((_,C)=>C.createdAt.getTime()-_.createdAt.getTime());default:return v}},m={items:e,addItem:d,updateItem:f,deleteItem:p,importItems:x,searchItems:g,searchQuery:r,setSearchQuery:s,sortOption:i,setSortOption:o,isLoading:l,error:u};return a.jsx(hv.Provider,{value:m,children:n})},PN=()=>{const{addItem:n,items:e}=zo(),[t,r]=N.useState(""),[s,i]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState(""),[h,d]=N.useState(!1),[f,p]=N.useState(!1),x=async g=>{if(g.preventDefault(),!t||t.trim().length===0){u("Please enter an item name");return}if(!s||s.trim().length===0){u("Please enter a price");return}if(!t.trim()){u("Please enter an item name");return}const w=e.find(b=>b.name.toLowerCase()===t.trim().toLowerCase());if(w){u(`Item "${t.trim()}" already exists in the price list`),console.log(" Duplicate item found:",w.name);return}const m=parseFloat(s);if(isNaN(m)||m<=0){u("Please enter a valid price");return}const y=o.trim()?parseFloat(o):void 0;if(y!==void 0&&(isNaN(y)||y<=0)){u("Please enter a valid gross price");return}try{p(!0),u("");const b=y!==void 0?Math.round(y*100)/100:void 0,v=n(t.trim(),Math.round(m*100)/100,b),_=new Promise((C,j)=>{setTimeout(()=>j(new Error("Operation timed out. Please try again.")),2e4)});await Promise.race([v,_]),console.log(" Item added successfully:",t.trim()),r(""),i(""),l(""),d(!1)}catch(b){b instanceof Error?b.message.includes("timeout")||b.message.includes("network")?u("Connection timeout. Please check your internet and try again."):b.message.includes("duplicate")?u("This item already exists in your price list."):u(b.message||"Failed to add item. Please try again."):u("Failed to add item. Please try again.")}finally{p(!1)}};return a.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm select-none",children:a.jsx("div",{className:"w-full px-6 py-4 select-none",children:h?a.jsxs("form",{onSubmit:x,className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 w-full max-w-2xl mx-auto select-none",children:[a.jsxs("div",{className:"mb-4 select-none",children:[a.jsx("label",{htmlFor:"itemName",className:"block text-base font-medium text-gray-700 mb-2 select-none",children:"Item Name"}),a.jsx("input",{id:"itemName",type:"text",value:t,onChange:g=>{const m=g.target.value.replace(/(^|\s|\/)([a-zA-Z])/g,(y,b,v)=>b+v.toUpperCase()).replace(/(\d)([a-z])/g,(y,b,v)=>b+v.toUpperCase());r(m)},disabled:f,className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Enter item name"})]}),a.jsxs("div",{className:"mb-4 select-none",children:[a.jsx("label",{htmlFor:"itemPrice",className:"block text-base font-medium text-gray-700 mb-2 select-none",children:"Price (Rs)"}),a.jsx("input",{id:"itemPrice",type:"number",value:s,onChange:g=>i(g.target.value),step:"0.01",min:"0.01",disabled:f,className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0.00"})]}),a.jsxs("div",{className:"mb-4 select-none",children:[a.jsxs("label",{htmlFor:"grossPrice",className:"block text-base font-medium text-gray-700 mb-2 select-none",children:["Gross Price (Rs) ",a.jsx("span",{className:"text-gray-500 text-sm",children:"(Optional)"})]}),a.jsx("input",{id:"grossPrice",type:"number",value:o,onChange:g=>l(g.target.value),step:"0.01",min:"0.01",disabled:f,className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0.00"})]}),c&&a.jsx("p",{className:"text-red-500 text-base mb-4 select-none",children:c}),a.jsxs("div",{className:"flex gap-4 select-none",children:[a.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 px-6 text-lg rounded-md transition-colors duration-200 disabled:bg-blue-300 disabled:cursor-not-allowed select-none",children:f?"Adding...":"Add Item"}),a.jsx("button",{type:"button",onClick:()=>{d(!1),r(""),i(""),l(""),u("")},disabled:f,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 px-6 text-lg rounded-md transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed select-none",children:"Cancel"})]})]}):a.jsxs("button",{onClick:()=>d(!0),className:"w-full max-w-md mx-auto bg-blue-500 hover:bg-blue-600 text-white py-4 px-6 rounded-lg flex items-center justify-center transition-colors duration-200 shadow-sm text-lg select-none",children:[a.jsx(Bt,{size:22,className:"mr-3"}),a.jsx("span",{className:"select-none",children:"Add New Item"})]})})})},DN=({item:n,onEdit:e,onDelete:t})=>{const[r,s]=N.useState(0),[i,o]=N.useState(!1),[l,c]=N.useState(0),[u,h]=N.useState(!1),[d,f]=N.useState(!1),p=N.useRef(null),x=N.useRef(null),g=`Rs ${n.price.toFixed(2)}`,w=()=>x.current?x.current.scrollWidth>x.current.clientWidth:!1,m=()=>{r>0&&(f(!0),setTimeout(()=>f(!1),300)),s(0)};N.useEffect(()=>{const $=O=>{p.current&&!p.current.contains(O.target)&&r>0&&m()};if(r>0)return document.addEventListener("mousedown",$),document.addEventListener("touchstart",$),()=>{document.removeEventListener("mousedown",$),document.removeEventListener("touchstart",$)}},[r]);const y=$=>{o(!0),c($)},b=($,O)=>{if(!i)return;if(p.current){const I=p.current.getBoundingClientRect();if(!(O>=I.top&&O<=I.bottom)){v();return}}const T=l-$;T>=0&&s(Math.min(T,140))},v=()=>{o(!1),r>=25?(f(!0),s(140),setTimeout(()=>f(!1),300)):(f(!0),s(0),setTimeout(()=>f(!1),300))},_=$=>{y($.touches[0].clientX)},C=$=>{i&&$.preventDefault(),b($.touches[0].clientX,$.touches[0].clientY)},j=$=>{v()},k=$=>{$.button===0&&($.preventDefault(),y($.clientX))};N.useEffect(()=>{const $=T=>{b(T.clientX,T.clientY)},O=()=>{v()};if(i)return document.addEventListener("mousemove",$),document.addEventListener("mouseup",O),()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",O)}},[i,l,r]);const E=()=>{w()&&r===0?h(!0):r>0&&m()},M=$=>{$.stopPropagation(),e(n),m()},A=$=>{$.stopPropagation(),t(n.id),m()};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{ref:p,className:"relative h-16 overflow-hidden rounded-lg",children:[a.jsxs("div",{className:"absolute top-0 right-0 h-full flex",style:{width:"150px",transform:`translateX(${150-r}px)`,transition:d||!i?"transform 0.3s ease-out":"none",zIndex:20},children:[a.jsx("button",{className:"w-[75px] bg-blue-500 flex items-center justify-center hover:bg-blue-600 transition-colors",onClick:M,children:a.jsx(gN,{className:"text-white",size:20})}),a.jsx("button",{className:"w-[75px] bg-red-500 flex items-center justify-center hover:bg-red-600 transition-colors",onClick:A,children:a.jsx(Yr,{className:"text-white",size:20})})]}),a.jsx("div",{className:"absolute top-0 right-0 h-full flex items-center justify-center font-semibold text-gray-800 whitespace-nowrap rounded-r-lg",onTouchStart:_,onTouchMove:C,onTouchEnd:j,onMouseDown:k,onClick:r>0?m:void 0,style:{width:`${g.length*8+16}px`,fontSize:"16px",zIndex:15,transform:`translateX(-${r}px)`,transition:d||!i?"transform 0.3s ease-out":"none",userSelect:"none",WebkitUserSelect:"none",cursor:r>0?"pointer":"grab",backgroundColor:"#fef3c7",touchAction:"manipulation"},children:g}),a.jsx("div",{className:"absolute top-0 left-0 h-full cursor-pointer rounded-l-lg",style:{width:`calc(100% - ${g.length*8+16}px)`,userSelect:"none",WebkitUserSelect:"none",touchAction:"manipulation",backgroundColor:"#fef3c7",zIndex:10},onTouchStart:_,onTouchMove:C,onTouchEnd:j,onMouseDown:k,onClick:E,children:a.jsx("div",{className:"relative h-full flex items-center px-4 pointer-events-none",children:a.jsxs("div",{className:"flex flex-col justify-center w-full",children:[a.jsx("div",{ref:x,className:"font-semibold text-gray-900 truncate",style:{fontSize:"16px",zIndex:12,maxWidth:"100%"},children:n.name}),a.jsx("div",{className:"text-xs text-gray-500 truncate",style:{fontSize:"11px",zIndex:12,maxWidth:"100%"},children:!isNaN(n.grossPrice)&&n.grossPrice>0&&a.jsxs(a.Fragment,{children:["Gross Price: Rs ",n.grossPrice.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),a.jsx("div",{className:"text-xs text-gray-500 truncate",style:{fontSize:"11px",zIndex:12,maxWidth:"100%"},children:n.lastEditedAt?a.jsxs(a.Fragment,{children:["Last edited on ",n.lastEditedAt.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/\s/g,"-")," ",n.lastEditedAt.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]}):a.jsxs(a.Fragment,{children:["Added on ",n.createdAt.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/\s/g,"-")," ",n.createdAt.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]})})]})})})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-lg overflow-hidden animate-fade-in",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Item Details"}),a.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 hover:text-gray-700 transition-colors",children:a.jsx($e,{size:20})})]}),a.jsx("div",{className:"mb-3",children:a.jsx("p",{className:"text-gray-800 font-medium leading-relaxed",children:n.name})}),a.jsx("div",{className:"text-right",children:a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:g})})]})})})]})},ON=({item:n,onClose:e,onSave:t,requireGrossPrice:r=!1})=>{const{items:s}=zo(),[i,o]=N.useState(""),[l,c]=N.useState(""),[u,h]=N.useState(""),[d,f]=N.useState(""),[p,x]=N.useState(!1);if(N.useEffect(()=>{if(n){o(n.name),c(n.price.toString());const y=isNaN(n.grossPrice)?0:n.grossPrice;h(y>0?y.toString():"")}},[n]),!n)return null;const g=async y=>{if(y.preventDefault(),!i.trim()){f("Please enter an item name");return}if(s.find(_=>_.id!==n.id&&_.name.toLowerCase()===i.trim().toLowerCase())){f(`Item "${i.trim()}" already exists in the price list`);return}const v=parseFloat(l);if(isNaN(v)||v<=0){f("Please enter a valid price");return}if(r){const _=parseFloat(u);if(isNaN(_)||_<=0){f("Please enter a valid gross price");return}}try{x(!0),f("");const _=u?parseFloat(u):void 0,C=_!==void 0&&!isNaN(_)?Math.round(_*100)/100:void 0;await t(n.id,i.trim(),Math.round(v*100)/100,C)}catch{f("Failed to update item. Please try again.")}finally{x(!1)}},w=y=>{/^\d*\.?\d*$/.test(y)&&c(y)},m=y=>{/^\d*\.?\d*$/.test(y)&&h(y)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 select-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden animate-fade-in select-none",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 select-none",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 select-none",children:"Edit Item"}),a.jsx("button",{onClick:e,disabled:p,className:"text-gray-500 hover:text-gray-700 transition-colors disabled:cursor-not-allowed select-none",children:a.jsx($e,{size:20})})]}),a.jsxs("form",{onSubmit:g,className:"p-4 select-none",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"editItemName",className:"block text-sm font-medium text-gray-700 mb-1 select-none",children:"Item Name"}),a.jsx("input",{id:"editItemName",type:"text",value:i,onChange:y=>{const b=y.target.value.replace(/(^|\s)([a-zA-Z])/g,(v,_,C)=>_+C.toUpperCase());o(b)},disabled:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"editItemPrice",className:"block text-sm font-medium text-gray-700 mb-2 select-none",children:"Price (Rs) *"}),a.jsx("input",{id:"editItemPrice",type:"text",value:l,onChange:y=>w(y.target.value),disabled:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0.00"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{htmlFor:"editGrossPrice",className:"block text-sm font-medium text-gray-700 mb-2 select-none",children:["Gross Price (Rs) ",r?"*":""]}),a.jsx("input",{id:"editGrossPrice",type:"text",value:u,onChange:y=>m(y.target.value),disabled:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0.00"}),!r&&a.jsx("p",{className:"text-gray-500 text-xs mt-1 select-none",children:"Optional"})]}),d&&a.jsx("p",{className:"text-red-500 text-sm mb-4 select-none",children:d}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:e,disabled:p,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed select-none",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 disabled:bg-blue-300 disabled:cursor-not-allowed select-none",children:p?"Saving...":"Save Changes"})]})]})]})})},vr=({isOpen:n,title:e,message:t,confirmText:r="Confirm",cancelText:s,onConfirm:i,onCancel:o,type:l="danger"})=>{if(!n)return null;const u=(()=>{switch(l){case"danger":return{iconBg:"bg-red-100",iconColor:"text-red-600",confirmBtn:"bg-red-500 hover:bg-red-600 focus:ring-red-500"};case"warning":return{iconBg:"bg-yellow-100",iconColor:"text-yellow-600",confirmBtn:"bg-yellow-500 hover:bg-yellow-600 focus:ring-yellow-500"};case"info":return{iconBg:"bg-blue-100",iconColor:"text-blue-600",confirmBtn:"bg-blue-500 hover:bg-blue-600 focus:ring-blue-500"};default:return{iconBg:"bg-red-100",iconColor:"text-red-600",confirmBtn:"bg-red-500 hover:bg-red-600 focus:ring-red-500"}}})();return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 select-none",children:a.jsx("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-sm overflow-hidden animate-fade-in select-none",children:a.jsxs("div",{className:"p-6 select-none",children:[a.jsx("div",{className:"flex items-start justify-between mb-4 select-none",children:a.jsx("div",{className:`${u.iconBg} p-3 rounded-full`,children:a.jsx(jr,{className:`${u.iconColor}`,size:24})})}),a.jsxs("div",{className:"mb-6 select-none",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 select-none",children:e}),a.jsx("p",{className:"text-gray-600 text-sm leading-relaxed select-none",children:t})]}),a.jsxs("div",{className:"flex gap-3 select-none",children:[s&&a.jsx("button",{onClick:o,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200 font-medium select-none",children:s}),a.jsx("button",{onClick:i,className:`${s?"flex-1":"w-full"} px-4 py-2 text-white rounded-lg transition-colors duration-200 font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 ${u.confirmBtn} select-none`,children:r})]})]})})})},IN=()=>a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6 text-center bg-yellow-50 rounded-lg mx-4 border border-yellow-200 select-none",children:[a.jsx(av,{size:32,className:"text-blue-500 animate-bounce mb-6"}),a.jsx("div",{className:"bg-yellow-100 p-6 rounded-full mb-6 border border-yellow-300",children:a.jsx(cv,{size:48,className:"text-yellow-600"})}),a.jsx("h2",{className:"text-2xl font-semibold text-yellow-800 mb-3 select-none",children:"Your price list is empty"}),a.jsx("p",{className:"text-yellow-700 mb-8 max-w-md text-lg select-none",children:'Add your first item using the "Add New Item" button above'})]}),fv=({message:n="Loading..."})=>a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 select-none",children:[a.jsx(cN,{className:"animate-spin text-blue-500 mb-4",size:32}),a.jsx("p",{className:"text-gray-600 text-center select-none",children:n})]}),RN=({message:n,onRetry:e})=>a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4 select-none",children:[a.jsx("div",{className:"bg-red-50 p-4 rounded-full mb-4",children:a.jsx(ov,{className:"text-red-500",size:32})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2 select-none",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 text-center mb-4 max-w-sm select-none",children:n}),e&&a.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors select-none",children:[a.jsx(fN,{size:16}),"Try Again"]})]}),MN=()=>{const{items:n,updateItem:e,deleteItem:t,searchItems:r,searchQuery:s,isLoading:i,error:o}=zo(),[l,c]=N.useState(null),[u,h]=N.useState(null),[d,f]=N.useState(!1),p=r(s);Le.useEffect(()=>{console.log(" Total items:",n.length),console.log(" Search query:",s||"(none)"),console.log(" Filtered items:",p.length),s&&console.log("Hidden items:",n.length-p.length)},[n.length,s,p.length]);const x=v=>{c(v)},g=async(v,_,C,j)=>{try{await e(v,_,C,j),c(null)}catch{}},w=v=>{const _=n.find(C=>C.id===v);_&&h(_)},m=async()=>{if(u)try{f(!0),await t(u.id),h(null)}catch{}finally{f(!1)}},y=()=>{h(null)},b=()=>{window.location.reload()};return i?a.jsx("div",{className:"overflow-y-auto select-none",style:{height:"calc(100vh - 60px - 84px - 64px)",minHeight:"200px"},children:a.jsx(fv,{message:"Loading your price list..."})}):o?a.jsx("div",{className:"overflow-y-auto select-none",style:{height:"calc(100vh - 60px - 84px - 64px)",minHeight:"200px"},children:a.jsx(RN,{message:o,onRetry:b})}):a.jsxs("div",{className:"overflow-y-auto select-none",style:{height:"calc(100vh - 64px - 84px - 64px)",minHeight:"200px"},children:[a.jsxs("div",{className:"w-full px-6 pb-6 select-none",children:[a.jsx("div",{style:{height:"25px"}}),p.length===0&&(s?a.jsx("div",{className:"text-center py-12 select-none",children:a.jsxs("p",{className:"text-gray-500 text-lg select-none",children:['No items found matching "',s,'"']})}):a.jsx(IN,{})),p.map(v=>a.jsx("div",{className:"mb-3 select-none",children:a.jsx(DN,{item:v,onEdit:x,onDelete:w})},v.id))]}),l&&a.jsx(ON,{item:l,onClose:()=>c(null),onSave:g,requireGrossPrice:!1}),a.jsx(vr,{isOpen:!!u,title:"Delete Item",message:`Are you sure you want to delete "${u==null?void 0:u.name}"? This action cannot be undone.`,confirmText:d?"Deleting...":"Delete",cancelText:"Cancel",type:"danger",onConfirm:m,onCancel:y})]})},LN=()=>{const{searchQuery:n,setSearchQuery:e,sortOption:t,setSortOption:r}=zo(),[s,i]=Le.useState(!1),o=[{value:"name-asc",label:"Name (A-Z)"},{value:"name-desc",label:"Name (Z-A)"},{value:"price-asc",label:"Price (Low to High)"},{value:"price-desc",label:"Price (High to Low)"},{value:"date-asc",label:"Oldest First"},{value:"date-desc",label:"Newest First"}];return a.jsx("div",{className:"bg-white border-b border-gray-200 p-4 shadow-sm sticky top-[64px] z-30 select-none",children:a.jsxs("div",{className:"w-full select-none",children:[a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsxs("div",{className:"relative flex-1 select-none",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Au,{size:20,className:"text-gray-400"})}),a.jsx("input",{type:"text",value:n,onChange:l=>e(l.target.value),placeholder:"Search items...",className:"block w-full h-[72px] pl-12 pr-4 text-xl border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-500 focus:border-blue-500 shadow-sm"})]}),n&&a.jsx("button",{onClick:()=>e(""),className:"w-16 h-[72px] flex-shrink-0 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center shadow-lg border-2 border-red-600 select-none",children:a.jsx($e,{size:32})}),a.jsx("button",{onClick:()=>i(!s),className:"w-16 h-[72px] flex-shrink-0 bg-blue-500 hover:bg-blue-600 text-white rounded-xl flex items-center justify-center shadow-lg border-2 border-blue-600 select-none",children:a.jsx(lv,{size:24})})]}),s&&a.jsx("div",{className:"mt-3 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden animate-fade-in select-none",children:a.jsxs("div",{className:"p-3 select-none",children:[a.jsx("p",{className:"text-base font-medium text-gray-700 mb-2 px-3 select-none",children:"Sort by:"}),o.map(l=>a.jsx("button",{onClick:()=>{r(l.value),i(!1)},className:`w-full text-left px-4 py-3 text-base rounded-md transition-colors select-none ${t===l.value?"bg-blue-50 text-blue-700":"hover:bg-gray-100 text-gray-700"}`,children:l.label},l.value))]})})]})})},$N="CreditDB",zN=1,Rn="clients",Mn="transactions",Ln="payments";class FN{constructor(){this.db=null}async initDB(){return new Promise((e,t)=>{const r=indexedDB.open($N,zN);r.onerror=()=>{console.error("Failed to open CreditDB:",r.error),t(r.error)},r.onsuccess=()=>{this.db=r.result,console.log("CreditDB initialized successfully"),e()},r.onupgradeneeded=s=>{const i=s.target.result;if(!i.objectStoreNames.contains(Rn)){const o=i.createObjectStore(Rn,{keyPath:"id"});o.createIndex("name","name",{unique:!1}),o.createIndex("lastTransactionAt","lastTransactionAt",{unique:!1})}if(!i.objectStoreNames.contains(Mn)){const o=i.createObjectStore(Mn,{keyPath:"id"});o.createIndex("clientId","clientId",{unique:!1}),o.createIndex("date","date",{unique:!1})}if(!i.objectStoreNames.contains(Ln)){const o=i.createObjectStore(Ln,{keyPath:"id"});o.createIndex("clientId","clientId",{unique:!1}),o.createIndex("date","date",{unique:!1})}}})}async getAllClients(){if(!this.db)throw new Error("Database not initialized");return new Promise((e,t)=>{const i=this.db.transaction([Rn],"readonly").objectStore(Rn).getAll();i.onsuccess=()=>e(i.result||[]),i.onerror=()=>t(i.error)})}async saveClient(e){if(!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const o=this.db.transaction([Rn],"readwrite").objectStore(Rn).put(e);o.onsuccess=()=>t(),o.onerror=()=>r(o.error)})}async saveAllClients(e){if(!this.db)throw new Error("Database not initialized");const t=this.db.transaction([Rn],"readwrite"),r=t.objectStore(Rn);for(const s of e)r.put(s);return new Promise((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error)})}async deleteClient(e){if(!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const o=this.db.transaction([Rn],"readwrite").objectStore(Rn).delete(e);o.onsuccess=()=>t(),o.onerror=()=>r(o.error)})}async getAllTransactions(){if(!this.db)throw new Error("Database not initialized");return new Promise((e,t)=>{const i=this.db.transaction([Mn],"readonly").objectStore(Mn).getAll();i.onsuccess=()=>e(i.result||[]),i.onerror=()=>t(i.error)})}async saveTransaction(e){if(!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const o=this.db.transaction([Mn],"readwrite").objectStore(Mn).put(e);o.onsuccess=()=>t(),o.onerror=()=>r(o.error)})}async saveAllTransactions(e){if(!this.db)throw new Error("Database not initialized");const t=this.db.transaction([Mn],"readwrite"),r=t.objectStore(Mn);for(const s of e)r.put(s);return new Promise((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error)})}async deleteTransaction(e){if(!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const o=this.db.transaction([Mn],"readwrite").objectStore(Mn).delete(e);o.onsuccess=()=>t(),o.onerror=()=>r(o.error)})}async getAllPayments(){if(!this.db)throw new Error("Database not initialized");return new Promise((e,t)=>{const i=this.db.transaction([Ln],"readonly").objectStore(Ln).getAll();i.onsuccess=()=>e(i.result||[]),i.onerror=()=>t(i.error)})}async savePayment(e){if(!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const o=this.db.transaction([Ln],"readwrite").objectStore(Ln).put(e);o.onsuccess=()=>t(),o.onerror=()=>r(o.error)})}async saveAllPayments(e){if(!this.db)throw new Error("Database not initialized");const t=this.db.transaction([Ln],"readwrite"),r=t.objectStore(Ln);for(const s of e)r.put(s);return new Promise((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error)})}async deletePayment(e){if(!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const o=this.db.transaction([Ln],"readwrite").objectStore(Ln).delete(e);o.onsuccess=()=>t(),o.onerror=()=>r(o.error)})}async clearAllData(){if(!this.db)throw new Error("Database not initialized");return new Promise((e,t)=>{const r=this.db.transaction([Rn,Mn,Ln],"readwrite");r.objectStore(Rn).clear(),r.objectStore(Mn).clear(),r.objectStore(Ln).clear(),r.oncomplete=()=>e(),r.onerror=()=>t(r.error)})}}const Ee=new FN,pv=N.createContext(void 0),kr=()=>{const n=N.useContext(pv);if(n===void 0)throw new Error("useCredit must be used within a CreditProvider");return n},BN=({children:n})=>{const[e,t]=N.useState([]),[r,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),[u,h]=N.useState(null),d=async()=>{try{if(c(!0),h(null),await Ee.initDB(),(await Ee.getAllClients()).length===0){const S=localStorage.getItem("creditClients"),W=localStorage.getItem("creditTransactions"),G=localStorage.getItem("creditPayments");if(S||W||G){if(console.log("Migrating data from localStorage to IndexedDB..."),S){const D=JSON.parse(S);await Ee.saveAllClients(D)}if(W){const D=JSON.parse(W);await Ee.saveAllTransactions(D)}if(G){const D=JSON.parse(G);await Ee.saveAllPayments(D)}localStorage.removeItem("creditClients"),localStorage.removeItem("creditTransactions"),localStorage.removeItem("creditPayments"),console.log("Migration complete!")}}const[I,B,H]=await Promise.all([Ee.getAllClients(),Ee.getAllTransactions(),Ee.getAllPayments()]),P=S=>{const W=S.match(/^G(\d+)$/);return W?`G${parseInt(W[1],10)}`:S},z=I.filter(S=>P(S.id)!==S.id);if(z.length>0){console.log(`Migrating ${z.length} clients from old ID format...`);for(const G of z)await Ee.deleteClient(G.id),console.log(`Deleted old client ID: ${G.id}`);const S=B.filter(G=>P(G.clientId)!==G.clientId);for(const G of S)await Ee.deleteTransaction(G.id);const W=H.filter(G=>P(G.clientId)!==G.clientId);for(const G of W)await Ee.deletePayment(G.id);console.log("Deleted all old format records")}const U=I.map(S=>{const W=P(S.id);return W!==S.id&&console.log(`Migrating client ID: ${S.id} -> ${W}`),{...S,id:W,createdAt:new Date(S.createdAt),lastTransactionAt:new Date(S.lastTransactionAt)}}),L=B.map(S=>({...S,clientId:P(S.clientId),date:new Date(S.date)})),V=H.map(S=>({...S,clientId:P(S.clientId),date:new Date(S.date)}));z.length>0&&(console.log("Saving migrated client IDs to IndexedDB..."),await Ee.saveAllClients(U),await Ee.saveAllTransactions(L),await Ee.saveAllPayments(V),console.log("Client ID migration complete!")),t(U),s(L),o(V)}catch(T){h(T instanceof Error?T.message:"Failed to load data")}finally{c(!1)}};N.useEffect(()=>{d()},[]);const f=async T=>{try{const I=T.trim().replace(/\b\w+/g,S=>S.charAt(0).toUpperCase()+S.slice(1).toLowerCase());if(e.find(S=>S.name.toLowerCase()===I.toLowerCase())){const S=new Error(`Client "${I}" already exists`);throw S.name="DuplicateClientError",S}const P=e.map(S=>S.id).filter(S=>S.match(/^G\d+$/)).map(S=>parseInt(S.substring(1))).sort((S,W)=>S-W);let z=1;for(const S of P)if(S===z)z++;else break;const U=`G${z}`;if(e.find(S=>S.id===U)){const S=new Error(`Client with ID "${U}" already exists`);throw S.name="DuplicateClientError",S}const V={id:U,name:I,totalDebt:0,createdAt:new Date,lastTransactionAt:new Date,bottlesOwed:{beer:0,guinness:0,malta:0,coca:0,chopines:0}};return Tt.flushSync(()=>{t(S=>[...S,V])}),await Ee.saveClient({...V,createdAt:V.createdAt.toISOString(),lastTransactionAt:V.lastTransactionAt.toISOString()}),window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{clientId:V.id,source:"addClient"}})),V}catch(I){throw I}},p=async(T,I=!1)=>{try{const B=e.map(P=>P.id===T.id?T:P);let H=B;if(!I){const P=B.find(U=>U.id===T.id),z=B.filter(U=>U.id!==T.id);H=P?[...z,P]:B}t(H),await Ee.saveAllClients(H.map(P=>({...P,createdAt:P.createdAt.toISOString(),lastTransactionAt:P.lastTransactionAt.toISOString()}))),window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{clientId:T.id,source:"updateClient"}}))}catch(B){throw B}},x=async T=>{const I=e.find(P=>P.id===T);if(!I)return;const H=[...e.filter(P=>P.id!==T),I];t(H),await Ee.saveAllClients(H.map(P=>({...P,createdAt:P.createdAt.toISOString(),lastTransactionAt:P.lastTransactionAt.toISOString()}))),window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{clientId:T,source:"moveClientToFront"}}))},g=async T=>{try{const I=e.filter(U=>U.id!==T),B=r.filter(U=>U.clientId!==T),H=i.filter(U=>U.clientId!==T);t(I),s(B),o(H),await Ee.deleteClient(T);const P=r.filter(U=>U.clientId===T);for(const U of P)await Ee.deleteTransaction(U.id);const z=i.filter(U=>U.clientId===T);for(const U of z)await Ee.deletePayment(U.id);window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{clientId:T,source:"deleteClient"}}))}catch(I){throw console.error("Error deleting client:",I),I}},w=T=>{if(!T.trim())return[...e].sort((H,P)=>{const z=parseInt(H.id.replace(/\D/g,""),10),U=parseInt(P.id.replace(/\D/g,""),10);return z-U});const I=H=>H.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/g,"");if(/^\d+$/.test(T.trim())){const H=parseInt(T.trim(),10);return e.filter(P=>parseInt(P.id.replace(/\D/g,""),10)===H)}else{const H=I(T),P=T.toLowerCase();return e.filter(z=>{const U=I(z.name),L=z.id.toLowerCase();if(U===H||L===P||U.startsWith(H)||U.includes(H))return!0;const V=U.split(" ");for(const S of V)if(S.startsWith(H))return!0;return!1})}},m=T=>{const I=e.find(B=>B.id===T);return(I==null?void 0:I.totalDebt)||0},y=T=>{const I=e.find(B=>B.id===T);return(I==null?void 0:I.bottlesOwed)||{beer:0,guinness:0,malta:0,coca:0,chopines:0}},b=T=>r.filter(I=>I.clientId===T),v=T=>i.filter(I=>I.clientId===T),_=async(T,I,B)=>{try{const H={id:crypto.randomUUID(),clientId:T.id,description:I,amount:B,date:new Date,type:"debt"},P=[...r,H];s(P),await Ee.saveTransaction({...H,date:H.date.toISOString()}),Tt.flushSync(()=>{t(z=>{const U=z.map(W=>W.id===T.id?{...W,totalDebt:W.totalDebt+B,lastTransactionAt:new Date}:W),L=U.find(W=>W.id===T.id),V=U.filter(W=>W.id!==T.id),S=L?[...V,L]:U;return Ee.saveAllClients(S.map(W=>({...W,createdAt:W.createdAt.toISOString(),lastTransactionAt:W.lastTransactionAt.toISOString()}))).catch(W=>console.error("Error saving clients:",W)),S})}),window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{clientId:T.id,source:"addTransaction"}}))}catch(H){throw H}},C=async(T,I)=>{try{const B=I.map(S=>({id:crypto.randomUUID(),clientId:T.id,description:S.description,amount:S.amount,date:new Date,type:"debt"})),H=[...r,...B];s(H),await Promise.all(B.map(S=>Ee.saveTransaction({...S,date:S.date.toISOString()})));const P=I.reduce((S,W)=>S+W.amount,0),z=e.map(S=>S.id===T.id?{...S,totalDebt:S.totalDebt+P,lastTransactionAt:new Date}:S),U=z.find(S=>S.id===T.id),L=z.filter(S=>S.id!==T.id),V=U?[...L,U]:z;t(V),await Ee.saveAllClients(V.map(S=>({...S,createdAt:S.createdAt.toISOString(),lastTransactionAt:S.lastTransactionAt.toISOString()}))),window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{clientId:T.id,source:"addBatchTransactions"}}))}catch(B){throw B}},j=async(T,I)=>{try{const B={id:crypto.randomUUID(),clientId:T,amount:I,date:new Date,type:"partial"},H=[...i,B];o(H);const P=m(T),z=Math.max(0,P-I),U=e.map(W=>W.id===T?{...W,totalDebt:z,lastTransactionAt:new Date}:W),L=U.find(W=>W.id===T),V=U.filter(W=>W.id!==T),S=L?[...V,L]:U;t(S),await Ee.savePayment({...B,date:B.date.toISOString()}),await Ee.saveAllClients(S.map(W=>({...W,createdAt:W.createdAt.toISOString(),lastTransactionAt:W.lastTransactionAt.toISOString()}))),window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{clientId:T,source:"addPartialPayment"}}))}catch(B){throw B}},k=async T=>E(T),E=async T=>{try{const I=m(T),B=i.filter(L=>!(L.clientId===T&&L.type==="full")),H={id:crypto.randomUUID(),clientId:T,amount:I,date:new Date,type:"full"},P=[...B,H];o(P);const z=r.filter(L=>L.clientId!==T?!0:L.amount===0||L.description.toLowerCase().includes("returned")||L.description.toLowerCase().includes("chopine")||L.description.toLowerCase().includes("bouteille"));s(z);const U=e.map(L=>L.id===T?{...L,totalDebt:0,lastTransactionAt:new Date,bottlesOwed:L.bottlesOwed}:L);t(U),await Ee.saveAllPayments(P.map(L=>({...L,date:L.date.toISOString()}))),await Ee.saveAllTransactions(z.map(L=>({...L,date:L.date.toISOString()}))),await Ee.saveAllClients(U.map(L=>({...L,createdAt:L.createdAt.toISOString(),lastTransactionAt:L.lastTransactionAt.toISOString()}))),window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{clientId:T,source:"settle"}}))}catch(I){throw I}},O={clients:e,transactions:r,payments:i,loading:l,error:u,addClient:f,updateClient:p,deleteClient:g,searchClients:w,getClientTotalDebt:m,getClientBottlesOwed:y,getClientTransactions:b,getClientPayments:v,moveClientToFront:x,addTransaction:_,addBatchTransactions:C,addPartialPayment:j,settleClient:k,settleClientWithFullClear:async T=>{try{const I=m(T),B=i.filter(L=>L.clientId!==T),H={id:crypto.randomUUID(),clientId:T,amount:I,date:new Date,type:"full"},P=[...B,H];o(P);const z=r.filter(L=>L.clientId!==T);s(z);const U=e.map(L=>L.id===T?{...L,totalDebt:0,lastTransactionAt:new Date,bottlesOwed:{beer:0,guinness:0,malta:0,coca:0,chopines:0}}:L);t(U),await Ee.saveAllPayments(P.map(L=>({...L,date:L.date.toISOString()}))),await Ee.saveAllTransactions(z.map(L=>({...L,date:L.date.toISOString()}))),await Ee.saveAllClients(U.map(L=>({...L,createdAt:L.createdAt.toISOString(),lastTransactionAt:L.lastTransactionAt.toISOString()}))),window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{clientId:T,source:"settleFullClear"}}))}catch(I){throw I}},returnBottles:async(T,I)=>{try{const B=y(T),H={beer:Math.max(0,B.beer-(I.beer||0)),guinness:Math.max(0,B.guinness-(I.guinness||0)),malta:Math.max(0,B.malta-(I.malta||0)),coca:Math.max(0,B.coca-(I.coca||0)),chopines:Math.max(0,B.chopines-(I.chopines||0))},P=e.map(V=>V.id===T?{...V,bottlesOwed:H,lastTransactionAt:new Date}:V),z=P.find(V=>V.id===T),U=P.filter(V=>V.id!==T),L=z?[...U,z]:P;t(L),await Ee.saveAllClients(L.map(V=>({...V,createdAt:V.createdAt.toISOString(),lastTransactionAt:V.lastTransactionAt.toISOString()}))),window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{clientId:T,source:"returnBottles"}}))}catch(B){throw B}},refreshData:async()=>{await d()}};return a.jsx(pv.Provider,{value:O,children:n})};class UN{constructor(e={}){this.options={appName:"Golden Store",appIconUrl:"https://jarivatoi.github.io/goldenstore/icon-192.png",...e}}show(){if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||window.matchMedia("(display-mode: fullscreen)").matches||window.matchMedia("(display-mode: minimal-ui)").matches){console.log(" App is already installed as PWA, skipping prompt");return}const t=localStorage.getItem("addToHomescreen-lastShown"),r=Date.now(),s=24*60*60*1e3;if(t&&r-parseInt(t)<s){console.log(" Add to homescreen shown recently, skipping");return}localStorage.setItem("addToHomescreen-lastShown",r.toString()),console.log(" Showing add to homescreen prompt"),this.showModal()}showModal(){const e=()=>{const u=navigator.userAgent.toLowerCase(),h=u.includes("android");return u.includes("tablet")||h&&!u.includes("mobile")||window.innerWidth>=768},t=document.createElement("div");t.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      z-index: 999999;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    `;const r=document.createElement("div");r.style.cssText=`
      background: white;
      border-radius: 16px;
      padding: 24px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      text-align: center;
    `;const s=document.createElement("img");s.src=this.options.appIconUrl,s.style.cssText=`
      width: 64px;
      height: 64px;
      border-radius: 12px;
      margin-bottom: 16px;
    `,s.onerror=()=>s.style.display="none";const i=document.createElement("h3");i.textContent=`Install ${this.options.appName}`,i.style.cssText=`
      margin: 0 0 12px 0;
      font-size: 20px;
      font-weight: 600;
      color: #1a1a1a;
    `;const o=document.createElement("p");o.textContent=`Add ${this.options.appName} to your home screen for quick access!`,o.style.cssText=`
      margin: 0 0 24px 0;
      font-size: 16px;
      color: #666;
    `;const l=document.createElement("div");l.style.cssText=`
      background: #f0f9ff;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      text-align: left;
    `,e()?l.innerHTML=`
        <div style="font-weight: 600; margin-bottom: 8px; color: #0369a1;"> How to install on Android tablet:</div>
        <div style="font-size: 14px; color: #0c4a6e; line-height: 1.5;">
          1. Tap the <strong>Menu</strong> button () in your browser<br>
          2. Look for <strong>"Install app"</strong> or <strong>"Add to Home screen"</strong><br>
          3. Tap <strong>"Install"</strong> or <strong>"Add"</strong> to confirm<br>
          4. The app will appear on your home screen
        </div>
      `:l.innerHTML=`
        <div style="font-weight: 600; margin-bottom: 8px; color: #0369a1;"> How to install:</div>
        <div style="font-size: 14px; color: #0c4a6e; line-height: 1.5;">
          1. Tap the <strong>Share</strong> button <span style="font-size: 18px;"></span><br>
          2. Scroll down and tap <strong>"Add to Home Screen"</strong><br>
          3. Tap <strong>"Add"</strong> to confirm
        </div>
      `;const c=document.createElement("button");c.textContent="Maybe Later",c.style.cssText=`
      background: #f3f4f6;
      border: none;
      border-radius: 8px;
      padding: 12px 24px;
      font-size: 16px;
      color: #5f6368;
      cursor: pointer;
      width: 100%;
    `,c.onclick=()=>document.body.removeChild(t),t.onclick=u=>{u.target===t&&document.body.removeChild(t)},r.appendChild(s),r.appendChild(i),r.appendChild(o),r.appendChild(l),r.appendChild(c),t.appendChild(r),document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},15e3)}}const VN=()=>(N.useEffect(()=>{const e=(()=>{const r=navigator.userAgent.toLowerCase(),s=r.includes("android");return r.includes("tablet")||s&&!r.includes("mobile")||window.innerWidth>=768})()?2e3:3e3,t=setTimeout(()=>{new UN().show()},e);return()=>clearTimeout(t)},[]),null),WN=({activeTab:n,onTabChange:e})=>{const t=[{id:"Over",label:"Over",icon:eN},{id:"PriceList",label:"PriceList",icon:cv},{id:"Order",label:"Order",icon:Ih},{id:"Credit",label:"Credit",icon:jp}];return a.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 shadow-sm z-20 w-full select-none",children:a.jsx("div",{className:"w-full select-none",children:a.jsx("div",{className:"flex overflow-x-auto select-none",children:t.map(r=>{const s=r.icon,i=n===r.id;return a.jsxs("button",{onClick:()=>e(r.id),className:`flex-1 min-w-0 flex items-center justify-center py-3 px-4 text-sm sm:text-base font-medium transition-colors duration-200 whitespace-nowrap select-none ${i?"text-blue-600 border-b-2 border-blue-600 bg-blue-50 transform scale-105":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[a.jsx(s,{size:i?20:18,className:"mr-1 sm:mr-2 flex-shrink-0"}),a.jsx("span",{className:"truncate select-none",children:r.label})]},r.id)})})})})},mv=N.createContext(void 0),ji=()=>{const n=N.useContext(mv);if(!n)throw new Error("useNotification must be used within a NotificationProvider");return n},HN=({children:n})=>{const[e,t]=N.useState({alerts:[],confirm:null,prompt:null}),r=u=>{const h=Date.now().toString(),d={...u,id:h};t(p=>({...p,alerts:[...p.alerts,d]}));const f=u.duration!==void 0?u.duration:5e3;f>0&&setTimeout(()=>{t(p=>({...p,alerts:p.alerts.filter(x=>x.id!==h)}))},f)},s=u=>new Promise(h=>{const d=Date.now().toString();t(f=>({...f,confirm:{...u,id:d,resolve:h}}))}),i=u=>new Promise(h=>{const d=Date.now().toString();t(f=>({...f,prompt:{...u,id:d,resolve:h}}))}),o=u=>{e.confirm&&(e.confirm.resolve(u),t(h=>({...h,confirm:null})))},l=u=>{e.prompt&&(e.prompt.resolve(u),t(h=>({...h,prompt:null})))},c=u=>{t(h=>({...h,alerts:h.alerts.filter(d=>d.id!==u)}))};return a.jsxs(mv.Provider,{value:{showAlert:r,showConfirm:s,showPrompt:i},children:[n,a.jsx("div",{className:"fixed top-4 right-4 z-[10000] space-y-2 pointer-events-none",children:e.alerts.map(u=>a.jsx(qN,{...u,onClose:()=>c(u.id)},u.id))}),e.confirm&&a.jsx(XN,{...e.confirm,onConfirm:()=>o(!0),onCancel:()=>o(!1)}),e.prompt&&a.jsx(GN,{...e.prompt,onConfirm:u=>l(u),onCancel:()=>l(null)})]})},qN=({title:n,message:e,type:t="info",onClose:r})=>{const s=()=>{switch(t){case"success":return"";case"warning":return"";case"error":return"";default:return""}},i=()=>{switch(t){case"success":return"bg-green-500 text-white";case"warning":return"bg-yellow-500 text-white";case"error":return"bg-red-500 text-white";default:return"bg-blue-500 text-white"}};return a.jsx("div",{className:`${i()} rounded-lg shadow-lg p-4 max-w-sm pointer-events-auto cursor-pointer animate-slide-in-right`,onClick:r,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-lg mr-3",children:s()}),a.jsxs("div",{className:"flex-1",children:[n&&a.jsx("div",{className:"font-semibold",children:n}),a.jsx("div",{className:n?"text-sm":"",children:e})]})]})})},XN=({title:n="Confirm",message:e,confirmText:t="Confirm",cancelText:r="Cancel",type:s="info",onConfirm:i,onCancel:o})=>{const l=()=>{switch(s){case"danger":return"bg-red-500 hover:bg-red-600";case"warning":return"bg-yellow-500 hover:bg-yellow-600";default:return"bg-blue-500 hover:bg-blue-600"}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 animate-fade-in",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n}),a.jsx("p",{className:"text-gray-600 mb-6",children:e}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:o,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:r}),a.jsx("button",{onClick:i,className:`px-4 py-2 ${l()} text-white rounded-lg transition-colors`,children:t})]})]})})},GN=({title:n="Input Required",message:e,defaultValue:t="",placeholder:r="",confirmText:s="OK",cancelText:i="Cancel",onConfirm:o,onCancel:l})=>{const[c,u]=N.useState(t),h=d=>{d.preventDefault(),o(c)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 animate-fade-in",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n}),a.jsx("p",{className:"text-gray-600 mb-4",children:e}),a.jsxs("form",{onSubmit:h,children:[a.jsx("input",{type:"text",value:c,onChange:d=>u(d.target.value),placeholder:r,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-6",autoFocus:!0}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:i}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:s})]})]})]})})};function YN(n,e=!1){const t=n.trim();e&&(console.log(" [PARSE] ===== Starting parseReturnableSegment ====="),console.log(" [PARSE] Input segment:",`"${t}"`));const r=/chopine/i.test(t),s=/caisse/i.test(t),i=/bouteille/i.test(t);if(e&&console.log(" [PARSE] Keyword detection:",{hasChopine:r,hasBouteille:i,hasCaisse:s}),!r&&!i&&!s)return e&&console.log(" [PARSE]  No keywords found, returning null"),null;let o,l;r?(o="Chopine",l="chopine"):s?(o="Caisse",l="caisse"):(o="Bouteille",l="bouteille"),e&&(console.log(" [PARSE] Selected type:",o,"keyword:",`"${l}"`),console.log(" [PARSE] Priority order: Chopine > Caisse > Bouteille"));const c=new RegExp(l,"i"),u=t.split(c);if(e&&console.log(" [PARSE] Split by keyword:",u.map(w=>`"${w}"`)),u.length<2)return e&&console.log(" [PARSE]  Split resulted in less than 2 parts, returning null"),null;const h=u[0].trim();let d=1;e&&console.log(" [PARSE] Before keyword:",`"${h}"`);const f=h.match(/(\d+)/);f?(d=parseInt(f[1]),e&&console.log(" [PARSE] Found number in before part:",d)):e&&console.log(" [PARSE] No number found, defaulting to quantity: 1");const p=u[1].trim(),x=p.toLowerCase();e&&console.log(" [PARSE] After keyword (brand):",`"${p}" (normalized: "${x}")`);const g={quantity:d,type:o,brand:x,displayBrand:p};return e&&(console.log(" [PARSE]  Final result:",JSON.stringify(g,null,2)),console.log(` [PARSE] ===== End parseReturnableSegment =====
`)),g}function KN(n,e=!1){const t={},r={};e&&(console.log(" [EXTRACT] ===== Starting extractReturnableItems ====="),console.log(" [EXTRACT] Original description:",`"${n}"`));const s=n.split(",");e&&console.log(" [EXTRACT] Split by comma into",s.length,"segments:",s.map(i=>`"${i.trim()}"`));for(let i=0;i<s.length;i++){const o=s[i];e&&console.log(`
 [EXTRACT] --- Processing segment ${i+1}/${s.length}: "${o.trim()}" ---`);const l=o.split("+");e&&console.log(" [EXTRACT] Split by + into",l.length,"sub-segments:",l.map(c=>`"${c.trim()}"`));for(let c=0;c<l.length;c++){const u=l[c];e&&console.log(`
 [EXTRACT] Processing sub-segment ${c+1}/${l.length}: "${u.trim()}"`);const h=YN(u,e);if(h){const d=h.brand?`${h.type} ${h.brand}`:h.type;e&&(console.log(" [EXTRACT]  Item parsed successfully!"),console.log(" [EXTRACT] Generated key:",`"${d}"`),console.log(" [EXTRACT] Key construction: item.brand =",`"${h.brand}"`,"",h.brand?`"${h.type} ${h.brand}"`:`"${h.type}"`)),t[d]?e&&console.log(" [EXTRACT] Adding to existing key:",`"${d}"`,"current:",t[d]):(t[d]=0,e&&console.log(" [EXTRACT] Creating new entry for key:",`"${d}"`)),t[d]+=h.quantity,e&&console.log(" [EXTRACT] Updated quantity for key",`"${d}":`,t[d]),h.brand&&(r[d]=h.displayBrand,e&&console.log(" [EXTRACT] Stored display brand for key",`"${d}":`,`"${h.displayBrand}"`))}else e&&console.log(" [EXTRACT]  No item parsed from this sub-segment")}}return e&&(console.log(`
 [EXTRACT] ===== Final extracted items =====`),console.log(" [EXTRACT] Items:",JSON.stringify(t,null,2)),console.log(" [EXTRACT] Display brands:",JSON.stringify(r,null,2)),console.log(` [EXTRACT] ===== End extractReturnableItems =====
`)),{items:t,displayBrands:r}}function QN(n,e){const t={},r=n.toLowerCase();if(!r.includes("returned:"))return t;const s=r.split("returned:")[1];if(!s)return t;for(const i of e){const o=i.toLowerCase(),[l,...c]=o.split(" "),u=c.join(" ");let h;if(u){const f=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");h=new RegExp(`(\\d+)\\s+${l}s?\\s+${f}`,"i")}else h=new RegExp(`(\\d+)\\s+${l}s?(?=\\s*(?:-|$))`,"i");const d=s.match(h);d&&(t[i]=parseInt(d[1]))}return t}const gv=(n,e)=>{const t={},r={},s=(e==null?void 0:e.toLowerCase())==="viraj";s&&(console.log(" [MAIN] ========================================"),console.log(" [MAIN] Starting calculateReturnableItemsWithDates"),console.log(" [MAIN] Client:",e),console.log(" [MAIN] Total transactions:",n.length),console.log(` [MAIN] ========================================
`));let i=0;n.forEach((u,h)=>{if(u.type==="payment"||u.description.toLowerCase().includes("returned"))return;const d=u.description;if(!d.toLowerCase().includes("chopine")&&!d.toLowerCase().includes("bouteille")&&!d.toLowerCase().includes("caisse"))return;i++,s&&(console.log(`
 [MAIN] ========== Processing Transaction ${i} (index ${h}) ==========`),console.log(" [MAIN] Description:",`"${d}"`),console.log(" [MAIN] Date:",u.date));const f=KN(d,s);s&&console.log(" [MAIN] Extracted from this transaction:",JSON.stringify(f.items,null,2));for(const[p,x]of Object.entries(f.items))s&&console.log(` [MAIN] Adding key "${p}" with quantity ${x}`),t[p]?s&&console.log(` [MAIN] Key "${p}" already exists with quantity ${t[p]}`):(t[p]=0,s&&console.log(` [MAIN] First occurrence of key "${p}"`)),t[p]+=x,s&&console.log(` [MAIN] New total for key "${p}": ${t[p]}`),f.displayBrands[p]&&(r[p]=f.displayBrands[p],s&&console.log(` [MAIN] Updated display brand for key "${p}": "${f.displayBrands[p]}"`))}),s&&(console.log(`
 [MAIN] ===== Step 1 Complete: All Returnable Items =====`),console.log(" [MAIN] Total unique keys:",Object.keys(t).length),console.log(" [MAIN] All items:",JSON.stringify(t,null,2)),console.log(" [MAIN] All display brands:",JSON.stringify(r,null,2)),console.log(` [MAIN] =============================================
`));const o={},l=Object.keys(t);n.filter(u=>u.description.toLowerCase().includes("returned")).forEach(u=>{const h=QN(u.description,l);for(const[d,f]of Object.entries(h))o[d]||(o[d]=0),o[d]+=f});const c=[];for(const[u,h]of Object.entries(t)){const d=o[u]||0,f=Math.max(0,h-d);if(f>0){const p=n.filter(_=>{if(_.type!=="debt"||_.description.toLowerCase().includes("returned"))return!1;const C=_.description.toLowerCase(),j=u.toLowerCase();return C.includes(j)}).sort((_,C)=>new Date(C.date).getTime()-new Date(_.date).getTime())[0],x=p?new Date(p.date):new Date,g=x.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit"}),w=x.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}),[m,...y]=u.split(" "),b=y.join(" ");s&&console.log(" [DISPLAY] Formatting returnable item:",{itemType:u,type:m,brandNormalized:b,remaining:f,displayBrands:r[u]});let v;if(b){const _=r[u]||b;v=`${f} ${m}${f>1?"s":""} ${_}`,s&&console.log(" [DISPLAY] Has brand - brandToDisplay:",_)}else v=`${f} ${m}${f>1?"s":""}`,s&&console.log(" [DISPLAY] No brand");s&&console.log(" [DISPLAY] Final display text:",v),c.push({text:v,date:g,time:w})}}return c},Co=n=>gv(n).map(t=>t.text);var Rh=function(n,e){return Rh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])},Rh(n,e)};function JN(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Rh(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Nt=function(){return Nt=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Nt.apply(this,arguments)};var Dg=!1,ti,Mh,Lh,hc,fc,yv,pc,$h,zh,Fh,xv,Bh,Uh,vv,bv;function on(){if(!Dg){Dg=!0;var n=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(n),t=/(Mac OS X)|(Windows)|(Linux)/.exec(n);if(Bh=/\b(iPhone|iP[ao]d)/.exec(n),Uh=/\b(iP[ao]d)/.exec(n),Fh=/Android/i.exec(n),vv=/FBAN\/\w+;/i.exec(n),bv=/Mobile/i.exec(n),xv=!!/Win64/.exec(n),e){ti=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,ti&&document&&document.documentMode&&(ti=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(n);yv=r?parseFloat(r[1])+4:ti,Mh=e[2]?parseFloat(e[2]):NaN,Lh=e[3]?parseFloat(e[3]):NaN,hc=e[4]?parseFloat(e[4]):NaN,hc?(e=/(?:Chrome\/(\d+\.\d+))/.exec(n),fc=e&&e[1]?parseFloat(e[1]):NaN):fc=NaN}else ti=Mh=Lh=fc=hc=NaN;if(t){if(t[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(n);pc=s?parseFloat(s[1].replace("_",".")):!0}else pc=!1;$h=!!t[2],zh=!!t[3]}else pc=$h=zh=!1}}var Vh={ie:function(){return on()||ti},ieCompatibilityMode:function(){return on()||yv>ti},ie64:function(){return Vh.ie()&&xv},firefox:function(){return on()||Mh},opera:function(){return on()||Lh},webkit:function(){return on()||hc},safari:function(){return Vh.webkit()},chrome:function(){return on()||fc},windows:function(){return on()||$h},osx:function(){return on()||pc},linux:function(){return on()||zh},iphone:function(){return on()||Bh},mobile:function(){return on()||Bh||Uh||Fh||bv},nativeApp:function(){return on()||vv},android:function(){return on()||Fh},ipad:function(){return on()||Uh}},ZN=Vh,Gl=!!(typeof window<"u"&&window.document&&window.document.createElement),ej={canUseDOM:Gl,canUseWorkers:typeof Worker<"u",canUseEventListeners:Gl&&!!(window.addEventListener||window.attachEvent),canUseViewport:Gl&&!!window.screen,isInWorker:!Gl},tj=ej,wv=tj,_v;wv.canUseDOM&&(_v=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function nj(n,e){if(!wv.canUseDOM||e&&!("addEventListener"in document))return!1;var t="on"+n,r=t in document;if(!r){var s=document.createElement("div");s.setAttribute(t,"return;"),r=typeof s[t]=="function"}return!r&&_v&&n==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var rj=nj,sj=ZN,ij=rj,Og=10,Ig=40,Rg=800;function Sv(n){var e=0,t=0,r=0,s=0;return"detail"in n&&(t=n.detail),"wheelDelta"in n&&(t=-n.wheelDelta/120),"wheelDeltaY"in n&&(t=-n.wheelDeltaY/120),"wheelDeltaX"in n&&(e=-n.wheelDeltaX/120),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(e=t,t=0),r=e*Og,s=t*Og,"deltaY"in n&&(s=n.deltaY),"deltaX"in n&&(r=n.deltaX),(r||s)&&n.deltaMode&&(n.deltaMode==1?(r*=Ig,s*=Ig):(r*=Rg,s*=Rg)),r&&!e&&(e=r<1?-1:1),s&&!t&&(t=s<1?-1:1),{spinX:e,spinY:t,pixelX:r,pixelY:s}}Sv.getEventType=function(){return sj.firefox()?"DOMMouseScroll":ij("wheel")?"wheel":"mousewheel"};var oj=Sv,aj=oj;const lj=S0(aj);function cj(n,e,t,r,s,i){i===void 0&&(i=0);var o=No(n,e,i),l=o.width,c=o.height,u=Math.min(l,t),h=Math.min(c,r);return u>h*s?{width:h*s,height:h}:{width:u,height:u/s}}function uj(n){return n.width>n.height?n.width/n.naturalWidth:n.height/n.naturalHeight}function Qo(n,e,t,r,s){s===void 0&&(s=0);var i=No(e.width,e.height,s),o=i.width,l=i.height;return{x:Mg(n.x,o,t.width,r),y:Mg(n.y,l,t.height,r)}}function Mg(n,e,t,r){var s=e*r/2-t/2;return Pu(n,-s,s)}function Lg(n,e){return Math.sqrt(Math.pow(n.y-e.y,2)+Math.pow(n.x-e.x,2))}function $g(n,e){return Math.atan2(e.y-n.y,e.x-n.x)*180/Math.PI}function dj(n,e,t,r,s,i,o){i===void 0&&(i=0),o===void 0&&(o=!0);var l=o?hj:fj,c=No(e.width,e.height,i),u=No(e.naturalWidth,e.naturalHeight,i),h={x:l(100,((c.width-t.width/s)/2-n.x/s)/c.width*100),y:l(100,((c.height-t.height/s)/2-n.y/s)/c.height*100),width:l(100,t.width/c.width*100/s),height:l(100,t.height/c.height*100/s)},d=Math.round(l(u.width,h.width*u.width/100)),f=Math.round(l(u.height,h.height*u.height/100)),p=u.width>=u.height*r,x=p?{width:Math.round(f*r),height:f}:{width:d,height:Math.round(d/r)},g=Nt(Nt({},x),{x:Math.round(l(u.width-x.width,h.x*u.width/100)),y:Math.round(l(u.height-x.height,h.y*u.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:g}}function hj(n,e){return Math.min(n,Math.max(0,e))}function fj(n,e){return e}function pj(n,e,t,r,s,i){var o=No(e.width,e.height,t),l=Pu(r.width/o.width*(100/n.width),s,i),c={x:l*o.width/2-r.width/2-o.width*l*(n.x/100),y:l*o.height/2-r.height/2-o.height*l*(n.y/100)};return{crop:c,zoom:l}}function mj(n,e,t){var r=uj(e);return t.height>t.width?t.height/(n.height*r):t.width/(n.width*r)}function gj(n,e,t,r,s,i){t===void 0&&(t=0);var o=No(e.naturalWidth,e.naturalHeight,t),l=Pu(mj(n,e,r),s,i),c=r.height>r.width?r.height/n.height:r.width/n.width,u={x:((o.width-n.width)/2-n.x)*c,y:((o.height-n.height)/2-n.y)*c};return{crop:u,zoom:l}}function zg(n,e){return{x:(e.x+n.x)/2,y:(e.y+n.y)/2}}function yj(n){return n*Math.PI/180}function No(n,e,t){var r=yj(t);return{width:Math.abs(Math.cos(r)*n)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*n)+Math.abs(Math.cos(r)*e)}}function Pu(n,e,t){return Math.min(Math.max(n,e),t)}function Yl(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.filter(function(t){return typeof t=="string"&&t.length>0}).join(" ").trim()}var xj=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,vj=1,bj=3,wj=1,_j=function(n){JN(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.cropperRef=N.createRef(),t.imageRef=N.createRef(),t.videoRef=N.createRef(),t.containerPosition={x:0,y:0},t.containerRef=null,t.styleRef=null,t.containerRect=null,t.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},t.dragStartPosition={x:0,y:0},t.dragStartCrop={x:0,y:0},t.gestureZoomStart=0,t.gestureRotationStart=0,t.isTouching=!1,t.lastPinchDistance=0,t.lastPinchRotation=0,t.rafDragTimeout=null,t.rafPinchTimeout=null,t.wheelTimer=null,t.currentDoc=typeof document<"u"?document:null,t.currentWindow=typeof window<"u"?window:null,t.resizeObserver=null,t.previousCropSize=null,t.isInitialized=!1,t.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},t.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!t.containerRef)){var r=!0;t.resizeObserver=new window.ResizeObserver(function(s){if(r){r=!1;return}t.computeSizes()}),t.resizeObserver.observe(t.containerRef)}},t.preventZoomSafari=function(r){return r.preventDefault()},t.cleanEvents=function(){t.currentDoc&&(t.currentDoc.removeEventListener("mousemove",t.onMouseMove),t.currentDoc.removeEventListener("mouseup",t.onDragStopped),t.currentDoc.removeEventListener("touchmove",t.onTouchMove),t.currentDoc.removeEventListener("touchend",t.onDragStopped),t.currentDoc.removeEventListener("gesturechange",t.onGestureChange),t.currentDoc.removeEventListener("gestureend",t.onGestureEnd),t.currentDoc.removeEventListener("scroll",t.onScroll))},t.clearScrollEvent=function(){t.containerRef&&t.containerRef.removeEventListener("wheel",t.onWheel),t.wheelTimer&&clearTimeout(t.wheelTimer)},t.onMediaLoad=function(){var r=t.computeSizes();r&&(t.previousCropSize=r,t.emitCropData(),t.setInitialCrop(r),t.isInitialized=!0),t.props.onMediaLoaded&&t.props.onMediaLoaded(t.mediaSize)},t.setInitialCrop=function(r){if(t.props.initialCroppedAreaPercentages){var s=pj(t.props.initialCroppedAreaPercentages,t.mediaSize,t.props.rotation,r,t.props.minZoom,t.props.maxZoom),i=s.crop,o=s.zoom;t.props.onCropChange(i),t.props.onZoomChange&&t.props.onZoomChange(o)}else if(t.props.initialCroppedAreaPixels){var l=gj(t.props.initialCroppedAreaPixels,t.mediaSize,t.props.rotation,r,t.props.minZoom,t.props.maxZoom),i=l.crop,o=l.zoom;t.props.onCropChange(i),t.props.onZoomChange&&t.props.onZoomChange(o)}},t.computeSizes=function(){var r,s,i,o,l,c,u=t.imageRef.current||t.videoRef.current;if(u&&t.containerRef){t.containerRect=t.containerRef.getBoundingClientRect(),t.saveContainerPosition();var h=t.containerRect.width/t.containerRect.height,d=((r=t.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((s=t.videoRef.current)===null||s===void 0?void 0:s.videoWidth)||0,f=((i=t.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((o=t.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,p=u.offsetWidth<d||u.offsetHeight<f,x=d/f,g=void 0;if(p)switch(t.state.mediaObjectFit){default:case"contain":g=h>x?{width:t.containerRect.height*x,height:t.containerRect.height}:{width:t.containerRect.width,height:t.containerRect.width/x};break;case"horizontal-cover":g={width:t.containerRect.width,height:t.containerRect.width/x};break;case"vertical-cover":g={width:t.containerRect.height*x,height:t.containerRect.height};break}else g={width:u.offsetWidth,height:u.offsetHeight};t.mediaSize=Nt(Nt({},g),{naturalWidth:d,naturalHeight:f}),t.props.setMediaSize&&t.props.setMediaSize(t.mediaSize);var w=t.props.cropSize?t.props.cropSize:cj(t.mediaSize.width,t.mediaSize.height,t.containerRect.width,t.containerRect.height,t.props.aspect,t.props.rotation);return(((l=t.state.cropSize)===null||l===void 0?void 0:l.height)!==w.height||((c=t.state.cropSize)===null||c===void 0?void 0:c.width)!==w.width)&&t.props.onCropSizeChange&&t.props.onCropSizeChange(w),t.setState({cropSize:w},t.recomputeCropPosition),t.props.setCropSize&&t.props.setCropSize(w),w}},t.saveContainerPosition=function(){if(t.containerRef){var r=t.containerRef.getBoundingClientRect();t.containerPosition={x:r.left,y:r.top}}},t.onMouseDown=function(r){t.currentDoc&&(r.preventDefault(),t.currentDoc.addEventListener("mousemove",t.onMouseMove),t.currentDoc.addEventListener("mouseup",t.onDragStopped),t.saveContainerPosition(),t.onDragStart(e.getMousePoint(r)))},t.onMouseMove=function(r){return t.onDrag(e.getMousePoint(r))},t.onScroll=function(r){t.currentDoc&&(r.preventDefault(),t.saveContainerPosition())},t.onTouchStart=function(r){t.currentDoc&&(t.isTouching=!0,!(t.props.onTouchRequest&&!t.props.onTouchRequest(r))&&(t.currentDoc.addEventListener("touchmove",t.onTouchMove,{passive:!1}),t.currentDoc.addEventListener("touchend",t.onDragStopped),t.saveContainerPosition(),r.touches.length===2?t.onPinchStart(r):r.touches.length===1&&t.onDragStart(e.getTouchPoint(r.touches[0]))))},t.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?t.onPinchMove(r):r.touches.length===1&&t.onDrag(e.getTouchPoint(r.touches[0]))},t.onGestureStart=function(r){t.currentDoc&&(r.preventDefault(),t.currentDoc.addEventListener("gesturechange",t.onGestureChange),t.currentDoc.addEventListener("gestureend",t.onGestureEnd),t.gestureZoomStart=t.props.zoom,t.gestureRotationStart=t.props.rotation)},t.onGestureChange=function(r){if(r.preventDefault(),!t.isTouching){var s=e.getMousePoint(r),i=t.gestureZoomStart-1+r.scale;if(t.setNewZoom(i,s,{shouldUpdatePosition:!0}),t.props.onRotationChange){var o=t.gestureRotationStart+r.rotation;t.props.onRotationChange(o)}}},t.onGestureEnd=function(r){t.cleanEvents()},t.onDragStart=function(r){var s,i,o=r.x,l=r.y;t.dragStartPosition={x:o,y:l},t.dragStartCrop=Nt({},t.props.crop),(i=(s=t.props).onInteractionStart)===null||i===void 0||i.call(s)},t.onDrag=function(r){var s=r.x,i=r.y;t.currentWindow&&(t.rafDragTimeout&&t.currentWindow.cancelAnimationFrame(t.rafDragTimeout),t.rafDragTimeout=t.currentWindow.requestAnimationFrame(function(){if(t.state.cropSize&&!(s===void 0||i===void 0)){var o=s-t.dragStartPosition.x,l=i-t.dragStartPosition.y,c={x:t.dragStartCrop.x+o,y:t.dragStartCrop.y+l},u=t.props.restrictPosition?Qo(c,t.mediaSize,t.state.cropSize,t.props.zoom,t.props.rotation):c;t.props.onCropChange(u)}}))},t.onDragStopped=function(){var r,s;t.isTouching=!1,t.cleanEvents(),t.emitCropData(),(s=(r=t.props).onInteractionEnd)===null||s===void 0||s.call(r)},t.onWheel=function(r){if(t.currentWindow&&!(t.props.onWheelRequest&&!t.props.onWheelRequest(r))){r.preventDefault();var s=e.getMousePoint(r),i=lj(r).pixelY,o=t.props.zoom-i*t.props.zoomSpeed/200;t.setNewZoom(o,s,{shouldUpdatePosition:!0}),t.state.hasWheelJustStarted||t.setState({hasWheelJustStarted:!0},function(){var l,c;return(c=(l=t.props).onInteractionStart)===null||c===void 0?void 0:c.call(l)}),t.wheelTimer&&clearTimeout(t.wheelTimer),t.wheelTimer=t.currentWindow.setTimeout(function(){return t.setState({hasWheelJustStarted:!1},function(){var l,c;return(c=(l=t.props).onInteractionEnd)===null||c===void 0?void 0:c.call(l)})},250)}},t.getPointOnContainer=function(r,s){var i=r.x,o=r.y;if(!t.containerRect)throw new Error("The Cropper is not mounted");return{x:t.containerRect.width/2-(i-s.x),y:t.containerRect.height/2-(o-s.y)}},t.getPointOnMedia=function(r){var s=r.x,i=r.y,o=t.props,l=o.crop,c=o.zoom;return{x:(s+l.x)/c,y:(i+l.y)/c}},t.setNewZoom=function(r,s,i){var o=i===void 0?{}:i,l=o.shouldUpdatePosition,c=l===void 0?!0:l;if(!(!t.state.cropSize||!t.props.onZoomChange)){var u=Pu(r,t.props.minZoom,t.props.maxZoom);if(c){var h=t.getPointOnContainer(s,t.containerPosition),d=t.getPointOnMedia(h),f={x:d.x*u-h.x,y:d.y*u-h.y},p=t.props.restrictPosition?Qo(f,t.mediaSize,t.state.cropSize,u,t.props.rotation):f;t.props.onCropChange(p)}t.props.onZoomChange(u)}},t.getCropData=function(){if(!t.state.cropSize)return null;var r=t.props.restrictPosition?Qo(t.props.crop,t.mediaSize,t.state.cropSize,t.props.zoom,t.props.rotation):t.props.crop;return dj(r,t.mediaSize,t.state.cropSize,t.getAspect(),t.props.zoom,t.props.rotation,t.props.restrictPosition)},t.emitCropData=function(){var r=t.getCropData();if(r){var s=r.croppedAreaPercentages,i=r.croppedAreaPixels;t.props.onCropComplete&&t.props.onCropComplete(s,i),t.props.onCropAreaChange&&t.props.onCropAreaChange(s,i)}},t.emitCropAreaChange=function(){var r=t.getCropData();if(r){var s=r.croppedAreaPercentages,i=r.croppedAreaPixels;t.props.onCropAreaChange&&t.props.onCropAreaChange(s,i)}},t.recomputeCropPosition=function(){var r,s;if(t.state.cropSize){var i=t.props.crop;if(t.isInitialized&&(!((r=t.previousCropSize)===null||r===void 0)&&r.width)&&(!((s=t.previousCropSize)===null||s===void 0)&&s.height)){var o=Math.abs(t.previousCropSize.width-t.state.cropSize.width)>1e-6||Math.abs(t.previousCropSize.height-t.state.cropSize.height)>1e-6;if(o){var l=t.state.cropSize.width/t.previousCropSize.width,c=t.state.cropSize.height/t.previousCropSize.height;i={x:t.props.crop.x*l,y:t.props.crop.y*c}}}var u=t.props.restrictPosition?Qo(i,t.mediaSize,t.state.cropSize,t.props.zoom,t.props.rotation):i;t.previousCropSize=t.state.cropSize,t.props.onCropChange(u),t.emitCropData()}},t.onKeyDown=function(r){var s,i,o=t.props,l=o.crop,c=o.onCropChange,u=o.keyboardStep,h=o.zoom,d=o.rotation,f=u;if(t.state.cropSize){r.shiftKey&&(f*=.2);var p=Nt({},l);switch(r.key){case"ArrowUp":p.y-=f,r.preventDefault();break;case"ArrowDown":p.y+=f,r.preventDefault();break;case"ArrowLeft":p.x-=f,r.preventDefault();break;case"ArrowRight":p.x+=f,r.preventDefault();break;default:return}t.props.restrictPosition&&(p=Qo(p,t.mediaSize,t.state.cropSize,h,d)),r.repeat||(i=(s=t.props).onInteractionStart)===null||i===void 0||i.call(s),c(p)}},t.onKeyUp=function(r){var s,i;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}t.emitCropData(),(i=(s=t.props).onInteractionEnd)===null||i===void 0||i.call(s)},t}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=xj,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var t,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(t){var r,s,i,o,l,c,u,h,d;t.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):t.aspect!==this.props.aspect?this.computeSizes():t.objectFit!==this.props.objectFit?this.computeSizes():t.zoom!==this.props.zoom?this.recomputeCropPosition():((r=t.cropSize)===null||r===void 0?void 0:r.height)!==((s=this.props.cropSize)===null||s===void 0?void 0:s.height)||((i=t.cropSize)===null||i===void 0?void 0:i.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((l=t.crop)===null||l===void 0?void 0:l.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((u=t.crop)===null||u===void 0?void 0:u.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),t.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),t.video!==this.props.video&&((d=this.videoRef.current)===null||d===void 0||d.load());var f=this.getObjectFit();f!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:f},this.computeSizes)},e.prototype.getAspect=function(){var t=this.props,r=t.cropSize,s=t.aspect;return r?r.width/r.height:s},e.prototype.getObjectFit=function(){var t,r,s,i;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,c=((t=this.imageRef.current)===null||t===void 0?void 0:t.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,u=((s=this.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((i=this.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,h=c/u;return h<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(t){var r=e.getTouchPoint(t.touches[0]),s=e.getTouchPoint(t.touches[1]);this.lastPinchDistance=Lg(r,s),this.lastPinchRotation=$g(r,s),this.onDragStart(zg(r,s))},e.prototype.onPinchMove=function(t){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var s=e.getTouchPoint(t.touches[0]),i=e.getTouchPoint(t.touches[1]),o=zg(s,i);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=Lg(s,i),c=r.props.zoom*(l/r.lastPinchDistance);r.setNewZoom(c,o,{shouldUpdatePosition:!1}),r.lastPinchDistance=l;var u=$g(s,i),h=r.props.rotation+(u-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(h),r.lastPinchRotation=u})}},e.prototype.render=function(){var t=this,r,s=this.props,i=s.image,o=s.video,l=s.mediaProps,c=s.cropperProps,u=s.transform,h=s.crop,d=h.x,f=h.y,p=s.rotation,x=s.zoom,g=s.cropShape,w=s.showGrid,m=s.roundCropAreaPixels,y=s.style,b=y.containerStyle,v=y.cropAreaStyle,_=y.mediaStyle,C=s.classes,j=C.containerClassName,k=C.cropAreaClassName,E=C.mediaClassName,M=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return N.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function($){return t.containerRef=$},"data-testid":"container",style:b,className:Yl("reactEasyCrop_Container",j)},i?N.createElement("img",Nt({alt:"",className:Yl("reactEasyCrop_Image",M==="contain"&&"reactEasyCrop_Contain",M==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",M==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",E)},l,{src:i,ref:this.imageRef,style:Nt(Nt({},_),{transform:u||"translate(".concat(d,"px, ").concat(f,"px) rotate(").concat(p,"deg) scale(").concat(x,")")}),onLoad:this.onMediaLoad})):o&&N.createElement("video",Nt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Yl("reactEasyCrop_Video",M==="contain"&&"reactEasyCrop_Contain",M==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",M==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",E)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Nt(Nt({},_),{transform:u||"translate(".concat(d,"px, ").concat(f,"px) rotate(").concat(p,"deg) scale(").concat(x,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(A){return N.createElement("source",Nt({key:A.src},A))})),this.state.cropSize&&N.createElement("div",Nt({ref:this.cropperRef,style:Nt(Nt({},v),{width:m?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:m?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Yl("reactEasyCrop_CropArea",g==="round"&&"reactEasyCrop_CropAreaRound",w&&"reactEasyCrop_CropAreaGrid",k)},c)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:bj,minZoom:vj,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:wj},e.getMousePoint=function(t){return{x:Number(t.clientX),y:Number(t.clientY)}},e.getTouchPoint=function(t){return{x:Number(t.clientX),y:Number(t.clientY)}},e}(N.Component);const Sj=({image:n,onComplete:e,onCancel:t})=>{const[r,s]=N.useState({x:0,y:0}),[i,o]=N.useState(1),[l,c]=N.useState(null),u=N.useCallback((x,g)=>{c(g)},[]),h=x=>new Promise((g,w)=>{const m=new Image;m.addEventListener("load",()=>g(m)),m.addEventListener("error",y=>w(y)),m.src=x}),d=async(x,g)=>{const w=await h(x),m=document.createElement("canvas"),y=m.getContext("2d");if(!y)throw new Error("No 2d context");return m.width=g.width,m.height=g.height,y.drawImage(w,g.x,g.y,g.width,g.height,0,0,g.width,g.height),new Promise(b=>{m.toBlob(v=>{if(!v)return;const _=new FileReader;_.readAsDataURL(v),_.onloadend=()=>{b(_.result)}},"image/jpeg",.95)})},f=async()=>{if(l)try{const x=await d(n,l);e(x)}catch(x){console.error("Error cropping image:",x)}},p=a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex flex-col z-[10000]",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-900 text-white",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Crop Photo"}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:a.jsx($e,{size:24})})]}),a.jsx("div",{className:"flex-1 relative",children:a.jsx(_j,{image:n,crop:r,zoom:i,aspect:1,cropShape:"round",showGrid:!1,onCropChange:s,onCropComplete:u,onZoomChange:o})}),a.jsxs("div",{className:"bg-gray-900 p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(jN,{size:20,className:"text-white flex-shrink-0"}),a.jsx("input",{type:"range",min:1,max:3,step:.1,value:i,onChange:x=>o(Number(x.target.value)),className:"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${(i-1)/2*100}%, #374151 ${(i-1)/2*100}%, #374151 100%)`}}),a.jsx(NN,{size:20,className:"text-white flex-shrink-0"})]}),a.jsx("p",{className:"text-center text-sm text-gray-400",children:"Drag to reposition  Pinch or scroll to zoom"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium",children:"Cancel"}),a.jsxs("button",{onClick:f,className:"flex-1 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium flex items-center justify-center gap-2",children:[a.jsx(Za,{size:20}),"Apply"]})]})]})]});return Tt.createPortal(p,document.body)},kp=({client:n,onClose:e})=>{const{getClientTransactions:t,getClientPayments:r,updateClient:s,addTransaction:i}=kr(),{showAlert:o}=ji(),[l,c]=N.useState(!1),[u,h]=N.useState(n.name),[d,f]=N.useState(!1),[p,x]=N.useState("all"),[g,w]=N.useState({type:null,title:"",message:""}),[m,y]=N.useState(0),[b,v]=N.useState(n.profilePictureUrl),[_,C]=N.useState(null),[j,k]=N.useState(!1),E=N.useRef(null),M=N.useRef(null);Le.useEffect(()=>{const D=()=>{y(ne=>ne+1)};return window.addEventListener("creditDataChanged",D),()=>{window.removeEventListener("creditDataChanged",D)}},[]);const A=t(n.id),$=r(n.id),O=n.totalDebt,T=Le.useMemo(()=>{const D=Co(A,n.name),ne={};return D.forEach(ae=>{const Se=ae.match(/^(\d+)\s+(.+)$/);if(Se){const ee=parseInt(Se[1]),F=Se[2];let q=F;F.startsWith("Bouteille ")||F.startsWith("Chopine ")||F.startsWith("Caisse ")?q=F:F==="Bouteilles"?q="Bouteille":F==="Chopines"?q="Chopine":F==="Caisses"?q="Caisse":/\d+(?:\.\d+)?L Bouteilles? /.test(F)||/\d+(?:\.\d+)?L Bouteilles$/.test(F)&&(q=F.replace("Bouteilles","Bouteille")),ne[q]=ee}}),ne},[A,m]),I=async D=>{var ae;const ne=(ae=D.target.files)==null?void 0:ae[0];if(ne){if(!ne.type.startsWith("image/")){o({type:"error",message:"Please select an image file"});return}if(ne.size>5*1024*1024){o({type:"error",message:"Image size should be less than 5MB"});return}try{const Se=new FileReader;Se.onloadend=()=>{const ee=Se.result;C(ee)},Se.readAsDataURL(ne)}catch{o({type:"error",message:"Failed to load image"})}D.target.value=""}},B=async D=>{try{v(D),C(null);const ne={...n,profilePictureUrl:D};await s(ne,!0),o({type:"success",message:"Profile picture updated"})}catch{o({type:"error",message:"Failed to update profile picture"})}},H=async()=>{w({type:"confirm",title:"Remove Profile Picture",message:`Remove profile picture for ${n.name}?`,onConfirm:async()=>{try{w({type:null,title:"",message:""}),v(void 0);const D={...n,profilePictureUrl:void 0};await s(D,!0),o({type:"success",message:"Profile picture removed"})}catch{o({type:"error",message:"Failed to remove profile picture"})}},onCancel:()=>w({type:null,title:"",message:""})})},P=D=>{D.preventDefault(),b&&(M.current=setTimeout(()=>{k(!0),document.body.style.overflow="hidden"},500))},z=D=>{D.preventDefault(),M.current&&(clearTimeout(M.current),M.current=null)},U=()=>{k(!1),document.body.style.overflow=""},L=async()=>{if(!u.trim()||u.trim()===n.name){c(!1),h(n.name);return}f(!0);try{const ne={...n,name:(ae=>ae.trim().toLowerCase().replace(/(^|[\s\/\(\)\-\[\]\{\}])\w/g,Se=>Se.toUpperCase()))(u)};await s(ne,!0),c(!1)}catch{o({type:"error",message:"Failed to update client name"}),h(n.name)}finally{f(!1)}},V=()=>{c(!1),h(n.name)},W=(()=>{const D=A.sort((ne,ae)=>ae.date.getTime()-ne.date.getTime()).filter(ne=>{if(p==="returnable"){const ae=ne.description.toLowerCase(),Se=ae.includes("chopine")||ae.includes("bouteille")||ae.includes("caisse"),ee=ae.includes("returned");return ne.amount>=0&&Se&&!ee}return ne.amount>=0});switch(p){case"returnable":return D.filter(ae=>{if(ae.description.toLowerCase().includes("returned"))return!1;const Se=ae.description.toLowerCase();return Se.includes("chopine")||Se.includes("bouteille")||Se.includes("caisse")});case"taken":return D.filter(ae=>ae.amount>0&&!ae.description.toLowerCase().includes("returned"));case"returned":return D.filter(ae=>ae.description.toLowerCase().includes("returned"));case"all":default:return D}})(),G=a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[9999] select-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-2xl max-h-[90vh] overflow-hidden select-none",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 select-none",children:[a.jsxs("div",{className:"flex gap-4 items-center",children:[a.jsxs("div",{className:"relative group",children:[a.jsxs("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-gray-200 shadow-lg relative cursor-pointer",style:{background:b?`url(${b})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover",backgroundPosition:"center",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},onMouseDown:P,onMouseUp:z,onMouseLeave:z,onTouchStart:P,onTouchEnd:z,onTouchCancel:z,onContextMenu:D=>D.preventDefault(),children:[!b&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx("span",{className:"text-3xl font-bold text-white",children:n.name.charAt(0).toUpperCase()})}),a.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none",style:{boxShadow:"inset 0 0 20px rgba(0,0,0,0.3)"}})]}),a.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-60 transition-all duration-200 flex items-center justify-center pointer-events-none",onMouseDown:D=>D.stopPropagation(),onTouchStart:D=>D.stopPropagation(),children:a.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex gap-2 pointer-events-auto",children:[a.jsx("button",{onClick:D=>{var ne;D.preventDefault(),D.stopPropagation(),M.current&&(clearTimeout(M.current),M.current=null),(ne=E.current)==null||ne.click()},onMouseDown:D=>{D.preventDefault(),D.stopPropagation()},onTouchStart:D=>{D.preventDefault(),D.stopPropagation()},className:"p-2 bg-blue-500 rounded-full hover:bg-blue-600 transition-colors shadow-lg",title:"Upload photo",children:a.jsx(tN,{size:16,className:"text-white"})}),b&&a.jsx("button",{onClick:D=>{D.preventDefault(),D.stopPropagation(),M.current&&(clearTimeout(M.current),M.current=null),H()},onMouseDown:D=>{D.preventDefault(),D.stopPropagation()},onTouchStart:D=>{D.preventDefault(),D.stopPropagation()},className:"p-2 bg-red-500 rounded-full hover:bg-red-600 transition-colors shadow-lg",title:"Remove photo",children:a.jsx($e,{size:16,className:"text-white"})})]})}),a.jsx("input",{ref:E,type:"file",accept:"image/*",onChange:I,className:"hidden"})]}),a.jsxs("div",{children:[l?a.jsxs("div",{className:"flex items-center gap-2 select-none",children:[a.jsx("input",{type:"text",value:u,onChange:D=>{h(D.target.value)},className:"text-2xl font-semibold text-gray-900 bg-transparent border-b-2 border-blue-500 focus:outline-none select-text",disabled:d,autoFocus:!0,onKeyDown:D=>{D.key==="Enter"&&L(),D.key==="Escape"&&V()}}),a.jsxs("div",{className:"flex gap-1 select-none",children:[a.jsx("button",{onClick:L,disabled:d,className:"px-2 py-1 text-xs bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 select-none",children:d?"...":""}),a.jsx("button",{onClick:V,disabled:d,className:"px-2 py-1 text-xs bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50 select-none",children:""})]})]}):a.jsxs("div",{className:"flex items-center gap-2 select-none",children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 select-none",children:n.name}),a.jsx("button",{onClick:()=>c(!0),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors select-none",title:"Edit client name",children:a.jsx(wi,{size:16})})]}),a.jsxs("p",{className:"text-gray-600 select-none",children:["Client ID: ",n.id]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors select-none",children:a.jsx($e,{size:24})})})]}),g.type&&Tt.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[9999] overflow-hidden select-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md max-h-[90vh] overflow-y-auto select-none",children:[a.jsx("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 select-none",children:a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsx("div",{className:`p-2 rounded-full select-none ${g.type==="success"?"bg-green-100":g.type==="error"?"bg-red-100":"bg-yellow-100"}`,children:g.type==="success"?a.jsx(Fr,{size:20,className:"text-green-600"}):g.type==="error"?a.jsx($e,{size:20,className:"text-red-600"}):a.jsx(jr,{size:20,className:"text-yellow-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 select-none",children:g.title})]})}),a.jsxs("div",{className:"p-6 select-none",children:[a.jsx("p",{className:"text-gray-700 whitespace-pre-line select-none",children:g.message}),a.jsxs("div",{className:"flex gap-3 mt-6 select-none",children:[g.type==="confirm"&&g.onCancel&&a.jsx("button",{onClick:g.onCancel,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors select-none",children:"Cancel"}),a.jsx("button",{onClick:g.onConfirm,className:`${g.type==="confirm"?"flex-1":"w-full"} px-4 py-2 rounded-lg transition-colors select-none ${g.type==="success"?"bg-green-500 hover:bg-green-600 text-white":g.type==="error"?"bg-red-500 hover:bg-red-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:g.type==="confirm"?"Continue":"OK"})]})]})]})}),document.body),a.jsxs("div",{className:"p-6 flex-1 select-none",style:{maxHeight:"calc(90vh - 120px)",overflowY:"auto",WebkitOverflowScrolling:"touch"},children:[a.jsxs("div",{className:"bg-red-50 rounded-lg p-4 mb-6 select-none",children:[a.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2 select-none",children:"Outstanding Balance"}),a.jsxs("p",{className:"text-3xl font-bold text-red-600 select-none",children:["Rs ",O.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),Object.keys(T).length>0?a.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-orange-800",children:"Returnable Items"}),a.jsx("button",{onClick:async()=>{w({type:"confirm",title:"Clear All Returnable Items",message:`Clear all returnable items for ${n.name}? This will mark all Chopine, Bouteille, and Caisse items as returned.`,onConfirm:async()=>{try{w({type:null,title:"",message:""});for(const[ne,ae]of Object.entries(T)){const Se=`Returned: ${ae} ${ne}${ae>1?"s":""}`;await i(n,Se,0)}window.dispatchEvent(new CustomEvent("showDuplicateCard",{detail:{...n,isAccountClear:!1,message:"All returnable items cleared successfully!",transactionDescription:"Returned all returnable items"}})),e()}catch{w({type:"error",title:"Error",message:"Failed to clear returnable items",onConfirm:()=>w({type:null,title:"",message:""})})}},onCancel:()=>w({type:null,title:"",message:""})})},className:"px-3 py-1 text-sm bg-red-500 hover:bg-red-600 text-white rounded-md transition-colors",children:"Clear All"})]}),a.jsx("div",{className:"space-y-3",children:Object.entries(T).sort(([ne],[ae])=>ne.includes("Chopine")&&!ae.includes("Chopine")?-1:!ne.includes("Chopine")&&ae.includes("Chopine")?1:ne.localeCompare(ae)).map(([ne,ae])=>a.jsx(Cj,{itemType:ne,quantity:ae,client:n,showAlert:o,onUpdate:()=>{h(Se=>Se)}},ne))})]}):null,a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hN,{size:20,className:"text-blue-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Items Taken"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:p,onChange:D=>x(D.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsxs("option",{value:"all",children:["All (",A&&Array.isArray(A)?A.filter(D=>D.amount>=0).length:0,")"]}),a.jsxs("option",{value:"returnable",children:["Returnable (",A&&Array.isArray(A)?A.filter(D=>{if(D.description.toLowerCase().includes("returned"))return!1;const ne=D.description.toLowerCase();return ne.includes("chopine")||ne.includes("bouteille")||ne.includes("caisse")}).length:0,")"]}),a.jsxs("option",{value:"taken",children:["Taken (",A&&Array.isArray(A)?A.filter(D=>D.amount>0&&!D.description.toLowerCase().includes("returned")).length:0,")"]}),a.jsxs("option",{value:"returned",children:["Returned (",A&&Array.isArray(A)?A.filter(D=>D.description.toLowerCase().includes("returned")).length:0,")"]})]}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:a.jsx(lv,{size:16,className:"text-gray-400"})})]})]}),W.length===0?a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:"text-gray-500",children:"No transactions found"})}):a.jsx("div",{className:"space-y-3",children:W.map(D=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsxs("div",{className:`${D.amount>0?"flex justify-between items-start":""} mb-2`,children:[a.jsx("h4",{className:"font-medium text-gray-800",children:D.description}),D.amount>0&&a.jsx("span",{className:`text-lg font-semibold ${D.description.toLowerCase().includes("returned")?"text-green-600":"text-red-600"}`,children:D.description.toLowerCase().includes("returned")?"Returned":`Rs ${D.amount.toFixed(2)}`}),D.amount===0&&D.description.toLowerCase().includes("returned")&&a.jsx("span",{className:"text-lg font-semibold text-green-600",children:"Returned"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(Gc,{size:14}),a.jsxs("span",{children:[D.date.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/\s/g,"-")," ",D.date.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]})]},D.id))})]}),$.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(jp,{size:20,className:"text-green-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-8800",children:"Payment History"})]}),a.jsx("div",{className:"space-y-3",children:$.map(D=>a.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:D.type==="partial"?"Partial Payment":"Full Settlement"}),(D.type==="partial"||D.amount>0)&&a.jsxs("span",{className:"text-lg font-semibold text-green-600",children:["-Rs ",D.amount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(Gc,{size:14}),a.jsxs("span",{children:[D.date.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/\s/g,"-")," at ",D.date.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]})]},D.id))})]})]}),a.jsx("div",{className:"p-6 border-t border-gray-200 flex justify-end",children:a.jsx("button",{onClick:e,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Close"})})]})});return a.jsxs(a.Fragment,{children:[Tt.createPortal(G,document.body),_&&a.jsx(Sj,{image:_,onComplete:B,onCancel:()=>C(null)}),j&&b&&Tt.createPortal(a.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[10000] overflow-hidden",onMouseDown:D=>{D.preventDefault(),U()},onTouchStart:D=>{D.preventDefault(),U()},onTouchMove:D=>{D.preventDefault()},onContextMenu:D=>(D.preventDefault(),D.stopPropagation(),!1),style:{backgroundColor:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none"},children:a.jsx("img",{src:b,alt:n.name,className:"max-w-full max-h-screen object-contain",style:{pointerEvents:"none",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",MozUserSelect:"none",msUserSelect:"none"},draggable:!1,onContextMenu:D=>(D.preventDefault(),D.stopPropagation(),!1),onTouchStart:D=>D.preventDefault(),onTouchEnd:D=>D.preventDefault()})}),document.body)]})},Cj=({itemType:n,quantity:e,client:t,showAlert:r,onUpdate:s})=>{const{addTransaction:i}=kr(),[o,l]=N.useState(!1),[c,u]=N.useState(0),[h,d]=N.useState(n),f=x=>{u(g=>Math.max(0,Math.min(e,g+x)))},p=async()=>{if(c!==0)try{l(!0);let x=`Returned: ${c} `;if(n.includes("Chopine")){const m=n.replace(/^(Chopines?)/i,"").trim();x+=`Chopine${c>1?"s":""}${m?` ${m}`:""}`}else if(n.includes("Caisse")){const m=n.replace(/^(Caisses?)/i,"").trim();x+=`Caisse${c>1?"s":""}${m?` ${m}`:""}`}else if(n.includes("Bouteille")){let m=n.replace(/^(Bouteilles?)/i,"").trim();if(c===1&&m.endsWith("s")&&!m.match(/^\d/)){const y=m.toLowerCase();["vins","bires","jus","sodas"].some(v=>y===v)&&(m=m.slice(0,-1))}x+=`Bouteille${c>1?"s":""}${m?` ${m}`:""}`}else x+=`${n}${c>1?"s":""}`;const g=`${x} - ${new Date().toLocaleDateString("en-GB")} ${new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}`;await i(t,g,0),u(0);let w=n;if(n.includes("Chopine")){const m=n.replace(/^(Chopines?)/i,"").trim();w=`Chopine${c>1?"s":""}${m?` ${m}`:""}`}else if(n.includes("Caisse")){const m=n.replace(/^(Caisses?)/i,"").trim();w=`Caisse${c>1?"s":""}${m?` ${m}`:""}`}else if(n.includes("Bouteille")){let m=n.replace(/^(Bouteilles?)/i,"").trim();if(c===1&&m.endsWith("s")&&!m.match(/^\d/)){const y=m.toLowerCase();["vins","bires","jus","sodas"].some(v=>y===v)&&(m=m.slice(0,-1))}w=`Bouteille${c>1?"s":""}${m?` ${m}`:""}`}else c>1&&(w=`${n}s`);d(w),window.dispatchEvent(new CustomEvent("showDuplicateCard",{detail:{...t,isAccountClear:!1,message:`${c} ${w} returned successfully!`,transactionDescription:`${g}`}}))}catch{r({type:"error",message:"Failed to process return"})}finally{l(!1)}};return a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-orange-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-orange-800",children:n}),a.jsxs("p",{className:"text-sm text-orange-600",children:["Available: ",e]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>f(-1),disabled:c===0,className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 rounded-full flex items-center justify-center transition-colors",children:a.jsx($o,{size:16})}),a.jsx("span",{className:"w-8 text-center font-medium",children:c}),a.jsx("button",{onClick:()=>f(1),disabled:c>=e,className:"w-8 h-8 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 text-white rounded-full flex items-center justify-center transition-colors",children:a.jsx(Bt,{size:16})})]})]}),c>0&&a.jsx("button",{onClick:p,disabled:o,className:"w-full px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-md transition-colors disabled:opacity-50 text-sm",children:o?"Processing...":`Return ${c} ${h}`})]})},Cv=({calculatorValue:n,onClose:e,onAddToClient:t,linkedClient:r,onResetCalculator:s,description:i="",onDescriptionChange:o})=>{const{addClient:l,searchClients:c}=kr(),{showAlert:u}=ji(),[h,d]=N.useState(""),[f,p]=N.useState(i),[x,g]=N.useState(!1),[w,m]=N.useState((r==null?void 0:r.name)||""),[y,b]=N.useState(!1),[v,_]=N.useState([]),[C,j]=N.useState(""),[k,E]=N.useState(""),M=N.useRef(!1);N.useEffect(()=>{i!==void 0&&i!==f&&p(i)},[i,f]);const A=L=>{p(L),o&&o(L)};Le.useEffect(()=>{const L=document.body.style.overflow,V=document.body.style.position,S=document.body.style.top,W=window.scrollY;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${W}px`,document.body.style.width="100%",M.current=!0,()=>{document.body.style.overflow=L,document.body.style.position=V,document.body.style.top=S,document.body.style.width="",window.scrollTo(0,W)}},[]);const $=()=>{A(""),_([]),j(""),E(""),d(""),g(!1),m((r==null?void 0:r.name)||""),M.current=!1,s&&s(),e()},O=()=>{j(""),E(""),d(""),g(!1),m((r==null?void 0:r.name)||""),e()};Le.useEffect(()=>{M.current||(p(i),_([]),j(""),E(""),d(""),g(!1),m((r==null?void 0:r.name)||""),M.current=!0)},[]);const T=c(h).sort((L,V)=>L.name.localeCompare(V.name)),I=L=>{if(!f.trim()){u({type:"warning",message:"Please enter a description for this transaction"});return}E("");try{t(L,f.trim())}catch(V){E(V instanceof Error?V.message:"Failed to add transaction")}};Le.useEffect(()=>{r&&f.trim()},[r,f]);const B=async()=>{if(!w.trim()){u({type:"warning",message:"Please enter a client name"});return}if(!f.trim()){u({type:"warning",message:"Please enter a description for this transaction"});return}E("");const L=parseFloat(n);if(isNaN(L)||!isFinite(L)||L<0){E("Invalid amount");return}try{const V=await l(w);t(V,f.trim())}catch(V){if(E(V instanceof Error?V.message:"Failed to add client"),V instanceof Error&&V.name==="DuplicateClientError"){m("");return}}finally{b(!1)}},H=L=>{console.log("Quick Action clicked:",L),_(S=>[...S,f]);let V;C?V=`${C} ${L}`:L==="Chopine"||L==="Bouteille"||L==="Caisse"||L.startsWith("Bouteille ")?V=`1 ${L}`:V=L,console.log("New item to add:",V),f.trim()===""?A(V+" "):A(S=>S+", "+V+" "),j("")},P=()=>{if(v.length>0){const L=v[v.length-1];A(L),_(V=>V.slice(0,-1))}},z=L=>{L==="clear"?(A(""),j(""),_([])):L==="number-backspace"?j(V=>V.slice(0,-1)):L==="backspace"?A(V=>{const S=V.split(", ");return S.length>1?S.slice(0,-1).join(", "):""}):j(V=>V+L)},U=a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[9999] select-none search-client-modal",style:{touchAction:"none",overscrollBehavior:"contain"},onClick:L=>{L.target===L.currentTarget&&O()},children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-lg flex flex-col select-none",style:{maxHeight:"90vh",touchAction:"auto",overscrollBehavior:"contain"},onClick:L=>L.stopPropagation(),children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 bg-yellow-200 select-none flex-shrink-0",children:[a.jsxs("div",{className:"select-none",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 select-none",children:r?`Add to ${r.name}`:"Add to Client"}),a.jsxs("p",{className:"text-gray-600 select-none",children:["Amount: Rs ",n]})]}),a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsx("button",{onClick:L=>{L.preventDefault(),L.stopPropagation(),O()},className:"flex-shrink-0 w-20 h-20 flex items-center justify-center text-white bg-green-600 hover:bg-green-700 rounded-full transition-colors shadow-xl border-4 border-yellow-400 z-50 select-none",style:{minWidth:"64px",minHeight:"64px"},title:"Back to Calculator",children:a.jsx(Ca,{size:36,strokeWidth:4})}),a.jsx("button",{onClick:L=>{L.preventDefault(),L.stopPropagation(),$()},className:"flex-shrink-0 w-20 h-20 flex items-center justify-center text-white bg-blue-600 hover:bg-blue-700 rounded-full transition-colors shadow-xl border-4 border-yellow-400 z-50 select-none",style:{minWidth:"64px",minHeight:"64px"},title:"Close and Reset",children:a.jsx($e,{size:36,strokeWidth:4})})]})]}),a.jsxs("div",{className:"overflow-y-auto flex-1 select-none p-6",children:[a.jsxs("div",{className:"mb-4 select-none",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 select-none",children:["Item Description ",C&&a.jsxs("span",{className:"text-blue-600 font-bold",children:["(",C,")"]})]}),a.jsx("div",{className:"flex gap-2 select-none",children:v.length>0&&a.jsx("button",{type:"button",onClick:P,className:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white rounded-md transition-colors select-none",children:"Undo"})})]}),a.jsx("input",{type:"text",value:f,onChange:L=>{let S=L.target.value.replace(/(^|\s|\/)\w/g,W=>W.toUpperCase());A(S)},placeholder:"Enter item or service description...",className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),k&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg select-none",children:a.jsx("p",{className:"text-red-600 text-sm select-none",children:k})}),a.jsxs("div",{className:"mb-4 select-none",children:[a.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200 select-none",children:[a.jsxs("div",{className:"grid grid-cols-6 gap-2 mb-2 select-none",children:[["1","2","3","4","5"].map(L=>a.jsx("button",{type:"button",onClick:()=>z(L),className:"px-3 py-2 bg-white hover:bg-gray-100 border border-gray-300 rounded font-medium transition-colors text-sm select-none",children:L},L)),a.jsx("button",{type:"button",onClick:()=>{if(C){const L=`${C} `;A(V=>V+L),j("")}},disabled:!C,className:"px-3 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white border border-green-500 rounded font-medium transition-colors text-sm select-none flex items-center justify-center check-arrow-button",title:C?`Insert ${C} `:"Enter a number first",children:a.jsx(av,{size:16})})]}),a.jsxs("div",{className:"grid grid-cols-6 gap-2 select-none",children:[["6","7","8","9","0"].map(L=>a.jsx("button",{type:"button",onClick:()=>z(L),className:"px-3 py-2 bg-white hover:bg-gray-100 border border-gray-300 rounded font-medium transition-colors text-sm select-none",children:L},L)),a.jsx("button",{type:"button",onClick:()=>z("number-backspace"),className:"px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white border border-orange-500 rounded font-medium transition-colors text-sm select-none",children:""})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 select-none",children:[a.jsx("button",{type:"button",onClick:()=>z("clear"),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors text-sm select-none",children:"Clear"}),a.jsx("button",{type:"button",onClick:()=>z("backspace"),className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors text-sm select-none",children:" Item"})]})]}),a.jsxs("div",{className:"mb-4 select-none",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 select-none",children:"Quick Actions"}),a.jsx("div",{className:"grid grid-cols-3 gap-2 mb-3 select-none",children:["Foodstuffs","Cig","Rum","Can","Soft Drinks","Cakes","Chopine","Bouteille","Caisse","Bouteille 1L","Bouteille 1.5L","Bouteille 2L","Juice Payment"].map(L=>a.jsx("button",{type:"button",onClick:()=>H(L),className:"px-3 py-2 text-sm bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-lg transition-colors select-none",children:L},L))})]}),x?a.jsxs("div",{className:"select-none",children:[a.jsxs("div",{className:"mb-4 select-none",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 select-none",children:"Client Name"}),a.jsx("input",{type:"text",value:w,onChange:L=>{const S=L.target.value.replace(/(^|\s)\w/g,W=>W.toUpperCase());m(S)},placeholder:"Enter client name...",className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 select-text"})]}),a.jsxs("div",{className:"flex gap-3 select-none",children:[a.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors select-none",children:"Back"}),a.jsx("button",{onClick:B,disabled:y||!w.trim()||!f.trim(),className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 select-none",children:y?"Adding...":"Add Client"})]})]}):a.jsxs(a.Fragment,{children:[!r&&a.jsxs("div",{className:"flex items-start gap-2 mb-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Au,{size:20,className:"text-gray-400"})}),a.jsx("input",{type:"text",value:h,onChange:L=>d(L.target.value),placeholder:"Search clients by name or ID...",className:"block w-full py-4 pl-10 pr-4 text-xl border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-500 focus:border-blue-500 shadow-sm search-client-input"})]}),h&&a.jsx("button",{onClick:L=>{L.preventDefault(),d("");const V=document.querySelector(".search-client-input");V&&V.blur()},className:"w-14 py-4 flex-shrink-0 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center shadow-lg border-2 border-red-600",children:a.jsx($e,{size:24})})]}),!r&&a.jsxs("button",{onClick:()=>{const L=document.querySelector(".search-client-input");L&&L.blur(),window.scrollTo({top:0,behavior:"smooth"}),g(!0)},className:"w-full flex items-center gap-3 p-3 bg-green-50 hover:bg-green-100 rounded-lg border border-green-200 transition-colors mb-4 select-none",children:[a.jsx("div",{className:"bg-green-500 p-2 rounded-full select-none",children:a.jsx(Bt,{size:16,className:"text-white"})}),a.jsx("span",{className:"font-medium text-gray-800 select-none",children:"Add New Client"})]}),r&&a.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg select-none",children:[a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsx("div",{className:"bg-blue-500 p-2 rounded-full select-none",children:a.jsx(Yc,{size:16,className:"text-white"})}),a.jsxs("div",{className:"select-none",children:[a.jsx("h4",{className:"font-medium text-gray-800 select-none",children:r.name}),a.jsxs("p",{className:"text-sm text-gray-600 select-none",children:["ID: ",r.id]})]})]}),a.jsxs("button",{onClick:()=>I(r),disabled:!f.trim(),className:"w-full mt-3 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed select-none",children:["Add to ",r.name]})]}),!r&&a.jsx("div",{className:"max-h-64 overflow-y-auto select-none",children:T.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500 select-none",children:h?"No clients found":"No clients available"}):a.jsx("div",{className:"space-y-2 select-none",children:T.map(L=>a.jsxs("button",{onClick:()=>{const V=document.querySelector(".search-client-input");V&&V.blur(),window.scrollTo({top:0,behavior:"smooth"}),I(L)},disabled:!f.trim(),className:"w-full flex items-center gap-3 p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-left disabled:opacity-50 disabled:cursor-not-allowed select-none",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-full select-none",children:a.jsx(Yc,{size:16,className:"text-blue-600"})}),a.jsxs("div",{className:"flex-1 select-none",children:[a.jsx("h4",{className:"font-medium text-gray-800 select-none",children:L.name}),a.jsxs("p",{className:"text-sm text-gray-500 select-none",children:["ID: ",L.id]})]}),a.jsx("div",{className:"text-right select-none",children:a.jsxs("p",{className:"text-sm text-red-600 font-medium select-none",children:["Rs ",L.totalDebt.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})})]},L.id))})})]})]})]})});return Tt.createPortal(U,document.body)},Nv=N.createContext(void 0),jv=()=>{const n=N.useContext(Nv);if(!n)throw new Error("useOver must be used within an OverProvider");return n},Fg=n=>n.trim().split(" ").filter(e=>e.length>0).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),Nj=({children:n})=>{const[e,t]=N.useState([]),[r,s]=N.useState(""),[i,o]=N.useState(!1),[l,c]=N.useState(null);N.useEffect(()=>{(async()=>{try{if(o(!0),c(null),ue)try{const{data:w,error:m}=await ue.from("over_items").select("*").order("created_at",{ascending:!1});if(m)throw m;const y=(w||[]).map(b=>({id:b.id,name:b.name,createdAt:new Date(b.created_at),isCompleted:b.is_completed||!1,completedAt:b.completed_at?new Date(b.completed_at):void 0}));t(y),await xe.initDB(),await xe.saveOverItems(y.map(b=>{var v;return{...b,createdAt:b.createdAt.toISOString(),completedAt:(v=b.completedAt)==null?void 0:v.toISOString()}}))}catch{await xe.initDB();const m=await xe.getOverItems();if(m&&m.length>0){const y=m.map(b=>({...b,createdAt:new Date(b.createdAt),completedAt:b.completedAt?new Date(b.completedAt):void 0}));t(y)}}else{await xe.initDB();const w=await xe.getOverItems();if(w&&w.length>0){const m=w.map(y=>({...y,createdAt:new Date(y.createdAt),completedAt:y.completedAt?new Date(y.completedAt):void 0}));t(m)}}}catch{c("Failed to load items")}finally{o(!1)}})()},[]),N.useEffect(()=>{let g=null;return(async()=>{if(ue)try{g=ue.channel("over_items_changes").on("postgres_changes",{event:"*",schema:"public",table:"over_items"},m=>{if(m.eventType==="INSERT"){const y={id:m.new.id,name:m.new.name,createdAt:new Date(m.new.created_at),isCompleted:m.new.is_completed||!1,completedAt:m.new.completed_at?new Date(m.new.completed_at):void 0};t(b=>{if(b.find(_=>_.id===y.id))return b;const v=[y,...b];return xe.saveOverItems(v.map(_=>{var C;return{..._,createdAt:_.createdAt.toISOString(),completedAt:(C=_.completedAt)==null?void 0:C.toISOString()}})),v})}else if(m.eventType==="UPDATE"){const y={id:m.new.id,name:m.new.name,createdAt:new Date(m.new.created_at),isCompleted:m.new.is_completed||!1,completedAt:m.new.completed_at?new Date(m.new.completed_at):void 0};t(b=>{const v=b.map(_=>_.id===y.id?y:_);return xe.saveOverItems(v.map(_=>{var C;return{..._,createdAt:_.createdAt.toISOString(),completedAt:(C=_.completedAt)==null?void 0:C.toISOString()}})),v})}else m.eventType==="DELETE"&&t(y=>{const b=y.filter(v=>v.id!==m.old.id);return xe.saveOverItems(b.map(v=>{var _;return{...v,createdAt:v.createdAt.toISOString(),completedAt:(_=v.completedAt)==null?void 0:_.toISOString()}})),b})}).subscribe(m=>{})}catch{}})(),()=>{g&&(ue==null||ue.removeChannel(g))}},[]);const x={items:e,addItem:async g=>{try{const w=Fg(g);if(!w||w.length===0)throw new Error("Item name is required");if(e.find(v=>v.name===w&&!v.isCompleted))throw new Error(`"${w}" is already in the list`);const y={id:crypto.randomUUID(),name:w,createdAt:new Date,isCompleted:!1},b=[y,...e];t(b);try{xe.saveOverItems(b.map(v=>{var _;return{...v,createdAt:v.createdAt.toISOString(),completedAt:(_=v.completedAt)==null?void 0:_.toISOString()}}))}catch{throw new Error("Failed to save item locally")}if(ue&&navigator.onLine)try{const{error:v}=await ue.from("over_items").insert({id:y.id,name:y.name,created_at:y.createdAt.toISOString(),is_completed:y.isCompleted});v&&console.warn("Cloud sync failed (saved locally):",v.message)}catch(v){console.warn("Network error (saved locally):",v instanceof Error?v.message:"Connection failed")}}catch(w){throw w instanceof Error?c(w.message):c("Unknown error occurred. Please try again."),w}},editItem:async(g,w)=>{try{const m=Fg(w);if(!m||m.length===0)throw new Error("Item name is required");if(!e.find(_=>_.id===g))throw new Error("Item not found");if(e.find(_=>_.id!==g&&_.name===m&&!_.isCompleted))throw new Error(`"${m}" already exists in the list`);const v=e.map(_=>_.id===g?{..._,name:m}:_);t(v);try{xe.saveOverItems(v.map(_=>{var C;return{..._,createdAt:_.createdAt.toISOString(),completedAt:(C=_.completedAt)==null?void 0:C.toISOString()}}))}catch{throw new Error("Failed to save changes locally")}if(ue&&navigator.onLine)try{const{error:_}=await ue.from("over_items").update({name:m}).eq("id",g);_&&console.warn("Cloud sync failed (saved locally):",_.message)}catch(_){console.warn("Network error (saved locally):",_ instanceof Error?_.message:"Connection failed")}}catch(m){throw m instanceof Error?c(m.message):c("Unknown error occurred. Please try again."),m}},toggleItem:async g=>{try{const w=e.find(v=>v.id===g);if(!w)return;const m=!w.isCompleted,y=m?new Date:void 0,b=e.map(v=>v.id===g?{...v,isCompleted:m,completedAt:y}:v);if(t(b),xe.saveOverItems(b.map(v=>{var _;return{...v,createdAt:v.createdAt.toISOString(),completedAt:(_=v.completedAt)==null?void 0:_.toISOString()}})),ue)try{const{error:v}=await ue.from("over_items").update({is_completed:m,completed_at:y==null?void 0:y.toISOString()}).eq("id",g);v&&console.warn(" Supabase update failed, but localStorage succeeded:",v)}catch(v){console.warn(" Supabase update failed, but localStorage succeeded:",v)}}catch(w){throw c("Failed to update item"),w}},deleteItem:async g=>{try{const w=e.filter(m=>m.id!==g);if(t(w),xe.saveOverItems(w.map(m=>{var y;return{...m,createdAt:m.createdAt.toISOString(),completedAt:(y=m.completedAt)==null?void 0:y.toISOString()}})),ue)try{const{error:m}=await ue.from("over_items").delete().eq("id",g);m&&console.warn(" Supabase delete failed, but localStorage succeeded:",m)}catch(m){console.warn(" Supabase delete failed, but localStorage succeeded:",m)}}catch(w){throw c("Failed to delete item"),w}},searchQuery:r,setSearchQuery:s,searchItems:g=>{if(!g.trim())return[...e].sort((y,b)=>y.isCompleted!==b.isCompleted?y.isCompleted?1:-1:b.createdAt.getTime()-y.createdAt.getTime());const w=g.toLowerCase();return e.filter(y=>y.name.toLowerCase().includes(w)).sort((y,b)=>y.isCompleted!==b.isCompleted?y.isCompleted?1:-1:b.createdAt.getTime()-y.createdAt.getTime())},isLoading:i,error:l};return a.jsx(Nv.Provider,{value:x,children:n})},kv=N.createContext(void 0),Du=()=>{const n=N.useContext(kv);if(!n)throw new Error("useOrder must be used within an OrderProvider");return n},Kl=n=>n.trim().split(" ").filter(e=>e.length>0).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),jj=({children:n})=>{const[e,t]=N.useState([]),[r,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!1),[u,h]=N.useState(null);N.useEffect(()=>{(async()=>{var E,M,A;try{if(c(!0),h(null),ue)try{let $,O;try{const B=await Promise.race([ue.from("order_categories").select("id").limit(1),new Promise((H,P)=>setTimeout(()=>P(new Error("Connection timeout")),5e3))]);$=B.data,O=B.error}catch(B){O=B}if(O)throw(E=O.message)!=null&&E.includes("timeout")||(M=O.message)!=null&&M.includes("fetch")||(A=O.message)!=null&&A.includes("Failed to fetch")?new Error("Unable to connect to database. Using offline mode."):O;const{data:T,error:I}=await ue.from("order_categories").select("id").limit(1);if(I&&I.code==="42P01")throw new Error("Database tables not found. Please apply migrations first.");if(I)throw I;try{const{data:B,error:H}=await ue.from("order_categories").select("*").order("created_at",{ascending:!1});if(H)throw H;const P=(B||[]).map(G=>({id:G.id,name:G.name,vatPercentage:G.vat_percentage||15,createdAt:new Date(G.created_at)})),{data:z,error:U}=await ue.from("order_item_templates").select("*").order("created_at",{ascending:!1});if(U)throw U;const L=(z||[]).map(G=>({id:G.id,categoryId:G.category_id,name:G.name,unitPrice:G.unit_price,isVatNil:G.is_vat_nil||!1,isVatIncluded:G.is_vat_included||!1,vatPercentage:G.vat_percentage||15,createdAt:new Date(G.created_at)})),{data:V,error:S}=await ue.from("orders").select(`
                  *,
                  order_items (*)
                `).order("created_at",{ascending:!1});if(S)throw S;const W=(V||[]).map(G=>({id:G.id,categoryId:G.category_id,orderDate:new Date(G.order_date),items:(G.order_items||[]).map(D=>({id:D.id,templateId:D.template_id,quantity:D.quantity,unitPrice:D.unit_price,isVatNil:D.is_vat_nil||!1,isVatIncluded:D.is_vat_included||!1,vatAmount:D.vat_amount||0,totalPrice:D.total_price,isAvailable:D.is_available!==!1})),totalCost:G.total_cost||0,createdAt:new Date(G.created_at),lastEditedAt:G.last_edited_at?new Date(G.last_edited_at):void 0}));t(P),s(L),o(W),xe.saveOrderCategories(P.map(G=>({...G,createdAt:G.createdAt.toISOString()}))),xe.saveOrderTemplates(L.map(G=>({...G,createdAt:G.createdAt.toISOString()}))),xe.saveOrders(W.map(G=>{var D;return{...G,orderDate:G.orderDate.toISOString(),createdAt:G.createdAt.toISOString(),lastEditedAt:(D=G.lastEditedAt)==null?void 0:D.toISOString()}}))}catch(B){throw B}}catch{h("Database tables not found. Using offline data only. Please apply migrations to enable online sync.");const O=await xe.initDB();JSON.stringify(await xe.getOrderCategories());const T=O?JSON.parse(O).map(z=>({...z,createdAt:new Date(z.createdAt)})):[],I=await xe.initDB();JSON.stringify(await xe.getOrderTemplates());const B=I?JSON.parse(I).map(z=>({...z,isVatIncluded:z.isVatIncluded||!1,createdAt:new Date(z.createdAt)})):[],H=await xe.initDB();JSON.stringify(await xe.getOrders());const P=H?JSON.parse(H).map(z=>({...z,orderDate:new Date(z.orderDate),createdAt:new Date(z.createdAt),lastEditedAt:z.lastEditedAt?new Date(z.lastEditedAt):void 0,items:(z.items||[]).map(U=>({...U,isVatIncluded:U.isVatIncluded||!1}))})):[];t(T),s(B),o(P)}else{console.log("Using localStorage for order data");const $=await xe.initDB();JSON.stringify(await xe.getOrderCategories());const O=$?JSON.parse($).map(P=>({...P,createdAt:new Date(P.createdAt)})):[],T=await xe.initDB();JSON.stringify(await xe.getOrderTemplates());const I=T?JSON.parse(T).map(P=>({...P,createdAt:new Date(P.createdAt)})):[],B=await xe.initDB();JSON.stringify(await xe.getOrders());const H=B?JSON.parse(B).map(P=>({...P,orderDate:new Date(P.orderDate),createdAt:new Date(P.createdAt),lastEditedAt:P.lastEditedAt?new Date(P.lastEditedAt):void 0,items:(P.items||[]).map(z=>({...z,isVatIncluded:z.isVatIncluded||!1}))})):[];t(O),s(I),o(H)}}catch{h("Failed to load order data. Please try again.")}finally{c(!1)}})()},[]);const j={categories:e,addCategory:async(k,E=15)=>{try{const M=Kl(k);if(e.find(O=>O.name.toLowerCase()===M.toLowerCase()))throw new Error(`Category "${M}" already exists`);const $={id:crypto.randomUUID(),name:M,vatPercentage:E,createdAt:new Date};if(ue){const{error:O}=await ue.from("order_categories").insert({id:$.id,name:$.name,vat_percentage:$.vatPercentage,created_at:$.createdAt.toISOString()});if(O)throw O;t(T=>[$,...T])}else{const O=[$,...e];t(O),xe.saveOrderCategories(O.map(T=>({...T,createdAt:T.createdAt.toISOString()})))}return $}catch(M){throw h(M instanceof Error?M.message:"Failed to add category"),M}},updateCategory:async(k,E,M)=>{try{const A=Kl(E);if(ue){const{error:$}=await ue.from("order_categories").update({name:A,vat_percentage:M}).eq("id",k);if($)throw $;t(O=>O.map(T=>T.id===k?{...T,name:A,vatPercentage:M}:T))}else{const $=e.map(O=>O.id===k?{...O,name:A,vatPercentage:M}:O);t($),xe.saveOrderCategories($.map(O=>({...O,createdAt:O.createdAt.toISOString()})))}}catch(A){throw h("Failed to update category"),A}},deleteCategory:async k=>{try{if(ue){const{error:E}=await ue.from("order_categories").delete().eq("id",k);if(E)throw E;t(M=>M.filter(A=>A.id!==k)),s(M=>M.filter(A=>A.categoryId!==k)),o(M=>M.filter(A=>A.categoryId!==k))}else{const E=e.filter($=>$.id!==k),M=r.filter($=>$.categoryId!==k),A=i.filter($=>$.categoryId!==k);t(E),s(M),o(A),xe.saveOrderCategories(E.map($=>({...$,createdAt:$.createdAt.toISOString()}))),xe.saveOrderTemplates(M.map($=>({...$,createdAt:$.createdAt.toISOString()}))),xe.saveOrders(A.map($=>{var O;return{...$,orderDate:$.orderDate.toISOString(),createdAt:$.createdAt.toISOString(),lastEditedAt:(O=$.lastEditedAt)==null?void 0:O.toISOString()}}))}}catch(E){throw h("Failed to delete category"),E}},itemTemplates:r,getItemTemplatesByCategory:k=>r.filter(E=>E.categoryId===k).sort((E,M)=>E.name.localeCompare(M.name)),addItemTemplate:async(k,E,M,A=!1,$=!1,O)=>{try{const T=Kl(E),I=e.find(z=>z.id===k),B=O||(I==null?void 0:I.vatPercentage)||15;if(r.find(z=>z.categoryId===k&&z.name.toLowerCase()===T.toLowerCase()))throw new Error(`Item "${T}" already exists in this category`);const P={id:crypto.randomUUID(),categoryId:k,name:T,unitPrice:M,isVatNil:A,isVatIncluded:$,vatPercentage:B,createdAt:new Date};if(ue){const{error:z}=await ue.from("order_item_templates").insert({id:P.id,category_id:P.categoryId,name:P.name,unit_price:P.unitPrice,is_vat_nil:P.isVatNil,is_vat_included:P.isVatIncluded,vat_percentage:P.vatPercentage,created_at:P.createdAt.toISOString()});if(z)throw z;s(U=>[P,...U])}else{const z=[P,...r];s(z),xe.saveOrderTemplates(z.map(U=>({...U,createdAt:U.createdAt.toISOString()})))}return P}catch(T){throw h(T instanceof Error?T.message:"Failed to add item template"),T}},updateItemTemplate:async(k,E,M,A,$,O)=>{try{const T=Kl(E);if(ue){const{error:I}=await ue.from("order_item_templates").update({name:T,unit_price:M,is_vat_nil:A===!0,is_vat_included:$===!0,vat_percentage:O??15}).eq("id",k);if(I)throw I;s(B=>B.map(H=>H.id===k?{...H,name:T,unitPrice:M,isVatNil:A===!0,isVatIncluded:$===!0,vatPercentage:O??15}:H))}else{const I=r.map(B=>B.id===k?{...B,name:T,unitPrice:M,isVatNil:A===!0,isVatIncluded:$===!0,vatPercentage:O??15}:B);s(I),xe.saveOrderTemplates(I.map(B=>({...B,isVatIncluded:B.isVatIncluded,createdAt:B.createdAt.toISOString()})))}}catch(T){throw h("Failed to update item template"),T}},deleteItemTemplate:async k=>{try{if(ue){const{error:E}=await ue.from("order_item_templates").delete().eq("id",k);if(E)throw E;s(A=>A.filter($=>$.id!==k));const M=i.map(A=>({...A,items:A.items.filter($=>$.templateId!==k),totalCost:A.items.filter($=>$.templateId!==k).filter($=>$.isAvailable).reduce(($,O)=>$+O.totalPrice,0)}));o(M)}else{s(A=>A.filter($=>$.id!==k));const E=i.map(A=>({...A,items:A.items.filter($=>$.templateId!==k),totalCost:A.items.filter($=>$.templateId!==k).filter($=>$.isAvailable).reduce(($,O)=>$+O.totalPrice,0)}));o(E);const M=r.filter(A=>A.id!==k);xe.saveOrderTemplates(M.map(A=>({...A,createdAt:A.createdAt.toISOString()}))),xe.saveOrders(E.map(A=>{var $;return{...A,orderDate:A.orderDate.toISOString(),createdAt:A.createdAt.toISOString(),lastEditedAt:($=A.lastEditedAt)==null?void 0:$.toISOString()}}))}}catch(E){throw h("Failed to delete item template"),E}},orders:i,getOrdersByCategory:k=>i.filter(E=>E.categoryId===k).sort((E,M)=>M.orderDate.getTime()-E.orderDate.getTime()),addOrder:async(k,E,M)=>{try{const A=e.find(B=>B.id===k);if(!A)throw new Error(`Category with ID "${k}" does not exist. Please refresh the page and try again.`);const $=E.toDateString();if(i.find(B=>B.categoryId===k&&B.orderDate.toDateString()===$)){const B=A.name,H=E.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});throw new Error(`An order for "${B}" already exists for ${H}. Please edit the existing order or choose a different date.`)}const T=M.filter(B=>B.isAvailable).reduce((B,H)=>B+H.totalPrice,0),I={id:crypto.randomUUID(),categoryId:k,orderDate:E,items:M,totalCost:T,createdAt:new Date};if(ue){const{error:B}=await ue.from("orders").insert({id:I.id,category_id:I.categoryId,order_date:I.orderDate.toISOString(),total_cost:I.totalCost,created_at:I.createdAt.toISOString()});if(B)throw B;if(M.length>0){const H=M.map(z=>({id:crypto.randomUUID(),order_id:I.id,template_id:z.templateId,quantity:z.quantity,unit_price:z.unitPrice,is_vat_nil:z.isVatNil,is_vat_included:z.isVatIncluded||!1,vat_amount:z.vatAmount,total_price:z.totalPrice,is_available:z.isAvailable})),{error:P}=await ue.from("order_items").insert(H);if(P)throw P}o(H=>[I,...H])}else{const B=[I,...i];o(B),xe.saveOrders(B.map(H=>{var P;return{...H,orderDate:H.orderDate.toISOString(),createdAt:H.createdAt.toISOString(),lastEditedAt:(P=H.lastEditedAt)==null?void 0:P.toISOString()}}))}return I}catch(A){throw h(A instanceof Error?A.message:"Failed to add order"),A}},updateOrder:async(k,E,M)=>{try{const A=M.filter(O=>O.isAvailable).reduce((O,T)=>O+T.totalPrice,0),$=new Date;if(ue){const{error:O}=await ue.from("orders").update({order_date:E.toISOString(),total_cost:A,last_edited_at:$.toISOString()}).eq("id",k);if(O)throw O;const{error:T}=await ue.from("order_items").delete().eq("order_id",k);if(T)throw T;if(M.length>0){const I=M.map(H=>({id:crypto.randomUUID(),order_id:k,template_id:H.templateId,quantity:H.quantity,unit_price:H.unitPrice,is_vat_nil:H.isVatNil,is_vat_included:H.isVatIncluded||!1,vat_amount:H.vatAmount,total_price:H.totalPrice,is_available:H.isAvailable})),{error:B}=await ue.from("order_items").insert(I);if(B)throw B}o(I=>I.map(B=>B.id===k?{...B,orderDate:E,items:M,totalCost:A,lastEditedAt:$}:B))}else{const O=i.map(T=>T.id===k?{...T,orderDate:E,items:M,totalCost:A,lastEditedAt:$}:T);o(O),xe.saveOrders(O.map(T=>{var I;return{...T,orderDate:T.orderDate.toISOString(),createdAt:T.createdAt.toISOString(),lastEditedAt:(I=T.lastEditedAt)==null?void 0:I.toISOString()}}))}}catch(A){throw h("Failed to update order"),A}},deleteOrder:async k=>{try{if(ue){const{error:E}=await ue.from("orders").delete().eq("id",k);if(E)throw E;o(M=>M.filter(A=>A.id!==k))}else{const E=i.filter(M=>M.id!==k);o(E),xe.saveOrders(E.map(M=>{var A;return{...M,orderDate:M.orderDate.toISOString(),createdAt:M.createdAt.toISOString(),lastEditedAt:(A=M.lastEditedAt)==null?void 0:A.toISOString()}}))}}catch(E){throw h("Failed to delete order"),E}},searchCategories:k=>{if(!k.trim())return e;const E=k.toLowerCase();return e.filter(M=>M.name.toLowerCase().includes(E))},isLoading:l,error:u};return a.jsx(kv.Provider,{value:j,children:n})};class Zi{static async saveToSupabase(e,t){if(!ue)throw new Error("Supabase not available");try{const r=JSON.stringify(e),s=new Blob([r]).size,i=new Date,o=i.toLocaleDateString("en-GB"),l=i.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),c={backup_data:e,backup_name:t||`Golden Store Backup ${o} ${l}`,file_size:s,created_at:i.toISOString()},{error:u}=await ue.from("database_backups").delete().neq("id","00000000-0000-0000-0000-000000000000");u&&console.warn("Warning: Could not clear old backups:",u);const{error:h}=await ue.from("database_backups").insert(c);if(h)throw new Error(`Failed to save backup to server: ${h.message}`);console.log(` Database backup saved to Supabase (${(s/1024).toFixed(1)} KB)`)}catch(r){throw console.error(" Supabase backup failed:",r),r}}static async loadFromSupabase(){if(!ue)throw new Error("Supabase not available");try{const{data:e,error:t,count:r}=await ue.from("database_backups").select("*",{count:"exact"}).order("created_at",{ascending:!1}).limit(1);if(t)throw console.warn("Supabase query error:",t),new Error(`Failed to load backup from server: ${t.message}`);if(!e||e.length===0)throw new Error('No backup found on server. Please create a backup first by using "Export Database"  "Server Backup".');const s=e[0];if(!s||!s.backup_data)throw new Error('No valid backup found on server. Please create a backup first by using "Export Database"  "Server Backup".');console.log(" Backup record retrieved:",{id:s.id,backup_name:s.backup_name,created_at:s.created_at,file_size:s.file_size,backup_data_type:typeof s.backup_data,backup_data_is_null:s.backup_data===null,backup_data_is_undefined:s.backup_data===void 0,backup_data_keys:s.backup_data?Object.keys(s.backup_data):"N/A"});let i;try{if(typeof s.backup_data=="string")i=JSON.parse(s.backup_data);else if(typeof s.backup_data=="object"&&s.backup_data!==null)i=s.backup_data;else throw new Error("Invalid backup data format");if(!i||typeof i!="object")throw new Error("Backup data is not a valid object");if(!i.version&&!i.appName&&!i.priceList&&!i.creditManagement)throw new Error("Backup data does not contain valid Golden Store data")}catch(o){throw new Error(`Failed to parse backup data: ${o instanceof Error?o.message:"Unknown parsing error"}`)}return console.log(` Database backup loaded from Supabase (${(s.file_size/1024).toFixed(1)} KB)`),i}catch(e){throw console.error(" Supabase backup load failed:",e),e}}static async hasBackupOnSupabase(){if(!ue)return!1;try{const{count:e,error:t}=await ue.from("database_backups").select("*",{count:"exact",head:!0});return t?(console.warn("Error checking backup existence:",t),!1):(e||0)>0}catch(e){return console.warn("Exception checking backup existence:",e),!1}}static async getBackupInfo(){if(!ue)return null;try{const{data:e,error:t}=await ue.from("database_backups").select("backup_name, created_at, file_size").order("created_at",{ascending:!1}).limit(1);if(t||!e||e.length===0)return null;const r=e[0],s=new Date(r.created_at),i=s.toLocaleDateString("en-GB"),o=s.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});return{name:"Supabase",date:`${i} ${o}`,size:r.file_size}}catch{return null}}}const ls=class ls{constructor(){this.schedule={hour:18,minute:0,enabled:!0},this.checkInterval=null,this.isRunning=!1,this.loadSettings(),this.startScheduler(),this.setupNetworkListeners()}static getInstance(){return ls.instance||(ls.instance=new ls),ls.instance}loadSettings(){try{const e=localStorage.getItem("autoBackupSettings");if(e){const t=JSON.parse(e);this.schedule={...this.schedule,...t}}}catch(e){console.warn("Failed to load backup settings:",e)}}saveSettings(){try{localStorage.setItem("autoBackupSettings",JSON.stringify(this.schedule))}catch(e){console.warn("Failed to save backup settings:",e)}}startScheduler(){this.checkInterval&&clearInterval(this.checkInterval),this.checkInterval=setInterval(()=>{this.checkForScheduledBackup()},6e4),setTimeout(()=>this.checkForScheduledBackup(),5e3)}async checkForScheduledBackup(){if(!this.schedule.enabled||this.isRunning)return;const e=new Date,t=e.getHours(),r=e.getMinutes();if(t===this.schedule.hour&&r===this.schedule.minute){const s=this.getLastBackupDate(),i=new Date().toDateString();(!s||s.toDateString()!==i)&&(console.log(" Scheduled backup time reached, starting automatic backup..."),await this.performAutomaticBackup())}}async performAutomaticBackup(){if(!this.isRunning){this.isRunning=!0;try{if(!navigator.onLine){console.log(" Offline - queuing backup for when connection is restored"),this.queueOfflineBackup();return}const e=this.collectAllData();if(!e||this.isDataEmpty(e)){console.log(" No data to backup, skipping automatic backup");return}const t=`Auto Backup ${new Date().toLocaleDateString("en-GB")} ${new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}`;await Zi.saveToSupabase(e,t),this.createLocalBackup(e),this.setLastBackupDate(new Date),this.clearOfflineBackupQueue(),this.clearLastError(),console.log(" Automatic backup completed successfully")}catch(e){console.error(" Automatic backup failed:",e),this.isNetworkError(e)&&this.queueOfflineBackup(),this.setLastError(e instanceof Error?e.message:"Unknown error")}finally{this.isRunning=!1}}}createLocalBackup(e){try{const t=JSON.stringify(e,null,2),r=new Blob([t],{type:"application/json"}),s=new Date,i=s.toLocaleDateString("en-GB").replace(/\//g,"-"),o=s.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}).replace(/:/g,"-"),l=`GoldenStore_${i}_${o}.json`,c=URL.createObjectURL(r),u=document.createElement("a");u.href=c,u.download=l,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(c),console.log(` Local backup created successfully: ${l}`)}catch(t){console.error(" Local backup creation failed:",t)}}collectAllData(){try{const e=localStorage.getItem("priceListItems"),t=localStorage.getItem("creditClients"),r=localStorage.getItem("creditTransactions"),s=localStorage.getItem("creditPayments"),i=localStorage.getItem("overItems"),o=localStorage.getItem("orderCategories"),l=localStorage.getItem("orderItemTemplates"),c=localStorage.getItem("orders");return{version:"2.0",appName:"Golden Store",exportDate:new Date().toISOString(),priceList:{items:e?JSON.parse(e):[]},creditManagement:{clients:t?JSON.parse(t):[],transactions:r?JSON.parse(r):[],payments:s?JSON.parse(s):[]},overManagement:{items:i?JSON.parse(i):[]},orderManagement:{categories:o?JSON.parse(o):[],itemTemplates:l?JSON.parse(l):[],orders:c?JSON.parse(c):[]}}}catch(e){return console.error("Error collecting data for backup:",e),null}}isDataEmpty(e){var r,s,i,o,l,c,u,h,d,f,p,x,g,w,m,y;return(((s=(r=e.priceList)==null?void 0:r.items)==null?void 0:s.length)||0)+(((o=(i=e.creditManagement)==null?void 0:i.clients)==null?void 0:o.length)||0)+(((c=(l=e.creditManagement)==null?void 0:l.transactions)==null?void 0:c.length)||0)+(((h=(u=e.creditManagement)==null?void 0:u.payments)==null?void 0:h.length)||0)+(((f=(d=e.overManagement)==null?void 0:d.items)==null?void 0:f.length)||0)+(((x=(p=e.orderManagement)==null?void 0:p.categories)==null?void 0:x.length)||0)+(((w=(g=e.orderManagement)==null?void 0:g.itemTemplates)==null?void 0:w.length)||0)+(((y=(m=e.orderManagement)==null?void 0:m.orders)==null?void 0:y.length)||0)===0}queueOfflineBackup(){const e=this.getPendingBackups(),t=new Date().toDateString();e.includes(t)||(e.push(t),localStorage.setItem("pendingBackups",JSON.stringify(e)),console.log(" Backup queued for when connection is restored"))}getPendingBackups(){try{const e=localStorage.getItem("pendingBackups");return e?JSON.parse(e):[]}catch{return[]}}clearOfflineBackupQueue(){localStorage.removeItem("pendingBackups")}setupNetworkListeners(){window.addEventListener("online",()=>{console.log(" Connection restored, checking for pending backups..."),setTimeout(()=>this.processPendingBackups(),2e3)})}async processPendingBackups(){if(this.isRunning)return;const e=this.getPendingBackups();if(e.length!==0){console.log(` Processing ${e.length} pending backup(s)...`);try{this.isRunning=!0;const t=this.collectAllData();if(!t||this.isDataEmpty(t)){console.log(" No data to backup, clearing pending queue"),this.clearOfflineBackupQueue();return}const r=`Delayed Backup ${new Date().toLocaleDateString("en-GB")} ${new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}`;await Zi.saveToSupabase(t,r),this.createLocalBackup(t),this.setLastBackupDate(new Date),this.clearOfflineBackupQueue(),console.log(" Pending backup completed successfully")}catch(t){console.error(" Pending backup failed:",t)}finally{this.isRunning=!1}}}isNetworkError(e){var r;const t=((r=e==null?void 0:e.message)==null?void 0:r.toLowerCase())||"";return t.includes("network")||t.includes("fetch")||t.includes("timeout")||t.includes("connection")}getLastBackupDate(){try{const e=localStorage.getItem("lastAutoBackup");return e?new Date(e):null}catch{return null}}setLastBackupDate(e){try{localStorage.setItem("lastAutoBackup",e.toISOString())}catch(t){console.warn("Failed to save last backup date:",t)}}getLastError(){try{return localStorage.getItem("lastBackupError")}catch{return null}}setLastError(e){try{localStorage.setItem("lastBackupError",e)}catch(t){console.warn("Failed to save backup error:",t)}}clearLastError(){try{localStorage.removeItem("lastBackupError")}catch(e){console.warn("Failed to clear backup error:",e)}}getLastManualBackupDate(){try{const e=localStorage.getItem("lastManualBackup");return e?new Date(e):null}catch{return null}}setLastManualBackupDate(e){try{localStorage.setItem("lastManualBackup",e.toISOString())}catch(t){console.warn("Failed to save last manual backup date:",t)}}getBackupStatus(){const e=this.getLastBackupDate(),t=this.getLastManualBackupDate(),r=this.getPendingBackups(),s=this.getLastError(),i=new Date,o=new Date;return o.setHours(this.schedule.hour,this.schedule.minute,0,0),o<=i&&o.setDate(o.getDate()+1),{lastBackup:e,lastManualBackup:t,nextScheduled:this.schedule.enabled?o:null,isEnabled:this.schedule.enabled,pendingBackups:r.length,lastError:s}}updateSchedule(e,t,r){this.schedule={hour:e,minute:t,enabled:r},this.saveSettings(),console.log(r?` Automatic backup scheduled for ${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")} daily`:" Automatic backup disabled")}async forceBackupNow(){console.log(" Forcing backup now..."),await this.performAutomaticBackup()}destroy(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),ls.instance=null}};ls.instance=null;let Wh=ls;const js=Wh.getInstance(),kj=({onClose:n})=>{const[e,t]=N.useState(18),[r,s]=N.useState(0),[i,o]=N.useState(!0),[l,c]=N.useState(!0),[u,h]=N.useState(!1),[d,f]=N.useState({isOpen:!1,type:"success",title:"",message:""});N.useEffect(()=>{const w=js.getBackupStatus();o(w.isEnabled);try{const m=localStorage.getItem("autoBackupSettings");if(m){const y=JSON.parse(m);t(y.hour||18),s(y.minute||0),o(y.enabled!==!1)}}catch(m){console.warn("Failed to load backup settings:",m)}},[]);const p=()=>{js.updateSchedule(e,r,i),f({isOpen:!0,type:"success",title:"Settings Saved",message:`Automatic backup ${i?"enabled":"disabled"}${i?` for ${e.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")} daily`:""}`})},x=async()=>{h(!0);try{await js.forceBackupNow(),f({isOpen:!0,type:"success",title:"Test Backup Successful",message:"Test backup completed successfully! Your data has been backed up to the server."})}catch(w){f({isOpen:!0,type:"error",title:"Test Backup Failed",message:`Test backup failed: ${w instanceof Error?w.message:"Unknown error"}

Please check your internet connection and try again.`})}finally{h(!1)}},g=()=>{f(w=>({...w,isOpen:!1})),n&&d.type==="success"&&d.title==="Settings Saved"&&n()};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:a.jsx(Dh,{size:20,className:"text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Automatic Backup"})]}),a.jsx("button",{onClick:()=>c(!l),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:l?"Expand settings":"Minimize settings",children:l?a.jsx(nN,{size:20}):a.jsx(rN,{size:20})})]}),a.jsxs("div",{className:`space-y-4 overflow-hidden transition-all duration-300 ease-in-out ${l?"max-h-0 opacity-0":"max-h-96 opacity-100"}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enable automatic daily backup"}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:i,onChange:w=>o(w.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${i?"bg-blue-500":"bg-gray-300"}`,children:a.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${i?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]})]}),i&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup time (24-hour format)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("select",{value:e,onChange:w=>t(parseInt(w.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Array.from({length:24},(w,m)=>a.jsx("option",{value:m,children:m.toString().padStart(2,"0")},m))}),a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("select",{value:r,onChange:w=>s(parseInt(w.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Array.from({length:60},(w,m)=>a.jsx("option",{value:m,children:m.toString().padStart(2,"0")},m))})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Daily backup at ",e.toString().padStart(2,"0"),":",r.toString().padStart(2,"0")]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-blue-700",children:a.jsx("strong",{children:"How it works:"})}),a.jsxs("ul",{className:"text-xs text-blue-600 mt-1 space-y-1 ml-4",children:[a.jsx("li",{children:" Automatically backs up all data to server daily"}),a.jsx("li",{children:" If offline, backup is queued until connection restored"}),a.jsx("li",{children:" Runs silently in background"}),a.jsx("li",{children:" Only backs up if there's actual data to save"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:p,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[a.jsx(pN,{size:16}),"Save Settings"]}),a.jsxs("button",{onClick:x,disabled:u,className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(yN,{size:16}),u?"Testing...":"Test Now"]})]})]})]}),d.isOpen&&Tt.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[9999] select-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md max-h-[90vh] overflow-hidden select-none",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 select-none",children:[a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsx("div",{className:`p-2 rounded-full select-none ${d.type==="success"?"bg-green-100":"bg-red-100"}`,children:d.type==="success"?a.jsx(Fr,{size:20,className:"text-green-600"}):a.jsx(jr,{size:20,className:"text-red-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 select-none",children:d.title})]}),a.jsx("button",{onClick:g,className:"text-gray-500 hover:text-gray-700 transition-colors select-none",children:a.jsx($e,{size:24})})]}),a.jsxs("div",{className:"p-6 select-none",children:[a.jsx("p",{className:"text-gray-700 whitespace-pre-line select-none",children:d.message}),a.jsx("div",{className:"flex justify-end mt-6 select-none",children:a.jsx("button",{onClick:g,className:`px-6 py-2 rounded-lg transition-colors select-none ${d.type==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"}`,children:"OK"})})]})]})}),document.body)]})},Ej=({isOpen:n,onClose:e})=>{const{items:t,importItems:r}=zo(),{clients:s,transactions:i,payments:o}=kr(),{items:l}=jv(),{categories:c,itemTemplates:u,orders:h}=Du(),[d,f]=N.useState(!1),[p,x]=N.useState({type:null,title:"",message:""}),[g,w]=N.useState(null);N.useState(null);const[m,y]=N.useState(null),[b,v]=N.useState(null);if(N.useEffect(()=>{const O=js.getBackupStatus();y(O.lastBackup),v(O.lastManualBackup)},[]),!n)return null;const _=()=>{const O=new Date;return O.getDate().toString().padStart(2,"0"),(O.getMonth()+1).toString().padStart(2,"0"),O.getFullYear(),{version:"2.0",appName:"Golden Store",exportDate:new Date().toISOString(),priceList:{items:t.map(I=>{var B;return{...I,createdAt:I.createdAt.toISOString(),lastEditedAt:(B=I.lastEditedAt)==null?void 0:B.toISOString()}})},creditManagement:{clients:s.map(I=>({...I,createdAt:I.createdAt.toISOString(),lastTransactionAt:I.lastTransactionAt.toISOString()})),transactions:i.map(I=>({...I,date:I.date.toISOString()})),payments:o.map(I=>({...I,date:I.date.toISOString()}))},overManagement:{items:l.map(I=>{var B;return{...I,createdAt:I.createdAt.toISOString(),completedAt:(B=I.completedAt)==null?void 0:B.toISOString()}})},orderManagement:{categories:c.map(I=>({...I,createdAt:I.createdAt.toISOString()})),itemTemplates:u.map(I=>({...I,createdAt:I.createdAt.toISOString()})),orders:h.map(I=>{var B;return{...I,orderDate:I.orderDate.toISOString(),createdAt:I.createdAt.toISOString(),lastEditedAt:(B=I.lastEditedAt)==null?void 0:B.toISOString()}})}}},C=()=>{const O=_();w(O),x({type:"storage-choice",title:"Choose Export Destination",message:"Where would you like to save your database backup?",onLocalChoice:()=>j(),onServerChoice:()=>k(),onCancel:()=>{x({type:null,title:"",message:""}),w(null)}})},j=()=>{try{f(!0);const O=new Date,T=O.getDate().toString().padStart(2,"0"),I=(O.getMonth()+1).toString().padStart(2,"0"),B=O.getFullYear(),H=`${T}-${I}-${B}`,P={version:"2.0",appName:"Golden Store",exportDate:new Date().toISOString(),priceList:{items:t.map(S=>{var W;return{...S,createdAt:S.createdAt.toISOString(),lastEditedAt:(W=S.lastEditedAt)==null?void 0:W.toISOString()}})},creditManagement:{clients:s.map(S=>({...S,createdAt:S.createdAt.toISOString(),lastTransactionAt:S.lastTransactionAt.toISOString()})),transactions:i.map(S=>({...S,date:S.date.toISOString()})),payments:o.map(S=>({...S,date:S.date.toISOString()}))},overManagement:{items:l.map(S=>{var W;return{...S,createdAt:S.createdAt.toISOString(),completedAt:(W=S.completedAt)==null?void 0:W.toISOString()}})},orderManagement:{categories:c.map(S=>({...S,createdAt:S.createdAt.toISOString()})),itemTemplates:u.map(S=>({...S,createdAt:S.createdAt.toISOString()})),orders:h.map(S=>{var W;return{...S,orderDate:S.orderDate.toISOString(),createdAt:S.createdAt.toISOString(),lastEditedAt:(W=S.lastEditedAt)==null?void 0:W.toISOString()}})}},z=JSON.stringify(P,null,2),U=new Blob([z],{type:"application/json"}),L=URL.createObjectURL(U),V=document.createElement("a");V.href=L,V.download=`GoldenStore_Complete_${H}.json`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(L),x({type:"success",title:"Local Export Successful",message:"Database exported to your device successfully!",onConfirm:()=>{x({type:null,title:"",message:""}),w(null),e()}})}catch{x({type:"error",title:"Local Export Failed",message:"Error exporting to local file. Please try again.",onConfirm:()=>x({type:null,title:"",message:""})})}finally{f(!1),w(null)}},k=async()=>{try{f(!0),x({type:null,title:"",message:""});const O=g||_(),T=`Golden Store Backup ${new Date().toLocaleDateString("en-GB")} ${new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}`;await Zi.saveToSupabase(O,T),js.setLastManualBackupDate(new Date),x({type:"success",title:"Server Backup Successful",message:`Database backed up to server successfully!

Your data is now safely stored in the cloud and can be accessed from any device.`,onConfirm:()=>{x({type:null,title:"",message:""}),w(null);const I=js.getBackupStatus();y(I.lastBackup),v(I.lastManualBackup),e()}})}catch(O){x({type:"error",title:"Server Backup Failed",message:`Error backing up to server: ${O instanceof Error?O.message:"Unknown error"}

Please check your internet connection and try again.`,onConfirm:()=>x({type:null,title:"",message:""})})}finally{f(!1),w(null)}},E=async O=>{var T,I,B,H,P,z,U,L;try{f(!0),x({type:null,title:"",message:""}),await Ee.initDB(),await xe.initDB(),(T=O.priceList)!=null&&T.items&&await xe.savePriceListItems(O.priceList.items),(I=O.creditManagement)!=null&&I.clients&&await Ee.saveAllClients(O.creditManagement.clients),(B=O.creditManagement)!=null&&B.transactions&&await Ee.saveAllTransactions(O.creditManagement.transactions),(H=O.creditManagement)!=null&&H.payments&&await Ee.saveAllPayments(O.creditManagement.payments),(P=O.overManagement)!=null&&P.items&&await xe.saveOverItems(O.overManagement.items),(z=O.orderManagement)!=null&&z.categories&&await xe.saveOrderCategories(O.orderManagement.categories),(U=O.orderManagement)!=null&&U.itemTemplates&&await xe.saveOrderTemplates(O.orderManagement.itemTemplates),(L=O.orderManagement)!=null&&L.orders&&await xe.saveOrders(O.orderManagement.orders),x({type:"success",title:"Import Successful",message:`Database imported successfully! All your data has been restored.

Please refresh the page to see all imported data.`,onConfirm:()=>{x({type:null,title:"",message:""}),window.location.reload(),e()}})}catch(V){x({type:"error",title:"Import Failed",message:`Error importing database: ${V instanceof Error?V.message:"Unknown error"}`,onConfirm:()=>x({type:null,title:"",message:""})})}finally{f(!1)}},M=()=>{x({type:"storage-choice",title:"Choose Import Source",message:"Where would you like to import your database from?",onLocalChoice:()=>A(),onServerChoice:()=>$(),onCancel:()=>x({type:null,title:"",message:""})})},A=()=>{const O=document.createElement("input");O.type="file",O.accept=".json",O.onchange=async T=>{var H;const I=(H=T.target.files)==null?void 0:H[0];if(!I)return;const B=new FileReader;B.onload=async P=>{var z,U,L,V,S,W,G,D,ne,ae,Se,ee,F,q,Y,K,Q,se,ie,ce,he,oe,ve,ke,_e,Xe,Wt,Tr,pr;try{f(!0),x({type:null,title:"",message:""});const Ct=(z=P.target)==null?void 0:z.result,Me=JSON.parse(Ct);if(!Me.version||!Me.priceList&&!Me.creditManagement&&!Me.overManagement&&!Me.orderManagement){x({type:"error",title:"Invalid File",message:"Invalid Golden Store database file format. Please select a valid backup file.",onConfirm:()=>x({type:null,title:"",message:""})});return}const zs=(((L=(U=Me.priceList)==null?void 0:U.items)==null?void 0:L.length)||0)+(((S=(V=Me.creditManagement)==null?void 0:V.clients)==null?void 0:S.length)||0)+(((G=(W=Me.creditManagement)==null?void 0:W.transactions)==null?void 0:G.length)||0)+(((ne=(D=Me.creditManagement)==null?void 0:D.payments)==null?void 0:ne.length)||0)+(((Se=(ae=Me.overManagement)==null?void 0:ae.items)==null?void 0:Se.length)||0)+(((F=(ee=Me.orderManagement)==null?void 0:ee.categories)==null?void 0:F.length)||0)+(((Y=(q=Me.orderManagement)==null?void 0:q.itemTemplates)==null?void 0:Y.length)||0)+(((Q=(K=Me.orderManagement)==null?void 0:K.orders)==null?void 0:Q.length)||0);x({type:"confirm",title:"Import from Local File",message:`This will import a complete Golden Store database with ${zs} total records across all modules:

 Price List: ${((ie=(se=Me.priceList)==null?void 0:se.items)==null?void 0:ie.length)||0} items
 Credit: ${((he=(ce=Me.creditManagement)==null?void 0:ce.clients)==null?void 0:he.length)||0} clients, ${((ve=(oe=Me.creditManagement)==null?void 0:oe.transactions)==null?void 0:ve.length)||0} transactions
 Over Items: ${((_e=(ke=Me.overManagement)==null?void 0:ke.items)==null?void 0:_e.length)||0} items
 Orders: ${((Wt=(Xe=Me.orderManagement)==null?void 0:Xe.categories)==null?void 0:Wt.length)||0} categories, ${((pr=(Tr=Me.orderManagement)==null?void 0:Tr.orders)==null?void 0:pr.length)||0} orders

This will REPLACE ALL your current data. This action cannot be undone.`,onConfirm:()=>E(Me),onCancel:()=>x({type:null,title:"",message:""})})}catch(Ct){console.error(" File processing failed:",Ct),x({type:"error",title:"Import Failed",message:`Error processing database file:

${Ct instanceof Error?Ct.message:"Unknown error"}

Please check the file format and try again.`,onConfirm:()=>x({type:null,title:"",message:""})})}finally{f(!1)}},B.readAsText(I)},O.click()},$=async()=>{var O,T,I,B,H,P,z,U,L,V,S,W,G,D,ne,ae,Se,ee,F,q,Y,K,Q,se,ie,ce,he,oe;try{if(f(!0),x({type:null,title:"",message:""}),!await Zi.hasBackupOnSupabase()){x({type:"error",title:"No Server Backup Found",message:"No backup found on the server. Please create a server backup first or import from a local file.",onConfirm:()=>x({type:null,title:"",message:""})});return}const ke=await Zi.getBackupInfo(),_e=await Zi.loadFromSupabase();if(!_e){x({type:"error",title:"No Server Backup Found",message:"No valid backup found on the server. Please create a server backup first or import from a local file.",onConfirm:()=>x({type:null,title:"",message:""})});return}const Xe=(((T=(O=_e.priceList)==null?void 0:O.items)==null?void 0:T.length)||0)+(((B=(I=_e.creditManagement)==null?void 0:I.clients)==null?void 0:B.length)||0)+(((P=(H=_e.creditManagement)==null?void 0:H.transactions)==null?void 0:P.length)||0)+(((U=(z=_e.creditManagement)==null?void 0:z.payments)==null?void 0:U.length)||0)+(((V=(L=_e.overManagement)==null?void 0:L.items)==null?void 0:V.length)||0)+(((W=(S=_e.orderManagement)==null?void 0:S.categories)==null?void 0:W.length)||0)+(((D=(G=_e.orderManagement)==null?void 0:G.itemTemplates)==null?void 0:D.length)||0)+(((ae=(ne=_e.orderManagement)==null?void 0:ne.orders)==null?void 0:ae.length)||0);x({type:"confirm",title:"Import from Server Backup",message:`Found server backup: ${(ke==null?void 0:ke.name)||"Supabase"}
Created: ${(ke==null?void 0:ke.date)||"Unknown"}

This will import ${Xe} total records across all modules:

 Price List: ${((ee=(Se=_e.priceList)==null?void 0:Se.items)==null?void 0:ee.length)||0} items
 Credit: ${((q=(F=_e.creditManagement)==null?void 0:F.clients)==null?void 0:q.length)||0} clients, ${((K=(Y=_e.creditManagement)==null?void 0:Y.transactions)==null?void 0:K.length)||0} transactions
 Over Items: ${((se=(Q=_e.overManagement)==null?void 0:Q.items)==null?void 0:se.length)||0} items
 Orders: ${((ce=(ie=_e.orderManagement)==null?void 0:ie.categories)==null?void 0:ce.length)||0} categories, ${((oe=(he=_e.orderManagement)==null?void 0:he.orders)==null?void 0:oe.length)||0} orders

This will REPLACE ALL your current data. This action cannot be undone.`,onConfirm:()=>E(_e),onCancel:()=>x({type:null,title:"",message:""})})}catch(ve){x({type:"error",title:"Server Import Failed",message:`Error loading from server: ${ve instanceof Error?ve.message:"Unknown error"}

Please check your internet connection and try again.`,onConfirm:()=>x({type:null,title:"",message:""})})}finally{f(!1)}};return Tt.createPortal(a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 select-none",style:{touchAction:"none",overscrollBehavior:"contain"},onClick:O=>{O.target===O.currentTarget&&e()},children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md max-h-[90vh] flex flex-col select-none",style:{touchAction:"auto",WebkitOverflowScrolling:"touch"},children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 select-none flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-full select-none",children:a.jsx(ia,{size:20,className:"text-blue-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 select-none",children:"Database Manager"})]}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors select-none",children:a.jsx($e,{size:24})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto flex-1 select-none",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pinch-zoom"},children:[a.jsx("p",{className:"text-sm text-gray-600 mb-6 select-none",children:"Manage your complete Golden Store database including Price List, Credit, Over Items, and Orders."}),a.jsxs("div",{className:"space-y-4 select-none",children:[a.jsxs("button",{onClick:C,disabled:d,className:"w-full flex items-center gap-4 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-200 transition-colors disabled:opacity-50 select-none",children:[a.jsx("div",{className:"bg-blue-500 p-2 rounded-full select-none",children:a.jsx(oN,{size:20,className:"text-white"})}),a.jsxs("div",{className:"text-left flex-1 select-none",children:[a.jsx("h4",{className:"font-medium text-gray-800 select-none",children:"Export Database"}),a.jsx("p",{className:"text-sm text-gray-600 select-none",children:"Save to local file or server backup"})]})]}),a.jsxs("button",{onClick:M,disabled:d,className:"w-full flex items-center gap-4 p-4 bg-green-50 hover:bg-green-100 rounded-lg border border-green-200 transition-colors disabled:opacity-50 select-none",children:[a.jsx("div",{className:"bg-green-500 p-2 rounded-full select-none",children:a.jsx(bN,{size:20,className:"text-white"})}),a.jsxs("div",{className:"text-left flex-1 select-none",children:[a.jsx("h4",{className:"font-medium text-gray-800 select-none",children:"Import Database"}),a.jsx("p",{className:"text-sm text-gray-600 select-none",children:"Load from local file or server backup"})]})]})]}),a.jsx(kj,{}),m&&a.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4 select-none",children:a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsx("div",{className:"bg-blue-500 p-2 rounded-full select-none",children:a.jsx(ia,{size:16,className:"text-white"})}),a.jsxs("div",{className:"select-none",children:[a.jsx("h4",{className:"font-medium text-blue-800 select-none",children:"Last Automatic Backup"}),a.jsxs("p",{className:"text-sm text-blue-700 select-none",children:[m.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/\s/g,"-")," at ",m.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]})]})}),b&&a.jsx("div",{className:"mt-4 bg-green-50 border border-green-200 rounded-lg p-4 select-none",children:a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsx("div",{className:"bg-green-500 p-2 rounded-full select-none",children:a.jsx(ia,{size:16,className:"text-white"})}),a.jsxs("div",{className:"select-none",children:[a.jsx("h4",{className:"font-medium text-green-800 select-none",children:"Last Manual Backup"}),a.jsxs("p",{className:"text-sm text-green-700 select-none",children:[b.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/\s/g,"-")," at ",b.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]})]})}),a.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4 select-none",children:a.jsxs("div",{className:"flex items-start gap-3 select-none",children:[a.jsx(jr,{size:20,className:"text-yellow-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"select-none",children:[a.jsx("h4",{className:"font-medium text-yellow-800 mb-1 select-none",children:"Important Notes"}),a.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1 select-none",children:[a.jsxs("li",{className:"select-none",children:[" ",a.jsx("strong",{children:"Local:"})," Downloads file to your device"]}),a.jsxs("li",{className:"select-none",children:[" ",a.jsx("strong",{children:"Server:"})," Saves to cloud (overwrites old backup)"]}),a.jsx("li",{className:"select-none",children:" Server backups can be accessed from any device"}),a.jsx("li",{className:"select-none",children:" Import will REPLACE all existing data"})]})]})]})}),d&&a.jsx("div",{className:"mt-4 text-center select-none",children:a.jsxs("div",{className:"inline-flex items-center gap-2 text-blue-600 select-none",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),a.jsx("span",{className:"select-none",children:"Processing..."})]})})]})]})}),p.type&&Tt.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[9999] select-none",children:a.jsx("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md max-h-[90vh] overflow-hidden select-none",children:p.type==="storage-choice"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 select-none",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 select-none",children:p.title}),a.jsx("button",{onClick:p.onCancel,className:"text-gray-500 hover:text-gray-700 transition-colors select-none",children:a.jsx($e,{size:24})})]}),a.jsxs("div",{className:"p-6 select-none",children:[a.jsx("p",{className:"text-gray-700 mb-6 select-none",children:p.message}),a.jsxs("div",{className:"space-y-3 select-none",children:[a.jsxs("button",{onClick:p.onLocalChoice,disabled:d,className:"w-full flex items-center gap-4 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-200 transition-colors disabled:opacity-50 select-none",children:[a.jsx("div",{className:"bg-blue-500 p-2 rounded-full select-none",children:a.jsx(lN,{size:20,className:"text-white"})}),a.jsxs("div",{className:"text-left flex-1 select-none",children:[a.jsx("h4",{className:"font-medium text-gray-800 select-none",children:"Local Device"}),a.jsx("p",{className:"text-sm text-gray-600 select-none",children:"Save/load from your device storage"})]})]}),a.jsxs("button",{onClick:p.onServerChoice,disabled:d,className:"w-full flex items-center gap-4 p-4 bg-green-50 hover:bg-green-100 rounded-lg border border-green-200 transition-colors disabled:opacity-50 select-none",children:[a.jsx("div",{className:"bg-green-500 p-2 rounded-full select-none",children:a.jsx(sN,{size:20,className:"text-white"})}),a.jsxs("div",{className:"text-left flex-1 select-none",children:[a.jsx("h4",{className:"font-medium text-gray-800 select-none",children:"Server Backup"}),a.jsx("p",{className:"text-sm text-gray-600 select-none",children:"Save/load from cloud server"})]})]})]}),d&&a.jsx("div",{className:"mt-4 text-center select-none",children:a.jsxs("div",{className:"inline-flex items-center gap-2 text-blue-600 select-none",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),a.jsx("span",{className:"select-none",children:"Processing..."})]})})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 select-none",children:a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsx("div",{className:`p-2 rounded-full select-none ${p.type==="success"?"bg-green-100":p.type==="error"?"bg-red-100":"bg-yellow-100"}`,children:p.type==="success"?a.jsx(ia,{size:20,className:"text-green-600"}):p.type==="error"?a.jsx($e,{size:20,className:"text-red-600"}):a.jsx(jr,{size:20,className:"text-yellow-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 select-none",children:p.title})]})}),a.jsxs("div",{className:"p-6 select-none",children:[a.jsx("p",{className:"text-gray-700 whitespace-pre-line select-none",children:p.message}),a.jsxs("div",{className:"flex gap-3 mt-6 select-none",children:[p.type==="confirm"&&p.onCancel&&a.jsx("button",{onClick:p.onCancel,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors select-none",children:"Cancel"}),a.jsx("button",{onClick:p.onConfirm,className:`${p.type==="confirm"?"flex-1":"w-full"} px-4 py-2 rounded-lg transition-colors select-none ${p.type==="success"?"bg-green-500 hover:bg-green-600 text-white":p.type==="error"?"bg-red-500 hover:bg-red-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:p.type==="confirm"?"Continue":"OK"})]})]})]})})}),document.body)]}),document.body)};function Mr(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ev(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var En={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},jo={duration:.5,overwrite:!1,delay:0},Ep,Ot,et,Hn=1e8,We=1/Hn,Hh=Math.PI*2,Tj=Hh/4,Aj=0,Tv=Math.sqrt,Pj=Math.cos,Dj=Math.sin,At=function(e){return typeof e=="string"},ut=function(e){return typeof e=="function"},Kr=function(e){return typeof e=="number"},Tp=function(e){return typeof e>"u"},Er=function(e){return typeof e=="object"},fn=function(e){return e!==!1},Ap=function(){return typeof window<"u"},Ql=function(e){return ut(e)||At(e)},Av=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ut=Array.isArray,qh=/(?:-?\.?\d|\.)+/gi,Pv=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,eo=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,md=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Dv=/[+-]=-?[.\d]+/,Ov=/[^,'"\[\]\s]+/gi,Oj=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,st,xr,Xh,Pp,An={},Kc={},Iv,Rv=function(e){return(Kc=ko(e,An))&&yn},Dp=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},el=function(e,t){return!t&&console.warn(e)},Mv=function(e,t){return e&&(An[e]=t)&&Kc&&(Kc[e]=t)||An},tl=function(){return 0},Ij={suppressEvents:!0,isStart:!0,kill:!1},mc={suppressEvents:!0,kill:!1},Rj={suppressEvents:!0},Op={},ks=[],Gh={},Lv,wn={},gd={},Bg=30,gc=[],Ip="",Rp=function(e){var t=e[0],r,s;if(Er(t)||ut(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(s=gc.length;s--&&!gc[s].targetTest(t););r=gc[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new ab(e[s],r)))||e.splice(s,1);return e},ui=function(e){return e._gsap||Rp(qn(e))[0]._gsap},$v=function(e,t,r){return(r=e[t])&&ut(r)?e[t]():Tp(r)&&e.getAttribute&&e.getAttribute(t)||r},pn=function(e,t){return(e=e.split(",")).forEach(t)||e},ft=function(e){return Math.round(e*1e5)/1e5||0},yt=function(e){return Math.round(e*1e7)/1e7||0},co=function(e,t){var r=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+s:r==="-"?e-s:r==="*"?e*s:e/s},Mj=function(e,t){for(var r=t.length,s=0;e.indexOf(t[s])<0&&++s<r;);return s<r},Qc=function(){var e=ks.length,t=ks.slice(0),r,s;for(Gh={},ks.length=0,r=0;r<e;r++)s=t[r],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},Mp=function(e){return!!(e._initted||e._startAt||e.add)},zv=function(e,t,r,s){ks.length&&!Ot&&Qc(),e.render(t,r,!!(Ot&&t<0&&Mp(e))),ks.length&&!Ot&&Qc()},Fv=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(Ov).length<2?t:At(e)?e.trim():e},Bv=function(e){return e},Pn=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},Lj=function(e){return function(t,r){for(var s in r)s in t||s==="duration"&&e||s==="ease"||(t[s]=r[s])}},ko=function(e,t){for(var r in t)e[r]=t[r];return e},Ug=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Er(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},Jc=function(e,t){var r={},s;for(s in e)s in t||(r[s]=e[s]);return r},Na=function(e){var t=e.parent||st,r=e.keyframes?Lj(Ut(e.keyframes)):Pn;if(fn(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},$j=function(e,t){for(var r=e.length,s=r===t.length;s&&r--&&e[r]===t[r];);return r<0},Uv=function(e,t,r,s,i){var o=e[s],l;if(i)for(l=t[i];o&&o[i]>l;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[s]=t,t._prev=o,t.parent=t._dp=e,t},Ou=function(e,t,r,s){r===void 0&&(r="_first"),s===void 0&&(s="_last");var i=t._prev,o=t._next;i?i._next=o:e[r]===t&&(e[r]=o),o?o._prev=i:e[s]===t&&(e[s]=i),t._next=t._prev=t.parent=null},Ds=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},di=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},zj=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Yh=function(e,t,r,s){return e._startAt&&(Ot?e._startAt.revert(mc):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},Fj=function n(e){return!e||e._ts&&n(e.parent)},Vg=function(e){return e._repeat?Eo(e._tTime,e=e.duration()+e._rDelay)*e:0},Eo=function(e,t){var r=Math.floor(e=yt(e/t));return e&&r===e?r-1:r},Zc=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Iu=function(e){return e._end=yt(e._start+(e._tDur/Math.abs(e._ts||e._rts||We)||0))},Ru=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=yt(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Iu(e),r._dirty||di(r,e)),e},Vv=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=Zc(e.rawTime(),t),(!t._dur||xl(0,t.totalDuration(),r)-t._tTime>We)&&t.render(r,!0)),di(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-We}},_r=function(e,t,r,s){return t.parent&&Ds(t),t._start=yt((Kr(r)?r:r||e!==st?Bn(e,r,t):e._time)+t._delay),t._end=yt(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Uv(e,t,"_first","_last",e._sort?"_start":0),Kh(t)||(e._recent=t),s||Vv(e,t),e._ts<0&&Ru(e,e._tTime),e},Wv=function(e,t){return(An.ScrollTrigger||Dp("scrollTrigger",t))&&An.ScrollTrigger.create(t,e)},Hv=function(e,t,r,s,i){if($p(e,t,i),!e._initted)return 1;if(!r&&e._pt&&!Ot&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Lv!==_n.frame)return ks.push(e),e._lazy=[i,s],1},Bj=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},Kh=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Uj=function(e,t,r,s){var i=e.ratio,o=t<0||!t&&(!e._start&&Bj(e)&&!(!e._initted&&Kh(e))||(e._ts<0||e._dp._ts<0)&&!Kh(e))?0:1,l=e._rDelay,c=0,u,h,d;if(l&&e._repeat&&(c=xl(0,e._tDur,t),h=Eo(c,l),e._yoyo&&h&1&&(o=1-o),h!==Eo(e._tTime,l)&&(i=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==i||Ot||s||e._zTime===We||!t&&e._zTime){if(!e._initted&&Hv(e,t,s,r,c))return;for(d=e._zTime,e._zTime=t||(r?We:0),r||(r=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,u=e._pt;u;)u.r(o,u.d),u=u._next;t<0&&Yh(e,t,r,!0),e._onUpdate&&!r&&Nn(e,"onUpdate"),c&&e._repeat&&!r&&e.parent&&Nn(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Ds(e,1),!r&&!Ot&&(Nn(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Vj=function(e,t,r){var s;if(r>t)for(s=e._first;s&&s._start<=r;){if(s.data==="isPause"&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=r;){if(s.data==="isPause"&&s._start<t)return s;s=s._prev}},To=function(e,t,r,s){var i=e._repeat,o=yt(t)||0,l=e._tTime/e._tDur;return l&&!s&&(e._time*=o/e._dur),e._dur=o,e._tDur=i?i<0?1e10:yt(o*(i+1)+e._rDelay*i):o,l>0&&!s&&Ru(e,e._tTime=e._tDur*l),e.parent&&Iu(e),r||di(e.parent,e),e},Wg=function(e){return e instanceof Yt?di(e):To(e,e._dur)},Wj={_start:0,endTime:tl,totalDuration:tl},Bn=function n(e,t,r){var s=e.labels,i=e._recent||Wj,o=e.duration()>=Hn?i.endTime(!1):e._dur,l,c,u;return At(t)&&(isNaN(t)||t in s)?(c=t.charAt(0),u=t.substr(-1)==="%",l=t.indexOf("="),c==="<"||c===">"?(l>=0&&(t=t.replace(/=/,"")),(c==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(l<0?i:r).totalDuration()/100:1)):l<0?(t in s||(s[t]=o),s[t]):(c=parseFloat(t.charAt(l-1)+t.substr(l+1)),u&&r&&(c=c/100*(Ut(r)?r[0]:r).totalDuration()),l>1?n(e,t.substr(0,l-1),r)+c:o+c)):t==null?o:+t},ja=function(e,t,r){var s=Kr(t[1]),i=(s?2:1)+(e<2?0:1),o=t[i],l,c;if(s&&(o.duration=t[1]),o.parent=r,e){for(l=o,c=r;c&&!("immediateRender"in l);)l=c.vars.defaults||{},c=fn(c.vars.inherit)&&c.parent;o.immediateRender=fn(l.immediateRender),e<2?o.runBackwards=1:o.startAt=t[i-1]}return new gt(t[0],o,t[i+1])},$s=function(e,t){return e||e===0?t(e):t},xl=function(e,t,r){return r<e?e:r>t?t:r},Ft=function(e,t){return!At(e)||!(t=Oj.exec(e))?"":t[1]},Hj=function(e,t,r){return $s(r,function(s){return xl(e,t,s)})},Qh=[].slice,qv=function(e,t){return e&&Er(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Er(e[0]))&&!e.nodeType&&e!==xr},qj=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(s){var i;return At(s)&&!t||qv(s,1)?(i=r).push.apply(i,qn(s)):r.push(s)})||r},qn=function(e,t,r){return et&&!t&&et.selector?et.selector(e):At(e)&&!r&&(Xh||!Ao())?Qh.call((t||Pp).querySelectorAll(e),0):Ut(e)?qj(e,r):qv(e)?Qh.call(e,0):e?[e]:[]},Jh=function(e){return e=qn(e)[0]||el("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return qn(t,r.querySelectorAll?r:r===e?el("Invalid scope")||Pp.createElement("div"):e)}},Xv=function(e){return e.sort(function(){return .5-Math.random()})},Gv=function(e){if(ut(e))return e;var t=Er(e)?e:{each:e},r=hi(t.ease),s=t.from||0,i=parseFloat(t.base)||0,o={},l=s>0&&s<1,c=isNaN(s)||l,u=t.axis,h=s,d=s;return At(s)?h=d={center:.5,edges:.5,end:1}[s]||0:!l&&c&&(h=s[0],d=s[1]),function(f,p,x){var g=(x||t).length,w=o[g],m,y,b,v,_,C,j,k,E;if(!w){if(E=t.grid==="auto"?0:(t.grid||[1,Hn])[1],!E){for(j=-Hn;j<(j=x[E++].getBoundingClientRect().left)&&E<g;);E<g&&E--}for(w=o[g]=[],m=c?Math.min(E,g)*h-.5:s%E,y=E===Hn?0:c?g*d/E-.5:s/E|0,j=0,k=Hn,C=0;C<g;C++)b=C%E-m,v=y-(C/E|0),w[C]=_=u?Math.abs(u==="y"?v:b):Tv(b*b+v*v),_>j&&(j=_),_<k&&(k=_);s==="random"&&Xv(w),w.max=j-k,w.min=k,w.v=g=(parseFloat(t.amount)||parseFloat(t.each)*(E>g?g-1:u?u==="y"?g/E:E:Math.max(E,g/E))||0)*(s==="edges"?-1:1),w.b=g<0?i-g:i,w.u=Ft(t.amount||t.each)||0,r=r&&g<0?sb(r):r}return g=(w[f]-w.min)/w.max||0,yt(w.b+(r?r(g):g)*w.v)+w.u}},Zh=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var s=yt(Math.round(parseFloat(r)/e)*e*t);return(s-s%1)/t+(Kr(r)?0:Ft(r))}},Yv=function(e,t){var r=Ut(e),s,i;return!r&&Er(e)&&(s=r=e.radius||Hn,e.values?(e=qn(e.values),(i=!Kr(e[0]))&&(s*=s)):e=Zh(e.increment)),$s(t,r?ut(e)?function(o){return i=e(o),Math.abs(i-o)<=s?i:o}:function(o){for(var l=parseFloat(i?o.x:o),c=parseFloat(i?o.y:0),u=Hn,h=0,d=e.length,f,p;d--;)i?(f=e[d].x-l,p=e[d].y-c,f=f*f+p*p):f=Math.abs(e[d]-l),f<u&&(u=f,h=d);return h=!s||u<=s?e[h]:o,i||h===o||Kr(o)?h:h+Ft(o)}:Zh(e))},Kv=function(e,t,r,s){return $s(Ut(e)?!t:r===!0?!!(r=0):!s,function(){return Ut(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(s=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*s)/s})},Xj=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return t.reduce(function(i,o){return o(i)},s)}},Gj=function(e,t){return function(r){return e(parseFloat(r))+(t||Ft(r))}},Yj=function(e,t,r){return Jv(e,t,0,1,r)},Qv=function(e,t,r){return $s(r,function(s){return e[~~t(s)]})},Kj=function n(e,t,r){var s=t-e;return Ut(e)?Qv(e,n(0,e.length),t):$s(r,function(i){return(s+(i-e)%s)%s+e})},Qj=function n(e,t,r){var s=t-e,i=s*2;return Ut(e)?Qv(e,n(0,e.length-1),t):$s(r,function(o){return o=(i+(o-e)%i)%i||0,e+(o>s?i-o:o)})},nl=function(e){for(var t=0,r="",s,i,o,l;~(s=e.indexOf("random(",t));)o=e.indexOf(")",s),l=e.charAt(s+7)==="[",i=e.substr(s+7,o-s-7).match(l?Ov:qh),r+=e.substr(t,s-t)+Kv(l?i:+i[0],l?0:+i[1],+i[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},Jv=function(e,t,r,s,i){var o=t-e,l=s-r;return $s(i,function(c){return r+((c-e)/o*l||0)})},Jj=function n(e,t,r,s){var i=isNaN(e+t)?0:function(p){return(1-p)*e+p*t};if(!i){var o=At(e),l={},c,u,h,d,f;if(r===!0&&(s=1)&&(r=null),o)e={p:e},t={p:t};else if(Ut(e)&&!Ut(t)){for(h=[],d=e.length,f=d-2,u=1;u<d;u++)h.push(n(e[u-1],e[u]));d--,i=function(x){x*=d;var g=Math.min(f,~~x);return h[g](x-g)},r=t}else s||(e=ko(Ut(e)?[]:{},e));if(!h){for(c in t)Lp.call(l,e,c,"get",t[c]);i=function(x){return Bp(x,l)||(o?e.p:e)}}}return $s(r,i)},Hg=function(e,t,r){var s=e.labels,i=Hn,o,l,c;for(o in s)l=s[o]-t,l<0==!!r&&l&&i>(l=Math.abs(l))&&(c=o,i=l);return c},Nn=function(e,t,r){var s=e.vars,i=s[t],o=et,l=e._ctx,c,u,h;if(i)return c=s[t+"Params"],u=s.callbackScope||e,r&&ks.length&&Qc(),l&&(et=l),h=c?i.apply(u,c):i.call(u),et=o,h},oa=function(e){return Ds(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ot),e.progress()<1&&Nn(e,"onInterrupt"),e},to,Zv=[],eb=function(e){if(e)if(e=!e.name&&e.default||e,Ap()||e.headless){var t=e.name,r=ut(e),s=t&&!r&&e.init?function(){this._props=[]}:e,i={init:tl,render:Bp,add:Lp,kill:pk,modifier:fk,rawVars:0},o={targetTest:0,get:0,getSetter:Fp,aliases:{},register:0};if(Ao(),e!==s){if(wn[t])return;Pn(s,Pn(Jc(e,i),o)),ko(s.prototype,ko(i,Jc(e,o))),wn[s.prop=t]=s,e.targetTest&&(gc.push(s),Op[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Mv(t,s),e.register&&e.register(yn,s,mn)}else Zv.push(e)},Ue=255,aa={aqua:[0,Ue,Ue],lime:[0,Ue,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ue],navy:[0,0,128],white:[Ue,Ue,Ue],olive:[128,128,0],yellow:[Ue,Ue,0],orange:[Ue,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ue,0,0],pink:[Ue,192,203],cyan:[0,Ue,Ue],transparent:[Ue,Ue,Ue,0]},yd=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*Ue+.5|0},tb=function(e,t,r){var s=e?Kr(e)?[e>>16,e>>8&Ue,e&Ue]:0:aa.black,i,o,l,c,u,h,d,f,p,x;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),aa[e])s=aa[e];else if(e.charAt(0)==="#"){if(e.length<6&&(i=e.charAt(1),o=e.charAt(2),l=e.charAt(3),e="#"+i+i+o+o+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&Ue,s&Ue,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&Ue,e&Ue]}else if(e.substr(0,3)==="hsl"){if(s=x=e.match(qh),!t)c=+s[0]%360/360,u=+s[1]/100,h=+s[2]/100,o=h<=.5?h*(u+1):h+u-h*u,i=h*2-o,s.length>3&&(s[3]*=1),s[0]=yd(c+1/3,i,o),s[1]=yd(c,i,o),s[2]=yd(c-1/3,i,o);else if(~e.indexOf("="))return s=e.match(Pv),r&&s.length<4&&(s[3]=1),s}else s=e.match(qh)||aa.transparent;s=s.map(Number)}return t&&!x&&(i=s[0]/Ue,o=s[1]/Ue,l=s[2]/Ue,d=Math.max(i,o,l),f=Math.min(i,o,l),h=(d+f)/2,d===f?c=u=0:(p=d-f,u=h>.5?p/(2-d-f):p/(d+f),c=d===i?(o-l)/p+(o<l?6:0):d===o?(l-i)/p+2:(i-o)/p+4,c*=60),s[0]=~~(c+.5),s[1]=~~(u*100+.5),s[2]=~~(h*100+.5)),r&&s.length<4&&(s[3]=1),s},nb=function(e){var t=[],r=[],s=-1;return e.split(Es).forEach(function(i){var o=i.match(eo)||[];t.push.apply(t,o),r.push(s+=o.length+1)}),t.c=r,t},qg=function(e,t,r){var s="",i=(e+s).match(Es),o=t?"hsla(":"rgba(",l=0,c,u,h,d;if(!i)return e;if(i=i.map(function(f){return(f=tb(f,t,1))&&o+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),r&&(h=nb(e),c=r.c,c.join(s)!==h.c.join(s)))for(u=e.replace(Es,"1").split(eo),d=u.length-1;l<d;l++)s+=u[l]+(~c.indexOf(l)?i.shift()||o+"0,0,0,0)":(h.length?h:i.length?i:r).shift());if(!u)for(u=e.split(Es),d=u.length-1;l<d;l++)s+=u[l]+i[l];return s+u[d]},Es=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in aa)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),Zj=/hsl[a]?\(/,rb=function(e){var t=e.join(" "),r;if(Es.lastIndex=0,Es.test(t))return r=Zj.test(t),e[1]=qg(e[1],r),e[0]=qg(e[0],r,nb(e[1])),!0},rl,_n=function(){var n=Date.now,e=500,t=33,r=n(),s=r,i=1e3/240,o=i,l=[],c,u,h,d,f,p,x=function g(w){var m=n()-s,y=w===!0,b,v,_,C;if((m>e||m<0)&&(r+=m-t),s+=m,_=s-r,b=_-o,(b>0||y)&&(C=++d.frame,f=_-d.time*1e3,d.time=_=_/1e3,o+=b+(b>=i?4:i-b),v=1),y||(c=u(g)),v)for(p=0;p<l.length;p++)l[p](_,f,C,w)};return d={time:0,frame:0,tick:function(){x(!0)},deltaRatio:function(w){return f/(1e3/(w||60))},wake:function(){Iv&&(!Xh&&Ap()&&(xr=Xh=window,Pp=xr.document||{},An.gsap=yn,(xr.gsapVersions||(xr.gsapVersions=[])).push(yn.version),Rv(Kc||xr.GreenSockGlobals||!xr.gsap&&xr||{}),Zv.forEach(eb)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&d.sleep(),u=h||function(w){return setTimeout(w,o-d.time*1e3+1|0)},rl=1,x(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(c),rl=0,u=tl},lagSmoothing:function(w,m){e=w||1/0,t=Math.min(m||33,e)},fps:function(w){i=1e3/(w||240),o=d.time*1e3+i},add:function(w,m,y){var b=m?function(v,_,C,j){w(v,_,C,j),d.remove(b)}:w;return d.remove(w),l[y?"unshift":"push"](b),Ao(),b},remove:function(w,m){~(m=l.indexOf(w))&&l.splice(m,1)&&p>=m&&p--},_listeners:l},d}(),Ao=function(){return!rl&&_n.wake()},De={},ek=/^[\d.\-M][\d.\-,\s]/,tk=/["']/g,nk=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),s=r[0],i=1,o=r.length,l,c,u;i<o;i++)c=r[i],l=i!==o-1?c.lastIndexOf(","):c.length,u=c.substr(0,l),t[s]=isNaN(u)?u.replace(tk,"").trim():+u,s=c.substr(l+1).trim();return t},rk=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<r?e.indexOf(")",r+1):r)},sk=function(e){var t=(e+"").split("("),r=De[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[nk(t[1])]:rk(e).split(",").map(Fv)):De._CE&&ek.test(e)?De._CE("",e):r},sb=function(e){return function(t){return 1-e(1-t)}},ib=function n(e,t){for(var r=e._first,s;r;)r instanceof Yt?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(s=r._ease,r._ease=r._yEase,r._yEase=s,r._yoyo=t)),r=r._next},hi=function(e,t){return e&&(ut(e)?e:De[e]||sk(e))||t},ki=function(e,t,r,s){r===void 0&&(r=function(c){return 1-t(1-c)}),s===void 0&&(s=function(c){return c<.5?t(c*2)/2:1-t((1-c)*2)/2});var i={easeIn:t,easeOut:r,easeInOut:s},o;return pn(e,function(l){De[l]=An[l]=i,De[o=l.toLowerCase()]=r;for(var c in i)De[o+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=De[l+"."+c]=i[c]}),i},ob=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},xd=function n(e,t,r){var s=t>=1?t:1,i=(r||(e?.3:.45))/(t<1?t:1),o=i/Hh*(Math.asin(1/s)||0),l=function(h){return h===1?1:s*Math.pow(2,-10*h)*Dj((h-o)*i)+1},c=e==="out"?l:e==="in"?function(u){return 1-l(1-u)}:ob(l);return i=Hh/i,c.config=function(u,h){return n(e,u,h)},c},vd=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},s=e==="out"?r:e==="in"?function(i){return 1-r(1-i)}:ob(r);return s.config=function(i){return n(e,i)},s};pn("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;ki(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});De.Linear.easeNone=De.none=De.Linear.easeIn;ki("Elastic",xd("in"),xd("out"),xd());(function(n,e){var t=1/e,r=2*t,s=2.5*t,i=function(l){return l<t?n*l*l:l<r?n*Math.pow(l-1.5/e,2)+.75:l<s?n*(l-=2.25/e)*l+.9375:n*Math.pow(l-2.625/e,2)+.984375};ki("Bounce",function(o){return 1-i(1-o)},i)})(7.5625,2.75);ki("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});ki("Circ",function(n){return-(Tv(1-n*n)-1)});ki("Sine",function(n){return n===1?1:-Pj(n*Tj)+1});ki("Back",vd("in"),vd("out"),vd());De.SteppedEase=De.steps=An.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,s=e+(t?0:1),i=t?1:0,o=1-We;return function(l){return((s*xl(0,o,l)|0)+i)*r}}};jo.ease=De["quad.out"];pn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return Ip+=n+","+n+"Params,"});var ab=function(e,t){this.id=Aj++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:$v,this.set=t?t.getSetter:Fp},sl=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,To(this,+t.duration,1,1),this.data=t.data,et&&(this._ctx=et,et.data.push(this)),rl||_n.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,To(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,s){if(Ao(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Ru(this,r),!i._dp||i.parent||Vv(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&_r(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===We||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),zv(this,r,s)),this},e.time=function(r,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+Vg(this))%(this._dur+this._rDelay)||(r?this._dur:0),s):this._time},e.totalProgress=function(r,s){return arguments.length?this.totalTime(this.totalDuration()*r,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+Vg(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,s){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*i,s):this._repeat?Eo(this._tTime,i)+1:1},e.timeScale=function(r,s){if(!arguments.length)return this._rts===-We?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?Zc(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-We?0:this._rts,this.totalTime(xl(-Math.abs(this._delay),this.totalDuration(),i),s!==!1),Iu(this),zj(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ao(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==We&&(this._tTime-=We)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&_r(s,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(fn(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var s=this.parent||this._dp;return s?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Zc(s.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=Rj);var s=Ot;return Ot=r,Mp(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Ot=s,this},e.globalTime=function(r){for(var s=this,i=arguments.length?r:s.rawTime();s;)i=s._start+i/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(r):i},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,Wg(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var s=this._time;return this._rDelay=r,Wg(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,s){return this.totalTime(Bn(this,r),fn(s))},e.restart=function(r,s){return this.play().totalTime(r?-this._delay:0,fn(s)),this._dur||(this._zTime=-We),this},e.play=function(r,s){return r!=null&&this.seek(r,s),this.reversed(!1).paused(!1)},e.reverse=function(r,s){return r!=null&&this.seek(r||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(r,s){return r!=null&&this.seek(r,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-We:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-We,this},e.isActive=function(){var r=this.parent||this._dp,s=this._start,i;return!!(!r||this._ts&&this._initted&&r.isActive()&&(i=r.rawTime(!0))>=s&&i<this.endTime(!0)-We)},e.eventCallback=function(r,s,i){var o=this.vars;return arguments.length>1?(s?(o[r]=s,i&&(o[r+"Params"]=i),r==="onUpdate"&&(this._onUpdate=s)):delete o[r],this):o[r]},e.then=function(r){var s=this;return new Promise(function(i){var o=ut(r)?r:Bv,l=function(){var u=s.then;s.then=null,ut(o)&&(o=o(s))&&(o.then||o===s)&&(s.then=u),i(o),s.then=u};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?l():s._prom=l})},e.kill=function(){oa(this)},n}();Pn(sl.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-We,_prom:0,_ps:!1,_rts:1});var Yt=function(n){Ev(e,n);function e(r,s){var i;return r===void 0&&(r={}),i=n.call(this,r)||this,i.labels={},i.smoothChildTiming=!!r.smoothChildTiming,i.autoRemoveChildren=!!r.autoRemoveChildren,i._sort=fn(r.sortChildren),st&&_r(r.parent||st,Mr(i),s),r.reversed&&i.reverse(),r.paused&&i.paused(!0),r.scrollTrigger&&Wv(Mr(i),r.scrollTrigger),i}var t=e.prototype;return t.to=function(s,i,o){return ja(0,arguments,this),this},t.from=function(s,i,o){return ja(1,arguments,this),this},t.fromTo=function(s,i,o,l){return ja(2,arguments,this),this},t.set=function(s,i,o){return i.duration=0,i.parent=this,Na(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new gt(s,i,Bn(this,o),1),this},t.call=function(s,i,o){return _r(this,gt.delayedCall(0,s,i),o)},t.staggerTo=function(s,i,o,l,c,u,h){return o.duration=i,o.stagger=o.stagger||l,o.onComplete=u,o.onCompleteParams=h,o.parent=this,new gt(s,o,Bn(this,c)),this},t.staggerFrom=function(s,i,o,l,c,u,h){return o.runBackwards=1,Na(o).immediateRender=fn(o.immediateRender),this.staggerTo(s,i,o,l,c,u,h)},t.staggerFromTo=function(s,i,o,l,c,u,h,d){return l.startAt=o,Na(l).immediateRender=fn(l.immediateRender),this.staggerTo(s,i,l,c,u,h,d)},t.render=function(s,i,o){var l=this._time,c=this._dirty?this.totalDuration():this._tDur,u=this._dur,h=s<=0?0:yt(s),d=this._zTime<0!=s<0&&(this._initted||!u),f,p,x,g,w,m,y,b,v,_,C,j;if(this!==st&&h>c&&s>=0&&(h=c),h!==this._tTime||o||d){if(l!==this._time&&u&&(h+=this._time-l,s+=this._time-l),f=h,v=this._start,b=this._ts,m=!b,d&&(u||(l=this._zTime),(s||!i)&&(this._zTime=s)),this._repeat){if(C=this._yoyo,w=u+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(w*100+s,i,o);if(f=yt(h%w),h===c?(g=this._repeat,f=u):(_=yt(h/w),g=~~_,g&&g===_&&(f=u,g--),f>u&&(f=u)),_=Eo(this._tTime,w),!l&&this._tTime&&_!==g&&this._tTime-_*w-this._dur<=0&&(_=g),C&&g&1&&(f=u-f,j=1),g!==_&&!this._lock){var k=C&&_&1,E=k===(C&&g&1);if(g<_&&(k=!k),l=k?0:h%u?u:h,this._lock=1,this.render(l||(j?0:yt(g*w)),i,!u)._lock=0,this._tTime=h,!i&&this.parent&&Nn(this,"onRepeat"),this.vars.repeatRefresh&&!j&&(this.invalidate()._lock=1),l&&l!==this._time||m!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,c=this._tDur,E&&(this._lock=2,l=k?u:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!j&&this.invalidate()),this._lock=0,!this._ts&&!m)return this;ib(this,j)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=Vj(this,yt(l),yt(f)),y&&(h-=f-(f=y._start))),this._tTime=h,this._time=f,this._act=!b,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,l=0),!l&&h&&!i&&!_&&(Nn(this,"onStart"),this._tTime!==h))return this;if(f>=l&&s>=0)for(p=this._first;p;){if(x=p._next,(p._act||f>=p._start)&&p._ts&&y!==p){if(p.parent!==this)return this.render(s,i,o);if(p.render(p._ts>0?(f-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(f-p._start)*p._ts,i,o),f!==this._time||!this._ts&&!m){y=0,x&&(h+=this._zTime=-We);break}}p=x}else{p=this._last;for(var M=s<0?s:f;p;){if(x=p._prev,(p._act||M<=p._end)&&p._ts&&y!==p){if(p.parent!==this)return this.render(s,i,o);if(p.render(p._ts>0?(M-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(M-p._start)*p._ts,i,o||Ot&&Mp(p)),f!==this._time||!this._ts&&!m){y=0,x&&(h+=this._zTime=M?-We:We);break}}p=x}}if(y&&!i&&(this.pause(),y.render(f>=l?0:-We)._zTime=f>=l?1:-1,this._ts))return this._start=v,Iu(this),this.render(s,i,o);this._onUpdate&&!i&&Nn(this,"onUpdate",!0),(h===c&&this._tTime>=this.totalDuration()||!h&&l)&&(v===this._start||Math.abs(b)!==Math.abs(this._ts))&&(this._lock||((s||!u)&&(h===c&&this._ts>0||!h&&this._ts<0)&&Ds(this,1),!i&&!(s<0&&!l)&&(h||l||!c)&&(Nn(this,h===c&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,i){var o=this;if(Kr(i)||(i=Bn(this,i,s)),!(s instanceof sl)){if(Ut(s))return s.forEach(function(l){return o.add(l,i)}),this;if(At(s))return this.addLabel(s,i);if(ut(s))s=gt.delayedCall(0,s);else return this}return this!==s?_r(this,s,i):this},t.getChildren=function(s,i,o,l){s===void 0&&(s=!0),i===void 0&&(i=!0),o===void 0&&(o=!0),l===void 0&&(l=-Hn);for(var c=[],u=this._first;u;)u._start>=l&&(u instanceof gt?i&&c.push(u):(o&&c.push(u),s&&c.push.apply(c,u.getChildren(!0,i,o)))),u=u._next;return c},t.getById=function(s){for(var i=this.getChildren(1,1,1),o=i.length;o--;)if(i[o].vars.id===s)return i[o]},t.remove=function(s){return At(s)?this.removeLabel(s):ut(s)?this.killTweensOf(s):(s.parent===this&&Ou(this,s),s===this._recent&&(this._recent=this._last),di(this))},t.totalTime=function(s,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=yt(_n.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),n.prototype.totalTime.call(this,s,i),this._forcing=0,this):this._tTime},t.addLabel=function(s,i){return this.labels[s]=Bn(this,i),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,i,o){var l=gt.delayedCall(0,i||tl,o);return l.data="isPause",this._hasPause=1,_r(this,l,Bn(this,s))},t.removePause=function(s){var i=this._first;for(s=Bn(this,s);i;)i._start===s&&i.data==="isPause"&&Ds(i),i=i._next},t.killTweensOf=function(s,i,o){for(var l=this.getTweensOf(s,o),c=l.length;c--;)ps!==l[c]&&l[c].kill(s,i);return this},t.getTweensOf=function(s,i){for(var o=[],l=qn(s),c=this._first,u=Kr(i),h;c;)c instanceof gt?Mj(c._targets,l)&&(u?(!ps||c._initted&&c._ts)&&c.globalTime(0)<=i&&c.globalTime(c.totalDuration())>i:!i||c.isActive())&&o.push(c):(h=c.getTweensOf(l,i)).length&&o.push.apply(o,h),c=c._next;return o},t.tweenTo=function(s,i){i=i||{};var o=this,l=Bn(o,s),c=i,u=c.startAt,h=c.onStart,d=c.onStartParams,f=c.immediateRender,p,x=gt.to(o,Pn({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:i.duration||Math.abs((l-(u&&"time"in u?u.time:o._time))/o.timeScale())||We,onStart:function(){if(o.pause(),!p){var w=i.duration||Math.abs((l-(u&&"time"in u?u.time:o._time))/o.timeScale());x._dur!==w&&To(x,w,0,1).render(x._time,!0,!0),p=1}h&&h.apply(x,d||[])}},i));return f?x.render(0):x},t.tweenFromTo=function(s,i,o){return this.tweenTo(i,Pn({startAt:{time:Bn(this,s)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(s){return s===void 0&&(s=this._time),Hg(this,Bn(this,s))},t.previousLabel=function(s){return s===void 0&&(s=this._time),Hg(this,Bn(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+We)},t.shiftChildren=function(s,i,o){o===void 0&&(o=0);for(var l=this._first,c=this.labels,u;l;)l._start>=o&&(l._start+=s,l._end+=s),l=l._next;if(i)for(u in c)c[u]>=o&&(c[u]+=s);return di(this)},t.invalidate=function(s){var i=this._first;for(this._lock=0;i;)i.invalidate(s),i=i._next;return n.prototype.invalidate.call(this,s)},t.clear=function(s){s===void 0&&(s=!0);for(var i=this._first,o;i;)o=i._next,this.remove(i),i=o;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),di(this)},t.totalDuration=function(s){var i=0,o=this,l=o._last,c=Hn,u,h,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-s:s));if(o._dirty){for(d=o.parent;l;)u=l._prev,l._dirty&&l.totalDuration(),h=l._start,h>c&&o._sort&&l._ts&&!o._lock?(o._lock=1,_r(o,l,h-l._delay,1)._lock=0):c=h,h<0&&l._ts&&(i-=h,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=h/o._ts,o._time-=h,o._tTime-=h),o.shiftChildren(-h,!1,-1/0),c=0),l._end>i&&l._ts&&(i=l._end),l=u;To(o,o===st&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(s){if(st._ts&&(zv(st,Zc(s,st)),Lv=_n.frame),_n.frame>=Bg){Bg+=En.autoSleep||120;var i=st._first;if((!i||!i._ts)&&En.autoSleep&&_n._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||_n.sleep()}}},e}(sl);Pn(Yt.prototype,{_lock:0,_hasPause:0,_forcing:0});var ik=function(e,t,r,s,i,o,l){var c=new mn(this._pt,e,t,0,1,fb,null,i),u=0,h=0,d,f,p,x,g,w,m,y;for(c.b=r,c.e=s,r+="",s+="",(m=~s.indexOf("random("))&&(s=nl(s)),o&&(y=[r,s],o(y,e,t),r=y[0],s=y[1]),f=r.match(md)||[];d=md.exec(s);)x=d[0],g=s.substring(u,d.index),p?p=(p+1)%5:g.substr(-5)==="rgba("&&(p=1),x!==f[h++]&&(w=parseFloat(f[h-1])||0,c._pt={_next:c._pt,p:g||h===1?g:",",s:w,c:x.charAt(1)==="="?co(w,x)-w:parseFloat(x)-w,m:p&&p<4?Math.round:0},u=md.lastIndex);return c.c=u<s.length?s.substring(u,s.length):"",c.fp=l,(Dv.test(s)||m)&&(c.e=0),this._pt=c,c},Lp=function(e,t,r,s,i,o,l,c,u,h){ut(s)&&(s=s(i||0,e,o));var d=e[t],f=r!=="get"?r:ut(d)?u?e[t.indexOf("set")||!ut(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():d,p=ut(d)?u?uk:db:zp,x;if(At(s)&&(~s.indexOf("random(")&&(s=nl(s)),s.charAt(1)==="="&&(x=co(f,s)+(Ft(f)||0),(x||x===0)&&(s=x))),!h||f!==s||ef)return!isNaN(f*s)&&s!==""?(x=new mn(this._pt,e,t,+f||0,s-(f||0),typeof d=="boolean"?hk:hb,0,p),u&&(x.fp=u),l&&x.modifier(l,this,e),this._pt=x):(!d&&!(t in e)&&Dp(t,s),ik.call(this,e,t,f,s,p,c||En.stringFilter,u))},ok=function(e,t,r,s,i){if(ut(e)&&(e=ka(e,i,t,r,s)),!Er(e)||e.style&&e.nodeType||Ut(e)||Av(e))return At(e)?ka(e,i,t,r,s):e;var o={},l;for(l in e)o[l]=ka(e[l],i,t,r,s);return o},lb=function(e,t,r,s,i,o){var l,c,u,h;if(wn[e]&&(l=new wn[e]).init(i,l.rawVars?t[e]:ok(t[e],s,i,o,r),r,s,o)!==!1&&(r._pt=c=new mn(r._pt,i,e,0,1,l.render,l,0,l.priority),r!==to))for(u=r._ptLookup[r._targets.indexOf(i)],h=l._props.length;h--;)u[l._props[h]]=c;return l},ps,ef,$p=function n(e,t,r){var s=e.vars,i=s.ease,o=s.startAt,l=s.immediateRender,c=s.lazy,u=s.onUpdate,h=s.runBackwards,d=s.yoyoEase,f=s.keyframes,p=s.autoRevert,x=e._dur,g=e._startAt,w=e._targets,m=e.parent,y=m&&m.data==="nested"?m.vars.targets:w,b=e._overwrite==="auto"&&!Ep,v=e.timeline,_,C,j,k,E,M,A,$,O,T,I,B,H;if(v&&(!f||!i)&&(i="none"),e._ease=hi(i,jo.ease),e._yEase=d?sb(hi(d===!0?i:d,jo.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!v&&!!s.runBackwards,!v||f&&!s.stagger){if($=w[0]?ui(w[0]).harness:0,B=$&&s[$.prop],_=Jc(s,Op),g&&(g._zTime<0&&g.progress(1),t<0&&h&&l&&!p?g.render(-1,!0):g.revert(h&&x?mc:Ij),g._lazy=0),o){if(Ds(e._startAt=gt.set(w,Pn({data:"isStart",overwrite:!1,parent:m,immediateRender:!0,lazy:!g&&fn(c),startAt:null,delay:0,onUpdate:u&&function(){return Nn(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ot||!l&&!p)&&e._startAt.revert(mc),l&&x&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(h&&x&&!g){if(t&&(l=!1),j=Pn({overwrite:!1,data:"isFromStart",lazy:l&&!g&&fn(c),immediateRender:l,stagger:0,parent:m},_),B&&(j[$.prop]=B),Ds(e._startAt=gt.set(w,j)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ot?e._startAt.revert(mc):e._startAt.render(-1,!0)),e._zTime=t,!l)n(e._startAt,We,We);else if(!t)return}for(e._pt=e._ptCache=0,c=x&&fn(c)||c&&!x,C=0;C<w.length;C++){if(E=w[C],A=E._gsap||Rp(w)[C]._gsap,e._ptLookup[C]=T={},Gh[A.id]&&ks.length&&Qc(),I=y===w?C:y.indexOf(E),$&&(O=new $).init(E,B||_,e,I,y)!==!1&&(e._pt=k=new mn(e._pt,E,O.name,0,1,O.render,O,0,O.priority),O._props.forEach(function(P){T[P]=k}),O.priority&&(M=1)),!$||B)for(j in _)wn[j]&&(O=lb(j,_,e,I,E,y))?O.priority&&(M=1):T[j]=k=Lp.call(e,E,j,"get",_[j],I,y,0,s.stringFilter);e._op&&e._op[C]&&e.kill(E,e._op[C]),b&&e._pt&&(ps=e,st.killTweensOf(E,T,e.globalTime(t)),H=!e.parent,ps=0),e._pt&&c&&(Gh[A.id]=1)}M&&pb(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!H,f&&t<=0&&v.render(Hn,!0,!0)},ak=function(e,t,r,s,i,o,l,c){var u=(e._pt&&e._ptCache||(e._ptCache={}))[t],h,d,f,p;if(!u)for(u=e._ptCache[t]=[],f=e._ptLookup,p=e._targets.length;p--;){if(h=f[p][t],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==t&&h.fp!==t;)h=h._next;if(!h)return ef=1,e.vars[t]="+=0",$p(e,l),ef=0,c?el(t+" not eligible for reset"):1;u.push(h)}for(p=u.length;p--;)d=u[p],h=d._pt||d,h.s=(s||s===0)&&!i?s:h.s+(s||0)+o*h.c,h.c=r-h.s,d.e&&(d.e=ft(r)+Ft(d.e)),d.b&&(d.b=h.s+Ft(d.b))},lk=function(e,t){var r=e[0]?ui(e[0]).harness:0,s=r&&r.aliases,i,o,l,c;if(!s)return t;i=ko({},t);for(o in s)if(o in i)for(c=s[o].split(","),l=c.length;l--;)i[c[l]]=i[o];return i},ck=function(e,t,r,s){var i=t.ease||s||"power1.inOut",o,l;if(Ut(t))l=r[e]||(r[e]=[]),t.forEach(function(c,u){return l.push({t:u/(t.length-1)*100,v:c,e:i})});else for(o in t)l=r[o]||(r[o]=[]),o==="ease"||l.push({t:parseFloat(e),v:t[o],e:i})},ka=function(e,t,r,s,i){return ut(e)?e.call(t,r,s,i):At(e)&&~e.indexOf("random(")?nl(e):e},cb=Ip+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",ub={};pn(cb+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return ub[n]=1});var gt=function(n){Ev(e,n);function e(r,s,i,o){var l;typeof s=="number"&&(i.duration=s,s=i,i=null),l=n.call(this,o?s:Na(s))||this;var c=l.vars,u=c.duration,h=c.delay,d=c.immediateRender,f=c.stagger,p=c.overwrite,x=c.keyframes,g=c.defaults,w=c.scrollTrigger,m=c.yoyoEase,y=s.parent||st,b=(Ut(r)||Av(r)?Kr(r[0]):"length"in s)?[r]:qn(r),v,_,C,j,k,E,M,A;if(l._targets=b.length?Rp(b):el("GSAP target "+r+" not found. https://gsap.com",!En.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=p,x||f||Ql(u)||Ql(h)){if(s=l.vars,v=l.timeline=new Yt({data:"nested",defaults:g||{},targets:y&&y.data==="nested"?y.vars.targets:b}),v.kill(),v.parent=v._dp=Mr(l),v._start=0,f||Ql(u)||Ql(h)){if(j=b.length,M=f&&Gv(f),Er(f))for(k in f)~cb.indexOf(k)&&(A||(A={}),A[k]=f[k]);for(_=0;_<j;_++)C=Jc(s,ub),C.stagger=0,m&&(C.yoyoEase=m),A&&ko(C,A),E=b[_],C.duration=+ka(u,Mr(l),_,E,b),C.delay=(+ka(h,Mr(l),_,E,b)||0)-l._delay,!f&&j===1&&C.delay&&(l._delay=h=C.delay,l._start+=h,C.delay=0),v.to(E,C,M?M(_,E,b):0),v._ease=De.none;v.duration()?u=h=0:l.timeline=0}else if(x){Na(Pn(v.vars.defaults,{ease:"none"})),v._ease=hi(x.ease||s.ease||"none");var $=0,O,T,I;if(Ut(x))x.forEach(function(B){return v.to(b,B,">")}),v.duration();else{C={};for(k in x)k==="ease"||k==="easeEach"||ck(k,x[k],C,x.easeEach);for(k in C)for(O=C[k].sort(function(B,H){return B.t-H.t}),$=0,_=0;_<O.length;_++)T=O[_],I={ease:T.e,duration:(T.t-(_?O[_-1].t:0))/100*u},I[k]=T.v,v.to(b,I,$),$+=I.duration;v.duration()<u&&v.to({},{duration:u-v.duration()})}}u||l.duration(u=v.duration())}else l.timeline=0;return p===!0&&!Ep&&(ps=Mr(l),st.killTweensOf(b),ps=0),_r(y,Mr(l),i),s.reversed&&l.reverse(),s.paused&&l.paused(!0),(d||!u&&!x&&l._start===yt(y._time)&&fn(d)&&Fj(Mr(l))&&y.data!=="nested")&&(l._tTime=-We,l.render(Math.max(0,-h)||0)),w&&Wv(Mr(l),w),l}var t=e.prototype;return t.render=function(s,i,o){var l=this._time,c=this._tDur,u=this._dur,h=s<0,d=s>c-We&&!h?c:s<We?0:s,f,p,x,g,w,m,y,b,v;if(!u)Uj(this,s,i,o);else if(d!==this._tTime||!s||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h||this._lazy){if(f=d,b=this.timeline,this._repeat){if(g=u+this._rDelay,this._repeat<-1&&h)return this.totalTime(g*100+s,i,o);if(f=yt(d%g),d===c?(x=this._repeat,f=u):(w=yt(d/g),x=~~w,x&&x===w?(f=u,x--):f>u&&(f=u)),m=this._yoyo&&x&1,m&&(v=this._yEase,f=u-f),w=Eo(this._tTime,g),f===l&&!o&&this._initted&&x===w)return this._tTime=d,this;x!==w&&(b&&this._yEase&&ib(b,m),this.vars.repeatRefresh&&!m&&!this._lock&&f!==g&&this._initted&&(this._lock=o=1,this.render(yt(g*x),!0).invalidate()._lock=0))}if(!this._initted){if(Hv(this,h?s:f,o,i,d))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&x!==w))return this;if(u!==this._dur)return this.render(s,i,o)}if(this._tTime=d,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(v||this._ease)(f/u),this._from&&(this.ratio=y=1-y),!l&&d&&!i&&!w&&(Nn(this,"onStart"),this._tTime!==d))return this;for(p=this._pt;p;)p.r(y,p.d),p=p._next;b&&b.render(s<0?s:b._dur*b._ease(f/this._dur),i,o)||this._startAt&&(this._zTime=s),this._onUpdate&&!i&&(h&&Yh(this,s,i,o),Nn(this,"onUpdate")),this._repeat&&x!==w&&this.vars.onRepeat&&!i&&this.parent&&Nn(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(h&&!this._onUpdate&&Yh(this,s,!0,!0),(s||!u)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Ds(this,1),!i&&!(h&&!l)&&(d||l||m)&&(Nn(this,d===c?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),n.prototype.invalidate.call(this,s)},t.resetTo=function(s,i,o,l,c){rl||_n.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||$p(this,u),h=this._ease(u/this._dur),ak(this,s,i,o,l,h,u,c)?this.resetTo(s,i,o,l,1):(Ru(this,0),this.parent||Uv(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,i){if(i===void 0&&(i="all"),!s&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?oa(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Ot),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(s,i,ps&&ps.vars.overwrite!==!0)._first||oa(this),this.parent&&o!==this.timeline.totalDuration()&&To(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,c=s?qn(s):l,u=this._ptLookup,h=this._pt,d,f,p,x,g,w,m;if((!i||i==="all")&&$j(l,c))return i==="all"&&(this._pt=0),oa(this);for(d=this._op=this._op||[],i!=="all"&&(At(i)&&(g={},pn(i,function(y){return g[y]=1}),i=g),i=lk(l,i)),m=l.length;m--;)if(~c.indexOf(l[m])){f=u[m],i==="all"?(d[m]=i,x=f,p={}):(p=d[m]=d[m]||{},x=i);for(g in x)w=f&&f[g],w&&((!("kill"in w.d)||w.d.kill(g)===!0)&&Ou(this,w,"_pt"),delete f[g]),p!=="all"&&(p[g]=1)}return this._initted&&!this._pt&&h&&oa(this),this},e.to=function(s,i){return new e(s,i,arguments[2])},e.from=function(s,i){return ja(1,arguments)},e.delayedCall=function(s,i,o,l){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:i,onReverseComplete:i,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},e.fromTo=function(s,i,o){return ja(2,arguments)},e.set=function(s,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(s,i)},e.killTweensOf=function(s,i,o){return st.killTweensOf(s,i,o)},e}(sl);Pn(gt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});pn("staggerTo,staggerFrom,staggerFromTo",function(n){gt[n]=function(){var e=new Yt,t=Qh.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var zp=function(e,t,r){return e[t]=r},db=function(e,t,r){return e[t](r)},uk=function(e,t,r,s){return e[t](s.fp,r)},dk=function(e,t,r){return e.setAttribute(t,r)},Fp=function(e,t){return ut(e[t])?db:Tp(e[t])&&e.setAttribute?dk:zp},hb=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},hk=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},fb=function(e,t){var r=t._pt,s="";if(!e&&t.b)s=t.b;else if(e===1&&t.e)s=t.e;else{for(;r;)s=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+s,r=r._next;s+=t.c}t.set(t.t,t.p,s,t)},Bp=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},fk=function(e,t,r,s){for(var i=this._pt,o;i;)o=i._next,i.p===s&&i.modifier(e,t,r),i=o},pk=function(e){for(var t=this._pt,r,s;t;)s=t._next,t.p===e&&!t.op||t.op===e?Ou(this,t,"_pt"):t.dep||(r=1),t=s;return!r},mk=function(e,t,r,s){s.mSet(e,t,s.m.call(s.tween,r,s.mt),s)},pb=function(e){for(var t=e._pt,r,s,i,o;t;){for(r=t._next,s=i;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:o)?t._prev._next=t:i=t,(t._next=s)?s._prev=t:o=t,t=r}e._pt=i},mn=function(){function n(t,r,s,i,o,l,c,u,h){this.t=r,this.s=i,this.c=o,this.p=s,this.r=l||hb,this.d=c||this,this.set=u||zp,this.pr=h||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,s,i){this.mSet=this.mSet||this.set,this.set=mk,this.m=r,this.mt=i,this.tween=s},n}();pn(Ip+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return Op[n]=1});An.TweenMax=An.TweenLite=gt;An.TimelineLite=An.TimelineMax=Yt;st=new Yt({sortChildren:!1,defaults:jo,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});En.stringFilter=rb;var fi=[],yc={},gk=[],Xg=0,yk=0,bd=function(e){return(yc[e]||gk).map(function(t){return t()})},tf=function(){var e=Date.now(),t=[];e-Xg>2&&(bd("matchMediaInit"),fi.forEach(function(r){var s=r.queries,i=r.conditions,o,l,c,u;for(l in s)o=xr.matchMedia(s[l]).matches,o&&(c=1),o!==i[l]&&(i[l]=o,u=1);u&&(r.revert(),c&&t.push(r))}),bd("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(s){return r.add(null,s)})}),Xg=e,bd("matchMedia"))},mb=function(){function n(t,r){this.selector=r&&Jh(r),this.data=[],this._r=[],this.isReverted=!1,this.id=yk++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,s,i){ut(r)&&(i=s,s=r,r=ut);var o=this,l=function(){var u=et,h=o.selector,d;return u&&u!==o&&u.data.push(o),i&&(o.selector=Jh(i)),et=o,d=s.apply(o,arguments),ut(d)&&o._r.push(d),et=u,o.selector=h,o.isReverted=!1,d};return o.last=l,r===ut?l(o,function(c){return o.add(null,c)}):r?o[r]=l:l},e.ignore=function(r){var s=et;et=null,r(this),et=s},e.getTweens=function(){var r=[];return this.data.forEach(function(s){return s instanceof n?r.push.apply(r,s.getTweens()):s instanceof gt&&!(s.parent&&s.parent.data==="nested")&&r.push(s)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,s){var i=this;if(r?function(){for(var l=i.getTweens(),c=i.data.length,u;c--;)u=i.data[c],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(h){return l.splice(l.indexOf(h),1)}));for(l.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,d){return d.g-h.g||-1/0}).forEach(function(h){return h.t.revert(r)}),c=i.data.length;c--;)u=i.data[c],u instanceof Yt?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof gt)&&u.revert&&u.revert(r);i._r.forEach(function(h){return h(r,i)}),i.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),s)for(var o=fi.length;o--;)fi[o].id===this.id&&fi.splice(o,1)},e.revert=function(r){this.kill(r||{})},n}(),xk=function(){function n(t){this.contexts=[],this.scope=t,et&&et.data.push(this)}var e=n.prototype;return e.add=function(r,s,i){Er(r)||(r={matches:r});var o=new mb(0,i||this.scope),l=o.conditions={},c,u,h;et&&!o.selector&&(o.selector=et.selector),this.contexts.push(o),s=o.add("onMatch",s),o.queries=r;for(u in r)u==="all"?h=1:(c=xr.matchMedia(r[u]),c&&(fi.indexOf(o)<0&&fi.push(o),(l[u]=c.matches)&&(h=1),c.addListener?c.addListener(tf):c.addEventListener("change",tf)));return h&&s(o,function(d){return o.add(null,d)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(s){return s.kill(r,!0)})},n}(),eu={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(s){return eb(s)})},timeline:function(e){return new Yt(e)},getTweensOf:function(e,t){return st.getTweensOf(e,t)},getProperty:function(e,t,r,s){At(e)&&(e=qn(e)[0]);var i=ui(e||{}).get,o=r?Bv:Fv;return r==="native"&&(r=""),e&&(t?o((wn[t]&&wn[t].get||i)(e,t,r,s)):function(l,c,u){return o((wn[l]&&wn[l].get||i)(e,l,c,u))})},quickSetter:function(e,t,r){if(e=qn(e),e.length>1){var s=e.map(function(h){return yn.quickSetter(h,t,r)}),i=s.length;return function(h){for(var d=i;d--;)s[d](h)}}e=e[0]||{};var o=wn[t],l=ui(e),c=l.harness&&(l.harness.aliases||{})[t]||t,u=o?function(h){var d=new o;to._pt=0,d.init(e,r?h+r:h,to,0,[e]),d.render(1,d),to._pt&&Bp(1,to)}:l.set(e,c);return o?u:function(h){return u(e,c,r?h+r:h,l,1)}},quickTo:function(e,t,r){var s,i=yn.to(e,Pn((s={},s[t]="+=0.1",s.paused=!0,s.stagger=0,s),r||{})),o=function(c,u,h){return i.resetTo(t,c,u,h)};return o.tween=i,o},isTweening:function(e){return st.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=hi(e.ease,jo.ease)),Ug(jo,e||{})},config:function(e){return Ug(En,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,s=e.plugins,i=e.defaults,o=e.extendTimeline;(s||"").split(",").forEach(function(l){return l&&!wn[l]&&!An[l]&&el(t+" effect requires "+l+" plugin.")}),gd[t]=function(l,c,u){return r(qn(l),Pn(c||{},i),u)},o&&(Yt.prototype[t]=function(l,c,u){return this.add(gd[t](l,Er(c)?c:(u=c)&&{},this),u)})},registerEase:function(e,t){De[e]=hi(t)},parseEase:function(e,t){return arguments.length?hi(e,t):De},getById:function(e){return st.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new Yt(e),s,i;for(r.smoothChildTiming=fn(e.smoothChildTiming),st.remove(r),r._dp=0,r._time=r._tTime=st._time,s=st._first;s;)i=s._next,(t||!(!s._dur&&s instanceof gt&&s.vars.onComplete===s._targets[0]))&&_r(r,s,s._start-s._delay),s=i;return _r(st,r,0),r},context:function(e,t){return e?new mb(e,t):et},matchMedia:function(e){return new xk(e)},matchMediaRefresh:function(){return fi.forEach(function(e){var t=e.conditions,r,s;for(s in t)t[s]&&(t[s]=!1,r=1);r&&e.revert()})||tf()},addEventListener:function(e,t){var r=yc[e]||(yc[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=yc[e],s=r&&r.indexOf(t);s>=0&&r.splice(s,1)},utils:{wrap:Kj,wrapYoyo:Qj,distribute:Gv,random:Kv,snap:Yv,normalize:Yj,getUnit:Ft,clamp:Hj,splitColor:tb,toArray:qn,selector:Jh,mapRange:Jv,pipe:Xj,unitize:Gj,interpolate:Jj,shuffle:Xv},install:Rv,effects:gd,ticker:_n,updateRoot:Yt.updateRoot,plugins:wn,globalTimeline:st,core:{PropTween:mn,globals:Mv,Tween:gt,Timeline:Yt,Animation:sl,getCache:ui,_removeLinkedListItem:Ou,reverting:function(){return Ot},context:function(e){return e&&et&&(et.data.push(e),e._ctx=et),et},suppressOverwrites:function(e){return Ep=e}}};pn("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return eu[n]=gt[n]});_n.add(Yt.updateRoot);to=eu.to({},{duration:0});var vk=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},bk=function(e,t){var r=e._targets,s,i,o;for(s in t)for(i=r.length;i--;)o=e._ptLookup[i][s],o&&(o=o.d)&&(o._pt&&(o=vk(o,s)),o&&o.modifier&&o.modifier(t[s],e,r[i],s))},wd=function(e,t){return{name:e,headless:1,rawVars:1,init:function(s,i,o){o._onInit=function(l){var c,u;if(At(i)&&(c={},pn(i,function(h){return c[h]=1}),i=c),t){c={};for(u in i)c[u]=t(i[u]);i=c}bk(l,i)}}}},yn=eu.registerPlugin({name:"attr",init:function(e,t,r,s,i){var o,l,c;this.tween=r;for(o in t)c=e.getAttribute(o)||"",l=this.add(e,"setAttribute",(c||0)+"",t[o],s,i,0,0,o),l.op=o,l.b=c,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)Ot?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},wd("roundProps",Zh),wd("modifiers"),wd("snap",Yv))||eu;gt.version=Yt.version=yn.version="3.13.0";Iv=1;Ap()&&Ao();De.Power0;De.Power1;De.Power2;De.Power3;De.Power4;De.Linear;De.Quad;De.Cubic;De.Quart;De.Quint;De.Strong;De.Elastic;De.Back;De.SteppedEase;De.Bounce;De.Sine;De.Expo;De.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Gg,ms,uo,Up,ai,Yg,Vp,wk=function(){return typeof window<"u"},Qr={},Zs=180/Math.PI,ho=Math.PI/180,Ri=Math.atan2,Kg=1e8,Wp=/([A-Z])/g,_k=/(left|right|width|margin|padding|x)/i,Sk=/[\s,\(]\S/,Sr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},nf=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Ck=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Nk=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},jk=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},gb=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},yb=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},kk=function(e,t,r){return e.style[t]=r},Ek=function(e,t,r){return e.style.setProperty(t,r)},Tk=function(e,t,r){return e._gsap[t]=r},Ak=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},Pk=function(e,t,r,s,i){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(i,o)},Dk=function(e,t,r,s,i){var o=e._gsap;o[t]=r,o.renderTransform(i,o)},it="transform",gn=it+"Origin",Ok=function n(e,t){var r=this,s=this.target,i=s.style,o=s._gsap;if(e in Qr&&i){if(this.tfm=this.tfm||{},e!=="transform")e=Sr[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return r.tfm[l]=$r(s,l)}):this.tfm[e]=o.x?o[e]:$r(s,e),e===gn&&(this.tfm.zOrigin=o.zOrigin);else return Sr.transform.split(",").forEach(function(l){return n.call(r,l,t)});if(this.props.indexOf(it)>=0)return;o.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(gn,t,"")),e=it}(i||t)&&this.props.push(e,t,i[e])},xb=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Ik=function(){var e=this.props,t=this.target,r=t.style,s=t._gsap,i,o;for(i=0;i<e.length;i+=3)e[i+1]?e[i+1]===2?t[e[i]](e[i+2]):t[e[i]]=e[i+2]:e[i+2]?r[e[i]]=e[i+2]:r.removeProperty(e[i].substr(0,2)==="--"?e[i]:e[i].replace(Wp,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)s[o]=this.tfm[o];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),i=Vp(),(!i||!i.isStart)&&!r[it]&&(xb(r),s.zOrigin&&r[gn]&&(r[gn]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},vb=function(e,t){var r={target:e,props:[],revert:Ik,save:Ok};return e._gsap||yn.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(s){return r.save(s)}),r},bb,rf=function(e,t){var r=ms.createElementNS?ms.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ms.createElement(e);return r&&r.style?r:ms.createElement(e)},Xn=function n(e,t,r){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(Wp,"-$1").toLowerCase())||s.getPropertyValue(t)||!r&&n(e,Po(t)||t,1)||""},Qg="O,Moz,ms,Ms,Webkit".split(","),Po=function(e,t,r){var s=t||ai,i=s.style,o=5;if(e in i&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Qg[o]+e in i););return o<0?null:(o===3?"ms":o>=0?Qg[o]:"")+e},sf=function(){wk()&&window.document&&(Gg=window,ms=Gg.document,uo=ms.documentElement,ai=rf("div")||{style:{}},rf("div"),it=Po(it),gn=it+"Origin",ai.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",bb=!!Po("perspective"),Vp=yn.core.reverting,Up=1)},Jg=function(e){var t=e.ownerSVGElement,r=rf("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=e.cloneNode(!0),i;s.style.display="block",r.appendChild(s),uo.appendChild(r);try{i=s.getBBox()}catch{}return r.removeChild(s),uo.removeChild(r),i},Zg=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},wb=function(e){var t,r;try{t=e.getBBox()}catch{t=Jg(e),r=1}return t&&(t.width||t.height)||r||(t=Jg(e)),t&&!t.width&&!t.x&&!t.y?{x:+Zg(e,["x","cx","x1"])||0,y:+Zg(e,["y","cy","y1"])||0,width:0,height:0}:t},_b=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&wb(e))},_i=function(e,t){if(t){var r=e.style,s;t in Qr&&t!==gn&&(t=it),r.removeProperty?(s=t.substr(0,2),(s==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(s==="--"?t:t.replace(Wp,"-$1").toLowerCase())):r.removeAttribute(t)}},gs=function(e,t,r,s,i,o){var l=new mn(e._pt,t,r,0,1,o?yb:gb);return e._pt=l,l.b=s,l.e=i,e._props.push(r),l},e0={deg:1,rad:1,turn:1},Rk={grid:1,flex:1},Os=function n(e,t,r,s){var i=parseFloat(r)||0,o=(r+"").trim().substr((i+"").length)||"px",l=ai.style,c=_k.test(t),u=e.tagName.toLowerCase()==="svg",h=(u?"client":"offset")+(c?"Width":"Height"),d=100,f=s==="px",p=s==="%",x,g,w,m;if(s===o||!i||e0[s]||e0[o])return i;if(o!=="px"&&!f&&(i=n(e,t,r,"px")),m=e.getCTM&&_b(e),(p||o==="%")&&(Qr[t]||~t.indexOf("adius")))return x=m?e.getBBox()[c?"width":"height"]:e[h],ft(p?i/x*d:i/100*x);if(l[c?"width":"height"]=d+(f?o:s),g=s!=="rem"&&~t.indexOf("adius")||s==="em"&&e.appendChild&&!u?e:e.parentNode,m&&(g=(e.ownerSVGElement||{}).parentNode),(!g||g===ms||!g.appendChild)&&(g=ms.body),w=g._gsap,w&&p&&w.width&&c&&w.time===_n.time&&!w.uncache)return ft(i/w.width*d);if(p&&(t==="height"||t==="width")){var y=e.style[t];e.style[t]=d+s,x=e[h],y?e.style[t]=y:_i(e,t)}else(p||o==="%")&&!Rk[Xn(g,"display")]&&(l.position=Xn(e,"position")),g===e&&(l.position="static"),g.appendChild(ai),x=ai[h],g.removeChild(ai),l.position="absolute";return c&&p&&(w=ui(g),w.time=_n.time,w.width=g[h]),ft(f?x*i/d:x&&i?d/x*i:0)},$r=function(e,t,r,s){var i;return Up||sf(),t in Sr&&t!=="transform"&&(t=Sr[t],~t.indexOf(",")&&(t=t.split(",")[0])),Qr[t]&&t!=="transform"?(i=ol(e,s),i=t!=="transformOrigin"?i[t]:i.svg?i.origin:nu(Xn(e,gn))+" "+i.zOrigin+"px"):(i=e.style[t],(!i||i==="auto"||s||~(i+"").indexOf("calc("))&&(i=tu[t]&&tu[t](e,t,r)||Xn(e,t)||$v(e,t)||(t==="opacity"?1:0))),r&&!~(i+"").trim().indexOf(" ")?Os(e,t,i,r)+r:i},Mk=function(e,t,r,s){if(!r||r==="none"){var i=Po(t,e,1),o=i&&Xn(e,i,1);o&&o!==r?(t=i,r=o):t==="borderColor"&&(r=Xn(e,"borderTopColor"))}var l=new mn(this._pt,e.style,t,0,1,fb),c=0,u=0,h,d,f,p,x,g,w,m,y,b,v,_;if(l.b=r,l.e=s,r+="",s+="",s.substring(0,6)==="var(--"&&(s=Xn(e,s.substring(4,s.indexOf(")")))),s==="auto"&&(g=e.style[t],e.style[t]=s,s=Xn(e,t)||s,g?e.style[t]=g:_i(e,t)),h=[r,s],rb(h),r=h[0],s=h[1],f=r.match(eo)||[],_=s.match(eo)||[],_.length){for(;d=eo.exec(s);)w=d[0],y=s.substring(c,d.index),x?x=(x+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(x=1),w!==(g=f[u++]||"")&&(p=parseFloat(g)||0,v=g.substr((p+"").length),w.charAt(1)==="="&&(w=co(p,w)+v),m=parseFloat(w),b=w.substr((m+"").length),c=eo.lastIndex-b.length,b||(b=b||En.units[t]||v,c===s.length&&(s+=b,l.e+=b)),v!==b&&(p=Os(e,t,g,b)||0),l._pt={_next:l._pt,p:y||u===1?y:",",s:p,c:m-p,m:x&&x<4||t==="zIndex"?Math.round:0});l.c=c<s.length?s.substring(c,s.length):""}else l.r=t==="display"&&s==="none"?yb:gb;return Dv.test(s)&&(l.e=0),this._pt=l,l},t0={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Lk=function(e){var t=e.split(" "),r=t[0],s=t[1]||"50%";return(r==="top"||r==="bottom"||s==="left"||s==="right")&&(e=r,r=s,s=e),t[0]=t0[r]||r,t[1]=t0[s]||s,t.join(" ")},$k=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,s=r.style,i=t.u,o=r._gsap,l,c,u;if(i==="all"||i===!0)s.cssText="",c=1;else for(i=i.split(","),u=i.length;--u>-1;)l=i[u],Qr[l]&&(c=1,l=l==="transformOrigin"?gn:it),_i(r,l);c&&(_i(r,it),o&&(o.svg&&r.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",ol(r,1),o.uncache=1,xb(s)))}},tu={clearProps:function(e,t,r,s,i){if(i.data!=="isFromStart"){var o=e._pt=new mn(e._pt,t,r,0,0,$k);return o.u=s,o.pr=-10,o.tween=i,e._props.push(r),1}}},il=[1,0,0,1,0,0],Sb={},Cb=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},n0=function(e){var t=Xn(e,it);return Cb(t)?il:t.substr(7).match(Pv).map(ft)},Hp=function(e,t){var r=e._gsap||ui(e),s=e.style,i=n0(e),o,l,c,u;return r.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,i=[c.a,c.b,c.c,c.d,c.e,c.f],i.join(",")==="1,0,0,1,0,0"?il:i):(i===il&&!e.offsetParent&&e!==uo&&!r.svg&&(c=s.display,s.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(u=1,l=e.nextElementSibling,uo.appendChild(e)),i=n0(e),c?s.display=c:_i(e,"display"),u&&(l?o.insertBefore(e,l):o?o.appendChild(e):uo.removeChild(e))),t&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},of=function(e,t,r,s,i,o){var l=e._gsap,c=i||Hp(e,!0),u=l.xOrigin||0,h=l.yOrigin||0,d=l.xOffset||0,f=l.yOffset||0,p=c[0],x=c[1],g=c[2],w=c[3],m=c[4],y=c[5],b=t.split(" "),v=parseFloat(b[0])||0,_=parseFloat(b[1])||0,C,j,k,E;r?c!==il&&(j=p*w-x*g)&&(k=v*(w/j)+_*(-g/j)+(g*y-w*m)/j,E=v*(-x/j)+_*(p/j)-(p*y-x*m)/j,v=k,_=E):(C=wb(e),v=C.x+(~b[0].indexOf("%")?v/100*C.width:v),_=C.y+(~(b[1]||b[0]).indexOf("%")?_/100*C.height:_)),s||s!==!1&&l.smooth?(m=v-u,y=_-h,l.xOffset=d+(m*p+y*g)-m,l.yOffset=f+(m*x+y*w)-y):l.xOffset=l.yOffset=0,l.xOrigin=v,l.yOrigin=_,l.smooth=!!s,l.origin=t,l.originIsAbsolute=!!r,e.style[gn]="0px 0px",o&&(gs(o,l,"xOrigin",u,v),gs(o,l,"yOrigin",h,_),gs(o,l,"xOffset",d,l.xOffset),gs(o,l,"yOffset",f,l.yOffset)),e.setAttribute("data-svg-origin",v+" "+_)},ol=function(e,t){var r=e._gsap||new ab(e);if("x"in r&&!t&&!r.uncache)return r;var s=e.style,i=r.scaleX<0,o="px",l="deg",c=getComputedStyle(e),u=Xn(e,gn)||"0",h,d,f,p,x,g,w,m,y,b,v,_,C,j,k,E,M,A,$,O,T,I,B,H,P,z,U,L,V,S,W,G;return h=d=f=g=w=m=y=b=v=0,p=x=1,r.svg=!!(e.getCTM&&_b(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(s[it]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[it]!=="none"?c[it]:"")),s.scale=s.rotate=s.translate="none"),j=Hp(e,r.svg),r.svg&&(r.uncache?(P=e.getBBox(),u=r.xOrigin-P.x+"px "+(r.yOrigin-P.y)+"px",H=""):H=!t&&e.getAttribute("data-svg-origin"),of(e,H||u,!!H||r.originIsAbsolute,r.smooth!==!1,j)),_=r.xOrigin||0,C=r.yOrigin||0,j!==il&&(A=j[0],$=j[1],O=j[2],T=j[3],h=I=j[4],d=B=j[5],j.length===6?(p=Math.sqrt(A*A+$*$),x=Math.sqrt(T*T+O*O),g=A||$?Ri($,A)*Zs:0,y=O||T?Ri(O,T)*Zs+g:0,y&&(x*=Math.abs(Math.cos(y*ho))),r.svg&&(h-=_-(_*A+C*O),d-=C-(_*$+C*T))):(G=j[6],S=j[7],U=j[8],L=j[9],V=j[10],W=j[11],h=j[12],d=j[13],f=j[14],k=Ri(G,V),w=k*Zs,k&&(E=Math.cos(-k),M=Math.sin(-k),H=I*E+U*M,P=B*E+L*M,z=G*E+V*M,U=I*-M+U*E,L=B*-M+L*E,V=G*-M+V*E,W=S*-M+W*E,I=H,B=P,G=z),k=Ri(-O,V),m=k*Zs,k&&(E=Math.cos(-k),M=Math.sin(-k),H=A*E-U*M,P=$*E-L*M,z=O*E-V*M,W=T*M+W*E,A=H,$=P,O=z),k=Ri($,A),g=k*Zs,k&&(E=Math.cos(k),M=Math.sin(k),H=A*E+$*M,P=I*E+B*M,$=$*E-A*M,B=B*E-I*M,A=H,I=P),w&&Math.abs(w)+Math.abs(g)>359.9&&(w=g=0,m=180-m),p=ft(Math.sqrt(A*A+$*$+O*O)),x=ft(Math.sqrt(B*B+G*G)),k=Ri(I,B),y=Math.abs(k)>2e-4?k*Zs:0,v=W?1/(W<0?-W:W):0),r.svg&&(H=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!Cb(Xn(e,it)),H&&e.setAttribute("transform",H))),Math.abs(y)>90&&Math.abs(y)<270&&(i?(p*=-1,y+=g<=0?180:-180,g+=g<=0?180:-180):(x*=-1,y+=y<=0?180:-180)),t=t||r.uncache,r.x=h-((r.xPercent=h&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-h)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=d-((r.yPercent=d&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=f+o,r.scaleX=ft(p),r.scaleY=ft(x),r.rotation=ft(g)+l,r.rotationX=ft(w)+l,r.rotationY=ft(m)+l,r.skewX=y+l,r.skewY=b+l,r.transformPerspective=v+o,(r.zOrigin=parseFloat(u.split(" ")[2])||!t&&r.zOrigin||0)&&(s[gn]=nu(u)),r.xOffset=r.yOffset=0,r.force3D=En.force3D,r.renderTransform=r.svg?Fk:bb?Nb:zk,r.uncache=0,r},nu=function(e){return(e=e.split(" "))[0]+" "+e[1]},_d=function(e,t,r){var s=Ft(t);return ft(parseFloat(t)+parseFloat(Os(e,"x",r+"px",s)))+s},zk=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Nb(e,t)},Hs="0deg",Jo="0px",qs=") ",Nb=function(e,t){var r=t||this,s=r.xPercent,i=r.yPercent,o=r.x,l=r.y,c=r.z,u=r.rotation,h=r.rotationY,d=r.rotationX,f=r.skewX,p=r.skewY,x=r.scaleX,g=r.scaleY,w=r.transformPerspective,m=r.force3D,y=r.target,b=r.zOrigin,v="",_=m==="auto"&&e&&e!==1||m===!0;if(b&&(d!==Hs||h!==Hs)){var C=parseFloat(h)*ho,j=Math.sin(C),k=Math.cos(C),E;C=parseFloat(d)*ho,E=Math.cos(C),o=_d(y,o,j*E*-b),l=_d(y,l,-Math.sin(C)*-b),c=_d(y,c,k*E*-b+b)}w!==Jo&&(v+="perspective("+w+qs),(s||i)&&(v+="translate("+s+"%, "+i+"%) "),(_||o!==Jo||l!==Jo||c!==Jo)&&(v+=c!==Jo||_?"translate3d("+o+", "+l+", "+c+") ":"translate("+o+", "+l+qs),u!==Hs&&(v+="rotate("+u+qs),h!==Hs&&(v+="rotateY("+h+qs),d!==Hs&&(v+="rotateX("+d+qs),(f!==Hs||p!==Hs)&&(v+="skew("+f+", "+p+qs),(x!==1||g!==1)&&(v+="scale("+x+", "+g+qs),y.style[it]=v||"translate(0, 0)"},Fk=function(e,t){var r=t||this,s=r.xPercent,i=r.yPercent,o=r.x,l=r.y,c=r.rotation,u=r.skewX,h=r.skewY,d=r.scaleX,f=r.scaleY,p=r.target,x=r.xOrigin,g=r.yOrigin,w=r.xOffset,m=r.yOffset,y=r.forceCSS,b=parseFloat(o),v=parseFloat(l),_,C,j,k,E;c=parseFloat(c),u=parseFloat(u),h=parseFloat(h),h&&(h=parseFloat(h),u+=h,c+=h),c||u?(c*=ho,u*=ho,_=Math.cos(c)*d,C=Math.sin(c)*d,j=Math.sin(c-u)*-f,k=Math.cos(c-u)*f,u&&(h*=ho,E=Math.tan(u-h),E=Math.sqrt(1+E*E),j*=E,k*=E,h&&(E=Math.tan(h),E=Math.sqrt(1+E*E),_*=E,C*=E)),_=ft(_),C=ft(C),j=ft(j),k=ft(k)):(_=d,k=f,C=j=0),(b&&!~(o+"").indexOf("px")||v&&!~(l+"").indexOf("px"))&&(b=Os(p,"x",o,"px"),v=Os(p,"y",l,"px")),(x||g||w||m)&&(b=ft(b+x-(x*_+g*j)+w),v=ft(v+g-(x*C+g*k)+m)),(s||i)&&(E=p.getBBox(),b=ft(b+s/100*E.width),v=ft(v+i/100*E.height)),E="matrix("+_+","+C+","+j+","+k+","+b+","+v+")",p.setAttribute("transform",E),y&&(p.style[it]=E)},Bk=function(e,t,r,s,i){var o=360,l=At(i),c=parseFloat(i)*(l&&~i.indexOf("rad")?Zs:1),u=c-s,h=s+u+"deg",d,f;return l&&(d=i.split("_")[1],d==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),d==="cw"&&u<0?u=(u+o*Kg)%o-~~(u/o)*o:d==="ccw"&&u>0&&(u=(u-o*Kg)%o-~~(u/o)*o)),e._pt=f=new mn(e._pt,t,r,s,u,Ck),f.e=h,f.u="deg",e._props.push(r),f},r0=function(e,t){for(var r in t)e[r]=t[r];return e},Uk=function(e,t,r){var s=r0({},r._gsap),i="perspective,force3D,transformOrigin,svgOrigin",o=r.style,l,c,u,h,d,f,p,x;s.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),o[it]=t,l=ol(r,1),_i(r,it),r.setAttribute("transform",u)):(u=getComputedStyle(r)[it],o[it]=t,l=ol(r,1),o[it]=u);for(c in Qr)u=s[c],h=l[c],u!==h&&i.indexOf(c)<0&&(p=Ft(u),x=Ft(h),d=p!==x?Os(r,c,u,x):parseFloat(u),f=parseFloat(h),e._pt=new mn(e._pt,l,c,d,f-d,nf),e._pt.u=x||0,e._props.push(c));r0(l,s)};pn("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",s="Bottom",i="Left",o=(e<3?[t,r,s,i]:[t+i,t+r,s+r,s+i]).map(function(l){return e<2?n+l:"border"+l+n});tu[e>1?"border"+n:n]=function(l,c,u,h,d){var f,p;if(arguments.length<4)return f=o.map(function(x){return $r(l,x,u)}),p=f.join(" "),p.split(f[0]).length===5?f[0]:p;f=(h+"").split(" "),p={},o.forEach(function(x,g){return p[x]=f[g]=f[g]||f[(g-1)/2|0]}),l.init(c,p,d)}});var jb={name:"css",register:sf,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,s,i){var o=this._props,l=e.style,c=r.vars.startAt,u,h,d,f,p,x,g,w,m,y,b,v,_,C,j,k;Up||sf(),this.styles=this.styles||vb(e),k=this.styles.props,this.tween=r;for(g in t)if(g!=="autoRound"&&(h=t[g],!(wn[g]&&lb(g,t,r,s,e,i)))){if(p=typeof h,x=tu[g],p==="function"&&(h=h.call(r,s,e,i),p=typeof h),p==="string"&&~h.indexOf("random(")&&(h=nl(h)),x)x(this,e,g,h,r)&&(j=1);else if(g.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(g)+"").trim(),h+="",Es.lastIndex=0,Es.test(u)||(w=Ft(u),m=Ft(h)),m?w!==m&&(u=Os(e,g,u,m)+m):w&&(h+=w),this.add(l,"setProperty",u,h,s,i,0,0,g),o.push(g),k.push(g,0,l[g]);else if(p!=="undefined"){if(c&&g in c?(u=typeof c[g]=="function"?c[g].call(r,s,e,i):c[g],At(u)&&~u.indexOf("random(")&&(u=nl(u)),Ft(u+"")||u==="auto"||(u+=En.units[g]||Ft($r(e,g))||""),(u+"").charAt(1)==="="&&(u=$r(e,g))):u=$r(e,g),f=parseFloat(u),y=p==="string"&&h.charAt(1)==="="&&h.substr(0,2),y&&(h=h.substr(2)),d=parseFloat(h),g in Sr&&(g==="autoAlpha"&&(f===1&&$r(e,"visibility")==="hidden"&&d&&(f=0),k.push("visibility",0,l.visibility),gs(this,l,"visibility",f?"inherit":"hidden",d?"inherit":"hidden",!d)),g!=="scale"&&g!=="transform"&&(g=Sr[g],~g.indexOf(",")&&(g=g.split(",")[0]))),b=g in Qr,b){if(this.styles.save(g),p==="string"&&h.substring(0,6)==="var(--"&&(h=Xn(e,h.substring(4,h.indexOf(")"))),d=parseFloat(h)),v||(_=e._gsap,_.renderTransform&&!t.parseTransform||ol(e,t.parseTransform),C=t.smoothOrigin!==!1&&_.smooth,v=this._pt=new mn(this._pt,l,it,0,1,_.renderTransform,_,0,-1),v.dep=1),g==="scale")this._pt=new mn(this._pt,_,"scaleY",_.scaleY,(y?co(_.scaleY,y+d):d)-_.scaleY||0,nf),this._pt.u=0,o.push("scaleY",g),g+="X";else if(g==="transformOrigin"){k.push(gn,0,l[gn]),h=Lk(h),_.svg?of(e,h,0,C,0,this):(m=parseFloat(h.split(" ")[2])||0,m!==_.zOrigin&&gs(this,_,"zOrigin",_.zOrigin,m),gs(this,l,g,nu(u),nu(h)));continue}else if(g==="svgOrigin"){of(e,h,1,C,0,this);continue}else if(g in Sb){Bk(this,_,g,f,y?co(f,y+h):h);continue}else if(g==="smoothOrigin"){gs(this,_,"smooth",_.smooth,h);continue}else if(g==="force3D"){_[g]=h;continue}else if(g==="transform"){Uk(this,h,e);continue}}else g in l||(g=Po(g)||g);if(b||(d||d===0)&&(f||f===0)&&!Sk.test(h)&&g in l)w=(u+"").substr((f+"").length),d||(d=0),m=Ft(h)||(g in En.units?En.units[g]:w),w!==m&&(f=Os(e,g,u,m)),this._pt=new mn(this._pt,b?_:l,g,f,(y?co(f,y+d):d)-f,!b&&(m==="px"||g==="zIndex")&&t.autoRound!==!1?jk:nf),this._pt.u=m||0,w!==m&&m!=="%"&&(this._pt.b=u,this._pt.r=Nk);else if(g in l)Mk.call(this,e,g,u,y?y+h:h);else if(g in e)this.add(e,g,u||e[g],y?y+h:h,s,i);else if(g!=="parseTransform"){Dp(g,h);continue}b||(g in l?k.push(g,0,l[g]):typeof e[g]=="function"?k.push(g,2,e[g]()):k.push(g,1,u||e[g])),o.push(g)}}j&&pb(this)},render:function(e,t){if(t.tween._time||!Vp())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:$r,aliases:Sr,getSetter:function(e,t,r){var s=Sr[t];return s&&s.indexOf(",")<0&&(t=s),t in Qr&&t!==gn&&(e._gsap.x||$r(e,"x"))?r&&Yg===r?t==="scale"?Ak:Tk:(Yg=r||{})&&(t==="scale"?Pk:Dk):e.style&&!Tp(e.style[t])?kk:~t.indexOf("-")?Ek:Fp(e,t)},core:{_removeProperty:_i,_getMatrix:Hp}};yn.utils.checkPrefix=Po;yn.core.getStyleSaver=vb;(function(n,e,t,r){var s=pn(n+","+e+","+t,function(i){Qr[i]=1});pn(e,function(i){En.units[i]="deg",Sb[i]=1}),Sr[s[13]]=n+","+e,pn(r,function(i){var o=i.split(":");Sr[o[1]]=s[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");pn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){En.units[n]="px"});yn.registerPlugin(jb);var Be=yn.registerPlugin(jb)||yn;Be.core.Tween;/*!
 * Matrix2D 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
 */let af,kb,Vk,Wk,lf,s0,i0="transform",Hk=n=>{let e=n.ownerDocument||n;for(!(i0 in n.style)&&("msTransform"in n.style)&&(i0="msTransform");e.parentNode&&(e=e.parentNode););if(lf=new dr,e){af=e,e.documentElement,kb=e.body,s0=af.createElementNS("http://www.w3.org/2000/svg","g"),s0.style.transform="none";let t=e.createElement("div"),r=e.createElement("div"),s=e&&(e.body||e.firstElementChild);s&&s.appendChild&&(s.appendChild(t),t.appendChild(r),t.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),r.offsetParent,s.removeChild(t))}return e},qk=n=>{let e,t;for(;n&&n!==kb;)e=n._gsap,e&&e.uncache&&e.get(n,"x"),e&&!e.scaleX&&!e.scaleY&&e.renderTransform&&!e.uncache&&(e.scaleX=e.scaleY=1e-4,e.renderTransform(1,e),t=[e]),n=n.parentNode;return t},Xk=n=>{let e=new dr,t=0;for(;t<n.numberOfItems;t++)e.multiply(n.getItem(t).matrix);return e};class dr{constructor(e,t,r,s,i,o){e==null&&(e=1),t==null&&(t=0),r==null&&(r=0),s==null&&(s=1),i==null&&(i=0),o==null&&(o=0),this.a=e,this.b=t,this.c=r,this.d=s,this.e=i,this.f=o}inverse(){let{a:e,b:t,c:r,d:s,e:i,f:o}=this,l=e*s-t*r||1e-10;return new dr(s/l,-t/l,-r/l,e/l,(r*o-s*i)/l,(t*i-e*o)/l)}multiply(e){let{a:t,b:r,c:s,d:i,e:o,f:l}=this,c=e.a;e.c;let u=e.b,h=e.d,d=e.e,f=e.f;return new dr(t*c+r*u,t*h+r*h,s*c+i*u,s*h+i*h,o*c+l*u+d,o*h+l*h+f)}clone(){return new dr(this.a,this.b,this.c,this.d,this.e,this.f)}equals(e){let{a:t,b:r,c:s,d:i,e:o,f:l}=this;return t===e.a&&r===e.b&&s===e.c&&i===e.d&&o===e.e&&l===e.f}apply(e,t){t||(t={});let{x:r,y:s}=e,{a:i,b:o,c:l,d:c,e:u,f:h}=this;return t.x=r*i+s*l+u||0,t.y=r*o+s*c+h||0,t}}const ni=(n,e,t,r)=>{if(!n||!n.parentNode||(af||Hk(n)).documentElement===n)return new dr;let s=qk(n),i=n.ownerSVGElement,o=i?Wk:Vk,l,c,u,h;if(o?(l=o.getBoundingClientRect(),o.appendChild(n),c=n.getBoundingClientRect(),o.removeChild(n),n.parentNode&&n.parentNode.appendChild(n),u=new dr((c.left-l.left)/100,0,0,(c.top-l.top)/100,c.left-l.left,c.top-l.top)):n.getBBox?(l=n.getBBox(),u=n.transform?n.transform.baseVal:{},u.numberOfItems?(u=u.numberOfItems>1?Xk(u):u.getItem(0).matrix,u=new dr(u.a,u.b,u.c,u.d,u.e,u.f)):u=lf,(l.x||l.y)&&(u=u.translate(l.x,l.y))):u=lf,s)for(h=s.length;--h>-1;)s[h].scaleX=s[h].scaleY=0,s[h].renderTransform(1,s[h]);return e?u.inverse():u};/*!
 * Draggable 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
 */let Pe,Ve,Sn,hr,Vr,Sd,zr,cf,la,ys,Eb,uf,al,qp,ca,nr,ua,xc,Tb,df,ru=0,Ab=()=>typeof window<"u",Pb=()=>Pe||Ab()&&(Pe=window.gsap)&&Pe.registerPlugin&&Pe,as=n=>typeof n=="function",Ea=n=>typeof n=="object",lr=n=>typeof n>"u",vc=()=>!1,Ta="transform",hf="transformOrigin",ns=n=>Math.round(n*1e4)/1e4,Zo=Array.isArray,Jl=(n,e)=>{let t=Sn.createElementNS?Sn.createElementNS("http://www.w3.org/1999/xhtml".replace(/^https/,"http"),n):Sn.createElement(n);return t.style?t:Sn.createElement(n)},o0=180/Math.PI,Xs=1e20,Gk=new dr,rs=Date.now||(()=>new Date().getTime()),pi=[],fo={},Yk=0,Kk=/^(?:a|input|textarea|button|select)$/i,a0=0,Mi={},Dr={},Db=(n,e)=>{let t={},r;for(r in n)t[r]=e?n[r]*e:n[r];return t},Qk=(n,e)=>{for(let t in e)t in n||(n[t]=e[t]);return n},ff=(n,e)=>{let t=n.length,r;for(;t--;)e?n[t].style.touchAction=e:n[t].style.removeProperty("touch-action"),r=n[t].children,r&&r.length&&ff(r,e)},Ob=()=>pi.forEach(n=>n()),Jk=n=>{pi.push(n),pi.length===1&&Pe.ticker.add(Ob)},l0=()=>!pi.length&&Pe.ticker.remove(Ob),c0=n=>{let e=pi.length;for(;e--;)pi[e]===n&&pi.splice(e,1);Pe.to(l0,{overwrite:!0,delay:15,duration:0,onComplete:l0,data:"_draggable"})},Zk=(n,e)=>{for(let t in e)t in n||(n[t]=e[t]);return n},bt=(n,e,t,r)=>{if(n.addEventListener){let s=al[e];r=r||(Eb?{passive:!1}:null),n.addEventListener(s||e,t,r),s&&e!==s&&n.addEventListener(e,t,r)}},mt=(n,e,t,r)=>{if(n.removeEventListener){let s=al[e];n.removeEventListener(s||e,t,r),s&&e!==s&&n.removeEventListener(e,t,r)}},$n=n=>{n.preventDefault&&n.preventDefault(),n.preventManipulation&&n.preventManipulation()},e2=(n,e)=>{let t=n.length;for(;t--;)if(n[t].identifier===e)return!0},Ib=n=>{qp=n.touches&&ru<n.touches.length,mt(n.target,"touchend",Ib)},u0=n=>{qp=n.touches&&ru<n.touches.length,bt(n.target,"touchend",Ib)},po=n=>Ve.pageYOffset||n.scrollTop||n.documentElement.scrollTop||n.body.scrollTop||0,mo=n=>Ve.pageXOffset||n.scrollLeft||n.documentElement.scrollLeft||n.body.scrollLeft||0,pf=(n,e)=>{bt(n,"scroll",e),Do(n.parentNode)||pf(n.parentNode,e)},mf=(n,e)=>{mt(n,"scroll",e),Do(n.parentNode)||mf(n.parentNode,e)},Do=n=>!n||n===hr||n.nodeType===9||n===Sn.body||n===Ve||!n.nodeType||!n.parentNode,d0=(n,e)=>{let t=e==="x"?"Width":"Height",r="scroll"+t,s="client"+t;return Math.max(0,Do(n)?Math.max(hr[r],Vr[r])-(Ve["inner"+t]||hr[s]||Vr[s]):n[r]-n[s])},bc=(n,e)=>{let t=d0(n,"x"),r=d0(n,"y");Do(n)?n=Dr:bc(n.parentNode,e),n._gsMaxScrollX=t,n._gsMaxScrollY=r,e||(n._gsScrollX=n.scrollLeft||0,n._gsScrollY=n.scrollTop||0)},Cd=(n,e,t)=>{let r=n.style;r&&(lr(r[e])&&(e=la(e,n)||e),t==null?r.removeProperty&&r.removeProperty(e.replace(/([A-Z])/g,"-$1").toLowerCase()):r[e]=t)},ll=n=>Ve.getComputedStyle(n instanceof Element?n:n.host||(n.parentNode||{}).host||n),Gs={},Li=n=>{if(n===Ve)return Gs.left=Gs.top=0,Gs.width=Gs.right=hr.clientWidth||n.innerWidth||Vr.clientWidth||0,Gs.height=Gs.bottom=(n.innerHeight||0)-20<hr.clientHeight?hr.clientHeight:n.innerHeight||Vr.clientHeight||0,Gs;let e=n.ownerDocument||Sn,t=lr(n.pageX)?!n.nodeType&&!lr(n.left)&&!lr(n.top)?n:ys(n)[0].getBoundingClientRect():{left:n.pageX-mo(e),top:n.pageY-po(e),right:n.pageX-mo(e)+1,bottom:n.pageY-po(e)+1};return lr(t.right)&&!lr(t.width)?(t.right=t.left+t.width,t.bottom=t.top+t.height):lr(t.width)&&(t={width:t.right-t.left,height:t.bottom-t.top,right:t.right,left:t.left,bottom:t.bottom,top:t.top}),t},ht=(n,e,t)=>{let r=n.vars,s=r[t],i=n._listeners[e],o;return as(s)&&(o=s.apply(r.callbackScope||n,r[t+"Params"]||[n.pointerEvent])),i&&n.dispatchEvent(e)===!1&&(o=!1),o},h0=(n,e)=>{let t=ys(n)[0],r,s,i;return!t.nodeType&&t!==Ve?lr(n.left)?(s=n.min||n.minX||n.minRotation||0,r=n.min||n.minY||0,{left:s,top:r,width:(n.max||n.maxX||n.maxRotation||0)-s,height:(n.max||n.maxY||0)-r}):(i={x:0,y:0},{left:n.left-i.x,top:n.top-i.y,width:n.width,height:n.height}):t2(t,e)},zn={},t2=(n,e)=>{e=ys(e)[0];let t=n.getBBox&&n.ownerSVGElement,r=n.ownerDocument||Sn,s,i,o,l,c,u,h,d,f,p,x,g,w;if(n===Ve)o=po(r),s=mo(r),i=s+(r.documentElement.clientWidth||n.innerWidth||r.body.clientWidth||0),l=o+((n.innerHeight||0)-20<r.documentElement.clientHeight?r.documentElement.clientHeight:n.innerHeight||r.body.clientHeight||0);else{if(e===Ve||lr(e))return n.getBoundingClientRect();s=o=0,t?(p=n.getBBox(),x=p.width,g=p.height):(n.viewBox&&(p=n.viewBox.baseVal)&&(s=p.x||0,o=p.y||0,x=p.width,g=p.height),x||(w=ll(n),p=w.boxSizing==="border-box",x=(parseFloat(w.width)||n.clientWidth||0)+(p?0:parseFloat(w.borderLeftWidth)+parseFloat(w.borderRightWidth)),g=(parseFloat(w.height)||n.clientHeight||0)+(p?0:parseFloat(w.borderTopWidth)+parseFloat(w.borderBottomWidth)))),i=x,l=g}return n===e?{left:s,top:o,width:i-s,height:l-o}:(c=ni(e,!0).multiply(ni(n)),u=c.apply({x:s,y:o}),h=c.apply({x:i,y:o}),d=c.apply({x:i,y:l}),f=c.apply({x:s,y:l}),s=Math.min(u.x,h.x,d.x,f.x),o=Math.min(u.y,h.y,d.y,f.y),{left:s,top:o,width:Math.max(u.x,h.x,d.x,f.x)-s,height:Math.max(u.y,h.y,d.y,f.y)-o})},Nd=(n,e,t,r,s,i)=>{let o={},l,c,u;if(e)if(s!==1&&e instanceof Array){if(o.end=l=[],u=e.length,Ea(e[0]))for(c=0;c<u;c++)l[c]=Db(e[c],s);else for(c=0;c<u;c++)l[c]=e[c]*s;t+=1.1,r-=1.1}else as(e)?o.end=h=>{let d=e.call(n,h),f,p;if(s!==1)if(Ea(d)){f={};for(p in d)f[p]=d[p]*s;d=f}else d*=s;return d}:o.end=e;return(t||t===0)&&(o.max=t),(r||r===0)&&(o.min=r),i&&(o.velocity=0),o},Rb=n=>{let e;return!n||!n.getAttribute||n===Vr?!1:(e=n.getAttribute("data-clickable"))==="true"||e!=="false"&&(Kk.test(n.nodeName+"")||n.getAttribute("contentEditable")==="true")?!0:Rb(n.parentNode)},Zl=(n,e)=>{let t=n.length,r;for(;t--;)r=n[t],r.ondragstart=r.onselectstart=e?null:vc,Pe.set(r,{lazy:!0,userSelect:e?"text":"none"})},Mb=n=>{if(ll(n).position==="fixed")return!0;if(n=n.parentNode,n&&n.nodeType===1)return Mb(n)},Lb,gf,n2=function(n,e){n=Pe.utils.toArray(n)[0],e=e||{};let t=document.createElement("div"),r=t.style,s=n.firstChild,i=0,o=0,l=n.scrollTop,c=n.scrollLeft,u=n.scrollWidth,h=n.scrollHeight,d=0,f=0,p=0,x,g,w,m,y,b;Lb&&e.force3D!==!1?(y="translate3d(",b="px,0px)"):Ta&&(y="translate(",b="px)"),this.scrollTop=function(v,_){if(!arguments.length)return-this.top();this.top(-v,_)},this.scrollLeft=function(v,_){if(!arguments.length)return-this.left();this.left(-v,_)},this.left=function(v,_){if(!arguments.length)return-(n.scrollLeft+o);let C=n.scrollLeft-c,j=o;if((C>2||C<-2)&&!_){c=n.scrollLeft,Pe.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-c),e.onKill&&e.onKill();return}v=-v,v<0?(o=v-.5|0,v=0):v>f?(o=v-f|0,v=f):o=0,(o||j)&&(this._skip||(r[Ta]=y+-o+"px,"+-i+b),o+d>=0&&(r.paddingRight=o+d+"px")),n.scrollLeft=v|0,c=n.scrollLeft},this.top=function(v,_){if(!arguments.length)return-(n.scrollTop+i);let C=n.scrollTop-l,j=i;if((C>2||C<-2)&&!_){l=n.scrollTop,Pe.killTweensOf(this,{top:1,scrollTop:1}),this.top(-l),e.onKill&&e.onKill();return}v=-v,v<0?(i=v-.5|0,v=0):v>p?(i=v-p|0,v=p):i=0,(i||j)&&(this._skip||(r[Ta]=y+-o+"px,"+-i+b)),n.scrollTop=v|0,l=n.scrollTop},this.maxScrollTop=()=>p,this.maxScrollLeft=()=>f,this.disable=function(){for(s=t.firstChild;s;)m=s.nextSibling,n.appendChild(s),s=m;n===t.parentNode&&n.removeChild(t)},this.enable=function(){if(s=n.firstChild,s!==t){for(;s;)m=s.nextSibling,t.appendChild(s),s=m;n.appendChild(t),this.calibrate()}},this.calibrate=function(v){let _=n.clientWidth===x,C,j,k;l=n.scrollTop,c=n.scrollLeft,!(_&&n.clientHeight===g&&t.offsetHeight===w&&u===n.scrollWidth&&h===n.scrollHeight&&!v)&&((i||o)&&(j=this.left(),k=this.top(),this.left(-n.scrollLeft),this.top(-n.scrollTop)),C=ll(n),(!_||v)&&(r.display="block",r.width="auto",r.paddingRight="0px",d=Math.max(0,n.scrollWidth-n.clientWidth),d&&(d+=parseFloat(C.paddingLeft)+(gf?parseFloat(C.paddingRight):0))),r.display="inline-block",r.position="relative",r.overflow="visible",r.verticalAlign="top",r.boxSizing="content-box",r.width="100%",r.paddingRight=d+"px",gf&&(r.paddingBottom=C.paddingBottom),x=n.clientWidth,g=n.clientHeight,u=n.scrollWidth,h=n.scrollHeight,f=n.scrollWidth-x,p=n.scrollHeight-g,w=t.offsetHeight,r.display="block",(j||k)&&(this.left(j),this.top(k)))},this.content=t,this.element=n,this._skip=!1,this.enable()},jd=n=>{if(Ab()&&document.body){let e=window&&window.navigator;Ve=window,Sn=document,hr=Sn.documentElement,Vr=Sn.body,Sd=Jl("div"),xc=!!window.PointerEvent,zr=Jl("div"),zr.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",ua=zr.style.cursor==="grab"?"grab":"move",ca=e&&e.userAgent.toLowerCase().indexOf("android")!==-1,uf="ontouchstart"in hr&&"orientation"in Ve||e&&(e.MaxTouchPoints>0||e.msMaxTouchPoints>0),gf=function(){let t=Jl("div"),r=Jl("div"),s=r.style,i=Vr,o;return s.display="inline-block",s.position="relative",t.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",t.appendChild(r),i.appendChild(t),o=r.offsetHeight+18>t.scrollHeight,i.removeChild(t),o}(),al=function(t){let r=t.split(","),s=("onpointerdown"in Sd?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in Sd?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":t).split(","),i={},o=4;for(;--o>-1;)i[r[o]]=s[o],i[s[o]]=r[o];try{hr.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Eb=1}}))}catch{}return i}("touchstart,touchmove,touchend,touchcancel"),bt(Sn,"touchcancel",vc),bt(Ve,"touchmove",vc),Vr&&Vr.addEventListener("touchstart",vc),bt(Sn,"contextmenu",function(){for(let t in fo)fo[t].isPressed&&fo[t].endDrag()}),Pe=cf=Pb()}Pe?(nr=Pe.plugins.inertia,Tb=Pe.core.context||function(){},la=Pe.utils.checkPrefix,Ta=la(Ta),hf=la(hf),ys=Pe.utils.toArray,df=Pe.core.getStyleSaver,Lb=!!la("perspective")):n&&console.warn("Please gsap.registerPlugin(Draggable)")};class r2{constructor(e){this._listeners={},this.target=e||this}addEventListener(e,t){let r=this._listeners[e]||(this._listeners[e]=[]);~r.indexOf(t)||r.push(t)}removeEventListener(e,t){let r=this._listeners[e],s=r&&r.indexOf(t);s>=0&&r.splice(s,1)}dispatchEvent(e){let t;return(this._listeners[e]||[]).forEach(r=>r.call(this,{type:e,target:this.target})===!1&&(t=!1)),t}}class jn extends r2{constructor(e,t){super(),cf||jd(1),e=ys(e)[0],this.styles=df&&df(e,"transform,left,top"),nr||(nr=Pe.plugins.inertia),this.vars=t=Db(t||{}),this.target=e,this.x=this.y=this.rotation=0,this.dragResistance=parseFloat(t.dragResistance)||0,this.edgeResistance=isNaN(t.edgeResistance)?1:parseFloat(t.edgeResistance)||0,this.lockAxis=t.lockAxis,this.autoScroll=t.autoScroll||0,this.lockedAxis=null,this.allowEventDefault=!!t.allowEventDefault,Pe.getProperty(e,"x");let r=(t.type||"x,y").toLowerCase(),s=~r.indexOf("x")||~r.indexOf("y"),i=r.indexOf("rotation")!==-1,o=i?"rotation":s?"x":"left",l=s?"y":"top",c=!!(~r.indexOf("x")||~r.indexOf("left")||r==="scroll"),u=!!(~r.indexOf("y")||~r.indexOf("top")||r==="scroll"),h=t.minimumMovement||2,d=this,f=ys(t.trigger||t.handle||e),p={},x=0,g=!1,w=t.autoScrollMarginTop||40,m=t.autoScrollMarginRight||40,y=t.autoScrollMarginBottom||40,b=t.autoScrollMarginLeft||40,v=t.clickableTest||Rb,_=0,C=e._gsap||Pe.core.getCache(e),j=Mb(e),k=(R,Z)=>parseFloat(C.get(e,R,Z)),E=e.ownerDocument||Sn,M,A,$,O,T,I,B,H,P,z,U,L,V,S,W,G,D,ne,ae,Se,ee,F,q,Y,K,Q,se,ie,ce,he,oe,ve,ke,_e=R=>($n(R),R.stopImmediatePropagation&&R.stopImmediatePropagation(),!1),Xe=R=>{if(d.autoScroll&&d.isDragging&&(g||D)){let Z=e,X=d.autoScroll*15,te,le,fe,be,me,Ne,je,Ie;for(g=!1,Dr.scrollTop=Ve.pageYOffset!=null?Ve.pageYOffset:E.documentElement.scrollTop!=null?E.documentElement.scrollTop:E.body.scrollTop,Dr.scrollLeft=Ve.pageXOffset!=null?Ve.pageXOffset:E.documentElement.scrollLeft!=null?E.documentElement.scrollLeft:E.body.scrollLeft,be=d.pointerX-Dr.scrollLeft,me=d.pointerY-Dr.scrollTop;Z&&!le;)le=Do(Z.parentNode),te=le?Dr:Z.parentNode,fe=le?{bottom:Math.max(hr.clientHeight,Ve.innerHeight||0),right:Math.max(hr.clientWidth,Ve.innerWidth||0),left:0,top:0}:te.getBoundingClientRect(),Ne=je=0,u&&(Ie=te._gsMaxScrollY-te.scrollTop,Ie<0?je=Ie:me>fe.bottom-y&&Ie?(g=!0,je=Math.min(Ie,X*(1-Math.max(0,fe.bottom-me)/y)|0)):me<fe.top+w&&te.scrollTop&&(g=!0,je=-Math.min(te.scrollTop,X*(1-Math.max(0,me-fe.top)/w)|0)),je&&(te.scrollTop+=je)),c&&(Ie=te._gsMaxScrollX-te.scrollLeft,Ie<0?Ne=Ie:be>fe.right-m&&Ie?(g=!0,Ne=Math.min(Ie,X*(1-Math.max(0,fe.right-be)/m)|0)):be<fe.left+b&&te.scrollLeft&&(g=!0,Ne=-Math.min(te.scrollLeft,X*(1-Math.max(0,be-fe.left)/b)|0)),Ne&&(te.scrollLeft+=Ne)),le&&(Ne||je)&&(Ve.scrollTo(te.scrollLeft,te.scrollTop),en(d.pointerX+Ne,d.pointerY+je)),Z=te}if(D){let{x:Z,y:X}=d;i?(d.deltaX=Z-parseFloat(C.rotation),d.rotation=Z,C.rotation=Z+"deg",C.renderTransform(1,C)):A?(u&&(d.deltaY=X-A.top(),A.top(X)),c&&(d.deltaX=Z-A.left(),A.left(Z))):s?(u&&(d.deltaY=X-parseFloat(C.y),C.y=X+"px"),c&&(d.deltaX=Z-parseFloat(C.x),C.x=Z+"px"),C.renderTransform(1,C)):(u&&(d.deltaY=X-parseFloat(e.style.top||0),e.style.top=X+"px"),c&&(d.deltaX=Z-parseFloat(e.style.left||0),e.style.left=Z+"px")),H&&!R&&!ie&&(ie=!0,ht(d,"drag","onDrag")===!1&&(c&&(d.x-=d.deltaX),u&&(d.y-=d.deltaY),Xe(!0)),ie=!1)}D=!1},Wt=(R,Z)=>{let{x:X,y:te}=d,le,fe;e._gsap||(C=Pe.core.getCache(e)),C.uncache&&Pe.getProperty(e,"x"),s?(d.x=parseFloat(C.x),d.y=parseFloat(C.y)):i?d.x=d.rotation=parseFloat(C.rotation):A?(d.y=A.top(),d.x=A.left()):(d.y=parseFloat(e.style.top||(fe=ll(e))&&fe.top)||0,d.x=parseFloat(e.style.left||(fe||{}).left)||0),(ae||Se||ee)&&!Z&&(d.isDragging||d.isThrowing)&&(ee&&(Mi.x=d.x,Mi.y=d.y,le=ee(Mi),le.x!==d.x&&(d.x=le.x,D=!0),le.y!==d.y&&(d.y=le.y,D=!0)),ae&&(le=ae(d.x),le!==d.x&&(d.x=le,i&&(d.rotation=le),D=!0)),Se&&(le=Se(d.y),le!==d.y&&(d.y=le),D=!0)),D&&Xe(!0),R||(d.deltaX=d.x-X,d.deltaY=d.y-te,ht(d,"throwupdate","onThrowUpdate"))},Tr=(R,Z,X,te)=>(Z==null&&(Z=-Xs),X==null&&(X=Xs),as(R)?le=>{let fe=d.isPressed?1-d.edgeResistance:1;return R.call(d,(le>X?X+(le-X)*fe:le<Z?Z+(le-Z)*fe:le)*te)*te}:Zo(R)?le=>{let fe=R.length,be=0,me=Xs,Ne,je;for(;--fe>-1;)Ne=R[fe],je=Ne-le,je<0&&(je=-je),je<me&&Ne>=Z&&Ne<=X&&(be=fe,me=je);return R[be]}:isNaN(R)?le=>le:()=>R*te),pr=(R,Z,X,te,le,fe,be)=>(fe=fe&&fe<Xs?fe*fe:Xs,as(R)?me=>{let Ne=d.isPressed?1-d.edgeResistance:1,je=me.x,Ie=me.y,tn,nn,xn;return me.x=je=je>X?X+(je-X)*Ne:je<Z?Z+(je-Z)*Ne:je,me.y=Ie=Ie>le?le+(Ie-le)*Ne:Ie<te?te+(Ie-te)*Ne:Ie,tn=R.call(d,me),tn!==me&&(me.x=tn.x,me.y=tn.y),be!==1&&(me.x*=be,me.y*=be),fe<Xs&&(nn=me.x-je,xn=me.y-Ie,nn*nn+xn*xn>fe&&(me.x=je,me.y=Ie)),me}:Zo(R)?me=>{let Ne=R.length,je=0,Ie=Xs,tn,nn,xn,Rt;for(;--Ne>-1;)xn=R[Ne],tn=xn.x-me.x,nn=xn.y-me.y,Rt=tn*tn+nn*nn,Rt<Ie&&(je=Ne,Ie=Rt);return Ie<=fe?R[je]:me}:me=>me),Ct=()=>{let R,Z,X,te;B=!1,A?(A.calibrate(),d.minX=U=-A.maxScrollLeft(),d.minY=V=-A.maxScrollTop(),d.maxX=z=d.maxY=L=0,B=!0):t.bounds&&(R=h0(t.bounds,e.parentNode),i?(d.minX=U=R.left,d.maxX=z=R.left+R.width,d.minY=V=d.maxY=L=0):!lr(t.bounds.maxX)||!lr(t.bounds.maxY)?(R=t.bounds,d.minX=U=R.minX,d.minY=V=R.minY,d.maxX=z=R.maxX,d.maxY=L=R.maxY):(Z=h0(e,e.parentNode),d.minX=U=Math.round(k(o,"px")+R.left-Z.left),d.minY=V=Math.round(k(l,"px")+R.top-Z.top),d.maxX=z=Math.round(U+(R.width-Z.width)),d.maxY=L=Math.round(V+(R.height-Z.height))),U>z&&(d.minX=z,d.maxX=z=U,U=d.minX),V>L&&(d.minY=L,d.maxY=L=V,V=d.minY),i&&(d.minRotation=U,d.maxRotation=z),B=!0),t.liveSnap&&(X=t.liveSnap===!0?t.snap||{}:t.liveSnap,te=Zo(X)||as(X),i?(ae=Tr(te?X:X.rotation,U,z,1),Se=null):X.points?ee=pr(te?X:X.points,U,z,V,L,X.radius,A?-1:1):(c&&(ae=Tr(te?X:X.x||X.left||X.scrollLeft,U,z,A?-1:1)),u&&(Se=Tr(te?X:X.y||X.top||X.scrollTop,V,L,A?-1:1))))},Me=()=>{d.isThrowing=!1,ht(d,"throwcomplete","onThrowComplete")},zs=()=>{d.isThrowing=!1},Zt=(R,Z)=>{let X,te,le,fe;R&&nr?(R===!0&&(X=t.snap||t.liveSnap||{},te=Zo(X)||as(X),R={resistance:(t.throwResistance||t.resistance||1e3)/(i?10:1)},i?R.rotation=Nd(d,te?X:X.rotation,z,U,1,Z):(c&&(R[o]=Nd(d,te?X:X.points||X.x||X.left,z,U,A?-1:1,Z||d.lockedAxis==="x")),u&&(R[l]=Nd(d,te?X:X.points||X.y||X.top,L,V,A?-1:1,Z||d.lockedAxis==="y")),(X.points||Zo(X)&&Ea(X[0]))&&(R.linkedProps=o+","+l,R.radius=X.radius))),d.isThrowing=!0,fe=isNaN(t.overshootTolerance)?t.edgeResistance===1?0:1-d.edgeResistance+.2:t.overshootTolerance,R.duration||(R.duration={max:Math.max(t.minDuration||0,"maxDuration"in t?t.maxDuration:2),min:isNaN(t.minDuration)?fe===0||Ea(R)&&R.resistance>1e3?0:.5:t.minDuration,overshoot:fe}),d.tween=le=Pe.to(A||e,{inertia:R,data:"_draggable",inherit:!1,onComplete:Me,onInterrupt:zs,onUpdate:t.fastMode?ht:Wt,onUpdateParams:t.fastMode?[d,"onthrowupdate","onThrowUpdate"]:X&&X.radius?[!1,!0]:[]}),t.fastMode||(A&&(A._skip=!0),le.render(1e9,!0,!0),Wt(!0,!0),d.endX=d.x,d.endY=d.y,i&&(d.endRotation=d.x),le.play(0),Wt(!0,!0),A&&(A._skip=!1))):B&&d.applyBounds()},Fo=R=>{let Z=Y,X;Y=ni(e.parentNode,!0),R&&d.isPressed&&!Y.equals(Z||new dr)&&(X=Z.inverse().apply({x:$,y:O}),Y.apply(X,X),$=X.x,O=X.y),Y.equals(Gk)&&(Y=null)},Ar=()=>{let R=1-d.edgeResistance,Z=j?mo(E):0,X=j?po(E):0,te,le,fe;s&&(C.x=k(o,"px")+"px",C.y=k(l,"px")+"px",C.renderTransform()),Fo(!1),zn.x=d.pointerX-Z,zn.y=d.pointerY-X,Y&&Y.apply(zn,zn),$=zn.x,O=zn.y,D&&(en(d.pointerX,d.pointerY),Xe(!0)),ve=ni(e),A?(Ct(),I=A.top(),T=A.left()):(Ht()?(Wt(!0,!0),Ct()):d.applyBounds(),i?(te=e.ownerSVGElement?[C.xOrigin-e.getBBox().x,C.yOrigin-e.getBBox().y]:(ll(e)[hf]||"0 0").split(" "),G=d.rotationOrigin=ni(e).apply({x:parseFloat(te[0])||0,y:parseFloat(te[1])||0}),Wt(!0,!0),le=d.pointerX-G.x-Z,fe=G.y-d.pointerY+X,T=d.x,I=d.y=Math.atan2(fe,le)*o0):(I=k(l,"px"),T=k(o,"px"))),B&&R&&(T>z?T=z+(T-z)/R:T<U&&(T=U-(U-T)/R),i||(I>L?I=L+(I-L)/R:I<V&&(I=V-(V-I)/R))),d.startX=T=ns(T),d.startY=I=ns(I)},Ht=()=>d.tween&&d.tween.isActive(),Fs=()=>{zr.parentNode&&!Ht()&&!d.isDragging&&zr.parentNode.removeChild(zr)},Jn=(R,Z)=>{let X;if(!M||d.isPressed||!R||(R.type==="mousedown"||R.type==="pointerdown")&&!Z&&rs()-_<30&&al[d.pointerEvent.type]){oe&&R&&M&&$n(R);return}if(K=Ht(),ke=!1,d.pointerEvent=R,al[R.type]?(q=~R.type.indexOf("touch")?R.currentTarget||R.target:E,bt(q,"touchend",tt),bt(q,"touchmove",qt),bt(q,"touchcancel",tt),bt(E,"touchstart",u0)):(q=null,bt(E,"mousemove",qt)),se=null,(!xc||!q)&&(bt(E,"mouseup",tt),R&&R.target&&bt(R.target,"mouseup",tt)),F=v.call(d,R.target)&&t.dragClickables===!1&&!Z,F){bt(R.target,"change",tt),ht(d,"pressInit","onPressInit"),ht(d,"press","onPress"),Zl(f,!0),oe=!1;return}if(Q=!q||c===u||d.vars.allowNativeTouchScrolling===!1||d.vars.allowContextMenu&&R&&(R.ctrlKey||R.which>2)?!1:c?"y":"x",oe=!Q&&!d.allowEventDefault,oe&&($n(R),bt(Ve,"touchforcechange",$n)),R.changedTouches?(R=S=R.changedTouches[0],W=R.identifier):R.pointerId?W=R.pointerId:S=W=null,ru++,Jk(Xe),O=d.pointerY=R.pageY,$=d.pointerX=R.pageX,ht(d,"pressInit","onPressInit"),(Q||d.autoScroll)&&bc(e.parentNode),e.parentNode&&d.autoScroll&&!A&&!i&&e.parentNode._gsMaxScrollX&&!zr.parentNode&&!e.getBBox&&(zr.style.width=e.parentNode.scrollWidth+"px",e.parentNode.appendChild(zr)),Ar(),d.tween&&d.tween.kill(),d.isThrowing=!1,Pe.killTweensOf(A||e,p,!0),A&&Pe.killTweensOf(e,{scrollTo:1},!0),d.tween=d.lockedAxis=null,(t.zIndexBoost||!i&&!A&&t.zIndexBoost!==!1)&&(e.style.zIndex=jn.zIndex++),d.isPressed=!0,H=!!(t.onDrag||d._listeners.drag),P=!!(t.onMove||d._listeners.move),t.cursor!==!1||t.activeCursor)for(X=f.length;--X>-1;)Pe.set(f[X],{cursor:t.activeCursor||t.cursor||(ua==="grab"?"grabbing":ua)});ht(d,"press","onPress")},qt=R=>{let Z=R,X,te,le,fe,be,me;if(!M||qp||!d.isPressed||!R){oe&&R&&M&&$n(R);return}if(d.pointerEvent=R,X=R.changedTouches,X){if(R=X[0],R!==S&&R.identifier!==W){for(fe=X.length;--fe>-1&&(R=X[fe]).identifier!==W&&R.target!==e;);if(fe<0)return}}else if(R.pointerId&&W&&R.pointerId!==W)return;if(q&&Q&&!se&&(zn.x=R.pageX-(j?mo(E):0),zn.y=R.pageY-(j?po(E):0),Y&&Y.apply(zn,zn),te=zn.x,le=zn.y,be=Math.abs(te-$),me=Math.abs(le-O),(be!==me&&(be>h||me>h)||ca&&Q===se)&&(se=be>me&&c?"x":"y",Q&&se!==Q&&bt(Ve,"touchforcechange",$n),d.vars.lockAxisOnTouchScroll!==!1&&c&&u&&(d.lockedAxis=se==="x"?"y":"x",as(d.vars.onLockAxis)&&d.vars.onLockAxis.call(d,Z)),ca&&Q===se))){tt(Z);return}!d.allowEventDefault&&(!Q||se&&Q!==se)&&Z.cancelable!==!1?($n(Z),oe=!0):oe&&(oe=!1),d.autoScroll&&(g=!0),en(R.pageX,R.pageY,P)},en=(R,Z,X)=>{let te=1-d.dragResistance,le=1-d.edgeResistance,fe=d.pointerX,be=d.pointerY,me=I,Ne=d.x,je=d.y,Ie=d.endX,tn=d.endY,nn=d.endRotation,xn=D,Rt,In,dt,Qe,pe,J;d.pointerX=R,d.pointerY=Z,j&&(R-=mo(E),Z-=po(E)),i?(Qe=Math.atan2(G.y-Z,R-G.x)*o0,pe=d.y-Qe,pe>180?(I-=360,d.y=Qe):pe<-180&&(I+=360,d.y=Qe),d.x!==T||Math.max(Math.abs($-R),Math.abs(O-Z))>h?(d.y=Qe,dt=T+(I-Qe)*te):dt=T):(Y&&(J=R*Y.a+Z*Y.c+Y.e,Z=R*Y.b+Z*Y.d+Y.f,R=J),In=Z-O,Rt=R-$,In<h&&In>-h&&(In=0),Rt<h&&Rt>-h&&(Rt=0),(d.lockAxis||d.lockedAxis)&&(Rt||In)&&(J=d.lockedAxis,J||(d.lockedAxis=J=c&&Math.abs(Rt)>Math.abs(In)?"y":u?"x":null,J&&as(d.vars.onLockAxis)&&d.vars.onLockAxis.call(d,d.pointerEvent)),J==="y"?In=0:J==="x"&&(Rt=0)),dt=ns(T+Rt*te),Qe=ns(I+In*te)),(ae||Se||ee)&&(d.x!==dt||d.y!==Qe&&!i)&&(ee&&(Mi.x=dt,Mi.y=Qe,J=ee(Mi),dt=ns(J.x),Qe=ns(J.y)),ae&&(dt=ns(ae(dt))),Se&&(Qe=ns(Se(Qe)))),B&&(dt>z?dt=z+Math.round((dt-z)*le):dt<U&&(dt=U+Math.round((dt-U)*le)),i||(Qe>L?Qe=Math.round(L+(Qe-L)*le):Qe<V&&(Qe=Math.round(V+(Qe-V)*le)))),(d.x!==dt||d.y!==Qe&&!i)&&(i?(d.endRotation=d.x=d.endX=dt,D=!0):(u&&(d.y=d.endY=Qe,D=!0),c&&(d.x=d.endX=dt,D=!0)),!X||ht(d,"move","onMove")!==!1?!d.isDragging&&d.isPressed&&(d.isDragging=ke=!0,ht(d,"dragstart","onDragStart")):(d.pointerX=fe,d.pointerY=be,I=me,d.x=Ne,d.y=je,d.endX=Ie,d.endY=tn,d.endRotation=nn,D=xn))},tt=(R,Z)=>{if(!M||!d.isPressed||R&&W!=null&&!Z&&(R.pointerId&&R.pointerId!==W&&R.target!==e||R.changedTouches&&!e2(R.changedTouches,W))){oe&&R&&M&&$n(R);return}d.isPressed=!1;let X=R,te=d.isDragging,le=d.vars.allowContextMenu&&R&&(R.ctrlKey||R.which>2),fe=Pe.delayedCall(.001,Fs),be,me,Ne,je,Ie;if(q?(mt(q,"touchend",tt),mt(q,"touchmove",qt),mt(q,"touchcancel",tt),mt(E,"touchstart",u0)):mt(E,"mousemove",qt),mt(Ve,"touchforcechange",$n),(!xc||!q)&&(mt(E,"mouseup",tt),R&&R.target&&mt(R.target,"mouseup",tt)),D=!1,te&&(x=a0=rs(),d.isDragging=!1),c0(Xe),F&&!le){R&&(mt(R.target,"change",tt),d.pointerEvent=X),Zl(f,!1),ht(d,"release","onRelease"),ht(d,"click","onClick"),F=!1;return}for(me=f.length;--me>-1;)Cd(f[me],"cursor",t.cursor||(t.cursor!==!1?ua:null));if(ru--,R){if(be=R.changedTouches,be&&(R=be[0],R!==S&&R.identifier!==W)){for(me=be.length;--me>-1&&(R=be[me]).identifier!==W&&R.target!==e;);if(me<0&&!Z)return}d.pointerEvent=X,d.pointerX=R.pageX,d.pointerY=R.pageY}return le&&X?($n(X),oe=!0,ht(d,"release","onRelease")):X&&!te?(oe=!1,K&&(t.snap||t.bounds)&&Zt(t.inertia||t.throwProps),ht(d,"release","onRelease"),(!ca||X.type!=="touchmove")&&X.type.indexOf("cancel")===-1&&(ht(d,"click","onClick"),rs()-_<300&&ht(d,"doubleclick","onDoubleClick"),je=X.target||e,_=rs(),Ie=()=>{_!==ce&&d.enabled()&&!d.isPressed&&!X.defaultPrevented&&(je.click?je.click():E.createEvent&&(Ne=E.createEvent("MouseEvents"),Ne.initMouseEvent("click",!0,!0,Ve,1,d.pointerEvent.screenX,d.pointerEvent.screenY,d.pointerX,d.pointerY,!1,!1,!1,!1,0,null),je.dispatchEvent(Ne)))},!ca&&!X.defaultPrevented&&Pe.delayedCall(.05,Ie))):(Zt(t.inertia||t.throwProps),!d.allowEventDefault&&X&&(t.dragClickables!==!1||!v.call(d,X.target))&&te&&(!Q||se&&Q===se)&&X.cancelable!==!1?(oe=!0,$n(X)):oe=!1,ht(d,"release","onRelease")),Ht()&&fe.duration(d.tween.duration()),te&&ht(d,"dragend","onDragEnd"),!0},Bs=R=>{if(R&&d.isDragging&&!A){let Z=R.target||e.parentNode,X=Z.scrollLeft-Z._gsScrollX,te=Z.scrollTop-Z._gsScrollY;(X||te)&&(Y?($-=X*Y.a+te*Y.c,O-=te*Y.d+X*Y.b):($-=X,O-=te),Z._gsScrollX+=X,Z._gsScrollY+=te,en(d.pointerX,d.pointerY))}},Zr=R=>{let Z=rs(),X=Z-_<100,te=Z-x<50,le=X&&ce===_,fe=d.pointerEvent&&d.pointerEvent.defaultPrevented,be=X&&he===_,me=R.isTrusted||R.isTrusted==null&&X&&le;if((le||te&&d.vars.suppressClickOnDrag!==!1)&&R.stopImmediatePropagation&&R.stopImmediatePropagation(),X&&!(d.pointerEvent&&d.pointerEvent.defaultPrevented)&&(!le||me&&!be)){me&&le&&(he=_),ce=_;return}(d.isPressed||te||X)&&(!me||!R.detail||!X||fe)&&$n(R),!X&&!te&&!ke&&(R&&R.target&&(d.pointerEvent=R),ht(d,"click","onClick"))},Ei=R=>Y?{x:R.x*Y.a+R.y*Y.c+Y.e,y:R.x*Y.b+R.y*Y.d+Y.f}:{x:R.x,y:R.y};ne=jn.get(e),ne&&ne.kill(),this.startDrag=(R,Z)=>{let X,te,le,fe;Jn(R||d.pointerEvent,!0),Z&&!d.hitTest(R||d.pointerEvent)&&(X=Li(R||d.pointerEvent),te=Li(e),le=Ei({x:X.left+X.width/2,y:X.top+X.height/2}),fe=Ei({x:te.left+te.width/2,y:te.top+te.height/2}),$-=le.x-fe.x,O-=le.y-fe.y),d.isDragging||(d.isDragging=ke=!0,ht(d,"dragstart","onDragStart"))},this.drag=qt,this.endDrag=R=>tt(R||d.pointerEvent,!0),this.timeSinceDrag=()=>d.isDragging?0:(rs()-x)/1e3,this.timeSinceClick=()=>(rs()-_)/1e3,this.hitTest=(R,Z)=>jn.hitTest(d.target,R,Z),this.getDirection=(R,Z)=>{let X=R==="velocity"&&nr?R:Ea(R)&&!i?"element":"start",te,le,fe,be,me,Ne;return X==="element"&&(me=Li(d.target),Ne=Li(R)),te=X==="start"?d.x-T:X==="velocity"?nr.getVelocity(e,o):me.left+me.width/2-(Ne.left+Ne.width/2),i?te<0?"counter-clockwise":"clockwise":(Z=Z||2,le=X==="start"?d.y-I:X==="velocity"?nr.getVelocity(e,l):me.top+me.height/2-(Ne.top+Ne.height/2),fe=Math.abs(te/le),be=fe<1/Z?"":te<0?"left":"right",fe<Z&&(be!==""&&(be+="-"),be+=le<0?"up":"down"),be)},this.applyBounds=(R,Z)=>{let X,te,le,fe,be,me;if(R&&t.bounds!==R)return t.bounds=R,d.update(!0,Z);if(Wt(!0),Ct(),B&&!Ht()){if(X=d.x,te=d.y,X>z?X=z:X<U&&(X=U),te>L?te=L:te<V&&(te=V),(d.x!==X||d.y!==te)&&(le=!0,d.x=d.endX=X,i?d.endRotation=X:d.y=d.endY=te,D=!0,Xe(!0),d.autoScroll&&!d.isDragging))for(bc(e.parentNode),fe=e,Dr.scrollTop=Ve.pageYOffset!=null?Ve.pageYOffset:E.documentElement.scrollTop!=null?E.documentElement.scrollTop:E.body.scrollTop,Dr.scrollLeft=Ve.pageXOffset!=null?Ve.pageXOffset:E.documentElement.scrollLeft!=null?E.documentElement.scrollLeft:E.body.scrollLeft;fe&&!me;)me=Do(fe.parentNode),be=me?Dr:fe.parentNode,u&&be.scrollTop>be._gsMaxScrollY&&(be.scrollTop=be._gsMaxScrollY),c&&be.scrollLeft>be._gsMaxScrollX&&(be.scrollLeft=be._gsMaxScrollX),fe=be;d.isThrowing&&(le||d.endX>z||d.endX<U||d.endY>L||d.endY<V)&&Zt(t.inertia||t.throwProps,le)}return d},this.update=(R,Z,X)=>{if(Z&&d.isPressed){let fe=ni(e),be=ve.apply({x:d.x-T,y:d.y-I}),me=ni(e.parentNode,!0);me.apply({x:fe.e-be.x,y:fe.f-be.y},be),d.x-=be.x-me.e,d.y-=be.y-me.f,Xe(!0),Ar()}let{x:te,y:le}=d;return Fo(!Z),R?d.applyBounds():(D&&X&&Xe(!0),Wt(!0)),Z&&(en(d.pointerX,d.pointerY),D&&Xe(!0)),d.isPressed&&!Z&&(c&&Math.abs(te-d.x)>.01||u&&Math.abs(le-d.y)>.01&&!i)&&Ar(),d.autoScroll&&(bc(e.parentNode,d.isDragging),g=d.isDragging,Xe(!0),mf(e,Bs),pf(e,Bs)),d},this.enable=R=>{let Z={lazy:!0},X,te,le;if(t.cursor!==!1&&(Z.cursor=t.cursor||ua),Pe.utils.checkPrefix("touchCallout")&&(Z.touchCallout="none"),R!=="soft"){for(ff(f,c===u?"none":t.allowNativeTouchScrolling&&e.scrollHeight===e.clientHeight==(e.scrollWidth===e.clientHeight)||t.allowEventDefault?"manipulation":c?"pan-y":"pan-x"),te=f.length;--te>-1;)le=f[te],xc||bt(le,"mousedown",Jn),bt(le,"touchstart",Jn),bt(le,"click",Zr,!0),Pe.set(le,Z),le.getBBox&&le.ownerSVGElement&&c!==u&&Pe.set(le.ownerSVGElement,{touchAction:t.allowNativeTouchScrolling||t.allowEventDefault?"manipulation":c?"pan-y":"pan-x"}),t.allowContextMenu||bt(le,"contextmenu",_e);Zl(f,!1)}return pf(e,Bs),M=!0,nr&&R!=="soft"&&nr.track(A||e,s?"x,y":i?"rotation":"top,left"),e._gsDragID=X=e._gsDragID||"d"+Yk++,fo[X]=d,A&&(A.enable(),A.element._gsDragID=X),(t.bounds||i)&&Ar(),t.bounds&&d.applyBounds(),d},this.disable=R=>{let Z=d.isDragging,X=f.length,te;for(;--X>-1;)Cd(f[X],"cursor",null);if(R!=="soft"){for(ff(f,null),X=f.length;--X>-1;)te=f[X],Cd(te,"touchCallout",null),mt(te,"mousedown",Jn),mt(te,"touchstart",Jn),mt(te,"click",Zr,!0),mt(te,"contextmenu",_e);Zl(f,!0),q&&(mt(q,"touchcancel",tt),mt(q,"touchend",tt),mt(q,"touchmove",qt)),mt(E,"mouseup",tt),mt(E,"mousemove",qt)}return mf(e,Bs),M=!1,nr&&R!=="soft"&&(nr.untrack(A||e,s?"x,y":i?"rotation":"top,left"),d.tween&&d.tween.kill()),A&&A.disable(),c0(Xe),d.isDragging=d.isPressed=F=!1,Z&&ht(d,"dragend","onDragEnd"),d},this.enabled=function(R,Z){return arguments.length?R?d.enable(Z):d.disable(Z):M},this.kill=function(){return d.isThrowing=!1,d.tween&&d.tween.kill(),d.disable(),Pe.set(f,{clearProps:"userSelect"}),delete fo[e._gsDragID],d},this.revert=function(){this.kill(),this.styles&&this.styles.revert()},~r.indexOf("scroll")&&(A=this.scrollProxy=new n2(e,Qk({onKill:function(){d.isPressed&&tt(null)}},t)),e.style.overflowY=u&&!uf?"auto":"hidden",e.style.overflowX=c&&!uf?"auto":"hidden",e=A.content),i?p.rotation=1:(c&&(p[o]=1),u&&(p[l]=1)),C.force3D="force3D"in t?t.force3D:!0,Tb(this),this.enable()}static register(e){Pe=e,jd()}static create(e,t){return cf||jd(!0),ys(e).map(r=>new jn(r,t))}static get(e){return fo[(ys(e)[0]||{})._gsDragID]}static timeSinceDrag(){return(rs()-a0)/1e3}static hitTest(e,t,r){if(e===t)return!1;let s=Li(e),i=Li(t),{top:o,left:l,right:c,bottom:u,width:h,height:d}=s,f=i.left>c||i.right<l||i.top>u||i.bottom<o,p,x,g;return f||!r?!f:(g=(r+"").indexOf("%")!==-1,r=parseFloat(r)||0,p={left:Math.max(l,i.left),top:Math.max(o,i.top)},p.width=Math.min(c,i.right)-p.left,p.height=Math.min(u,i.bottom)-p.top,p.width<0||p.height<0?!1:g?(r*=.01,x=p.width*p.height,x>=h*d*r||x>=i.width*i.height*r):p.width>r&&p.height>r)}}Zk(jn.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1});jn.zIndex=1e3;jn.version="3.13.0";Pb()&&Pe.registerPlugin(jn);const s2=({isOpen:n,title:e,message:t,itemDetails:r,clientName:s,clientId:i,remainingItems:o,outstandingDebt:l,onConfirm:c,onCancel:u,isProcessing:h=!1})=>{if(!n)return null;const d=a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4 select-none",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-y-auto select-none",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 select-none",children:[a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsx("div",{className:"bg-orange-100 p-2 rounded-full select-none",children:a.jsx(dv,{size:20,className:"text-orange-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 select-none",children:e})]}),a.jsx("button",{onClick:u,disabled:h,className:"text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50",children:a.jsx($e,{size:24})})]}),a.jsxs("div",{className:"p-6 select-none",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-4 select-none",children:[a.jsx("div",{className:"bg-yellow-100 p-2 rounded-full flex-shrink-0 select-none",children:a.jsx(jr,{size:20,className:"text-yellow-600"})}),a.jsxs("div",{className:"flex-1 select-none",children:[a.jsx("p",{className:"text-gray-700 mb-2 select-none",children:t}),r&&a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200 select-none",children:a.jsx("p",{className:"text-sm text-gray-600 font-medium select-none",children:r})})]})]}),(s||i||o||l)&&a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200 mb-4 select-none",children:a.jsxs("div",{className:"space-y-1 text-sm select-none",children:[s&&a.jsxs("p",{className:"select-none",children:[a.jsx("span",{className:"font-medium",children:"Client:"})," ",s]}),i&&a.jsxs("p",{className:"select-none",children:[a.jsx("span",{className:"font-medium",children:"ID:"})," ",i]}),l&&a.jsxs("p",{className:"select-none",children:[a.jsx("span",{className:"font-medium",children:"Outstanding Debt:"})," Rs ",l]}),o&&a.jsxs("p",{className:"select-none",children:[a.jsx("span",{className:"font-medium",children:"Returnable Items:"})," ",o]})]})}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 select-none",children:a.jsx("p",{className:"text-sm text-yellow-800 select-none",children:" This action will mark all selected items as returned and cannot be undone."})}),a.jsxs("div",{className:"flex gap-3 select-none",children:[a.jsx("button",{onClick:u,disabled:h,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors disabled:opacity-50 font-medium select-none",children:"Cancel"}),a.jsx("button",{onClick:c,disabled:h,className:"flex-1 px-4 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50 font-medium select-none",children:h?"Processing...":"Confirm Return"})]})]})]})});return Tt.createPortal(d,document.body)};class Xp{constructor(e){this.animationId=null,this.isScrolling=!1,this.scrollTimeout=null,this.currentPosition=0,this.startTime=0,this.isAnimating=!1,this.container=e.container,this.textElement=e.textElement,this.text=e.text,this.pauseDuration=e.pauseDuration*1e3,this.scrollDuration=e.scrollDuration*1e3,this.easing=e.easing,this.start()}static create(e){return new Xp(e)}start(){this.reset(),this.scheduleNextAnimation()}reset(){this.currentPosition=0,this.textElement.style.transform="translateX(0px)",this.isAnimating=!1}scheduleNextAnimation(){this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.startScrollAnimation()},this.pauseDuration)}startScrollAnimation(){if(this.isScrolling)return;const e=this.container.offsetWidth,r=this.textElement.scrollWidth-e;if(r<=0)return;this.isAnimating=!0,this.startTime=performance.now();const s=i=>{if(!this.isAnimating)return;const o=i-this.startTime,l=Math.min(o/this.scrollDuration,1),c=this.applyEasing(l);this.currentPosition=-r*c,this.textElement.style.transform=`translateX(${this.currentPosition}px)`,l<1?this.animationId=requestAnimationFrame(s):(this.isAnimating=!1,setTimeout(()=>{this.startReturnAnimation()},this.pauseDuration))};this.animationId=requestAnimationFrame(s)}startReturnAnimation(){if(this.isScrolling)return;this.isAnimating=!0,this.startTime=performance.now();const e=this.currentPosition,t=r=>{if(!this.isAnimating)return;const s=r-this.startTime,i=Math.min(s/this.scrollDuration,1),o=this.applyEasing(i);this.currentPosition=e+-e*o,this.textElement.style.transform=`translateX(${this.currentPosition}px)`,i<1?this.animationId=requestAnimationFrame(t):(this.isAnimating=!1,this.currentPosition=0,this.scheduleNextAnimation())};this.animationId=requestAnimationFrame(t)}applyEasing(e){switch(this.easing){case"power1.inOut":return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2;case"power2.inOut":return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2;case"linear":return e;default:return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2}}handleScrollStart(){this.isScrolling=!0,this.stop(),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.isScrolling=!1,this.scheduleNextAnimation()},1e3)}stop(){this.isAnimating=!1,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.scrollTimeout&&(clearTimeout(this.scrollTimeout),this.scrollTimeout=null)}}const su=({text:n,className:e="",children:t,pauseDuration:r=2,scrollDuration:s=6,easing:i="power2.inOut",onReset:o})=>{const l=N.useRef(null),c=N.useRef(null),[u,h]=N.useState(!1),d=N.useRef(null),f=N.useRef(null);return N.useEffect(()=>{const p=()=>{if(!l.current||!c.current)return;const m=l.current,y=c.current;y.style.willChange="transform",d.current&&(d.current.stop(),d.current=null),f.current&&(window.removeEventListener("scroll",f.current,{passive:!0}),document.removeEventListener("scroll",f.current,{passive:!0}),f.current=null),m.offsetWidth,y.offsetWidth;const b=m.offsetWidth,v=y.scrollWidth,_=n||"children content",C=_.includes(" "),j=_.length>30;if(v>b){h(!0);const k=C&&j?r+1:r,E=C&&j?s+1:s,M=C&&j?"power1.inOut":i;d.current=Xp.create({container:m,textElement:y,text:_,pauseDuration:k,scrollDuration:E,easing:M});const A=()=>{d.current&&d.current.handleScrollStart()};window.addEventListener("scroll",A,{passive:!0}),document.addEventListener("scroll",A,{passive:!0});let $=m.parentElement;for(;$;)($.scrollHeight>$.clientHeight||$.scrollWidth>$.clientWidth)&&$.addEventListener("scroll",A,{passive:!0}),$=$.parentElement;f.current=A}else h(!1),y.style.transform!=="translateX(0px)"&&(y.style.transition="transform 0.3s ease-out",y.style.transform="translateX(0px)",setTimeout(()=>{y.style.transition="",o&&o()},300)),d.current&&(d.current.stop(),d.current=null)};p();const x=()=>{p()};window.addEventListener("resize",x);let g;const w=new MutationObserver(m=>{clearTimeout(g),m.some(b=>b.type==="childList"||b.type==="characterData")&&(d.current&&(d.current.stop(),d.current=null),c.current&&(c.current.style.transition="transform 0.2s ease-out",c.current.style.transform="translateX(0px)",setTimeout(()=>{c.current&&(c.current.style.transition=""),o&&o()},200)),g=setTimeout(p,150))});return l.current&&w.observe(l.current,{childList:!0,subtree:!0,characterData:!0}),()=>{clearTimeout(g),window.removeEventListener("resize",x),w.disconnect(),f.current&&(window.removeEventListener("scroll",f.current,{passive:!0}),document.removeEventListener("scroll",f.current,{passive:!0}),f.current=null),d.current&&(d.current.stop(),d.current=null)}},[n,t,r,s,i]),N.useEffect(()=>()=>{var p;if(f.current){const x=f.current;window.removeEventListener("scroll",x,{passive:!0});let g=(p=l.current)==null?void 0:p.parentElement;for(;g&&g!==document.body;)g.removeEventListener("scroll",f.current,{passive:!0}),g=g.parentElement;f.current=null}d.current&&(d.current.stop(),d.current=null)},[]),a.jsx("div",{ref:l,className:`w-full ${e}`,style:{position:"relative",width:"100%",maxWidth:"100%",overflow:"hidden"},children:a.jsx("div",{ref:c,className:"whitespace-nowrap",style:{display:"inline-block",minWidth:"100%",maxWidth:"none",overflow:"hidden"},children:t||n})})},$b=({client:n,onClose:e,onQuickAdd:t,onResetCalculator:r,onViewDetails:s})=>{const{addPartialPayment:i,settleClient:o,settleClientWithFullClear:l,getClientTotalDebt:c,returnBottles:u,getClientBottlesOwed:h,getClientTransactions:d,addTransaction:f,addBatchTransactions:p}=kr(),{showAlert:x}=ji(),[g,w]=N.useState(!1),[m,y]=N.useState(!1),[b,v]=N.useState(""),[_,C]=N.useState({}),[j,k]=N.useState(!1),[E,M]=N.useState(!1),[A,$]=N.useState(null),[O,T]=N.useState(!1),[I,B]=N.useState(!1),H=c(n.id),P=h(n.id),z=d(n.id),U=async()=>{const F=parseFloat(b);if(isNaN(F)||F<=0||F>H){x({type:"warning",message:"Please enter a valid payment amount"});return}try{k(!0),await i(n.id,F);const q=S(),Y={};Object.entries(q).forEach(([Q,se])=>{se.total>0&&(Y[Q]=se)});const K=Object.entries(Y).map(([Q,se])=>`${se.total} ${Q}${se.total>1?"s":""}`).join(", ");console.log(" ClientActionModal: Dispatching showDuplicateCard event for partial payment"),window.dispatchEvent(new CustomEvent("showDuplicateCard",{detail:{...n,isAccountClear:!1,message:`Payment of Rs ${F.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})} Recorded Successfully!`,transactionAmount:F,transactionDescription:K?`Returnables: ${K}`:""}})),console.log(" ClientActionModal: Dispatching creditDataChanged event with clientActionAdd source"),window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{source:"clientActionAdd"}})),r&&r(),e()}catch(q){console.error(" ClientActionModal: Error processing partial payment:",q),x({type:"error",message:"Failed to Process Payment"})}finally{k(!1)}},L=async(F=!1)=>{try{k(!0),F?await l(n.id):Object.keys(ae).length>0?await o(n.id):await o(n.id),console.log(" ClientActionModal: Dispatching creditDataChanged event with clientActionSettle source"),window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{source:"clientActionSettle"}})),e(),r&&r()}catch(q){console.error(" ClientActionModal: Error settling client:",q)}finally{k(!1)}},V=async()=>{try{k(!0),await l(n.id),console.log(" ClientActionModal: Dispatching creditDataChanged event with clientActionSettle source (full clear)"),window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{source:"clientActionSettle"}})),e(),r&&r()}catch(F){console.error(" ClientActionModal: Error settling client with full clear:",F)}finally{k(!1)}},S=()=>{const F=Co(z,n.name),q={};return F.forEach(Y=>{const K=Y.match(/^(\d+)\s+(.+)$/);if(K){const Q=parseInt(K[1]),se=K[2];let ie=se;se.startsWith("Bouteille ")||se.startsWith("Chopine ")||se.startsWith("Caisse ")?ie=se:se==="Bouteilles"?ie="Bouteille":se==="Chopines"?ie="Chopine":se==="Caisses"?ie="Caisse":/\d+(?:\.\d+)?L Bouteilles? /.test(se)||/\d+(?:\.\d+)?L Bouteilles$/.test(se)&&(ie=se.replace("Bouteilles","Bouteille")),q[ie]?q[ie].total+=Q:q[ie]={total:Q,transactions:[]},q[ie].transactions.push({id:`dummy-${ie}`,description:se,amount:0,quantity:Q,date:new Date})}}),q},W=(F,q)=>{C(Y=>({...Y,[F]:Math.max(0,(Y[F]||0)+q)}))},G=async()=>{try{k(!0);const F=Object.entries(_).filter(([Y,K])=>K>0).map(([Y,K])=>{if(Y.includes("Bouteille")){let Q=Y.replace(/^(Bouteilles?)/i,"").trim();if(Q){const se=K>1;if(K===1&&Q.endsWith("s")&&!Q.match(/^\d/)){const ie=Q.toLowerCase();["vins","bires","jus","sodas"].some(he=>ie===he)&&(Q=Q.slice(0,-1))}return`${K} Bouteille${se?"s":""} ${Q}`}else{const se=K>1;return`${K} Bouteille${se?"s":""}`}}else if(Y.includes("Chopine")){const Q=Y.replace(/^(Chopines?)/i,"").trim();if(Q){const se=K>1;return`${K} Chopine${se?"s":""} ${Q}`}else{const se=K>1;return`${K} Chopine${se?"s":""}`}}return`${K} ${Y}${K>1?"s":""}`}).join(", "),q=Object.entries(_).filter(([Y,K])=>K>0).map(([Y,K])=>{let Q=`Returned: ${K} `;if(Y.includes("Chopine")){const ie=Y.replace(/^(Chopines?)/i,"").trim();Q+=`Chopine${K>1?"s":""}${ie?` ${ie}`:""}`}else if(Y.includes("Bouteille")){let ie=Y.replace(/^(Bouteilles?)/i,"").trim();if(K===1&&ie.endsWith("s")&&!ie.match(/^\d/)){const ce=ie.toLowerCase();["vins","bires","jus","sodas"].some(oe=>ce===oe)&&(ie=ie.slice(0,-1))}Q+=`Bouteille${K>1?"s":""}${ie?` ${ie}`:""}`}else Q+=`${Y}${K>1?"s":""}`;return{description:`${Q} - ${new Date().toLocaleDateString("en-GB")} ${new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}`,amount:0}});await p(n,q),console.log(" ClientActionModal: Dispatching showDuplicateCard event for returns"),window.dispatchEvent(new CustomEvent("showDuplicateCard",{detail:{...n,isAccountClear:!1,message:`${F} returned successfully!`,transactionDescription:`Returned: ${F} - ${new Date().toLocaleDateString("en-GB")} ${new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}`}})),M(!1),$(null),e()}catch(F){console.error(" ClientActionModal: Error processing returns:",F),x({type:"error",message:"Failed to Process Returns"})}finally{k(!1)}},D=async(F,q)=>{try{let Y=`Returned: ${q} `;if(F.includes("Chopine")){const Q=F.replace(/^(Chopines?)/i,"").trim();Y+=`Chopine${q>1?"s":""}${Q?` ${Q}`:""}`}else if(F.includes("Bouteille")){let Q=F.replace(/^(Bouteilles?)/i,"").trim();if(q===1&&Q.endsWith("s")&&!Q.match(/^\d/)){const se=Q.toLowerCase();["vins","bires","jus","sodas"].some(ce=>se===ce)&&(Q=Q.slice(0,-1))}Y+=`Bouteille${q>1?"s":""}${Q?` ${Q}`:""}`}else Y+=`${F}${q>1?"s":""}`;const K=`${Y} - ${new Date().toLocaleDateString("en-GB")} ${new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}`;await f(n,K,0)}catch(Y){throw Y}},{returnableItems:ne,availableItems:ae}=N.useMemo(()=>{const F=S(),q={};return Object.entries(F).forEach(([Y,K])=>{K.total>0&&(q[Y]=K)}),{returnableItems:F,availableItems:q}},[z]),Se=Object.keys(ae).sort((F,q)=>F.includes("Chopine")&&!q.includes("Chopine")?-1:!F.includes("Chopine")&&q.includes("Chopine")?1:F.localeCompare(q)),ee=a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4 select-none",children:[a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-y-auto select-none",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 select-none",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 select-none",children:n.name}),a.jsxs("p",{className:"text-gray-600 select-none",children:["ID: ",n.id]}),a.jsxs("div",{className:"text-gray-600 select-none",children:[a.jsxs("p",{className:"select-none",children:["Outstanding: Rs ",H.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),Object.values(P).some(F=>F>0)&&a.jsxs("p",{className:"text-sm select-none",children:["Bottles owed: ",Object.entries(P).filter(([F,q])=>q>0).map(([F,q])=>`${q} ${F.charAt(0).toUpperCase()+F.slice(1)}${q>1?"s":""}`).join(", ")]})]})]}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors",children:a.jsx($e,{size:24})})]}),a.jsx("div",{className:"p-6 overflow-y-auto select-none",children:!g&&!m?a.jsxs("div",{className:"space-y-4 select-none",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4 select-none",children:"Choose Action"}),a.jsxs("button",{onClick:()=>{e(),s==null||s(n)},disabled:j,className:"w-full flex items-center gap-4 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-200 transition-colors disabled:opacity-50",children:[a.jsx("div",{className:"bg-blue-500 p-2 rounded-full",children:a.jsx(Yc,{size:20,className:"text-white"})}),a.jsxs("div",{className:"text-left select-none",children:[a.jsx("h4",{className:"font-medium text-gray-800 select-none",children:"View Details"}),a.jsx("p",{className:"text-sm text-gray-600 select-none",children:"See Transaction History and Client Info"})]})]}),a.jsxs("button",{onClick:F=>{F.preventDefault(),F.stopPropagation(),t&&(t(n),e(),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),window.scrollTo({top:0,behavior:"smooth"}))},disabled:j,className:"w-full flex items-center gap-4 p-4 bg-purple-50 hover:bg-purple-100 rounded-lg border border-purple-200 transition-colors disabled:opacity-50",children:[a.jsx("div",{className:"bg-purple-500 p-2 rounded-full",children:a.jsx(Np,{size:20,className:"text-white"})}),a.jsxs("div",{className:"text-left select-none",children:[a.jsx("h4",{className:"font-medium text-gray-800 select-none",children:"Link to Calculator"}),a.jsx("p",{className:"text-sm text-gray-600 select-none",children:"Connect Client to Calculator for Quick Transactions"})]})]}),Object.keys(ae).length>0&&a.jsxs("button",{onClick:()=>y(!0),disabled:j,className:"w-full flex items-center gap-4 p-4 bg-orange-50 hover:bg-orange-100 rounded-lg border border-orange-200 transition-colors disabled:opacity-50",children:[a.jsx("div",{className:"bg-orange-500 p-2 rounded-full",children:a.jsx(dv,{size:20,className:"text-white"})}),a.jsxs("div",{className:"text-left select-none",children:[a.jsx("h4",{className:"font-medium text-gray-800 select-none",children:"Return"}),a.jsx("p",{className:"text-sm text-gray-600 select-none",children:"Return Items or Make Adjustments"})]})]}),H>0&&a.jsxs("button",{onClick:()=>w(!0),disabled:j,className:"w-full flex items-center gap-4 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-200 transition-colors disabled:opacity-50",children:[a.jsx("div",{className:"bg-blue-500 p-2 rounded-full",children:a.jsx(jp,{size:20,className:"text-white"})}),a.jsxs("div",{className:"text-left select-none",children:[a.jsx("h4",{className:"font-medium text-gray-800 select-none",children:"Partial Payment"}),a.jsx("p",{className:"text-sm text-gray-600 select-none",children:"Record a Partial Payment Amount"})]})]}),H>0&&Object.keys(ae).length>0?a.jsxs("button",{onClick:()=>T(!0),disabled:j,className:"w-full flex items-center gap-4 p-4 bg-green-50 hover:bg-green-100 rounded-lg border border-green-200 transition-colors disabled:opacity-50",children:[a.jsx("div",{className:"bg-green-500 p-2 rounded-full",children:a.jsx(Fr,{size:20,className:"text-white"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:"Settle Account"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Mark as Fully Paid and Remove"})]})]}):H>0&&Object.keys(ae).length===0?a.jsxs("button",{onClick:()=>B(!0),disabled:j,className:"w-full flex items-center gap-4 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-200 transition-colors disabled:opacity-50",children:[a.jsx("div",{className:"bg-blue-500 p-2 rounded-full",children:a.jsx(Fr,{size:20,className:"text-white"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:"Settle Account"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Mark Debt as Fully Paid and Clear All Transactions"})]})]}):null]}):g?a.jsxs("div",{className:"select-none",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4 select-none",children:"Partial Payment"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 select-none",children:"Payment Amount (Rs)"}),a.jsx("div",{className:"relative",children:a.jsx("input",{type:"number",value:b,onChange:F=>v(F.target.value),step:"0.01",placeholder:"0.00",className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1 select-none",children:["Maximum: Rs ",H.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>w(!1),disabled:j,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Back"}),a.jsx("button",{type:"button",onClick:U,disabled:j||!b,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",children:j?"Processing...":"Record Payment"})]})]}):a.jsxs("div",{className:"select-none",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-700",children:a.jsx(Ca,{size:20})}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 select-none",children:"Return Chopine & Bouteille"}),a.jsx("div",{className:"flex-1"}),a.jsxs("button",{onClick:async()=>{$({type:"all"}),M(!0)},disabled:j||Object.keys(ae).length===0,className:"bg-red-500 hover:bg-red-600 text-white p-2 rounded-lg transition-colors disabled:opacity-50 flex items-center gap-1",title:"Settle all returnable items",children:[a.jsx($e,{size:16}),a.jsx("span",{className:"text-sm",children:"Settle All"})]})]}),Object.keys(ae).length===0?a.jsx("div",{className:"text-center py-8 text-gray-500 select-none",children:a.jsx("p",{className:"select-none",children:"No Chopine or Bouteille items found in transaction history"})}):a.jsxs("div",{className:"space-y-4 mb-6",children:[Se.map(F=>{const q=ae[F];return a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"select-none",children:[a.jsx("h4",{className:"font-medium text-gray-800 select-none",children:(()=>{if(F.includes("Bouteille")||F.includes("Chopine"))if(F.includes("Bouteille")){const Y=F.split(" "),K=[];let Q=!1;for(let se=0;se<Y.length;se++){const ie=Y[se];/\d+[Ll]$/.test(ie)||ie==="Bouteille"?(K.push(ie),/\d+[Ll]$/.test(ie)&&(Q=!0)):Q?/^\d/.test(ie)?K.push(ie.toLowerCase()):K.push(ie.charAt(0).toUpperCase()+ie.slice(1).toLowerCase()):/^\d/.test(ie)?K.push(ie.toLowerCase()):K.push(ie.charAt(0).toUpperCase()+ie.slice(1).toLowerCase())}return K.join(" ")}else return F;else if(F.includes("L ")&&F.includes(" ")){const Y=F.split(" ");if(Y.length>=2){const K=Y.slice(1).map(Q=>/^\d/.test(Q)?Q.toLowerCase():Q.charAt(0).toUpperCase()+Q.slice(1).toLowerCase()).join(" ");return`Bouteille ${Y[0]} ${K}`}return`Bouteille ${F}`}else return`Bouteille ${F.split(" ").map(K=>/^\d/.test(K)?K.toLowerCase():K.charAt(0).toUpperCase()+K.slice(1).toLowerCase()).join(" ")}`})()}),a.jsxs("p",{className:"text-sm text-gray-600 select-none",children:["Available to return: ",q.total]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:async()=>{$({type:"individual",itemType:F,quantity:q.total}),M(!0)},disabled:j,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors disabled:opacity-50",title:`Settle all ${F}`,children:a.jsx($e,{size:16})}),a.jsx("button",{type:"button",onClick:()=>W(F,-1),className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded-full flex items-center justify-center",disabled:!_[F]||_[F]===0,children:a.jsx($o,{size:16})}),a.jsx("span",{className:"w-12 text-center font-medium text-lg",children:_[F]||0}),a.jsx("button",{type:"button",onClick:()=>W(F,1),className:"w-8 h-8 bg-orange-500 hover:bg-orange-600 text-white rounded-full flex items-center justify-center",disabled:_[F]>=q.total,children:a.jsx(Bt,{size:16})})]})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[a.jsx("p",{className:"font-medium mb-1",children:"Recent transactions:"}),(()=>{const K=z.filter(oe=>!oe.description.toLowerCase().includes("returned")&&(oe.description.toLowerCase().includes("bouteille")||oe.description.toLowerCase().includes("chopine"))).filter(oe=>oe.description.toLowerCase().includes(F.toLowerCase().split(" ")[0]));let Q=0;K.forEach(oe=>{const ve=oe.description.match(/(\d+)\s+/);ve&&(Q+=parseInt(ve[1]))});const se=z.filter(oe=>oe.type==="debt"&&oe.description.toLowerCase().includes("returned")&&oe.description.toLowerCase().includes(F.toLowerCase()));let ie=0;se.forEach(oe=>{const ve=oe.description.toLowerCase().match(/returned:\s*(\d+)/i);ve&&(ie+=parseInt(ve[1]))});const ce=q.transactions.reduce((oe,ve)=>(oe.find(_e=>_e.id===ve.id||_e.description===ve.description&&Math.abs(_e.date.getTime()-ve.date.getTime())<1e3)||oe.push(ve),oe),[]);return(ae[F]&&ae[F].total>0?ce.slice(-2):[]).map((oe,ve)=>a.jsxs("div",{className:"truncate",children:[" ",a.jsx(su,{text:`${oe.description} (${oe.quantity} ${(()=>{if(F.includes("Bouteille")||F.includes("Chopine"))return F;if(F.includes("L ")&&F.includes(" ")){const ke=F.split(" "),_e=ke.slice(1).map(Xe=>/^\d/.test(Xe)?Xe.toLowerCase():Xe.charAt(0).toUpperCase()+Xe.slice(1).toLowerCase()).join(" ");return`Bouteille ${ke[0]} ${_e}`}else return`Bouteille ${F.split(" ").map(_e=>/^\d/.test(_e)?_e.toLowerCase():_e.charAt(0).toUpperCase()+_e.slice(1).toLowerCase()).join(" ")}`})()}) - ${oe.date.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})} ${oe.date.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}`,className:"text-xs text-gray-500",pauseDuration:1,scrollDuration:3,easing:"power1.inOut"})]},ve))})(),z.filter(K=>K.type==="debt"&&K.description.toLowerCase().includes("returned")&&K.description.toLowerCase().includes(F.toLowerCase())).filter(K=>{const Q=z.filter(se=>se.type==="debt"&&!se.description.toLowerCase().includes("returned")&&se.description.toLowerCase().includes(F.toLowerCase().split(" ")[0])).sort((se,ie)=>ie.date.getTime()-se.date.getTime())[0];return Q?K.date.getTime()>Q.date.getTime():!1}).slice(-2).map((K,Q)=>a.jsxs("div",{className:"truncate text-green-600",children:[" ",a.jsx(su,{text:`${K.description} - ${K.date.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"}).replace(/\s/g,"-")} ${K.date.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}`,className:"text-xs text-green-600",pauseDuration:1,scrollDuration:3,easing:"power1.inOut"})]},`returned-${Q}`))]})]},F)}),a.jsx("button",{className:"w-full px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50",onClick:G,disabled:j||Object.values(_).every(F=>F===0),children:j?"Processing...":"Process Returns"})]})]})})]}),E&&A&&a.jsx(s2,{isOpen:E,title:A.type==="all"?"Settle All Returns":"Settle Item Returns",message:A.type==="all"?`Return All Available Chopine & Bouteille Items for ${n.name}?`:`Return All ${A.quantity} ${A.itemType}${(A.quantity||0)>1?"s":""} for ${n.name}?`,itemDetails:A.type==="all"?"This Will Mark All Returnable Containers as Returned.":`This Will Mark ${A.quantity} ${A.itemType}${(A.quantity||0)>1?"s":""} as returned.`,clientName:n.name,clientId:n.id,outstandingDebt:H.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),remainingItems:Object.entries(ae).map(([F,q])=>`${q.total} ${F}`).join(", "),onConfirm:async()=>{try{if(k(!0),A.type==="all"){const F=Object.entries(ae).map(([q,Y])=>{const K=Y.total;let Q=`Returned: ${K} `;if(q.includes("Chopine")){const ie=q.replace(/^(Chopines?)/i,"").trim();Q+=`Chopine${K>1?"s":""}${ie?` ${ie}`:""}`}else if(q.includes("Bouteille")){let ie=q.replace(/^(Bouteilles?)/i,"").trim();if(K===1&&ie.endsWith("s")&&!ie.match(/^\d/)){const ce=ie.toLowerCase();["vins","bires","jus","sodas"].some(oe=>ce===oe)&&(ie=ie.slice(0,-1))}Q+=`Bouteille${K>1?"s":""}${ie?` ${ie}`:""}`}else Q+=`${q}${K>1?"s":""}`;return{description:`${Q} - ${new Date().toLocaleDateString("en-GB")} ${new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}`,amount:0}});await p(n,F),window.dispatchEvent(new CustomEvent("showDuplicateCard",{detail:{...n,isAccountClear:!1,message:"All Returnables Settled Successfully!",transactionDescription:"Returned All Returnable Items"}}))}else if(A.itemType&&A.quantity){await D(A.itemType,A.quantity);let F=A.itemType;if(A.itemType.includes("Bouteille")){let q=A.itemType.replace(/^(Bouteilles?)/i,"").trim();if(q){if((A.quantity||0)===1&&q.endsWith("s")&&!q.match(/^\d/)){const Y=q.toLowerCase();["vins","bires","jus","sodas"].some(Q=>Y===Q)&&(q=q.slice(0,-1))}F=`Bouteille${(A.quantity||0)>1?"s":""} ${q}`}else F=`Bouteille${(A.quantity||0)>1?"s":""}`}else if(A.itemType.includes("Chopine")){const q=A.itemType.replace(/^(Chopines?)/i,"").trim();q?F=`Chopine${(A.quantity||0)>1?"s":""} ${q}`:F=`Chopine${(A.quantity||0)>1?"s":""}`}window.dispatchEvent(new CustomEvent("showDuplicateCard",{detail:{...n,isAccountClear:!1,message:`${A.quantity} ${F} returned successfully!`,transactionDescription:`Returned: ${A.quantity} ${F}`}}))}M(!1),$(null),e()}catch(F){console.error("Error settling items:",F),x({type:"error",message:`Failed to Settle ${A.type==="all"?"All Items":A.itemType}`})}finally{k(!1)}},onCancel:()=>{M(!1),$(null)},isProcessing:j}),O&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4 select-none",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-y-auto select-none",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 select-none",children:[a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsx("div",{className:"bg-green-100 p-2 rounded-full select-none",children:a.jsx(Fr,{size:20,className:"text-green-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 select-none",children:"Settle Account"})]}),a.jsx("button",{onClick:()=>T(!1),disabled:j,className:"text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50",children:a.jsx($e,{size:24})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto select-none",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-4 select-none",children:[a.jsx("div",{className:"bg-yellow-100 p-2 rounded-full flex-shrink-0 select-none",children:a.jsx(jr,{size:20,className:"text-yellow-600"})}),a.jsxs("div",{className:"flex-1 select-none",children:[a.jsxs("p",{className:"text-gray-700 mb-2 select-none",children:["Are you sure you want to settle the account for ",a.jsx("strong",{children:n.name}),"?"]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200 mb-3 select-none",children:a.jsxs("div",{className:"space-y-1 text-sm select-none",children:[a.jsxs("p",{className:"select-none",children:[a.jsx("span",{className:"font-medium",children:"Outstanding Debt:"})," Rs ",H.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),Object.values(P).some(F=>F>0)&&a.jsxs("p",{className:"select-none",children:[a.jsx("span",{className:"font-medium",children:"Bottles Owed:"})," ",Object.entries(P).filter(([F,q])=>q>0).map(([F,q])=>`${q} ${F.charAt(0).toUpperCase()+F.slice(1)}${q>1?"s":""}`).join(", ")]}),Object.keys(ae).length>0&&a.jsxs("p",{className:"select-none",children:[a.jsx("span",{className:"font-medium",children:"Returnable Items:"})," ",Object.entries(ae).map(([F,q])=>`${q.total} ${F}`).join(", ")]})]})})]})]}),a.jsxs("div",{className:"space-y-3 mb-6 select-none",children:[H>0&&a.jsxs("button",{onClick:async()=>{T(!1);try{await L(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{source:"clientActionSettle"}})),window.dispatchEvent(new CustomEvent("showDuplicateCard",{detail:{...n,isAccountClear:!0,message:"Account Cleared Successfully!",transactionDescription:Object.keys(ae).length>0?"Account Settled (Returnables Preserved)":"Account Settled Successfully"}}))},100)}catch(F){console.error("Error settling account:",F)}},disabled:j,className:"w-full flex items-center gap-4 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-200 transition-colors disabled:opacity-50 select-none",children:[a.jsx("div",{className:"bg-blue-500 p-2 rounded-full select-none",children:a.jsx(iN,{size:20,className:"text-white"})}),a.jsxs("div",{className:"text-left flex-1 select-none",children:[a.jsx("h4",{className:"font-medium text-gray-800 select-none",children:"Settle Account Only"}),a.jsx("p",{className:"text-sm text-gray-600 select-none",children:Object.keys(ae).length>0?"Mark Account as Fully Paid but Keep Returnables":"Mark Account as Fully Paid"}),a.jsxs("p",{className:"text-xs text-green-600 select-none",children:["Debt: Rs ",H.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),(H>0||Object.keys(ae).length>0)&&a.jsxs("button",{onClick:async()=>{try{k(!0),T(!1),await V(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{source:"clientActionSettle"}})),window.dispatchEvent(new CustomEvent("showDuplicateCard",{detail:{...n,isAccountClear:!0,message:"Account Cleared Successfully!",transactionDescription:Object.keys(ae).length>0?"Account Settled And All Returnables Cleared":"Account Settled Successfully"}}))},100)}catch(F){console.error("Error settling account with returns:",F),x({type:"error",message:"Failed to Settle Account"})}finally{k(!1)}},disabled:j,className:"w-full flex items-center gap-4 p-4 bg-green-50 hover:bg-green-100 rounded-lg border border-green-200 transition-colors disabled:opacity-50 select-none",children:[a.jsx("div",{className:"bg-green-500 p-2 rounded-full select-none",children:a.jsx(Fr,{size:20,className:"text-white"})}),a.jsxs("div",{className:"text-left flex-1 select-none",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:Object.keys(ae).length>0?"Settle Account + Clear Returnables":"Settle Account"}),a.jsx("p",{className:"text-sm text-gray-600 select-none",children:H>0?Object.keys(ae).length>0?"Mark Account as Fully Paid and Clear All Returnables":"Mark Account as Fully Paid":"Clear all data for this client"}),H>0&&a.jsxs("p",{className:"text-xs text-green-600 select-none",children:["Debt: Rs ",H.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),Object.keys(ae).length>0&&a.jsxs("p",{className:"text-xs text-orange-600 select-none",children:["+ Clears: ",Object.entries(ae).map(([F,q])=>`${q.total} ${F}`).join(", ")]})]})]})]}),a.jsx("div",{className:"flex justify-center select-none",children:a.jsx("button",{onClick:()=>T(!1),disabled:j,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors disabled:opacity-50 font-medium select-none",children:"Cancel"})})]})]})}),I&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4 select-none",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-y-auto select-none",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 select-none",children:[a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-full select-none",children:a.jsx(Fr,{size:20,className:"text-blue-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 select-none",children:"Settle Account"})]}),a.jsx("button",{onClick:()=>B(!1),disabled:j,className:"text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50",children:a.jsx($e,{size:24})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto select-none",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-4 select-none",children:[a.jsx("div",{className:"bg-yellow-100 p-2 rounded-full flex-shrink-0 select-none",children:a.jsx(jr,{size:20,className:"text-yellow-600"})}),a.jsxs("div",{className:"flex-1 select-none",children:[a.jsxs("p",{className:"text-gray-700 mb-2 select-none",children:["Are you sure you want to settle the account for ",a.jsx("strong",{children:n.name}),"?"]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200 mb-3 select-none",children:a.jsx("div",{className:"space-y-1 text-sm select-none",children:a.jsxs("p",{className:"select-none",children:[a.jsx("span",{className:"font-medium",children:"Outstanding Debt:"})," Rs ",H.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})})}),a.jsx("p",{className:"text-gray-600 text-sm select-none",children:"This will mark the account as fully paid and clear all transactions."})]})]}),a.jsxs("div",{className:"flex gap-3 select-none",children:[a.jsx("button",{onClick:()=>B(!1),disabled:j,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors disabled:opacity-50 font-medium select-none",children:"Cancel"}),a.jsx("button",{onClick:async()=>{try{k(!0),B(!1),await V(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{source:"clientActionSettle"}})),window.dispatchEvent(new CustomEvent("showDuplicateCard",{detail:{...n,isAccountClear:!0,message:"Account Cleared Successfully!",transactionDescription:"Account Settled Successfully"}}))},100)}catch(F){console.error("Error settling account:",F),x({type:"error",message:"Failed to Settle Account"})}finally{k(!1),e(),r&&r()}},disabled:j,className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 font-medium select-none",children:j?"Settling...":"Confirm Settle"})]})]})]})})]});return Tt.createPortal(ee,document.body)},yf=({frontContent:n,backContent:e,shouldFlip:t,flipDuration:r=.6,flipDelay:s=2,className:i=""})=>{const o=N.useRef(null),l=N.useRef(null),c=N.useRef(null),[u,h]=N.useState(!1),d=N.useRef(null);return N.useEffect(()=>{if(!o.current||!l.current||!c.current)return;const f=o.current,p=l.current,x=c.current,g=f.parentElement,w=g&&(g.classList.contains("animate-bounce")||g.classList.contains("animate-subtle-shake")||g.classList.contains("animate-pulse")||g.classList.contains("animate-wobble")||g.classList.contains("animate-high-debt-bounce")||g.classList.contains("animate-returnables-shake"));return Be.set(f,{transformStyle:"preserve-3d",perspective:1e3,WebkitTransformStyle:"preserve-3d",WebkitPerspective:1e3,position:"relative",isolation:"isolate",transform:"translateZ(0)",WebkitTransform:"translateZ(0)"}),Be.set(p,{rotationY:0,backfaceVisibility:"hidden",transformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",WebkitTransformStyle:"preserve-3d",position:"relative",zIndex:2,transform:"rotateY(0deg) translateZ(1px)",WebkitTransform:"rotateY(0deg) translateZ(1px)",transformOrigin:"center center",WebkitTransformOrigin:"center center"}),Be.set(x,{rotationY:180,backfaceVisibility:"hidden",transformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",WebkitTransformStyle:"preserve-3d",position:"absolute",top:0,left:0,width:"100%",height:"100%",transformOrigin:"center center",WebkitTransformOrigin:"center center",zIndex:1,transform:"rotateY(180deg) translateZ(1px)",WebkitTransform:"rotateY(180deg) translateZ(1px)"}),t?(()=>{d.current&&d.current.kill();const y=w?r*.8:r,b=w?"power2.inOut":"power1.inOut";return d.current=Be.timeline({repeat:t?-1:0,delay:s,yoyo:!0,repeatDelay:s,overwrite:"auto"}),d.current.to([p,x],{rotationY:"+=180",duration:y,ease:b,transformOrigin:"50% 50%",WebkitTransformOrigin:"50% 50%",force3D:!0,transform:"rotateY(+=180deg) translateZ(1px)",WebkitTransform:"rotateY(+=180deg) translateZ(1px)",overwrite:"auto",onComplete:()=>h(v=>!v)}),d.current})():(Be.set([p,x],{rotationY:0,force3D:!0,transform:"rotateY(0deg) translateZ(1px)",WebkitTransform:"rotateY(0deg) translateZ(1px)"}),Be.set(x,{rotationY:180,force3D:!0,transform:"rotateY(180deg) translateZ(1px)",WebkitTransform:"rotateY(180deg) translateZ(1px)"}),h(!1)),()=>{d.current&&d.current.kill()}},[t,r,s]),a.jsxs("div",{ref:o,className:`relative inline-flex items-center justify-center align-middle ${i}`,style:{transformStyle:"preserve-3d",WebkitTransformStyle:"preserve-3d",textAlign:"center",display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",WebkitPerspective:"1000px",perspective:"1000px",WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden"},children:[a.jsx("div",{ref:l,className:"w-full h-full flex items-center justify-center",style:{backfaceVisibility:"hidden",transformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",WebkitTransformStyle:"preserve-3d",width:"100%",height:"100%",position:"relative",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"},children:n}),a.jsx("div",{ref:c,className:"absolute top-0 left-0 w-full h-full flex items-center justify-center",style:{backfaceVisibility:"hidden",transformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",WebkitTransformStyle:"preserve-3d",position:"absolute",top:0,left:0,width:"100%",height:"100%",transform:"rotateY(180deg)",WebkitTransform:"rotateY(180deg)",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:e})]})};Be.registerPlugin(jn);const i2=({clients:n,linkedClient:e,onQuickAdd:t,clientFilter:r,getClientTotalDebt:s,sortOption:i,isBigCard:o=!1})=>{const l=N.useRef(null),c=N.useRef(null),u=N.useRef(null),h=N.useRef(null),d=N.useRef(null),[f,p]=Le.useState(null),[x,g]=Le.useState(null),[w,m]=Le.useState(!1),y=N.useRef(null),[b,v]=Le.useState(null);kr();const[_,C]=Le.useState(0),[j,k]=Le.useState(null),E=N.useRef(null),M=N.useRef(!1),A=N.useRef(0),$=N.useRef(null),O=N.useRef(null),T=N.useRef(!1),I=N.useRef(0),B=N.useRef(null),H=ee=>{const F=N.useRef(ee);if(ee.length!==F.current.length)return F.current=ee,ee;for(let q=0;q<ee.length;q++)if(ee[q]!==F.current[q])return F.current=ee,ee;return F.current},P=Le.useMemo(()=>{const ee=[...n];switch(i){case"name":return ee.sort((F,q)=>F.name.localeCompare(q.name));case"date":return ee.sort((F,q)=>{if(j){if(F.id===j)return-1;if(q.id===j)return 1}return q.lastTransactionAt.getTime()-F.lastTransactionAt.getTime()});case"date-oldest":return ee.sort((F,q)=>{if(j){if(F.id===j)return-1;if(q.id===j)return 1}return F.lastTransactionAt.getTime()-q.lastTransactionAt.getTime()});case"debt":return ee.sort((F,q)=>s(q.id)-s(F.id));default:return ee}},[n,i,s,j]),z=H(P);N.useEffect(()=>(l.current&&(l.current.__timelineRef=h),()=>{l.current&&delete l.current.__timelineRef}),[]),Le.useEffect(()=>{const ee=F=>{if(F&&F.detail&&F.detail.source==="calculator"||F&&F.detail&&F.detail.source==="duplicateCard"||F&&F.detail&&F.detail.source==="clientActionAdd"||F&&F.detail&&(F.detail.source==="transaction"||F.detail.source==="addTransaction"))return;const se=F&&F.detail&&F.detail.source==="clientActionReturn",ie=F&&F.detail&&F.detail.clientId;if(ie&&(k(ie),setTimeout(()=>{k(null)},5e3)),h.current&&(h.current.kill(),h.current=null),d.current&&(d.current.forEach(ce=>ce.kill()),d.current=null),y.current=null,se){C(ce=>ce+1);return}setTimeout(()=>{z.length>0&&S()},100)};return window.addEventListener("creditDataChanged",ee),()=>{window.removeEventListener("creditDataChanged",ee)}},[n,j,z]);const{getClientTransactions:U}=kr(),L=ee=>{const F=U(ee.id),q=Date.now()-21*24*60*60*1e3;return F.some(Y=>{if(Y.type==="payment"||Y.description.toLowerCase().includes("returned"))return!1;const K=Y.description.toLowerCase(),Q=K.includes("chopine")||K.includes("bouteille"),se=Y.date.getTime()<q;return Q&&se})},V=N.useCallback(ee=>{if(h.current&&h.current.isActive())return;const F=u.current,q=c.current;if(!F||!q)return;const Y=F.offsetWidth,K=q.scrollWidth;let Q=ee;ee>Y+100?Q=Y:ee<-K-100&&(Q=-K),h.current&&(h.current.kill(),h.current=null);const ie=(K+Y)/60;h.current=Be.timeline({repeat:-1,ease:"none"}),Be.set(q,{x:Q});const he=Math.abs(Q- -K)/(K+Y)*ie;he>0?h.current.to(q,{x:-K,duration:he,ease:"none"}).set(q,{x:Y}).to(q,{x:-K,repeat:-1,duration:ie,ease:"none"}).call(()=>{y.current=null}):h.current.set(q,{x:Y}).to(q,{x:-K,repeat:-1,duration:ie,ease:"none"}).call(()=>{y.current=null})},[z]),S=N.useCallback(()=>{const ee=c.current,F=u.current;!F||!ee||h.current&&h.current.isActive()||(h.current&&(h.current.kill(),h.current=null),requestAnimationFrame(()=>{const q=F.offsetWidth,Y=ee.scrollWidth,Q=(Y+q)/60;h.current=Be.timeline({repeat:-1,ease:"none",paused:!1,immediateRender:!0,overwrite:!1}),h.current.fromTo(ee,{x:q},{x:-Y,duration:Q,ease:"none",overwrite:!1}),d.current=jn.create(ee,{type:"x",allowEventDefault:!1,allowNativeTouchScrolling:!1,bounds:{minX:-Y,maxX:q},edgeResistance:.8,inertia:!0,dragResistance:.5,throwResistance:1e3,maxDuration:2,minDuration:.1,overshootTolerance:0,force3D:!0,lockAxis:!0,minimumMovement:3,onDragStart:function(){h.current&&(h.current.kill(),h.current=null)},onThrowComplete:function(){const se=Be.getProperty(c.current,"x");V(se),y.current=null}})}))},[z]);N.useEffect(()=>{h.current&&(h.current.kill(),h.current=null),z.length>0&&setTimeout(()=>{S()},50)},[z]),N.useEffect(()=>{h.current&&z.length>0&&(h.current.kill(),h.current=null,S())},[z]),N.useEffect(()=>()=>{h.current&&h.current.kill(),d.current&&d.current.forEach(ee=>ee.kill())},[]),N.useEffect(()=>{},[e]);const W=()=>{switch(r){case"returnables":return"Returnable Items";case"overdue":return"Overdue Clients";case"overlimit":return"Over Limit";default:return"Active Clients"}},G=ee=>{M.current=!1,T.current=!1,"touches"in ee&&(O.current={x:ee.touches[0].clientX,y:ee.touches[0].clientY}),E.current=window.setTimeout(()=>{M.current=!0},500)},D=ee=>{if(O.current&&"touches"in ee){const F=Math.abs(ee.touches[0].clientX-O.current.x),q=Math.abs(ee.touches[0].clientY-O.current.y);(F>10||q>10)&&(T.current=!0,ne())}},ne=()=>{E.current&&(clearTimeout(E.current),E.current=null)},ae=(ee,F)=>{if(M.current||T.current){M.current=!1,T.current=!1,O.current=null;return}O.current=null;const q=Date.now(),Y=q-A.current;if(Y<300&&Y>0){if(F.preventDefault(),F.stopPropagation(),$.current&&(clearTimeout($.current),$.current=null),v(ee.id),h.current&&h.current.isActive()){const K=Be.getProperty(c.current,"x");y.current=K,h.current.kill(),h.current=null}p(ee),A.current=0}else A.current=q,$.current=window.setTimeout(()=>{$.current=null},300)},Se=(ee,F)=>{const q=Date.now(),Y=q-I.current;if(Y<300&&Y>0){if(F.preventDefault(),F.stopPropagation(),B.current&&(clearTimeout(B.current),B.current=null),v(ee.id),h.current&&h.current.isActive()){const K=Be.getProperty(c.current,"x");y.current=K,h.current.kill(),h.current=null}p(ee),I.current=0}else I.current=q,B.current=window.setTimeout(()=>{B.current=null},300)};return a.jsx(a.Fragment,{children:a.jsxs("div",{ref:l,className:"bg-white rounded-lg shadow-sm border border-gray-200 scrolling-tabs-component w-full",style:{flexShrink:0},children:[a.jsx("div",{className:"p-3 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700",children:W()}),a.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[z.length," client",z.length!==1?"s":""]})]})}),a.jsx("div",{className:"p-3",children:a.jsx("div",{ref:u,className:`overflow-hidden py-4 w-full h-30 flex items-center relative z-10 ${o?"overflow-x-auto":""}`,style:{height:"116px",...o&&{scrollSnapType:"none",msOverflowStyle:"none",scrollbarWidth:"none"}},children:a.jsx("div",{ref:c,className:"flex gap-6 whitespace-nowrap relative z-10",style:{minWidth:"max-content",...o&&{scrollSnapAlign:"none"}},children:z.map(ee=>{const F=s(ee.id),q=(e==null?void 0:e.id)===ee.id,Y=L(ee),K=(()=>{const se=U(ee.id),ie=Co(se,ee.name),ce=[];return ie.forEach(he=>{let oe="";if(he.includes("Chopine")){const ve=he.match(/^(\d+)/);ve?oe=`${ve[1]} (Ch)`:oe=he.substring(0,10)}else if(he.includes("Caisse")){const ve=he.match(/^(\d+)/);ve?oe=`${ve[1]} (Cs)`:oe=he.substring(0,10)}else if(he.match(/(\d+(?:\.\d+)?L)\b/i)){const ve=he.match(/^(\d+)/),ke=he.match(/(\d+(?:\.\d+)?L)\b/i);ve&&ke?oe=`${ve[1]} (${ke[1]})`:oe=he.substring(0,10)}else if(he.includes("Bouteille")){const ve=he.match(/^(\d+)/);ve?oe=`${ve[1]} (Bt)`:oe=he.substring(0,10)}else{const ve=he.match(/^(\d+)/);if(ve){const ke=he.match(/\(([^)]+)\)/);if(ke){const _e=ke[1];oe=`${ve[1]} (${_e.substring(0,3)})`}else oe=he.substring(0,10)}else oe=he.substring(0,10)}ce.push(oe)}),ce.join(", ")})(),Q=()=>F<=300||F<500?"bg-green-100 border-green-200":F<=1e3?"bg-orange-100 border-orange-200":"bg-red-100 border-red-200";return a.jsx("div",{className:`flex-shrink-0 px-4 py-2 rounded-lg border cursor-pointer h-25 w-40 flex items-center ${w?"transition-none":"transition-all duration-200"} ${q?"bg-blue-50 border-blue-200 shadow-md":w?Q():`${Q()} hover:shadow-md ${Y?"animate-urgent-glow animate-subtle-shake":""}`} ${b===ee.id?"animate-pulse-attention bg-yellow-200 border-yellow-400 shadow-lg scale-110 z-50":j===ee.id?"animate-pulse-attention bg-green-200 border-green-400 shadow-lg scale-105 z-40":(()=>{if(F>=1e3)return"animate-bounce";const se=U(ee.id);return Co(se,ee.name).length>0&&j!==ee.id?"animate-subtle-shake":""})()}`,style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",touchAction:"pan-x",...o&&{scrollSnapAlign:"none"}},onTouchStart:G,onTouchEnd:se=>{ne(),ae(ee,se)},onTouchMove:se=>{D(se)},onClick:se=>Se(ee,se),onMouseDown:G,onMouseUp:ne,onMouseLeave:ne,onContextMenu:se=>se.preventDefault(),children:a.jsxs("div",{className:"text-center relative h-full flex flex-col justify-center w-full",children:[a.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:a.jsx("div",{className:"text-sm font-medium text-gray-800 truncate select-none max-w-[120px]",title:ee.name,children:ee.name})}),r==="returnables"?a.jsx("div",{className:"text-xs font-semibold text-orange-600 max-w-[120px] truncate",title:K,children:K||"No returnables"}):F===0?a.jsx("div",{className:"text-xs font-semibold text-orange-600 max-w-[120px] truncate",title:K,children:K||"No returnables"}):a.jsx(yf,{frontContent:a.jsxs("div",{className:"text-xs font-semibold text-red-600",children:["Rs ",F.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),backContent:a.jsx("div",{className:"text-xs font-semibold text-orange-600 max-w-[120px] truncate",title:K,children:K||"No returnables"}),shouldFlip:!!K,flipDuration:.8,flipDelay:2,className:"w-full"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1 text-center max-w-[120px] truncate",children:a.jsx(yf,{frontContent:a.jsx("span",{children:ee.lastTransactionAt.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/\s/g,"-")}),backContent:a.jsx("span",{children:ee.lastTransactionAt.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}),shouldFlip:!0,flipDuration:.6,flipDelay:2,className:"inline-block text-xs"})})]})},ee.id)})})})}),f&&a.jsx($b,{client:f,onClose:()=>{p(null),v(null),setTimeout(()=>{(!h.current||!h.current.isActive())&&(y.current!==null?(V(y.current),y.current=null):S())},100)},onQuickAdd:ee=>{t(ee)},onResetCalculator:()=>{},onViewDetails:g}),x&&a.jsx(kp,{client:x,onClose:()=>{g(null)}})]})})},o2=({totalDebtAllClients:n,showAllClients:e,onToggleAllClients:t,clientFilter:r,onFilterChange:s,showFilterDropdown:i,onToggleFilterDropdown:o,onShowSettings:l,onShowUnifiedDataManager:c,sortOption:u,onSortChange:h,showSortDropdown:d,onToggleSortDropdown:f,onAddToClientFromMini:p})=>a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h2",{className:"text-lg lg:text-xl font-semibold text-gray-800",children:["Active Clients",n>0?` (Rs ${n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})`:""]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:c,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",title:"Database Import/Export",children:a.jsx(ia,{size:20})}),a.jsx("button",{onClick:l,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",title:"Settings",children:a.jsx(mN,{size:20})})]})]}),a.jsxs("div",{className:"flex justify-start gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:o,className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2 border border-gray-200",title:"Filter clients",children:[a.jsxs("span",{className:"text-sm font-medium capitalize",children:["Filter: ",r]}),a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&a.jsx("div",{className:"absolute left-0 top-full mt-2 w-44 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsx("button",{onClick:()=>{s("all"),o()},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors ${r==="all"?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:"All"}),a.jsx("button",{onClick:()=>{s("returnables"),o()},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors ${r==="returnables"?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:"Returnables"}),a.jsx("button",{onClick:()=>{s("overdue"),o()},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors ${r==="overdue"?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:"Overdue"}),a.jsx("button",{onClick:()=>{s("overlimit"),o()},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors ${r==="overlimit"?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:"Overlimit"})]})})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:f,className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2 border border-gray-200",title:"Sort clients",children:[a.jsx(ZC,{size:16}),a.jsxs("span",{className:"text-sm font-medium capitalize",children:["Sort: ",u]}),a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&a.jsx("div",{className:"absolute left-0 top-full mt-2 w-36 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsx("button",{onClick:()=>{h("name"),f()},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors ${u==="name"?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:"Name (A-Z)"}),a.jsx("button",{onClick:()=>{h("date"),f()},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors ${u==="date"?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:"Date (Recent)"}),a.jsx("button",{onClick:()=>{h("date-oldest"),f()},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors ${u==="date-oldest"?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:"Date (Oldest)"}),a.jsx("button",{onClick:()=>{h("debt"),f()},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors ${u==="debt"?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:"Debt (High-Low)"})]})})]}),(i||d)&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>{i&&o(),d&&f()}})]})]});/*!
 * VelocityTracker: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var br,xf,Aa,zb,Fi,no,vf,Fb,Bb=function(){return br||typeof window<"u"&&(br=window.gsap)},bf={},a2=function(e){return Math.round(e*1e4)/1e4},wf=function(e){return Fb(e).id},da=function(e){return bf[wf(typeof e=="string"?Aa(e)[0]:e)]},f0=function(e){var t=Fi,r;if(e-vf>=.05)for(vf=e;t;)r=t.g(t.t,t.p),(r!==t.v1||e-t.t1>.2)&&(t.v2=t.v1,t.v1=r,t.t2=t.t1,t.t1=e),t=t._next},l2={deg:360,rad:Math.PI*2},kd=function(){br=Bb(),br&&(Aa=br.utils.toArray,zb=br.utils.getUnit,Fb=br.core.getCache,no=br.ticker,xf=1)},c2=function(e,t,r,s){this.t=e,this.p=t,this.g=e._gsap.get,this.rCap=l2[r||zb(this.g(e,t))],this.v1=this.v2=0,this.t1=this.t2=no.time,s&&(this._next=s,s._prev=this)},vl=function(){function n(t,r){xf||kd(),this.target=Aa(t)[0],bf[wf(this.target)]=this,this._props={},r&&this.add(r)}n.register=function(r){br=r,kd()};var e=n.prototype;return e.get=function(r,s){var i=this._props[r]||console.warn("Not tracking "+r+" velocity."),o,l,c;return o=parseFloat(s?i.v1:i.g(i.t,i.p)),l=o-parseFloat(i.v2),c=i.rCap,c&&(l=l%c,l!==l%(c/2)&&(l=l<0?l+c:l-c)),a2(l/((s?i.t1:no.time)-i.t2))},e.getAll=function(){var r={},s=this._props,i;for(i in s)r[i]=this.get(i);return r},e.isTracking=function(r){return r in this._props},e.add=function(r,s){r in this._props||(Fi||(no.add(f0),vf=no.time),Fi=this._props[r]=new c2(this.target,r,s,Fi))},e.remove=function(r){var s=this._props[r],i,o;s&&(i=s._prev,o=s._next,i&&(i._next=o),o?o._prev=i:Fi===s&&(no.remove(f0),Fi=0),delete this._props[r])},e.kill=function(r){for(var s in this._props)this.remove(s);r||delete bf[wf(this.target)]},n.track=function(r,s,i){xf||kd();for(var o=[],l=Aa(r),c=s.split(","),u=(i||"").split(","),h=l.length,d,f;h--;){for(d=da(l[h])||new n(l[h]),f=c.length;f--;)d.add(c[f],u[f]||u[0]);o.push(d)}return o},n.untrack=function(r,s){var i=(s||"").split(",");Aa(r).forEach(function(o){var l=da(o);l&&(i.length?i.forEach(function(c){return l.remove(c)}):l.kill(1))})},n.isTracking=function(r,s){var i=da(r);return i&&i.isTracking(s)},n.getVelocity=function(r,s){var i=da(r);return!i||!i.isTracking(s)?console.warn("Not tracking velocity of "+s):i.get(s)},n}();vl.getByTarget=da;Bb()&&br.registerPlugin(vl);/*!
 * InertiaPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var wt,Ub,p0,Vb,_f,Pa,Wb,Hb,qb,Gp,Xb,Da,Sf,Gb,iu=vl.getByTarget,Yb=function(){return wt||typeof window<"u"&&(wt=window.gsap)&&wt.registerPlugin&&wt},u2=function(e){return typeof e=="string"},cl=function(e){return typeof e=="number"},Ts=function(e){return typeof e=="object"},Cf=function(e){return typeof e=="function"},d2=1,Kb=Array.isArray,h2=function(e){return e},mi=1e10,m0=1/mi,Qb=.05,f2=function(e){return Math.round(e*1e4)/1e4},p2=function(e,t,r){for(var s in t)!(s in e)&&s!==r&&(e[s]=t[s]);return e},m2=function n(e){var t={},r,s;for(r in e)t[r]=Ts(s=e[r])&&!Kb(s)?n(s):s;return t},g0=function(e,t,r,s,i){var o=t.length,l=0,c=mi,u,h,d,f;if(Ts(e)){for(;o--;){u=t[o],h=0;for(d in e)f=u[d]-e[d],h+=f*f;h<c&&(l=o,c=h)}if((i||mi)<mi&&i<Math.sqrt(c))return e}else for(;o--;)u=t[o],h=u-e,h<0&&(h=-h),h<c&&u>=s&&u<=r&&(l=o,c=h);return t[l]},Jb=function(e,t,r,s,i,o,l){if(e.end==="auto")return e;var c=e.end,u,h;if(r=isNaN(r)?mi:r,s=isNaN(s)?-mi:s,Ts(t)){if(u=t.calculated?t:(Cf(c)?c(t,l):g0(t,c,r,s,o))||t,!t.calculated){for(h in u)t[h]=u[h];t.calculated=!0}u=u[i]}else u=Cf(c)?c(t,l):Kb(c)?g0(t,c,r,s,o):parseFloat(c);return u>r?u=r:u<s&&(u=s),{max:u,min:u,unitFactor:e.unitFactor}},ou=function(e,t,r){return isNaN(e[t])?r:+e[t]},Yp=function(e,t){return t*Qb*e/Gp},y0=function(e,t,r){return Math.abs((t-e)*Gp/r/Qb)},Zb={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},ew=function(e,t,r,s){if(t.linkedProps){var i=t.linkedProps.split(","),o={},l,c,u,h,d,f;for(l=0;l<i.length;l++)c=i[l],u=t[c],u&&(cl(u.velocity)?h=u.velocity:(d=d||iu(e),h=d&&d.isTracking(c)?d.get(c):0),f=Math.abs(h/ou(u,"resistance",s)),o[c]=parseFloat(r(e,c))+Yp(h,f));return o}},g2=function(e,t,r,s,i,o){if(r===void 0&&(r=10),s===void 0&&(s=.2),i===void 0&&(i=1),u2(e)&&(e=Vb(e)[0]),!e)return 0;var l=0,c=mi,u=t.inertia||t,h=qb(e).get,d=ou(u,"resistance",Pa.resistance),f,p,x,g,w,m,y,b,v,_;_=ew(e,u,h,d);for(f in u)Zb[f]||(p=u[f],Ts(p)||(b=b||iu(e),b&&b.isTracking(f)?p=cl(p)?{velocity:p}:{velocity:b.get(f)}:(g=+p||0,x=Math.abs(g/d))),Ts(p)&&(cl(p.velocity)?g=p.velocity:(b=b||iu(e),g=b&&b.isTracking(f)?b.get(f):0),x=Xb(s,r,Math.abs(g/ou(p,"resistance",d))),w=parseFloat(h(e,f))||0,m=w+Yp(g,x),"end"in p&&(p=Jb(p,_&&f in _?_:m,p.max,p.min,f,u.radius,g),Da===t&&(Da=u=m2(t)),u[f]=p2(p,u[f],"end")),"max"in p&&m>+p.max+m0?(v=p.unitFactor||Pa.unitFactors[f]||1,y=w>p.max&&p.min!==p.max||g*v>-15&&g*v<45?s+(r-s)*.1:y0(w,p.max,g),y+i<c&&(c=y+i)):"min"in p&&m<+p.min-m0&&(v=p.unitFactor||Pa.unitFactors[f]||1,y=w<p.min&&p.min!==p.max||g*v>-45&&g*v<15?s+(r-s)*.1:y0(w,p.min,g),y+i<c&&(c=y+i)),y>l&&(l=y)),x>l&&(l=x));return l>c&&(l=c),l>r?r:l<s?s:l},x0=function(){wt=Yb(),wt&&(p0=wt.parseEase,Vb=wt.utils.toArray,Wb=wt.utils.getUnit,qb=wt.core.getCache,Xb=wt.utils.clamp,Sf=wt.core.getStyleSaver,Gb=wt.core.reverting||function(){},_f=p0("power3"),Gp=_f(.05),Hb=wt.core.PropTween,wt.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),Pa=wt.config(),wt.registerPlugin(vl),Ub=1)},Kp={version:"3.13.0",name:"inertia",register:function(e){wt=e,x0()},init:function(e,t,r,s,i){Ub||x0();var o=iu(e);if(t==="auto"){if(!o){console.warn("No inertia tracking on "+e+". InertiaPlugin.track(target) first.");return}t=o.getAll()}this.styles=Sf&&typeof e.style=="object"&&Sf(e),this.target=e,this.tween=r,Da=t;var l=e._gsap,c=l.get,u=t.duration,h=Ts(u),d=t.preventOvershoot||h&&u.overshoot===0,f=ou(t,"resistance",Pa.resistance),p=cl(u)?u:g2(e,t,h&&u.max||10,h&&u.min||.2,h&&"overshoot"in u?+u.overshoot:d?0:1),x,g,w,m,y,b,v,_,C;t=Da,Da=0,C=ew(e,t,c,f);for(x in t)Zb[x]||(g=t[x],Cf(g)&&(g=g(s,e,i)),cl(g)?y=g:Ts(g)&&!isNaN(g.velocity)?y=+g.velocity:o&&o.isTracking(x)?y=o.get(x):console.warn("ERROR: No velocity was defined for "+e+" property: "+x),b=Yp(y,p),_=0,w=c(e,x),m=Wb(w),w=parseFloat(w),Ts(g)&&(v=w+b,"end"in g&&(g=Jb(g,C&&x in C?C:v,g.max,g.min,x,t.radius,y)),"max"in g&&+g.max<v?d||g.preventOvershoot?b=g.max-w:_=g.max-w-b:"min"in g&&+g.min>v&&(d||g.preventOvershoot?b=g.min-w:_=g.min-w-b)),this._props.push(x),this.styles&&this.styles.save(x),this._pt=new Hb(this._pt,e,x,w,0,h2,0,l.set(e,x,this)),this._pt.u=m||0,this._pt.c1=b,this._pt.c2=_);return r.duration(p),d2},render:function(e,t){var r=t._pt;if(e=_f(t.tween._time/t.tween._dur),e||!Gb())for(;r;)r.set(r.t,r.p,f2(r.s+r.c1*e+r.c2*e*e)+r.u,r.d,e),r=r._next;else t.styles.revert()}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(function(n){return Kp[n]=vl[n]});Yb()&&wt.registerPlugin(Kp);const y2=({client:n,onLongPress:e,onQuickAdd:t,onResetCalculator:r,isLinked:s=!1,showWobble:i=!1,onCloseWobble:o})=>{const{getClientTotalDebt:l,getClientBottlesOwed:c,getClientTransactions:u}=kr(),[h,d]=N.useState(!1),[f,p]=N.useState(!1),[x,g]=N.useState(0);Le.useEffect(()=>{const D=()=>{g(ne=>ne+1)};return window.addEventListener("creditDataChanged",D),()=>{window.removeEventListener("creditDataChanged",D)}},[]);const m=Le.useMemo(()=>{const D=u(n.id);return gv(D,n.name)},[n.id,n.name,u,x]);N.useState(0),N.useState(0),N.useState(0),N.useState(0);const y=N.useRef(null),b=N.useRef(null),v=N.useRef(0),_=N.useRef(0),[C,j]=N.useState(!1),k=N.useRef(null),E=N.useRef(!1),M=N.useRef(!1),A=l(n.id),$=c(n.id),O=Le.useMemo(()=>m.reduce((D,ne)=>{const ae=ne.text.match(/(\d+)\s*(?:chopine|bouteille|verre|caisse)/i);return D+(ae?parseInt(ae[1]):0)},0),[m]);A>0||m.length>0;const T=A>0,I=m.length>0,B=()=>I?"border-orange-500":T?"border-red-500":"border-green-500",H=()=>A<=300||A<500?"bg-green-100 border-green-200":A<=1e3?"bg-orange-100 border-orange-200":"bg-red-100 border-red-200",P=D=>{D.touches[0],y.current=setTimeout(()=>{d(!0)},2e3)},z=()=>{y.current&&clearTimeout(y.current);const D=Date.now(),ne=D-v.current;ne<300&&ne>0?(_.current+=1,_.current===2&&(document.activeElement instanceof HTMLElement&&document.activeElement.blur(),p(!0),_.current=0)):(_.current=1,setTimeout(()=>{_.current=0},300)),v.current=D},U=D=>{D.button===0&&(y.current=setTimeout(()=>{d(!0)},2e3),D.preventDefault())},L=()=>{y.current&&clearTimeout(y.current)},V=()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur(),p(!0)},S=D=>{D.stopPropagation(),n.profilePictureUrl&&(y.current&&(clearTimeout(y.current),y.current=null),k.current=setTimeout(()=>{j(!0),M.current=!0,document.body.style.overflow="hidden",setTimeout(()=>{M.current=!1},300)},500))},W=D=>{if(C){D.stopPropagation();return}D.stopPropagation(),k.current&&(clearTimeout(k.current),k.current=null)},G=()=>{j(!1),E.current=!1,M.current=!1,document.body.style.overflow=""};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{ref:b,className:`flex-shrink-0 w-56 sm:w-64 mx-auto rounded-lg shadow-md p-3 sm:p-4 border hover:shadow-lg transition-all duration-300 cursor-pointer select-none transform hover:scale-105 min-h-[320px] relative ${H()}`,onTouchStart:P,onTouchEnd:z,onMouseDown:U,onMouseUp:L,onMouseLeave:L,onDoubleClick:V,style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",touchAction:"pan-x pan-y",cursor:"pointer",zIndex:1},children:[a.jsxs("div",{className:"mb-2 sm:mb-3",children:[a.jsx("div",{className:"flex justify-center mb-2 relative",children:a.jsxs("div",{className:"relative",children:[n.profilePictureUrl?a.jsx("div",{className:`w-24 h-24 rounded-full overflow-hidden border-4 shadow-lg relative flex-shrink-0 cursor-zoom-in ${B()}`,style:{background:`url(${n.profilePictureUrl})`,backgroundSize:"cover",backgroundPosition:"center",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",pointerEvents:"auto",zIndex:5},onMouseDown:S,onMouseUp:W,onMouseLeave:W,onTouchStart:S,onTouchEnd:W,onTouchCancel:W,onContextMenu:D=>D.preventDefault(),children:a.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none",style:{boxShadow:"inset 0 0 15px rgba(0,0,0,0.3)"}})}):a.jsx("div",{className:`w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 border-4 shadow-lg ${B()}`,children:a.jsx(Yc,{size:40,className:"text-blue-600"})}),I&&O>0&&a.jsxs("div",{className:"absolute flex flex-col items-center pointer-events-none",style:{top:"-12px",right:"-64px",zIndex:10},children:[a.jsx("span",{className:"text-sm font-bold text-orange-600 mb-1",children:O}),a.jsx("div",{className:"bottle-3d relative",children:a.jsx(uN,{size:28,className:"text-orange-600",strokeWidth:2.5})})]})]})}),a.jsxs("div",{className:"w-full",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:a.jsx(su,{className:"font-semibold text-gray-800 text-sm sm:text-base text-center",pauseDuration:1,scrollDuration:3,easing:"power1.inOut",children:n.name})}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 text-center",children:["ID: ",n.id]})]})]}),a.jsxs("div",{className:"mb-2 sm:mb-3 text-center",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1 justify-center",children:[a.jsx(xN,{size:14,className:"text-red-500 sm:w-4 sm:h-4"}),a.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Outstanding"})]}),a.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-red-600 text-center",children:["Rs ",A.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),($.beer>0||$.guinness>0||$.malta>0||$.coca>0||$.chopines>0)&&a.jsxs("p",{className:"text-xs text-orange-600 mt-1 text-center",children:["+ Bottles: ",Object.entries($).filter(([D,ne])=>ne>0).map(([D,ne])=>`${ne} ${D.charAt(0).toUpperCase()+D.slice(1)}`).join(", ")]})]}),t&&a.jsx("div",{className:"mb-2 sm:mb-3 text-center",children:a.jsxs("button",{onClick:D=>{D.stopPropagation(),s||(t(n),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),window.scrollTo({top:0,behavior:"smooth"}))},onTouchStart:D=>D.stopPropagation(),onTouchEnd:D=>D.stopPropagation(),onMouseDown:D=>D.stopPropagation(),onMouseUp:D=>D.stopPropagation(),onDoubleClick:D=>D.stopPropagation(),className:`w-full py-2 px-3 rounded-lg transition-colors flex items-center justify-center gap-2 text-sm font-medium ${s?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 hover:bg-green-600 text-white"}`,disabled:s,children:[a.jsx(Bt,{size:16}),s?"Linked to Calculator":"Quick Add"]})}),a.jsxs("div",{className:"text-xs sm:text-sm text-gray-500 min-h-[3.5rem] flex flex-col justify-end",children:[m.length>0?a.jsx("div",{className:"mb-2 flex items-center",children:a.jsx(su,{className:`font-medium text-sm text-center ${T?"alternating-orange-text":"text-orange-600"}`,pauseDuration:.5,scrollDuration:2.5,easing:"power1.inOut",children:m.map((D,ne)=>a.jsxs("span",{className:"inline-flex items-center align-middle",children:[ne>0&&", ",D.text," (",a.jsx(yf,{frontContent:a.jsx("span",{children:D.date}),backContent:a.jsx("span",{children:D.time}),shouldFlip:!0,flipDuration:.6,flipDelay:2,className:"inline-block align-middle min-h-[1.2em] min-w-[3em]"}),")"]},ne))})}):a.jsx("div",{className:"mb-2 h-5"}),a.jsxs("div",{className:"flex items-center gap-2 h-4",children:[a.jsx(Gc,{size:12,className:"sm:w-3.5 sm:h-3.5 flex-shrink-0"}),a.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 truncate text-center",children:[n.lastTransactionAt.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/\s/g,"-")," ",n.lastTransactionAt.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]})]}),a.jsxs("div",{className:"mt-2 sm:mt-3 text-center",children:[a.jsx("div",{className:"inline-block w-8 h-1 bg-gray-300 rounded-full"}),a.jsxs("div",{className:"mt-1",children:[a.jsxs("div",{className:"text-xs text-gray-400 hidden sm:block text-center",children:[a.jsx("p",{className:"select-none",children:"Double click for actions"}),a.jsx("p",{className:"select-none",children:"Long press for details"})]}),a.jsx("p",{className:"text-xs text-gray-400 sm:hidden text-center select-none",children:"Double click for actions"})]})]})]}),h&&a.jsx(kp,{client:n,onClose:()=>d(!1),onQuickAdd:t}),f&&a.jsx($b,{client:n,onClose:()=>p(!1),onQuickAdd:t,onResetCalculator:r,onViewDetails:()=>d(!0)}),C&&n.profilePictureUrl&&Tt.createPortal(a.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[10000] overflow-hidden",onClick:D=>{D.preventDefault(),M.current||G()},onTouchEnd:D=>{D.preventDefault(),D.stopPropagation(),M.current||G()},onTouchStart:D=>{D.preventDefault(),D.stopPropagation()},onTouchMove:D=>{D.preventDefault()},onContextMenu:D=>(D.preventDefault(),D.stopPropagation(),!1),style:{backgroundColor:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none"},children:a.jsx("img",{src:n.profilePictureUrl,alt:n.name,className:"max-w-full max-h-screen object-contain",style:{pointerEvents:"none",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",MozUserSelect:"none",msUserSelect:"none"},draggable:!1,onContextMenu:D=>(D.preventDefault(),D.stopPropagation(),!1),onTouchStart:D=>D.preventDefault(),onTouchEnd:D=>D.preventDefault()})}),document.body)]})};Be.registerPlugin(jn,Kp);const x2=({clients:n,searchQuery:e,onSearchChange:t,showAllClients:r,onToggleAllClients:s,onClientLongPress:i,onQuickAdd:o,onResetCalculator:l,linkedClient:c,recentTransactionClient:u,onCloseWobble:h})=>{const d=N.useRef(null),f=N.useRef(null),p=N.useRef(null),x=N.useRef(0),g=N.useRef(null);N.useEffect(()=>{if(!d.current||!f.current||n.length===0)return;const m=f.current,y=d.current;p.current&&(p.current.forEach(k=>k.kill()),p.current=null),Be.set(y,{x:0}),m.offsetWidth,y.offsetWidth;const b=m.offsetWidth,v=y.scrollWidth,C=v-b>0;let j;if(C)j={minX:-Math.max(0,v-b),maxX:0};else{const k=window.innerWidth,E=y.getBoundingClientRect();j={minX:-E.left,maxX:k-E.left-v}}return p.current=jn.create(y,{type:"x",bounds:j,edgeResistance:C?.5:0,inertia:!0,snap:!1,dragResistance:C?.1:0,throwResistance:C?.005:.001,maxDuration:2,minDuration:.02,overshootTolerance:0,force3D:!0,onDragStart:function(){const k=Be.getProperty(y,"x");x.current=k,g.current=null},onDrag:function(){const E=Be.getProperty(y,"x")-x.current;Math.abs(E)>10&&(E>0?g.current="right":g.current="left")},onDragEnd:function(){g.current=null}}),()=>{p.current&&(p.current.forEach(k=>k.kill()),p.current=null)}},[n.length]);const w=m=>{o(m),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),window.scrollTo({top:0,behavior:"smooth"})};return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-4",children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700",children:r?"All Clients":"Active Clients"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[n.length," client",n.length!==1?"s":""]}),a.jsx("button",{onClick:s,className:`text-xs px-2 py-1 rounded-full transition-colors ${r?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-blue-100 text-blue-700 font-medium"}`,children:a.jsxs("div",{className:"flex items-center gap-1",children:[r?a.jsx(_N,{size:12}):a.jsx(wN,{size:12}),a.jsx("span",{children:r?"All":"Active"})]})})]})]})}),a.jsx("div",{className:"p-3",children:a.jsx("div",{ref:f,className:"overflow-x-auto overflow-y-visible relative z-10 py-4",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:a.jsx("div",{ref:d,className:"flex gap-3 whitespace-nowrap py-2",style:{minWidth:"max-content"},children:n.length===0?a.jsx("div",{className:"flex items-center justify-center w-full h-32 text-gray-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-base sm:text-lg",children:r?e?`No clients found matching "${e}"`:"No clients found":"No clients with outstanding debts"}),a.jsx("p",{className:"text-xs sm:text-sm",children:"Use the calculator to add transactions"})]})}):n.map(m=>a.jsx(y2,{client:m,onLongPress:()=>i(m),onQuickAdd:w,onResetCalculator:l,isLinked:(c==null?void 0:c.id)===m.id,showWobble:(u==null?void 0:u.id)===m.id,onCloseWobble:h},`${m.id}-${m.createdAt.getTime()}`))})})}),a.jsx("div",{className:"px-4 pb-4",children:a.jsx("div",{className:"relative w-full max-w-md mx-auto",children:a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("div",{className:"relative flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Au,{size:20,className:"text-gray-400"})}),a.jsx("input",{type:"text",value:e,onChange:m=>{const y=m.target.value;t(y),y.trim()&&!r&&s()},placeholder:"Search by client name or ID...",className:`block w-full pl-10 ${e?"pr-20":"pr-4"} py-3 lg:py-4 text-lg lg:text-xl border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-500 focus:border-blue-500 shadow-sm transition-all duration-200`}),e&&a.jsx("button",{onClick:()=>t(""),className:"absolute inset-y-0 right-3 my-auto px-3 h-8 bg-red-500 hover:bg-red-600 text-white rounded-md flex items-center justify-center shadow-md border border-red-600 transition-all duration-200 text-sm font-medium",title:"Clear search",children:"Clear"})]})})})})})]})},v2=({showSettings:n,onCloseSettings:e,onDeleteClient:t,showDeleteConfirm:r,clientToDelete:s,deleteConfirmText:i,onDeleteConfirmTextChange:o,onConfirmDelete:l,onCancelDelete:c,showDeleteAllConfirm:u,deleteAllPasscode:h,onDeleteAllPasscodeChange:d,onConfirmDeleteAll:f,onCancelDeleteAll:p,onDeleteAllClients:x})=>{const{clients:g,getClientTotalDebt:w}=kr(),[m,y]=Le.useState("id"),b=Le.useMemo(()=>[...g].sort((v,_)=>{if(m==="id"){const C=parseInt(v.id.replace(/\D/g,""),10),j=parseInt(_.id.replace(/\D/g,""),10);return C-j}else return v.name.localeCompare(_.name)}),[g,m]);return a.jsxs(a.Fragment,{children:[n&&Tt.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Client Settings"}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors",children:a.jsx($e,{size:24})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Manage All Clients"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Here you can permanently delete clients (e.g., if they have passed away). Their ID will become available for new clients."}),a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-red-800",children:"Danger Zone"}),a.jsx("p",{className:"text-sm text-red-600",children:"Permanently delete all client data"})]}),a.jsxs("button",{onClick:x,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors flex items-center gap-2",children:[a.jsx(Yr,{size:16}),"Delete All Clients"]})]}),a.jsxs("p",{className:"text-xs text-red-600",children:["This will permanently delete all ",g.length," clients and their transaction history."]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort by:"}),a.jsxs("select",{value:m,onChange:v=>y(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"id",children:"Client ID (G1, G2...)"}),a.jsx("option",{value:"name",children:"Client Name (A-Z)"})]})]}),a.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-lg",children:g.length===0?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"No clients found"}):b.map(v=>a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-100 last:border-b-0",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:v.name}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsxs("span",{children:["ID: ",v.id]}),a.jsxs("span",{className:w(v.id)>0?"text-red-600 font-medium":"text-green-600",children:["Rs ",w(v.id).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),a.jsx("button",{onClick:()=>t(v),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:`Delete ${v.name}`,children:a.jsx(Yr,{size:16})})]},v.id))})]})]})}),document.body),r&&s&&Tt.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 select-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md max-h-[90vh] overflow-hidden select-none",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 select-none",children:[a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsx("div",{className:"bg-red-100 p-2 rounded-full select-none",children:a.jsx(jr,{size:20,className:"text-red-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 select-none",children:"Delete Client"})]}),a.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-700 transition-colors select-none",children:a.jsx($e,{size:24})})]}),a.jsxs("div",{className:"p-6 select-none",children:[a.jsxs("div",{className:"mb-6 select-none",children:[a.jsx("p",{className:"text-gray-700 mb-4 select-none",children:"You are about to permanently delete:"}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border select-none",children:[a.jsx("h4",{className:"font-semibold text-gray-800 select-none",children:s.name}),a.jsxs("p",{className:"text-sm text-gray-600 select-none",children:["ID: ",s.id]}),a.jsxs("p",{className:"text-sm text-gray-600 select-none",children:["Current Debt: Rs ",w(s.id).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),a.jsxs("div",{className:"mb-6 select-none",children:[a.jsx("p",{className:"text-sm text-red-600 mb-3 select-none",children:" This action cannot be undone. All transactions and payment history will be permanently deleted."}),a.jsx("p",{className:"text-sm text-gray-600 mb-3 select-none",children:"Enter confirmation code:"}),a.jsx("input",{type:"text",value:i,onChange:v=>o(v.target.value),placeholder:"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 select-text"})]}),a.jsxs("div",{className:"flex gap-3 select-none",children:[a.jsx("button",{onClick:c,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors select-none",children:"Cancel"}),a.jsx("button",{onClick:l,disabled:i!=="DELETE",className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors select-none",children:"Delete Client"})]})]})]})}),document.body),u&&Tt.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-red-100 p-2 rounded-full",children:a.jsx(jr,{size:20,className:"text-red-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delete All Clients"})]}),a.jsx("button",{onClick:p,className:"text-gray-500 hover:text-gray-700 transition-colors",children:a.jsx($e,{size:24})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("p",{className:"text-gray-700 mb-4",children:["You are about to permanently delete ALL ",g.length," clients and their data:"]}),a.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200 mb-4",children:a.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[a.jsxs("li",{children:[" All ",g.length," client records"]}),a.jsx("li",{children:" All transaction histories"}),a.jsx("li",{children:" All payment records"}),a.jsx("li",{children:" All returnable item tracking"})]})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-sm text-red-600 mb-3",children:" This action cannot be undone. All client data will be permanently lost."}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Enter security code:"}),a.jsx("input",{type:"text",value:h,onChange:v=>d(v.target.value),placeholder:"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:f,disabled:h!=="DELETE",className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Delete All Clients"})]})]})]})}),document.body)]})};/*!
 * Draggable Calculator 3.13.0 (Modified for Mini Calculator)
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
 * 
 * Modified for Mini Calculator: Removed bounds snapping, added momentum/inertia
 */let tw=document.documentElement,wc,v0,b2=function(n,e){let t=e.style[n];if(t)return t;let r=["O","Moz","ms","Ms","Webkit"],s=5,i=n.charAt(0).toUpperCase()+n.substr(1);for(;--s>-1&&!t;)t=e.style[r[s]+i];return t},b0;(function(){try{return window.navigator.maxTouchPoints>0||"ontouchstart"in window}catch{return!1}})();let nw={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},w2=function(n){return n&&typeof n=="object"&&n.push&&n.length!==void 0},w0=Date.now||function(){return new Date().getTime()},Ys=function(n,e,t,r){if(n.addEventListener){let s=nw[e];r=r||!0,n.addEventListener(s||e,t,r),s&&e!==s&&n.addEventListener(e,t,r)}else n.attachEvent&&n.attachEvent("on"+e,t)},Fn=function(n,e,t,r){if(n.removeEventListener){let s=nw[e];n.removeEventListener(s||e,t,r),s&&e!==s&&n.removeEventListener(e,t,r)}else n.detachEvent&&n.detachEvent("on"+e,t)},lt,rw=function(n){return wc=wc||lt.body||tw,wc&&(v0=lt.createElement("div"),b0=!!b2("perspective",v0)),b0};lt&&lt.createElement("div");typeof document<"u"&&(lt=document,tw=lt.documentElement,wc=lt.body,rw());class Qp{constructor(e,t){this.target=e,this.vars=t||{},this.data=this.vars.data||{},this.x=0,this.y=0,this.isDragging=!1,this.isPressed=!1,this.startX=0,this.startY=0,this.deltaX=0,this.deltaY=0,this.velocityX=0,this.velocityY=0,this.lastX=0,this.lastY=0,this.lastTime=0,this.inertia=this.vars.inertia!==!1,this.throwResistance=this.vars.throwResistance||50,this.maxDuration=this.vars.maxDuration||4,this.minDuration=this.vars.minDuration||.5,this.bounds=null,this._eventTarget=this.vars.trigger?this.target.querySelector(this.vars.trigger):this.target,this.init()}init(){this._eventTarget&&(this._eventTarget.style.cursor="grab",this._onPress=this._onPress.bind(this),this._onDrag=this._onDrag.bind(this),this._onRelease=this._onRelease.bind(this),Ys(this._eventTarget,"mousedown",this._onPress),Ys(this._eventTarget,"touchstart",this._onPress))}_onPress(e){e.preventDefault(),e.stopPropagation(),e.type==="touchstart"?this.pointerEvent=e.touches[0]:this.pointerEvent=e,this.isPressed=!0,this.startX=this.pointerEvent.pageX,this.startY=this.pointerEvent.pageY,this.lastX=this.startX,this.lastY=this.startY,this.lastTime=w0(),this.velocityX=0,this.velocityY=0;let t=Be.getProperty(this.target,"transform"),r=new DOMMatrix(t);this.x=r.m41||0,this.y=r.m42||0,this._eventTarget.style.cursor="grabbing",Ys(lt,"mousemove",this._onDrag),Ys(lt,"mouseup",this._onRelease),Ys(lt,"touchmove",this._onDrag),Ys(lt,"touchend",this._onRelease),Ys(lt,"touchcancel",this._onRelease),Be.set(this.target,{zIndex:1e4}),this.vars.onDragStart&&this.vars.onDragStart.call(this,e)}_onDrag(e){if(!this.isPressed||(e.preventDefault(),e.stopPropagation(),e.type.indexOf("touch")!==-1?this.pointerEvent=e.touches[0]:this.pointerEvent=e,!this.pointerEvent))return;let t=this.pointerEvent.pageX,r=this.pointerEvent.pageY,s=w0();this.deltaX=t-this.startX,this.deltaY=r-this.startY;let i=s-this.lastTime;i>0&&(this.velocityX=(t-this.lastX)/i,this.velocityY=(r-this.lastY)/i),this.lastX=t,this.lastY=r,this.lastTime=s;let o=this.x+this.deltaX,l=this.y+this.deltaY;Be.set(this.target,{x:o,y:l}),this.isDragging||(this.isDragging=!0,this.vars.onDrag&&this.vars.onDrag.call(this,e)),this.vars.onDrag&&this.vars.onDrag.call(this,e)}_onRelease(e){if(!this.isPressed)return;this.isPressed=!1;let t=this.isDragging;this.isDragging=!1,this._eventTarget.style.cursor="grab",Fn(lt,"mousemove",this._onDrag),Fn(lt,"mouseup",this._onRelease),Fn(lt,"touchmove",this._onDrag),Fn(lt,"touchend",this._onRelease),Fn(lt,"touchcancel",this._onRelease);let r=Be.getProperty(this.target,"transform"),s=new DOMMatrix(r);this.x=s.m41||0,this.y=s.m42||0,this.inertia&&t&&(Math.abs(this.velocityX)>.1||Math.abs(this.velocityY)>.1)?this._applyInertia():setTimeout(()=>{Be.set(this.target,{zIndex:9999})},100),this.vars.onDragEnd&&this.vars.onDragEnd.call(this,e)}_applyInertia(){let e=600,t=this.velocityX*e/this.throwResistance,r=this.velocityY*e/this.throwResistance;const s=this.target.getBoundingClientRect(),i=s.width,o=s.height,l=0,c=window.innerWidth-i,u=0,h=window.innerHeight-o;let d=Math.max(Math.abs(this.velocityX),Math.abs(this.velocityY)),f=Math.max(this.minDuration,Math.min(this.maxDuration,d/8)),p=this.x+t,x=this.y+r,g=!1;(p<l||p>c||x<u||x>h)&&(g=!0),p=Math.max(l,Math.min(c,p)),x=Math.max(u,Math.min(h,x)),Be.to(this.target,{x:p,y:x,duration:f,ease:g?"bounce.out":"power2.out",onComplete:()=>{Be.set(this.target,{zIndex:9999}),this.vars.onThrowComplete&&this.vars.onThrowComplete.call(this)}})}kill(){Fn(this._eventTarget,"mousedown",this._onPress),Fn(this._eventTarget,"touchstart",this._onPress),Fn(lt,"mousemove",this._onDrag),Fn(lt,"mouseup",this._onRelease),Fn(lt,"touchmove",this._onDrag),Fn(lt,"touchend",this._onRelease),Fn(lt,"touchcancel",this._onRelease),this._eventTarget&&(this._eventTarget.style.cursor="")}static create(e,t){w2(e)||(e=[e]);let r=[];for(let s=0;s<e.length;s++)r.push(new Qp(e[s],t));return r.length===1?r[0]:r}}typeof document<"u"&&rw();const _2=({id:n,initialLabel:e="Quick Calc",initialPosition:t={x:100,y:100},onClose:r,onAddToClient:s})=>{const i=S=>{if(/[+\-*/]/.test(S)){let G=-1;for(let D=S.length-1;D>=0;D--)if(["+","-","","","*","/"].includes(S[D])){G=D;break}if(G!==-1){const D=S.substring(G+1);if(D===""){const ne=S.substring(0,G),ae=Math.max(ne.lastIndexOf("+"),ne.lastIndexOf("-"),ne.lastIndexOf("*"),ne.lastIndexOf("/"),ne.lastIndexOf(""),ne.lastIndexOf(""));return ae!==-1?ne.substring(ae+1):ne}return D}}return S},[o,l]=N.useState("0"),[c,u]=N.useState(0),[h,d]=N.useState(null),[f,p]=N.useState(null),[x,g]=N.useState(null),[w,m]=N.useState(!0),[y,b]=N.useState(e),[v,_]=N.useState(!1),[C,j]=N.useState(y);N.useState(""),N.useState(!1);const[k,E]=N.useState(""),[M,A]=N.useState(!1),[$,O]=N.useState(!1),[T,I]=N.useState(!1),B=N.useRef(null),H=N.useRef(null);N.useEffect(()=>{const S=setTimeout(()=>{O(!0)},50);return()=>clearTimeout(S)},[]),N.useEffect(()=>{if(!B.current||!$)return;const S=B.current;return Be.set(S,{x:t.x,y:t.y}),H.current=Qp.create(S,{inertia:!0,throwResistance:30,maxDuration:3,minDuration:.3,onDragStart:function(){Be.set(S,{zIndex:1e4})},onThrowComplete:function(){Be.set(S,{zIndex:9999})}}),()=>{H.current&&H.current.kill()}},[t,n,$]);const P=S=>{if(S>="0"&&S<="9")w||o==="0"?(l(S),m(!1)):l(o+S);else if(S===".")w?(l("0."),m(!1)):o.includes(".")||l(o+".");else if(S==="C"||S==="AC")l("0"),u(0),d(null),p(null),g(null),m(!0);else if(S==="CE")l("0"),m(!0);else if(S==="")o.length>1?l(o.slice(0,-1)):(l("0"),m(!0));else if(["+","-","*","/"].includes(S))if(h&&f!==null&&!w){const W=parseFloat(o);if(!isNaN(W)){const G=z(f,W,h);l(G.toString()),p(G),d(S),m(!0)}}else if(h&&f!==null&&w)d(S);else{const W=parseFloat(o);isNaN(W)||(p(W),g(W),d(S),m(!0))}else if(S==="="){if(h&&f!==null){let W=-1;for(let G=o.length-1;G>=0;G--)if(["+","-","*","/"].includes(o[G])){W=G;break}if(W!==-1){const G=o.substring(W+1),D=parseFloat(G);if(!isNaN(D)){const ne=z(f,D,h);l(ne.toString()),p(ne),m(!0)}}else{const G=parseFloat(o);if(!isNaN(G)){const D=z(f,G,h);l(D.toString()),p(D),m(!0)}}}}else if(S==="M+"){const W=parseFloat(o);isNaN(W)||u(c+W)}else S==="MR"?(l(c.toString()),m(!0)):S==="MC"&&u(0)},z=(S,W,G)=>{switch(G){case"+":return S+W;case"-":return S-W;case"*":return S*W;case"/":return W!==0?S/W:0;default:return W}},U=()=>{C.trim()?b(C.trim()):j(y),_(!1)},L=()=>{j(y),_(!1)},V=$?a.jsxs("div",{ref:B,className:"fixed bg-white rounded-lg shadow-2xl border border-gray-300 select-none",style:{width:T&&!v?"200px":"280px",zIndex:9999,maxHeight:T?"auto":"90vh",overflow:"hidden",left:0,top:0,transition:"width 0.3s ease-in-out"},onTouchStart:S=>{const W=S.target;(W.closest("button")||W.closest("input")||W.closest("select"))&&(S.stopPropagation(),S.preventDefault())},children:[a.jsxs("div",{className:"bg-blue-500 text-white p-3 rounded-t-lg cursor-grab active:cursor-grabbing flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(Np,{size:16}),v?a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx("input",{type:"text",value:C,onChange:S=>j(S.target.value),className:"bg-blue-400 text-white placeholder-blue-200 border-none outline-none rounded px-2 py-1 text-sm flex-1",placeholder:"Enter label...",autoFocus:!0,onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault()},onClick:S=>{S.stopPropagation(),S.preventDefault()},style:{touchAction:"manipulation",zIndex:10001,position:"relative",pointerEvents:"auto"},onKeyDown:S=>{S.stopPropagation(),S.key==="Enter"&&U(),S.key==="Escape"&&L()}}),a.jsx("button",{onTouchStart:S=>{S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),U()},onClick:S=>{S.stopPropagation(),S.preventDefault(),U()},className:"text-blue-200 hover:text-white transition-colors",style:{touchAction:"manipulation",zIndex:10001,position:"relative",pointerEvents:"auto"},children:a.jsx(Za,{size:14})})]}):a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx("span",{className:"font-medium truncate",children:y}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),_(!0)},onClick:S=>{S.stopPropagation(),S.preventDefault(),_(!0)},className:"text-blue-200 hover:text-white transition-colors",style:{touchAction:"manipulation",zIndex:10001,position:"relative",pointerEvents:"auto"},children:a.jsx(wi,{size:14})})]})]}),!(T&&v)&&a.jsx("button",{onTouchStart:S=>{S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),I(!T)},onClick:S=>{S.stopPropagation(),S.preventDefault(),I(!T)},className:"text-blue-200 hover:text-white transition-colors ml-2",style:{touchAction:"manipulation",zIndex:10001,position:"relative",pointerEvents:"auto"},title:T?"Maximize calculator":"Minimize calculator",children:T?a.jsx(uv,{size:16}):a.jsx($o,{size:16})}),(!T||v)&&a.jsx("button",{onTouchStart:S=>{S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),r()},onClick:S=>{S.stopPropagation(),S.preventDefault(),r()},className:"text-blue-200 hover:text-white transition-colors ml-2",style:{touchAction:"manipulation",zIndex:10001,position:"relative",pointerEvents:"auto"},children:a.jsx($e,{size:16})})]}),a.jsx("div",{className:"bg-gray-50 overflow-hidden transition-all duration-300 ease-in-out",style:{maxHeight:T?"0px":"200px",padding:T?"0 12px":"12px",opacity:T?0:1},children:a.jsxs("div",{className:"bg-gray-100 rounded-lg p-3 text-right relative",children:[c!==0&&a.jsx("div",{className:"absolute top-1 left-2 text-xs text-blue-600 font-semibold",children:"M"}),a.jsx("div",{className:"text-lg font-mono text-gray-800 min-h-[1.5rem] flex items-center justify-end overflow-hidden",children:a.jsx("div",{className:"truncate max-w-full",title:o,children:i(o)})})]})}),T&&a.jsx("div",{className:"px-3 py-2 bg-blue-50 border-t border-blue-200",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-mono font-bold text-blue-800",children:i(o)}),c!==0&&a.jsxs("div",{className:"text-xs text-blue-600 font-semibold",children:["Memory: ",c]})]})}),a.jsx("div",{className:"bg-white overflow-hidden transition-all duration-300 ease-in-out",style:{maxHeight:T?"0px":"600px",padding:T?"0 12px":"12px",opacity:T?0:1},children:a.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-3",children:[a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("C")},onClick:()=>P("C"),className:"bg-red-500 hover:bg-red-600 text-white p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"C"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("CE")},onClick:()=>P("CE"),className:"bg-orange-500 hover:bg-orange-600 text-white p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"CE"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("")},onClick:()=>P(""),className:"bg-gray-500 hover:bg-gray-600 text-white p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:""}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("/")},onClick:()=>P("/"),className:"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:""}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("7")},onClick:()=>P("7"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"7"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("8")},onClick:()=>P("8"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"8"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("9")},onClick:()=>P("9"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"9"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("*")},onClick:()=>P("*"),className:"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:""}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("4")},onClick:()=>P("4"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"4"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("5")},onClick:()=>P("5"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"5"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("6")},onClick:()=>P("6"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"6"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("-")},onClick:()=>P("-"),className:"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:""}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("1")},onClick:()=>P("1"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"1"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("2")},onClick:()=>P("2"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"2"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("3")},onClick:()=>P("3"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"3"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("+")},onClick:()=>P("+"),className:"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"+"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("0")},onClick:()=>P("0"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-2 rounded text-sm font-semibold col-span-2",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"0"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P(".")},onClick:()=>P("."),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"."}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("=")},onClick:()=>P("="),className:"bg-green-500 hover:bg-green-600 text-white p-2 rounded text-sm font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"="}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("M+")},onClick:()=>P("M+"),className:"bg-purple-500 hover:bg-purple-600 text-white p-2 rounded text-xs font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"M+"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("MR")},onClick:()=>P("MR"),className:"bg-purple-500 hover:bg-purple-600 text-white p-2 rounded text-xs font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"MR"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),P("MC")},onClick:()=>P("MC"),className:"bg-purple-500 hover:bg-purple-600 text-white p-2 rounded text-xs font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"MC"}),a.jsx("button",{onTouchStart:S=>{S.stopPropagation(),S.preventDefault()},onTouchEnd:S=>{S.stopPropagation(),S.preventDefault(),o!=="Error"&&A(!0)},disabled:o==="Error",onClick:S=>{S.stopPropagation(),S.preventDefault(),o!=="Error"&&A(!0)},className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white p-2 rounded text-xs font-semibold",style:{touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none"},children:"Add"})]})}),M&&a.jsx(Cv,{calculatorValue:o,onClose:()=>{A(!1),E("")},onAddToClient:async(S,W)=>{try{const G=parseFloat(o);await s(G,W,y);const D=new CustomEvent("creditDataChanged",{detail:{clientId:S.id,source:"transaction"}});window.dispatchEvent(D),console.log(" Dispatched creditDataChanged event for client:",S.id),l("0"),u(0),d(null),p(null),m(!0),A(!1),E("")}catch{E("Failed to add transaction")}}})]}):null;return Tt.createPortal(V,document.body)},Oa=class Oa{static initializeState(){return{display:"0",memory:0,grandTotal:0,lastOperation:null,lastOperand:null,isNewNumber:!0,isError:!1,articleCount:0,transactionHistory:[],calculationSteps:[],autoReplayActive:!1,nextOperatorContext:"+",isMarkupMode:!1}}static validateInput(e){return!e||typeof e!="string"?{isValid:!1,type:"special",error:"Invalid input"}:this.NUMBERS.includes(e)?{isValid:!0,type:"number"}:this.OPERATORS.includes(e)?{isValid:!0,type:"operator"}:e==="."?{isValid:!0,type:"decimal"}:e==="="||e==="ENTER"?{isValid:!0,type:"equals"}:this.SPECIAL_FUNCTIONS.includes(e)?{isValid:!0,type:"special"}:{isValid:!1,type:"special",error:"Unknown input"}}static processInput(e,t){const r=this.validateInput(t);if(!r.isValid)return{state:{...e,isError:!0,display:"Error"},isActive:!0};if(e.isError&&!["ON/C","AC","C"].includes(t))return{state:e,isActive:!0};let s={...e},i=!0;switch(r.type){case"number":s=this.handleNumberInput(s,t);break;case"decimal":s=this.handleDecimalInput(s);break;case"operator":s=this.handleOperatorInput(s,t);break;case"equals":s=this.handleEqualsInput(s);break;case"special":const o=this.handleSpecialFunction(s,t);s=o.state,i=o.isActive;break}return s.display=this.formatDisplayValue(s.display,t),{state:s,isActive:i}}static handleNumberInput(e,t){let r=e.articleCount,s=[...e.calculationSteps];if(e.isNewNumber||e.display==="0"){if(s.length===0){const o=e.lastOperation==="*"||e.lastOperation==="/"||e.lastOperation==="%";t!=="0"&&!o&&(r=1)}else e.lastOperation&&e.isNewNumber?(e.lastOperation==="+"||e.lastOperation==="-")&&t!=="0"&&r++:!e.lastOperation&&e.isNewNumber&&s.length>0&&s[s.length-1].operationType==="operation"&&t!=="0"&&r++;return{...e,display:t,isNewNumber:!1,isError:!1,articleCount:r,calculationSteps:s}}const i=e.display+t;return{...e,display:i,isError:!1}}static handleDecimalInput(e){return e.display.includes(".")?e:e.isNewNumber||e.display==="0"?{...e,display:"0.",isNewNumber:!1,isError:!1}:{...e,display:e.display+".",isError:!1}}static handleOperatorInput(e,t){const r=this.getCurrentNumber(e.display),s=t===""?"*":t===""?"/":t;let i=[...e.calculationSteps],o=e.articleCount;if(console.log(" handleOperatorInput:",{input:t,normalizedOperator:s,currentNumber:r,state:e}),e.lastOperation==="PERCENT"&&e.lastOperand!==null){const c={expression:e.lastOperand.toString(),result:e.lastOperand,timestamp:Date.now(),stepNumber:1,operationType:"number",displayValue:e.lastOperand.toString(),isComplete:!0};i.push(c);const u=r,h={expression:`+(${e.lastOperand}%)`,result:u,timestamp:Date.now(),stepNumber:i.length+1,operationType:"operation",displayValue:`+(${e.lastOperand}${u/e.lastOperand*100}%)=${u}`,isComplete:!0,operator:"+"};return i.push(h),o=i.length,{...e,lastOperation:s,lastOperand:null,isNewNumber:!0,isError:!1,calculationSteps:i,nextOperatorContext:s,articleCount:o}}if(!(s==="*"||s==="/"||s==="%")&&i.length===0){const c={expression:r.toString(),result:r,timestamp:Date.now(),stepNumber:1,operationType:"number",displayValue:r.toString(),isComplete:!0};i.push(c),o=1}if(s==="*"||s==="/"||s==="%"){if(console.log(" Handling compound operation:",{normalizedOperator:s,currentNumber:r,lastOperand:e.lastOperand}),e.lastOperation===s&&e.isNewNumber)return console.log(" Repeated operator detected, updating operator only"),{...e,lastOperation:s,lastOperand:r,isNewNumber:!0,isError:!1,calculationSteps:i,articleCount:o};if(e.lastOperation==="%"&&e.lastOperand!==null){const c=e.lastOperand*100,u=e.lastOperand*r,h={expression:`(${c}%)`,result:u,timestamp:Date.now(),stepNumber:i.length+1,operationType:"operation",displayValue:`(${c}% of ${r})=${u}`,isComplete:!0,operator:"*"};return i.push(h),o=i.length,{...e,display:u.toString(),lastOperation:s,lastOperand:u,isNewNumber:!0,isError:!1,calculationSteps:i,articleCount:o}}if(e.lastOperation&&(e.lastOperation==="+"||e.lastOperation==="-")){if(i.length===0)return{...e,lastOperation:s,lastOperand:r,isNewNumber:!0,isError:!1,calculationSteps:i,nextOperatorContext:e.lastOperation,articleCount:o};if(i.length===0){const c=e.lastOperand!==null?e.lastOperand:this.getCurrentNumber(e.display),u={expression:c.toString(),result:c,timestamp:Date.now(),stepNumber:1,operationType:"number",displayValue:c.toString(),isComplete:!0};i.push(u),o=1}return{...e,lastOperation:s,lastOperand:r,isNewNumber:!0,isError:!1,calculationSteps:i,nextOperatorContext:e.lastOperation,articleCount:o}}return e.lastOperation&&(e.lastOperation==="*"||e.lastOperation==="/"||e.lastOperation==="%")&&i.length===0?{...e,lastOperation:s,lastOperand:r,isNewNumber:!0,isError:!1,calculationSteps:i,articleCount:o}:(i.length===0&&(o=e.articleCount),{...e,lastOperation:s,lastOperand:r,isNewNumber:!0,isError:!1,calculationSteps:i,articleCount:o})}if(s==="+"||s==="-"){if(console.log(" Handling addition/subtraction:",{normalizedOperator:s,currentNumber:r}),e.lastOperation===s&&e.isNewNumber)return console.log(" Repeated operator detected, updating operator only"),{...e,lastOperation:s,isNewNumber:!0,isError:!1,calculationSteps:i,nextOperatorContext:e.nextOperatorContext||s,articleCount:o};if((e.lastOperation==="+"||e.lastOperation==="-")&&(s==="+"||s==="-")&&e.isNewNumber)return console.log(" Switching between + and - operators, updating operator only"),{...e,lastOperation:s,isNewNumber:!0,isError:!1,calculationSteps:i,nextOperatorContext:e.nextOperatorContext||s,articleCount:o};if(e.lastOperation&&(e.lastOperation==="+"||e.lastOperation==="-")){if(i.length===0)return{...e,lastOperation:s,isNewNumber:!0,isError:!1,calculationSteps:i,nextOperatorContext:e.nextOperatorContext||s,articleCount:o};{const c=this.performBasicOperation(e.lastOperand,r,e.lastOperation),u={expression:`${e.lastOperation}${r}`,result:r,timestamp:Date.now(),stepNumber:i.length+1,operationType:"number",displayValue:`${e.lastOperation}${r}`,isComplete:!0,operator:e.lastOperation};return i.push(u),{...e,display:c.toString(),lastOperation:s,lastOperand:c,isNewNumber:!0,isError:!1,calculationSteps:i,nextOperatorContext:e.nextOperatorContext||s,articleCount:i.length}}}if(e.lastOperation&&(e.lastOperation==="*"||e.lastOperation==="/"||e.lastOperation==="%")){if(i.length===0)return{...e,lastOperation:s,isNewNumber:!0,isError:!1,calculationSteps:i,nextOperatorContext:e.nextOperatorContext||s,articleCount:o};{console.log(" Completing pending compound operation");const c=this.performBasicOperation(e.lastOperand,r,e.lastOperation),u=e.calculationSteps.length>0?e.nextOperatorContext||"+":"",h={expression:`${u}(${e.lastOperand}${this.getOperatorSymbol(e.lastOperation)}${r})`,result:c,timestamp:Date.now(),stepNumber:i.length+1,operationType:"operation",displayValue:`${u}(${e.lastOperand}${this.getOperatorSymbol(e.lastOperation)}${r})=${c}`,isComplete:!0,operator:e.lastOperation};u||(h.displayValue=`(${e.lastOperand}${this.getOperatorSymbol(e.lastOperation)}${r})=${c}`),console.log(" Created compound step:",h),i.push(h),o=i.length;let d=c.toString();if(e.calculationSteps.length>0){const f=[...e.calculationSteps,h];d=this.evaluateAllSteps(f).toString()}return{...e,display:d,lastOperation:e.nextOperatorContext||s,lastOperand:this.evaluateAllSteps([...e.calculationSteps,h]),isNewNumber:!0,isError:!1,calculationSteps:i,nextOperatorContext:e.nextOperatorContext||s,articleCount:o}}}else{if(!e.lastOperation&&i.length>0&&i[i.length-1].operationType==="operation"){const u={expression:`${s}${r}`,result:r,timestamp:Date.now(),stepNumber:i.length+1,operationType:"number",displayValue:`${s}${r}`,isComplete:!0,operator:s};i.push(u);const d=this.evaluateAllSteps([...i]).toString();return{...e,display:d,lastOperation:s,lastOperand:r,isNewNumber:!0,isError:!1,calculationSteps:i,nextOperatorContext:e.nextOperatorContext||s,articleCount:i.length}}let c=e.display;if(i.length===0){const u=e.lastOperand!==null?e.lastOperand:this.getCurrentNumber(e.display),h={expression:u.toString(),result:u,timestamp:Date.now(),stepNumber:1,operationType:"number",displayValue:u.toString(),isComplete:!0};i.push(h),o=1}if(e.lastOperation!==null){const u={expression:`${e.lastOperation}${r}`,result:r,timestamp:Date.now(),stepNumber:i.length+1,operationType:"number",displayValue:`${e.lastOperation}${r}`,isComplete:!0,operator:e.lastOperation};i.push(u),c=this.performBasicOperation(e.lastOperand,r,e.lastOperation).toString()}return{...e,display:c,lastOperation:s,lastOperand:r,isNewNumber:!0,isError:!1,calculationSteps:i,nextOperatorContext:e.nextOperatorContext||s,articleCount:o}}}return{...e,lastOperation:s,lastOperand:r,isNewNumber:!0,isError:!1,calculationSteps:i,articleCount:o}}static handleEqualsInput(e){const t=this.getCurrentNumber(e.display);let r=[...e.calculationSteps],s=e.articleCount;if(console.log(" handleEqualsInput:",{currentNumber:t,state:e}),e.lastOperation==="PERCENT"&&e.lastOperand!==null){const h=t;return h!==0?(r=[{expression:`(${e.lastOperand}%)`,result:h,timestamp:Date.now(),stepNumber:1,operationType:"operation",displayValue:`(${e.lastOperand}${h/e.lastOperand*100}%)=${h}`,isComplete:!0}],s=1):(r=[],s=e.articleCount),{...e,display:h.toString(),grandTotal:e.grandTotal+h,transactionHistory:[...e.transactionHistory,h],calculationSteps:r,lastOperation:null,lastOperand:null,isNewNumber:!0,isError:!1,articleCount:s}}if(e.lastOperation==="*"&&e.lastOperand!==null&&e.calculationSteps.some(d=>d.expression.includes("%"))){const d=e.calculationSteps.find(f=>f.expression.includes("%"));if(d){const f=d.expression.match(/(\d+(?:\.\d+)?)%/);if(f){const x=parseFloat(f[1])/100*t;return{...e,display:x.toString(),grandTotal:e.grandTotal+x,transactionHistory:[...e.transactionHistory,x],calculationSteps:r,lastOperation:null,lastOperand:null,isNewNumber:!0,isError:!1,articleCount:s}}}}if(!e.lastOperation||e.lastOperand===null)return console.log(" No operation to complete"),e;const i=(e.lastOperation==="*"||e.lastOperation==="/"||e.lastOperation==="%")&&r.length===0;if(r.length===0&&!i){const h=e.lastOperand!==null?e.lastOperand:this.getCurrentNumber(e.display),d={expression:h.toString(),result:h,timestamp:Date.now(),stepNumber:1,operationType:"number",displayValue:h.toString(),isComplete:!0};r.push(d),s=1}if(console.log(" Processing final operation:",{lastOperation:e.lastOperation,lastOperand:e.lastOperand,currentNumber:t}),e.lastOperation==="*"||e.lastOperation==="/"||e.lastOperation==="%")if(e.isNewNumber)if(r.length>0){const h={expression:e.lastOperand.toString(),result:e.lastOperand,timestamp:Date.now(),stepNumber:r.length+1,operationType:"number",displayValue:e.lastOperand.toString(),isComplete:!0};r.push(h),s=r.length}else{const h=e.lastOperation==="*"?1:e.lastOperation==="/"&&e.lastOperand?e.lastOperand:t,d=this.performBasicOperation(e.lastOperand,h,e.lastOperation);console.log(" Compound operation result:",{compoundResult:d});const f={expression:`(${e.lastOperand}${this.getOperatorSymbol(e.lastOperation)}${h})`,result:d,timestamp:Date.now(),stepNumber:r.length+1,operationType:"operation",displayValue:`(${e.lastOperand}${this.getOperatorSymbol(e.lastOperation)}${h})=${d}`,isComplete:!0,operator:e.lastOperation};console.log(" Created final compound step:",f),r.push(f)}else{const h=t;if(r.length>0&&r[r.length-1].operationType==="number"&&r[r.length-1].operator){const d=r[r.length-1],f=d.operator==="*"?"":d.operator==="/"?"":d.operator||"+",p=this.performBasicOperation(e.lastOperand,h,e.lastOperation);console.log(" Compound operation result:",{compoundResult:p,operatorSign:f});const x={expression:`${f}(${e.lastOperand}${this.getOperatorSymbol(e.lastOperation)}${h})`,result:p,timestamp:Date.now(),stepNumber:r.length,operationType:"operation",displayValue:`${f}(${e.lastOperand}${this.getOperatorSymbol(e.lastOperation)}${h})=${p}`,isComplete:!0,operator:e.lastOperation};console.log(" Created final compound step:",x),r[r.length-1]=x}else if(r.length>0){const d=e.nextOperatorContext||"+",f=this.performBasicOperation(e.lastOperand,h,e.lastOperation);console.log(" Compound operation result:",{compoundResult:f,operatorSign:d});const p={expression:`${d}(${e.lastOperand}${this.getOperatorSymbol(e.lastOperation)}${h})`,result:f,timestamp:Date.now(),stepNumber:r.length+1,operationType:"operation",displayValue:`${d}(${e.lastOperand}${this.getOperatorSymbol(e.lastOperation)}${h})=${f}`,isComplete:!0,operator:e.lastOperation};console.log(" Created final compound step:",p),r.push(p)}else{const d=this.performBasicOperation(e.lastOperand,h,e.lastOperation);console.log(" Compound operation result:",{compoundResult:d});const f={expression:`(${e.lastOperand}${this.getOperatorSymbol(e.lastOperation)}${h})`,result:d,timestamp:Date.now(),stepNumber:r.length+1,operationType:"operation",displayValue:`(${e.lastOperand}${this.getOperatorSymbol(e.lastOperation)}${h})=${d}`,isComplete:!0,operator:e.lastOperation};console.log(" Created final compound step:",f),r.push(f)}}else{const h={expression:`${e.lastOperation}${t}`,result:t,timestamp:Date.now(),stepNumber:r.length+1,operationType:"number",displayValue:`${e.lastOperation}${t}`,isComplete:!0,operator:e.lastOperation};r.push(h),s=r.length}let o;const l=r.length>0&&r[0].operationType==="number";if(e.lastOperation&&e.isNewNumber&&l){let h=e.lastOperand!==null?e.lastOperand:t;if(r.length>=2){const d=r[1];d.operationType==="number"&&d.operator&&(h=d.result)}switch(e.lastOperation){case"+":o=t+h;break;case"-":o=t-h;break;case"*":case"":o=t*h;break;case"/":case"":o=h!==0?t/h:0;break;default:l&&r.length>1?o=this.evaluateAllSteps(r):r.length===1&&r[0].operationType==="operation"&&r[0].displayValue.includes("(")&&r[0].displayValue.includes("=")?o=r[0].result:r.length>1?o=this.evaluateAllSteps(r):r.length===1?o=r[0].result:o=t}}else l&&r.length>1?o=this.evaluateAllSteps(r):r.length===1&&r[0].operationType==="operation"&&r[0].displayValue.includes("(")&&r[0].displayValue.includes("=")?o=r[0].result:r.length>1?o=this.evaluateAllSteps(r):r.length===1?o=r[0].result:o=t;console.log(" Final result:",{finalResult:o,steps:r});const u=e.lastOperation==="+"||e.lastOperation==="-"||e.lastOperation==="*"||e.lastOperation==="/"||e.lastOperation===""||e.lastOperation==="";return{...e,display:o.toString(),grandTotal:e.grandTotal+o,transactionHistory:[...e.transactionHistory,o],calculationSteps:r,lastOperation:u?e.lastOperation:null,lastOperand:u?e.lastOperand:null,isNewNumber:!0,isError:!1,articleCount:r.length}}static handleSpecialFunction(e,t){const r=this.getCurrentNumber(e.display);switch(t){case"ON/C":case"AC":case"C":return{state:this.initializeState(),isActive:!1};case"CE":return{state:{...e,display:"0",isNewNumber:!0},isActive:!0};case"+/-":const s=this.getCurrentNumber(e.display),i=s===0?"0":(-s).toString();return{state:{...e,display:i,isNewNumber:!1},isActive:!0};case"":return{state:{...e,display:e.display.length>1?e.display.slice(0,-1):"0",isNewNumber:e.display.length<=1},isActive:!0};case"MU":return{state:{...e,memory:r,isMarkupMode:!0,isNewNumber:!0},isActive:!0};case"M+":return{state:{...e,memory:e.memory+r},isActive:!0};case"M-":return{state:{...e,memory:e.memory-r},isActive:!0};case"MRC":return e.memory===0?{state:e,isActive:!0}:e.display===e.memory.toString()?{state:{...e,memory:0},isActive:!0}:{state:{...e,display:e.memory.toString(),isNewNumber:!0},isActive:!0};case"GT":return{state:{...e,display:e.grandTotal.toString(),isNewNumber:!0},isActive:!0};case"%":if(e.isMarkupMode&&e.memory!==0){const o=this.getCurrentNumber(e.display),l=e.memory,c=o/100;if(c>=1)return{state:{...e,display:"Error",isError:!0,isMarkupMode:!1,isNewNumber:!0},isActive:!0};const u=l/(1-c);return{state:{...e,display:`=${Math.round(u*100)/100}`,memory:0,isMarkupMode:!1,isNewNumber:!0},isActive:!0}}if(e.lastOperation&&e.lastOperand!==null){let o,l=[...e.calculationSteps],c=e.articleCount;const u=this.getCurrentNumber(e.display);if(e.lastOperation==="+"||e.lastOperation==="-"){const h=e.lastOperand*(u/100);if(e.lastOperation==="+"?o=e.lastOperand+h:o=e.lastOperand-h,l.length===0){const f={expression:e.lastOperand.toString(),result:e.lastOperand,timestamp:Date.now(),stepNumber:1,operationType:"number",displayValue:e.lastOperand.toString(),isComplete:!0};l.push(f),c=1}const d={expression:`${e.lastOperation}${u}%`,result:h,timestamp:Date.now(),stepNumber:l.length+1,operationType:"operation",displayValue:`${e.lastOperation}${u}%=${o}`,isComplete:!0,operator:e.lastOperation};return l.push(d),c=l.length,{state:{...e,display:`=${o}`,lastOperation:null,lastOperand:null,isNewNumber:!0,calculationSteps:l,articleCount:c,grandTotal:e.grandTotal+o,transactionHistory:[...e.transactionHistory,o]},isActive:!0}}else e.lastOperation==="*"?o=e.lastOperand*(u/100):e.lastOperation==="/"?o=u!==0?e.lastOperand/(u/100):0:o=u/100;return{state:{...e,display:o.toString(),lastOperation:"PERCENT",lastOperand:e.lastOperand,isNewNumber:!0,nextOperatorContext:e.nextOperatorContext},isActive:!0}}else{const o=r/100;return{state:{...e,display:o.toString(),isNewNumber:!0},isActive:!0}}case"":return r<0?{state:{...e,display:"Error",isError:!0},isActive:!0}:{state:{...e,display:Math.sqrt(r).toString(),isNewNumber:!0},isActive:!0};case"AUTO":return console.log(" AUTO button pressed, steps count:",e.calculationSteps.length,e.calculationSteps),e.calculationSteps.length>0?{state:this.startAutoReplay(e),isActive:!0}:{state:e,isActive:!0};case"CHECK":return e.calculationSteps.length>0?{state:this.handleCheckForward(e),isActive:!0}:{state:e,isActive:!0};case"CHECK":return e.calculationSteps.length>0?{state:this.handleCheckBackward(e),isActive:!0}:{state:e,isActive:!0};default:return{state:e,isActive:!0}}}static evaluateAllSteps(e){if(e.length===0)return 0;if(e.length===1&&e[0].operationType==="operation"&&e[0].displayValue.includes("("))return e[0].result;let t=e[0].result;for(let r=1;r<e.length;r++){const s=e[r];if(s.operationType==="operation"&&s.displayValue.includes("(")){const i=s.displayValue;i.startsWith("+")?t+=s.result:i.startsWith("-")?t-=s.result:i.startsWith("*")||i.startsWith("")?t*=s.result:i.startsWith("/")||i.startsWith("")?t=s.result!==0?t/s.result:0:t+=s.result}else if(s.operator)switch(s.operator){case"+":t+=s.result;break;case"-":t-=s.result;break;case"*":case"":t*=s.result;break;case"/":case"":t=s.result!==0?t/s.result:0;break;default:t+=s.result}else t+=s.result}return t}static getOperatorSymbol(e){switch(e){case"*":return"";case"/":return"";default:return e}}static getCurrentNumber(e){const t=parseFloat(e);return isNaN(t)?0:t}static performBasicOperation(e,t,r){switch(r){case"+":return e+t;case"-":return e-t;case"*":return e*t;case"/":return t!==0?e/t:0;default:return t}}static formatDisplayValue(e,t){if(e==="Error"||e==="0."||isNaN(parseFloat(e)))return e;const r=parseFloat(e);if(r>999999999999||Math.abs(r)<1e-6&&r!==0)return r.toExponential(6);if(t==="="||t==="ENTER"){if(e.includes(".")){const s=e.split(".")[1];return s&&s.length===1?r.toFixed(2):r.toString()}return r.toString()}return e}static startAutoReplay(e){if(e.calculationSteps.length===0)return e;if(console.log(" Starting auto replay with steps:",e.calculationSteps.length,e.calculationSteps),localStorage.setItem("currentCheckIndex","0"),e.calculationSteps.length>0){const t=e.calculationSteps[0];window.dispatchEvent(new CustomEvent("autoReplayStep",{detail:{displayValue:t.displayValue,stepIndex:0,totalSteps:e.calculationSteps.length,currentStep:1,articleCount:1}}))}return setTimeout(()=>{e.calculationSteps.length>1?this.executeAutoReplaySequence(e.calculationSteps,1):setTimeout(()=>{const t=this.evaluateAllSteps(e.calculationSteps);console.log(" Showing final result:",t),window.dispatchEvent(new CustomEvent("autoReplayStep",{detail:{displayValue:`=${t}`,stepIndex:1,totalSteps:e.calculationSteps.length+1,currentStep:2,articleCount:e.calculationSteps.length}})),setTimeout(()=>{window.dispatchEvent(new CustomEvent("autoReplayComplete"))},1500)},1500)},1500),{...e,autoReplayActive:!0,display:e.calculationSteps.length>0?e.calculationSteps[0].displayValue:e.display}}static executeAutoReplaySequence(e,t){if(console.log(" executeAutoReplaySequence:",{currentIndex:t,totalSteps:e.length,steps:e}),t<e.length){const r=e[t];console.log(" Showing step:",{index:t,displayValue:r.displayValue,result:r.result,step:r}),window.dispatchEvent(new CustomEvent("autoReplayStep",{detail:{displayValue:r.displayValue,stepIndex:t,totalSteps:e.length,currentStep:t+1,articleCount:t+1}})),localStorage.setItem("currentCheckIndex",t.toString()),t+1<e.length?(console.log(" Scheduling next step:",t+1),setTimeout(()=>{this.executeAutoReplaySequence(e,t+1)},1500)):setTimeout(()=>{const s=this.evaluateAllSteps(e);console.log(" Showing final result:",s),window.dispatchEvent(new CustomEvent("autoReplayStep",{detail:{displayValue:`=${s}`,stepIndex:t+1,totalSteps:e.length+1,currentStep:t+2,articleCount:e.length}})),setTimeout(()=>{window.dispatchEvent(new CustomEvent("autoReplayComplete"))},1500)},1500)}else console.log(" No more steps to show, currentIndex:",t,"totalSteps:",e.length)}static handleCheckForward(e){let t=parseInt(localStorage.getItem("currentCheckIndex")||"-1");const r=e.calculationSteps.some(l=>l.isComplete),s=r?e.calculationSteps.length+1:e.calculationSteps.length;t++,t>=s&&(t=0),localStorage.setItem("currentCheckIndex",t.toString());let i,o;return r&&t===e.calculationSteps.length?(i=`=${this.evaluateAllSteps(e.calculationSteps)}`,o=e.calculationSteps.length):(i=e.calculationSteps[t].displayValue,o=t+1),window.dispatchEvent(new CustomEvent("checkNavigation",{detail:{displayValue:i,stepIndex:t,totalSteps:s,currentStep:t+1,articleCount:o}})),{...e,display:i,articleCount:o}}static handleCheckBackward(e){let t=parseInt(localStorage.getItem("currentCheckIndex")||"0");const r=e.calculationSteps.some(l=>l.isComplete),s=r?e.calculationSteps.length+1:e.calculationSteps.length;t--,t<0&&(t=s-1),localStorage.setItem("currentCheckIndex",t.toString());let i,o;return r&&t===e.calculationSteps.length?(i=`=${this.evaluateAllSteps(e.calculationSteps)}`,o=e.calculationSteps.length):(i=e.calculationSteps[t].displayValue,o=t+1),window.dispatchEvent(new CustomEvent("checkNavigation",{detail:{displayValue:i,stepIndex:t,totalSteps:s,currentStep:t+1,articleCount:o}})),{...e,display:i,articleCount:o}}static getCalculationContext(e){return{hasActiveCalculation:e.calculationSteps.length>0,isCompoundCalculation:e.calculationSteps.some(t=>t.expression.includes("*")||t.expression.includes("/")),canPerformEquals:e.lastOperation!==null&&e.lastOperand!==null}}};Oa.SPECIAL_FUNCTIONS=["ON/C","AC","C","CE","","MU","MRC","M-","M+","GT","AUTO","CHECK","CHECK","%","","LINK","+/-"],Oa.OPERATORS=["+","-","*","/","",""],Oa.NUMBERS=["0","1","2","3","4","5","6","7","8","9","00","000"];let ri=Oa;const Ia=class Ia{static add(e,t){try{const r=e+t;return this.validateResult(r)}catch{return{result:0,isValid:!1,error:"Addition failed"}}}static subtract(e,t){try{const r=e-t;return this.validateResult(r)}catch{return{result:0,isValid:!1,error:"Subtraction failed"}}}static multiply(e,t){try{const r=e*t;return this.validateResult(r)}catch{return{result:0,isValid:!1,error:"Multiplication failed"}}}static divide(e,t){try{if(t===0)return{result:0,isValid:!1,error:"Division by zero"};const r=e/t;return this.validateResult(r)}catch{return{result:0,isValid:!1,error:"Division failed"}}}static percentage(e,t){try{if(t!==void 0){const r=t*e/100;return this.validateResult(r)}else{const r=e/100;return this.validateResult(r)}}catch{return{result:0,isValid:!1,error:"Percentage calculation failed"}}}static squareRoot(e){try{if(e<0)return{result:0,isValid:!1,error:"Cannot calculate square root of negative number"};const t=Math.sqrt(e);return this.validateResult(t)}catch{return{result:0,isValid:!1,error:"Square root calculation failed"}}}static power(e,t){try{const r=Math.pow(e,t);return this.validateResult(r)}catch{return{result:0,isValid:!1,error:"Power calculation failed"}}}static evaluateExpression(e){try{let{expression:t}=e;const r=e.precision||this.MAX_PRECISION;if(t=this.sanitizeExpression(t),!t||t==="")return{result:0,isValid:!0};if(t=t.replace(//g,"*").replace(//g,"/").replace(/x/g,"*"),t=t.replace(/[+\-*/]+$/,""),!t)return{result:0,isValid:!0};const s=Function('"use strict"; return ('+t+")")();if(isNaN(s)||!isFinite(s))return{result:0,isValid:!1,error:"Invalid calculation result"};const i=Math.round(s*Math.pow(10,r))/Math.pow(10,r);return this.validateResult(i)}catch{return{result:0,isValid:!1,error:"Expression evaluation failed"}}}static memoryAdd(e,t){return this.add(e,t)}static memorySubtract(e,t){return this.subtract(e,t)}static memoryClear(){return 0}static processCalculationSteps(e,t=!1){try{if(e.length===0)return{result:0,isValid:!0};const r=t?this.buildCompoundExpression(e):this.buildSimpleExpression(e);return this.evaluateExpression({expression:r})}catch{return{result:0,isValid:!1,error:"Step processing failed"}}}static buildSimpleExpression(e){let t="";for(const r of e)r.operationType==="number"?t+=r.result:r.operationType==="operation"&&(t+=r.expression);return t}static buildCompoundExpression(e){let t="";for(const r of e)r.operationType==="number"?t+=r.result:r.operationType==="operation"&&(t+=(r.operator||"")+r.result);return t}static validateResult(e){return isNaN(e)||!isFinite(e)?{result:0,isValid:!1,error:"Invalid number"}:e>this.MAX_SAFE_VALUE||e<this.MIN_SAFE_VALUE?{result:0,isValid:!1,error:"Number too large"}:{result:e,isValid:!0}}static sanitizeExpression(e){return e.replace(/[^0-9+\-*/.()\s]/g,"")}static roundToPrecision(e,t=2){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}static formatForDisplay(e,t={}){const{decimals:r=2,useThousandsSeparator:s=!1,currency:i}=t;let o=e.toFixed(r);return s&&(o=e.toLocaleString("en-US",{minimumFractionDigits:r,maximumFractionDigits:r})),i&&(o=`${i} ${o}`),o}static isCompoundCalculation(e){const t=e.some(i=>i.expression.includes("+")||i.expression.includes("-")||i.operator==="+"||i.operator==="-");return e.some(i=>i.expression.includes("*")||i.expression.includes("/")||i.expression.includes("")||i.expression.includes("")||i.operator==="*"||i.operator==="/"||i.operator===""||i.operator==="")||!t}static calculateStatistics(e){if(e.length===0)return{sum:0,average:0,min:0,max:0,count:0};const t=e.reduce((o,l)=>o+l,0),r=t/e.length,s=Math.min(...e),i=Math.max(...e);return{sum:this.roundToPrecision(t),average:this.roundToPrecision(r),min:this.roundToPrecision(s),max:this.roundToPrecision(i),count:e.length}}};Ia.MAX_PRECISION=10,Ia.MAX_SAFE_VALUE=999999999999,Ia.MIN_SAFE_VALUE=-999999999999;let rr=Ia;class sw{constructor(e={}){this.isActive=!0,this.config={precision:2,maxMemorySlots:1,enableAdvancedFunctions:!0,...e},this.state=ri.initializeState()}processInput(e){const t=ri.processInput(this.state,e);return this.state=t.state,this.isActive=t.isActive,{value:this.state.display,memory:this.state.memory,grandTotal:this.state.grandTotal,lastOperation:this.state.lastOperation,lastOperand:this.state.lastOperand,isNewNumber:this.state.isNewNumber,isActive:this.isActive,transactionHistory:this.state.transactionHistory,calculationSteps:this.state.calculationSteps,autoReplayActive:this.state.autoReplayActive,articleCount:this.state.articleCount,isMarkupMode:this.state.isMarkupMode||!1}}getState(){return{...this.state}}setState(e){this.state={...this.state,...e}}reset(){this.state=ri.initializeState(),this.isActive=!1}getMemory(){return this.state.memory}setMemory(e){this.state.memory=e}getGrandTotal(){return this.state.grandTotal}clearGrandTotal(){this.state.grandTotal=0,this.state.transactionHistory=[]}getTransactionHistory(){return[...this.state.transactionHistory]}getStatistics(){return rr.calculateStatistics(this.state.transactionHistory)}evaluateExpression(e){return rr.evaluateExpression({expression:e,precision:this.config.precision})}formatNumber(e,t={}){return rr.formatForDisplay(e,{decimals:t.decimals||this.config.precision,useThousandsSeparator:t.useThousandsSeparator,currency:t.currency})}isInErrorState(){return this.state.isError}isCalculatorActive(){return this.isActive}getDisplayValue(){return this.state.display}isMarkupMode(){return this.state.isMarkupMode||!1}getCalculationContext(){return ri.getCalculationContext(this.state)}calculatePercentageOf(e,t){return rr.percentage(t,e)}calculateSquareRoot(e){return rr.squareRoot(e)}calculatePower(e,t){return rr.power(e,t)}addToMemory(e){const t=rr.memoryAdd(this.state.memory,e);return t.isValid&&(this.state.memory=t.result),t}subtractFromMemory(e){const t=rr.memorySubtract(this.state.memory,e);return t.isValid&&(this.state.memory=t.result),t}clearMemory(){this.state.memory=rr.memoryClear()}recallMemory(){return this.state.memory}processBatchInputs(e){const t=[];for(const r of e)try{const s=this.processInput(r);t.push({input:r,result:s,success:!0})}catch(s){t.push({input:r,result:{error:s instanceof Error?s.message:"Unknown error"},success:!1})}return{results:t,finalState:this.getState()}}exportState(){return JSON.stringify({state:this.state,config:this.config,timestamp:Date.now()})}importState(e){try{const t=JSON.parse(e);return t.state&&typeof t.state=="object"?(this.state={...ri.initializeState(),...t.state},t.config&&typeof t.config=="object"&&(this.config={...this.config,...t.config}),!0):!1}catch(t){return console.error("Failed to import calculator state:",t),!1}}validateState(){const e=[];return typeof this.state.display!="string"&&e.push("Invalid display value"),(typeof this.state.memory!="number"||!isFinite(this.state.memory))&&e.push("Invalid memory value"),(typeof this.state.grandTotal!="number"||!isFinite(this.state.grandTotal))&&e.push("Invalid grand total"),Array.isArray(this.state.transactionHistory)||e.push("Invalid transaction history"),Array.isArray(this.state.calculationSteps)||e.push("Invalid calculation steps"),{isValid:e.length===0,errors:e}}}const S2=n=>{try{let e=n.replace(//g,"*").replace(//g,"/").replace(/x/g,"*");if(e=e.replace(/[+\-*/]+$/,""),!e||e==="")return 0;const t=Function('"use strict"; return ('+e+")")();return isNaN(t)||!isFinite(t)?0:t}catch{return 0}},C2=()=>{const n=N.useRef(new sw),[e,t]=N.useState("0"),[r,s]=N.useState(0),[i,o]=N.useState(null),[l,c]=N.useState(null),[u,h]=N.useState(!0),[d,f]=N.useState([]),[p,x]=N.useState(0),[g,w]=N.useState(!1),[m,y]=N.useState(null),[b,v]=N.useState(!1),[_,C]=N.useState([]),[j,k]=N.useState(0);return N.useEffect(()=>{const O=localStorage.getItem("independentCalculatorState");if(O)try{const I=JSON.parse(O);t(I.calculatorValue||"0"),s(I.calculatorMemory||0),o(I.lastOperation||null),c(I.lastOperand||null),h(I.isNewNumber??!0),f(I.calculationSteps||[]),x(I.articleCount||0),w(I.isMarkupMode||!1),v(I.autoReplayActive||!1),C(I.transactionHistory||[]),k(I.calculatorGrandTotal||0)}catch(I){console.error("Failed to load calculator state:",I)}const T=()=>{v(!1)};return window.addEventListener("autoReplayComplete",T),()=>{window.removeEventListener("autoReplayComplete",T)}},[]),N.useEffect(()=>{const O={calculatorValue:e,calculatorMemory:r,lastOperation:i,lastOperand:l,isNewNumber:u,calculationSteps:d,articleCount:p,isMarkupMode:g,autoReplayActive:b,transactionHistory:_,calculatorGrandTotal:j};localStorage.setItem("independentCalculatorState",JSON.stringify(O))},[e,r,i,l,u,d,p,g,b,_,j]),{calculatorValue:e,calculatorMemory:r,lastOperation:i,lastOperand:l,isNewNumber:u,calculationSteps:d,articleCount:p,isMarkupMode:g,lastPressedButton:m,autoReplayActive:b,transactionHistory:_,calculatorGrandTotal:j,handleCalculatorInput:O=>{n.current.setState({display:e,memory:r,grandTotal:j,lastOperation:i,lastOperand:l,isNewNumber:u,transactionHistory:_,calculationSteps:d,articleCount:p,isError:e==="Error",autoReplayActive:b,isMarkupMode:g}),y(O);const T=n.current.processInput(O);return t(T.value),s(T.memory),o(T.lastOperation),c(T.lastOperand),h(T.isNewNumber),f(T.calculationSteps),x(T.articleCount),w(T.isMarkupMode),v(T.autoReplayActive),C(T.transactionHistory),k(T.grandTotal),setTimeout(()=>{y(null)},150),T},handleResetCalculator:()=>{n.current.reset(),t("0"),s(0),o(null),c(null),h(!0),f([]),x(0),w(!1),v(!1),C([]),k(0),localStorage.removeItem("independentCalculatorState")},exportCalculatorState:()=>({calculatorValue:e,calculatorMemory:r,lastOperation:i,lastOperand:l,isNewNumber:u,calculationSteps:d,articleCount:p,isMarkupMode:g,autoReplayActive:b,transactionHistory:_,calculatorGrandTotal:j}),importCalculatorState:O=>{t(O.calculatorValue),s(O.calculatorMemory),o(O.lastOperation),c(O.lastOperand),h(O.isNewNumber),f(O.calculationSteps),x(O.articleCount),w(O.isMarkupMode),v(O.autoReplayActive),C(O.transactionHistory),k(O.calculatorGrandTotal)}}},N2=()=>{const{clients:n,searchClients:e,addTransaction:t,getClientTotalDebt:r,deleteClient:s,getClientTransactions:i}=kr();ji(),N.useState("");const[o,l]=N.useState(!1),[c,u]=N.useState(null),[h,d]=N.useState(!1),[f,p]=N.useState(!1),[x,g]=N.useState(null),[w,m]=N.useState(!1),[y,b]=N.useState(!1),[v,_]=N.useState(null),[C,j]=N.useState(""),[k,E]=N.useState(!1),[M,A]=N.useState("all"),[$,O]=N.useState(!1),[T,I]=N.useState("date"),[B,H]=N.useState(!1),[P,z]=N.useState(""),U=N.useRef(null),[L,V]=N.useState(""),[S,W]=N.useState(!1),[G,D]=N.useState(""),[ne,ae]=N.useState(!1),[Se,ee]=N.useState(null),[F,q]=N.useState(null);N.useState(null);const[Y,K]=N.useState([]),[Q,se]=N.useState(null),[ie,ce]=N.useState(null),[he,oe]=N.useState(""),[ve,ke]=N.useState(!1),{calculatorValue:_e,calculatorMemory:Xe,lastOperation:Wt,lastOperand:Tr,isNewNumber:pr,calculationSteps:Ct,articleCount:Me,isMarkupMode:zs,autoReplayActive:Zt,transactionHistory:Fo,calculatorGrandTotal:Ar,lastPressedButton:Ht,handleCalculatorInput:Fs,handleResetCalculator:Jn}=C2();N.useState(()=>new sw),N.useEffect(()=>{const pe=de=>{de&&de.detail&&de.detail.source==="calculator"||de.detail&&de.detail.clientId&&(q(de.detail.clientId),setTimeout(()=>{q(null)},5e3))},J=de=>{if(!de.detail)return;const Re=document.querySelector(".scrolling-tabs-component");if(Re){const Ge=Re.__timelineRef;Ge&&Ge.current&&Ge.current.pause&&(U.current||(Ge.current.pause(),U.current=Ge.current))}if(de.detail.client){const Ge=de.detail.client,Je=de.detail.isAccountClear,Fe=de.detail.message||"Transaction added successfully!";se({...Ge,transactionAmount:0,message:Fe,isAccountClear:Je}),q(Ge)}else se(de.detail);setTimeout(()=>{if(se(null),q(null),U.current&&U.current.resume){try{U.current.resume()}catch{}U.current=null}window.dispatchEvent(new CustomEvent("creditDataChanged",{detail:{source:"duplicateCard"}}))},5e3)},ye=de=>{oe(de.detail.displayValue),de.detail.currentStep!==void 0&&de.detail.totalSteps!==void 0&&ce({currentStep:de.detail.currentStep,totalSteps:de.detail.totalSteps}),de.detail.completed!==void 0&&ke(de.detail.completed)};return window.addEventListener("creditDataChanged",pe),window.addEventListener("showDuplicateCard",J),window.addEventListener("autoReplayStep",ye),()=>{window.removeEventListener("creditDataChanged",pe),window.removeEventListener("showDuplicateCard",J),window.removeEventListener("autoReplayStep",ye)}},[]);const qt=Le.useCallback(()=>{let pe=e("");switch(M){case"returnables":return pe.filter(J=>{const ye=i(J.id);if(ye.length===0)return!1;for(const de of ye){if(de.type==="payment"||de.description.toLowerCase().includes("returned"))continue;const Re=de.description.toLowerCase();if(!(!Re.includes("chopine")&&!Re.includes("bouteille")))return en(ye,J.name)}return!1});case"overdue":return pe.filter(J=>{const ye=r(J.id),de=Math.floor((Date.now()-J.lastTransactionAt.getTime())/(1e3*60*60*24));return ye>0&&de>14});case"overlimit":return pe.filter(J=>r(J.id)>1e3);case"all":default:return pe.filter(J=>{if(r(J.id)>0)return!0;const de=i(J.id);if(de.length===0)return!1;for(const Re of de){if(Re.type==="payment"||Re.description.toLowerCase().includes("returned"))continue;const Ge=Re.description.toLowerCase();if(!(!Ge.includes("chopine")&&!Ge.includes("bouteille"))&&en(de,J.name))return!0}return!1})}},[M,i,r,e]),en=Le.useCallback((pe,J)=>Co(pe).length>0,[]),tt=Le.useMemo(()=>qt(),[qt]),Zr=[...o?e(L):e(L).filter(pe=>{const J=r(pe.id),ye=i(pe.id),de={};ye.forEach(Je=>{var Zp,em,tm,nm,rm;if(Je.type==="payment"||Je.description.toLowerCase().includes("returned"))return;const Fe=Je.description.toLowerCase();if(!Fe.includes("chopine")&&!Fe.includes("bouteille"))return;const Zn=/(\d+)\s+chopines?(?:\s+([^,]*))?/gi;let Us;for(;(Us=Zn.exec(Fe))!==null;){const vn=parseInt(Us[1]),Xt=((Zp=Us[2])==null?void 0:Zp.trim())||"",Mt=Xt?`Chopine ${Xt}`:"Chopine";de[Mt]||(de[Mt]=0),de[Mt]+=vn}const Jp=/(\d+)\s+(?:(\d+(?:\.\d+)?L)\s+)?bouteilles?(?:\s+([^,]*))?/gi;let bl;for(;(bl=Jp.exec(Fe))!==null;){const vn=parseInt(bl[1]),Xt=((em=bl[2])==null?void 0:em.trim().toUpperCase())||"",Mt=((tm=bl[3])==null?void 0:tm.trim())||"",mr=Mt?Mt.split(" ").map(rn=>/^\d/.test(rn)?rn.toLowerCase():rn.charAt(0).toUpperCase()+rn.slice(1).toLowerCase()).join(" "):"";let nt;Xt&&mr?nt=`${Xt} ${mr}`:mr?nt=`Bouteille ${mr}`:Xt?nt=`${Xt} Bouteille`:nt="Bouteille",de[nt]||(de[nt]=0),de[nt]+=vn}if(Fe.includes("bouteille")&&!Jp.test(Fe)){const vn=Fe.match(/(\d+(?:\.\d+)?L)/i),Xt=Fe.match(/bouteilles?\s+([^,]*)/i),Mt=((nm=Xt==null?void 0:Xt[1])==null?void 0:nm.trim())||"",mr=Mt?Mt.split(" ").map(rn=>/^\d/.test(rn)?rn.toLowerCase():rn.charAt(0).toUpperCase()+rn.slice(1).toLowerCase()).join(" "):"";let nt;vn&&Mt?nt=`${vn[1].replace(/l$/i,"L")} ${mr}`:Mt?nt=`Bouteille ${mr}`:vn?nt=`${vn[1].replace(/l$/i,"L")} Bouteille`:nt="Bouteille",de[nt]||(de[nt]=0),de[nt]+=1}if(Fe.includes("chopine")&&!Zn.test(Fe)){const vn=Fe.match(/(\d+(?:\.\d+)?L)/i),Xt=Fe.match(/chopines?\s+([^,]*)/i),Mt=((rm=Xt==null?void 0:Xt[1])==null?void 0:rm.trim())||"",mr=Mt?Mt.split(" ").map(rn=>/^\d/.test(rn)?rn.toLowerCase():rn.charAt(0).toUpperCase()+rn.slice(1).toLowerCase()).join(" "):"";let nt;vn&&Mt?nt=`${vn[1].replace(/l$/i,"L")} ${mr}`:Mt?nt=`Chopine ${mr}`:vn?nt=`${vn[1].replace(/l$/i,"L")} Chopine`:nt="Chopine",de[nt]||(de[nt]=0),de[nt]+=1}});const Re={};ye.filter(Je=>Je.type==="debt"&&Je.description.toLowerCase().includes("returned")).forEach(Je=>{const Fe=Je.description.toLowerCase();Object.keys(de).forEach(Zn=>{if(Fe.includes(Zn.toLowerCase())){const Us=Fe.match(/returned:\s*(\d+)\s+/);Us&&(Re[Zn]||(Re[Zn]=0),Re[Zn]+=parseInt(Us[1]))}})});const Ge=Object.entries(de).some(([Je,Fe])=>{const Zn=Re[Je]||0;return Math.max(0,Fe-Zn)>0});return J>0||Ge})].sort(()=>0),Ei=n.reduce((pe,J)=>pe+r(J.id),0),R=pe=>{if(pe!=="CHECK_UPDATE"){if(pe==="AC"){(Zt||he)&&window.dispatchEvent(new CustomEvent("interruptAutoReplay")),oe(""),ce(null),ke(!1),Jn(),p(!1),g(null);return}ve&&pe!=="AC"&&(oe(""),ce(null),ke(!1)),Fs(pe),p(!0)}},Z=pe=>{g(pe),d(!0),document.activeElement instanceof HTMLElement&&document.activeElement.blur()},X=()=>{g(null),Jn(),p(!1)},te=()=>{Jn(),p(!1),g(null),d(!1)},le=()=>{d(!1)},fe=()=>{te()},be=()=>{const ye=Y.length*40,de={id:`mini-calc-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,label:`Quick Calc ${Y.length+1}`,position:{x:100+ye,y:150+ye}};K(Re=>[...Re,de])},me=pe=>{K(J=>J.filter(ye=>ye.id!==pe))},Ne=async(pe,J,ye)=>{console.log(`Transaction from ${ye}: Amount: Rs ${pe.toFixed(2)}, Description: ${J}`)},je=()=>{q(null)},Ie=pe=>{z(pe)},tn=()=>{z("")},nn=async(pe,J)=>{try{const ye=_e.startsWith("=")?_e.substring(1):_e,de=S2(ye);if(isNaN(de)||!isFinite(de)||de<0)throw new Error("Please enter a valid amount");if(ee(pe),ae(!0),q(pe),!J||!J.trim())throw new Error("Please enter a description");if(!pe||!pe.id)throw new Error("Invalid client selected");await t(pe,J,de),setTimeout(()=>{ae(!1)},3e3),setTimeout(()=>{se(null)},3e3),d(!1),g(null),q(pe);const Re=J.toLowerCase().includes("chopine")||J.toLowerCase().includes("bouteille");se({...pe,transactionAmount:de,transactionDescription:J}),setTimeout(()=>{q(null)},3e3),setTimeout(()=>{ee(null)},8e3),tn()}catch(ye){throw ye}},xn=pe=>{_(pe),b(!0),j("")},Rt=()=>{W(!0),D("")},In=async()=>{if(G==="DELETE")try{localStorage.removeItem("creditClients"),localStorage.removeItem("creditTransactions"),localStorage.removeItem("creditPayments"),window.location.reload(),W(!1),D(""),m(!1)}catch(pe){console.error("Failed to delete all clients:",pe)}},dt=async()=>{if(!(!v||C!=="DELETE"))try{await s(v.id),b(!1),_(null),j(""),m(!1)}catch{}},Qe=pe=>pe.split(/([+\-*/])/).map((ye,de)=>ye==="+"||ye==="-"||ye===""||ye===""||ye==="*"||ye==="/"?a.jsx("span",{className:"calculator-operator",children:ye==="*"?"":ye==="/"?"":ye},de):ye);return a.jsxs("div",{className:"credit-management-container flex flex-col lg:flex-row h-full bg-gray-50 select-none overflow-hidden",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 gap-4 lg:gap-6 p-4 lg:p-6 overflow-hidden",children:[a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0 order-2 lg:order-1",children:[a.jsx(o2,{totalDebtAllClients:Ei,showAllClients:o,onToggleAllClients:()=>l(!o),clientFilter:M,onFilterChange:A,showFilterDropdown:$,onToggleFilterDropdown:()=>O(!$),onShowSettings:()=>m(!0),onShowUnifiedDataManager:()=>{E(!0)},onAddToClientFromMini:nn,sortOption:T,onSortChange:I,showSortDropdown:B,onToggleSortDropdown:()=>H(!B)}),a.jsx("div",{className:"scrolling-tabs-container w-full",children:a.jsx(i2,{clients:tt,linkedClient:x,onQuickAdd:Z,clientFilter:M,getClientTotalDebt:r,onResetCalculator:te,sortOption:T})}),a.jsx(x2,{clients:Zr,searchQuery:L,onSearchChange:V,showAllClients:o,onToggleAllClients:()=>l(!o),onClientLongPress:u,onQuickAdd:Z,onResetCalculator:te,linkedClient:x,recentTransactionClient:F,onCloseWobble:je})]}),a.jsxs("div",{className:"calculator-container w-full lg:w-[32rem] calculator-container-landscape bg-white rounded-lg shadow-lg p-4 lg:p-6 order-1 lg:order-2 flex flex-col h-full",children:[a.jsxs("div",{className:"grid grid-cols-3 items-center gap-2 mb-4",children:[a.jsx("div",{className:"justify-self-start",children:a.jsxs("button",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors",onClick:pe=>{pe.preventDefault(),pe.stopPropagation(),be()},title:"Click to create floating mini calculator",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:a.jsx(Np,{size:24,className:"text-blue-600"})}),a.jsx("h3",{className:"text-lg lg:text-xl font-semibold text-gray-800",children:"Calculator +"})]})}),a.jsx("div",{className:"justify-self-center",children:a.jsx("img",{src:"./golden-logo.gif",alt:"Golden Logo",className:"w-72 h-36 object-contain",style:{maxWidth:"100%",height:"auto"}})}),a.jsx("div",{className:"justify-self-end",children:x?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("p",{className:"text-xs lg:text-sm text-green-600 font-medium whitespace-nowrap",children:["Adding to: ",x.name]}),a.jsx("button",{onClick:pe=>{pe.stopPropagation(),X()},className:"px-2 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded transition-colors",children:"Cancel"})]}):null})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"bg-black rounded-lg p-4 mb-2 calculator-display",children:[a.jsxs("div",{className:"text-2xl sm:text-3xl font-mono text-green-400 min-h-[3rem] flex items-center overflow-hidden bg-black rounded px-3 py-2 relative calculator-display",children:[Xe!==0&&a.jsx("div",{className:"absolute top-0 left-0 text-xs text-blue-400 font-semibold",children:zs?"MU":"M"}),Zt&&ie||he&&he.startsWith("=")||ie?a.jsx("div",{className:"bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold flex-shrink-0 mr-2",children:he&&he.startsWith("=")?"R":`${ie.currentStep}/${ie.totalSteps}`}):Me>0?a.jsx("div",{className:"bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold flex-shrink-0 mr-2",children:Me}):null,a.jsx("div",{className:"truncate text-right flex-1 flex items-center justify-end",title:Zt&&he?he:_e,children:Qe((Zt||he&&he.startsWith("="))&&he?he:_e)})]}),a.jsx("div",{className:"text-xs text-gray-400 font-mono mt-1 text-center calculator-secondary-display",children:Zt||he&&he.startsWith("=")||ie?(()=>{if(ie)return he&&he.startsWith("=")?"RESULT":`STEP ${ie.currentStep}/${ie.totalSteps}`;if(he&&he.startsWith("="))return"RESULT";const pe=parseInt(localStorage.getItem("currentCheckIndex")||"0");if(Ct.length>0&&Ct.some(J=>J.isComplete),_e.startsWith("="))return"RESULT";if(pe<Ct.length){const J=pe+1,ye=Ct.length;return`STEP ${J}/${ye}`}else return"RESULT"})():"READY"})]})}),a.jsxs("div",{className:"grid grid-cols-6 gap-1 sm:gap-2 mb-6 p-2 sm:p-4 bg-gray-200 rounded-lg border-2 border-gray-400 shadow-inner calculator-buttons-grid flex-grow",children:[a.jsxs("div",{className:"col-span-6 grid grid-cols-2 gap-1 sm:gap-2 mb-1 sm:mb-2",children:[a.jsx("div",{}),a.jsx("div",{})]}),a.jsx("button",{onClick:()=>R("MU"),className:"bg-blue-400 hover:bg-blue-500 text-white p-2 sm:p-3 rounded-lg font-bold text-xs sm:text-sm shadow-md border border-blue-500 flex items-center justify-center calculator-button",children:"MU"}),a.jsx("button",{onClick:()=>R("MRC"),className:"bg-blue-400 hover:bg-blue-500 text-white p-2 sm:p-3 rounded-lg font-bold text-xs sm:text-sm shadow-md border border-blue-500 flex items-center justify-center calculator-button",children:"MRC"}),a.jsx("button",{onClick:()=>R("M-"),className:"bg-blue-400 hover:bg-blue-500 text-white p-2 sm:p-3 rounded-lg font-bold text-xs sm:text-sm shadow-md border border-blue-500 flex items-center justify-center calculator-button",children:"M-"}),a.jsx("button",{onClick:()=>R("M+"),className:"bg-blue-400 hover:bg-blue-500 text-white p-2 sm:p-3 rounded-lg font-bold text-xs sm:text-sm shadow-md border border-blue-500 flex items-center justify-center calculator-button",children:"M+"}),a.jsx("button",{onClick:()=>R("AUTO"),className:"bg-gray-400 hover:bg-gray-500 text-white p-2 sm:p-3 rounded-lg font-bold text-xs sm:text-sm shadow-md border border-gray-500 flex items-center justify-center calculator-button",children:"AUTO"}),a.jsx("button",{onClick:()=>R(""),className:"bg-red-500 hover:bg-red-600 text-white p-2 sm:p-3 rounded-lg font-bold text-xs sm:text-sm shadow-md border border-red-600 flex items-center justify-center calculator-button",children:""}),a.jsx("button",{onClick:()=>R("%"),className:"bg-blue-400 hover:bg-blue-500 text-white p-2 sm:p-3 rounded-lg font-bold text-xs sm:text-sm shadow-md border border-blue-500 flex items-center justify-center calculator-button",children:"%"}),a.jsx("button",{onClick:()=>R("7"),className:"bg-gray-800 hover:bg-gray-900 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-gray-600 flex items-center justify-center calculator-button calculator-button-lg",children:"7"}),a.jsx("button",{onClick:()=>R("8"),className:"bg-gray-800 hover:bg-gray-900 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-gray-600 flex items-center justify-center calculator-button calculator-button-lg",children:"8"}),a.jsx("button",{onClick:()=>R("9"),className:"bg-gray-800 hover:bg-gray-900 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-gray-600 flex items-center justify-center calculator-button calculator-button-lg",children:"9"}),a.jsx("button",{onClick:()=>R("CHECK"),disabled:Ct.length===0,className:"bg-purple-400 hover:bg-purple-500 disabled:bg-gray-300 disabled:text-gray-500 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-purple-500 flex items-center justify-center check-arrow-button calculator-button calculator-button-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ca,{size:16}),a.jsx("span",{className:"ml-1 text-sm",children:"CHK"})]})}),a.jsx("button",{onClick:()=>R("CHECK"),disabled:Ct.length===0,className:"bg-purple-400 hover:bg-purple-500 disabled:bg-gray-300 disabled:text-gray-500 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-purple-500 flex items-center justify-center check-arrow-button calculator-button calculator-button-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"mr-1 text-sm",children:"CHK"}),a.jsx(JC,{size:16})]})}),a.jsx("button",{onClick:()=>R(""),className:"bg-blue-400 hover:bg-blue-500 text-white p-2 sm:p-3 rounded-lg font-bold text-sm sm:text-lg shadow-md border border-blue-500 flex items-center justify-center calculator-button calculator-button-lg",children:""}),a.jsx("button",{onClick:()=>R("4"),className:"bg-gray-800 hover:bg-gray-900 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-gray-600 flex items-center justify-center calculator-button calculator-button-lg",children:"4"}),a.jsx("button",{onClick:()=>R("5"),className:"bg-gray-800 hover:bg-gray-900 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-gray-600 flex items-center justify-center calculator-button calculator-button-lg",children:"5"}),a.jsx("button",{onClick:()=>R("6"),className:"bg-gray-800 hover:bg-gray-900 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-gray-600 flex items-center justify-center calculator-button calculator-button-lg",children:"6"}),a.jsx("button",{onClick:()=>R("*"),className:`p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border flex items-center justify-center calculator-button calculator-button-xl ${Ht==="*"?"bg-blue-700 text-white border-blue-800":"bg-blue-400 hover:bg-blue-500 text-white border-blue-500"}`,children:""}),a.jsx("button",{onClick:()=>R(""),className:`p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border flex items-center justify-center calculator-button calculator-button-xl ${Ht==="/"?"bg-blue-700 text-white border-blue-800":"bg-blue-400 hover:bg-blue-500 text-white border-blue-500"}`,children:""}),a.jsx("button",{onClick:()=>R("CE"),className:`p-2 sm:p-3 rounded-lg font-bold text-xs sm:text-sm shadow-md border flex items-center justify-center calculator-button ${Ht==="CE"?"bg-yellow-700 text-white border-yellow-800":"bg-yellow-500 hover:bg-yellow-600 text-white border-yellow-600"}`,children:"CE"}),a.jsx("button",{onClick:()=>R("1"),className:"bg-gray-800 hover:bg-gray-900 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-gray-600 flex items-center justify-center calculator-button calculator-button-lg",children:"1"}),a.jsx("button",{onClick:()=>R("2"),className:"bg-gray-800 hover:bg-gray-900 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-gray-600 flex items-center justify-center calculator-button calculator-button-lg",children:"2"}),a.jsx("button",{onClick:()=>R("3"),className:"bg-gray-800 hover:bg-gray-900 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-gray-600 flex items-center justify-center calculator-button calculator-button-lg",children:"3"}),a.jsx("button",{onClick:()=>R("-"),className:`p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border flex items-center justify-center calculator-button calculator-button-xl ${Ht==="-"?"bg-blue-700 text-white border-blue-800":"bg-blue-400 hover:bg-blue-500 text-white border-blue-500"}`,children:""}),a.jsx("button",{onClick:()=>R("+/-"),className:"bg-blue-400 hover:bg-blue-500 text-white p-2 sm:p-3 rounded-lg font-bold text-sm sm:text-lg shadow-md border border-blue-500 flex items-center justify-center calculator-button calculator-button-lg",children:"+/"}),a.jsx("button",{onClick:()=>R("AC"),className:`p-2 sm:p-3 rounded-lg font-bold text-xs sm:text-sm shadow-md border flex items-center justify-center calculator-button ${Ht==="AC"?"bg-red-700 text-white border-red-800":"bg-red-500 hover:bg-red-600 text-white border-red-600"}`,children:"AC"}),a.jsx("button",{onClick:()=>R("0"),className:"bg-gray-800 hover:bg-gray-900 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-gray-600 flex items-center justify-center calculator-button calculator-button-lg",children:"0"}),a.jsx("button",{onClick:()=>R("00"),className:"bg-gray-800 hover:bg-gray-900 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-gray-600 flex items-center justify-center calculator-button calculator-button-lg",children:"00"}),a.jsx("button",{onClick:()=>R("."),className:"bg-gray-800 hover:bg-gray-900 text-white p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border border-gray-600 flex items-center justify-center calculator-button calculator-button-lg",children:""}),a.jsx("button",{onClick:()=>R("+"),className:`p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border flex items-center justify-center calculator-button calculator-button-xl ${Ht==="+"?"bg-blue-700 text-white border-blue-800":"bg-blue-400 hover:bg-blue-500 text-white border-blue-500"}`,style:{gridRow:"span 1"},children:"+"}),a.jsx("button",{onClick:()=>R("="),className:`p-2 sm:p-3 rounded-lg font-bold text-lg sm:text-xl shadow-md border flex items-center justify-center calculator-button calculator-button-xl ${Ht==="="?"bg-green-700 text-white border-green-800":"bg-green-500 hover:bg-green-600 text-white border-green-600"}`,children:"="})]}),a.jsxs("button",{onClick:()=>d(!0),disabled:_e==="Error",className:`w-full ${x?"bg-blue-500 hover:bg-blue-600":"bg-green-500 hover:bg-green-600"} disabled:bg-gray-300 disabled:cursor-not-allowed text-white p-4 rounded-lg font-semibold text-lg flex items-center justify-center gap-2`,children:[a.jsx(Bt,{size:20}),x?`Add to ${x.name}`:"Add to Client"]})]}),Y.map(pe=>a.jsx(_2,{id:pe.id,initialLabel:pe.label,initialPosition:pe.position,onClose:()=>me(pe.id),onAddToClient:Ne},pe.id))]}),c&&a.jsx(kp,{client:c,onClose:()=>u(null)}),h&&a.jsx(Cv,{calculatorValue:_e,onClose:le,onResetCalculator:fe,onAddToClient:nn,linkedClient:x,description:P,onDescriptionChange:Ie}),k&&a.jsx(Ej,{isOpen:k,onClose:()=>E(!1)}),Q&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4 select-none",children:a.jsx("div",{className:"relative pointer-events-none",children:a.jsxs("div",{className:"animate-pulsate bg-white rounded-lg shadow-2xl p-6 border-4 border-green-500 max-w-sm mx-4",children:[a.jsx("div",{className:"flex items-center justify-center mb-4",children:a.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:a.jsx(Fr,{size:40,className:"text-green-600"})})}),a.jsxs("div",{className:"text-center mb-4 select-none",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:Q.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",Q.id]})]}),Q.transactionDescription&&a.jsx("div",{className:"mb-3 text-center select-none",children:a.jsx("p",{className:"text-lg font-semibold text-gray-800 leading-relaxed select-none",children:Q.transactionDescription})}),(()=>{var Fe;const pe=Q.transactionAmount!==void 0&&Q.transactionAmount>0,J=r(Q.id),ye=J>0,de=i(Q.id),Re=Co(de,Q.name),Ge=Re.length>0,Je=Q.transactionDescription&&(Q.transactionDescription.toLowerCase().includes("chopine")||Q.transactionDescription.toLowerCase().includes("bouteille"))&&Ge;return a.jsxs("div",{className:"relative mb-3",children:[(pe||ye)&&a.jsxs("div",{className:"mb-3",children:[pe&&a.jsxs("p",{className:"text-2xl font-bold text-green-600 mb-1 text-center",children:["Rs ",Q.transactionAmount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),ye&&a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[a.jsxs("div",{className:"bg-blue-500 text-white px-3 py-1 rounded-lg text-sm font-medium",children:["Total Amount: Rs ",J.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),a.jsx("div",{className:"animate-bounce-horizontal text-green-600",children:a.jsx(Ca,{size:24})})]})]}),(Ge||Je)&&a.jsxs("div",{className:"mb-3",children:[(pe||ye||Je)&&a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[a.jsxs("div",{className:"bg-orange-500 text-white px-3 py-1 rounded-lg text-sm font-medium max-w-xs",children:[(Fe=Q.message)!=null&&Fe.toLowerCase().includes("returned")?"Still to return:":"Returnables:"," ",Re.join(", ")]}),a.jsx("div",{className:"animate-bounce-horizontal text-orange-600",children:a.jsx(Ca,{size:24})})]}),!pe&&!ye&&!Je&&a.jsxs("div",{className:"bg-orange-100 border border-orange-300 rounded-lg p-3 mb-2",children:[a.jsx("p",{className:"text-orange-800 font-medium text-sm mb-1",children:"Total Returnables:"}),a.jsx("p",{className:"text-orange-700 text-sm",children:Re.join(", ")})]})]})]})})()]})})}),a.jsx(v2,{showSettings:w,onCloseSettings:()=>m(!1),onDeleteClient:xn,showDeleteConfirm:y,clientToDelete:v,deleteConfirmText:C,onDeleteConfirmTextChange:j,onConfirmDelete:dt,onCancelDelete:()=>{b(!1),_(null),j("")},showDeleteAllConfirm:S,deleteAllPasscode:G,onDeleteAllPasscodeChange:D,onConfirmDeleteAll:In,onCancelDeleteAll:()=>{W(!1),D("")},onDeleteAllClients:Rt})]})},j2=()=>{var ie;const{addItem:n,editItem:e,toggleItem:t,deleteItem:r,searchQuery:s,setSearchQuery:i,searchItems:o,isLoading:l,error:c}=jv(),{showAlert:u}=ji(),[h,d]=N.useState(!1),[f,p]=N.useState(""),[x,g]=N.useState(!1),[w,m]=N.useState("date-desc"),[y,b]=N.useState(!1),[v,_]=N.useState(!1),[C,j]=N.useState(null),[k,E]=N.useState(!1),[M,A]=N.useState(!1),[$,O]=N.useState(!1),[T,I]=N.useState(null),[B,H]=N.useState(""),[P,z]=N.useState(!1),U=o(s),V=(ce=>{const he=[...ce];switch(w){case"name-asc":return he.sort((oe,ve)=>oe.name.localeCompare(ve.name));case"name-desc":return he.sort((oe,ve)=>ve.name.localeCompare(oe.name));case"date-asc":return he.sort((oe,ve)=>oe.createdAt.getTime()-ve.createdAt.getTime());case"date-desc":return he.sort((oe,ve)=>ve.createdAt.getTime()-oe.createdAt.getTime());case"status":return he.sort((oe,ve)=>oe.isCompleted!==ve.isCompleted?oe.isCompleted?1:-1:ve.createdAt.getTime()-oe.createdAt.getTime());default:return he}})(U),S=V.filter(ce=>!ce.isCompleted),W=V.filter(ce=>ce.isCompleted),G=async ce=>{if(ce.preventDefault(),!f.trim()){u({type:"warning",message:"Please enter an item name"});return}try{g(!0),await n(f.trim()),p(""),d(!1)}catch(he){const oe=he instanceof Error?he.message:"Unknown error";!oe.includes("enter")&&!oe.includes("already")&&!oe.includes("required")&&console.error("System error:",oe)}finally{g(!1)}},D=async ce=>{try{await t(ce)}catch(he){console.error("Failed to update item:",he)}},ne=async(ce,he)=>{j({id:ce,name:he}),_(!0)},ae=(ce,he)=>{I(ce),H(he)},Se=async()=>{if(!(!T||!B.trim()))try{z(!0),await e(T,B.trim()),I(null),H("")}catch(ce){console.error("Failed to edit item:",ce)}finally{z(!1)}},ee=()=>{I(null),H("")},F=async()=>{if(C)try{O(!0),await r(C.id),_(!1),j(null)}catch(ce){console.error("Failed to delete item:",ce)}finally{O(!1)}},q=async()=>{S.length!==0&&E(!0)},Y=async()=>{try{O(!0);for(const ce of S)await r(ce.id);E(!1)}catch(ce){console.error("Failed to clear items:",ce)}finally{O(!1)}},K=async()=>{W.length!==0&&A(!0)},Q=async()=>{try{O(!0);for(const ce of W)await r(ce.id);A(!1)}catch(ce){console.error("Failed to clear items:",ce)}finally{O(!1)}},se=[{value:"date-desc",label:"Newest First"},{value:"date-asc",label:"Oldest First"},{value:"name-asc",label:"Name (A-Z)"},{value:"name-desc",label:"Name (Z-A)"},{value:"status",label:"Status (Pending First)"}];return l?a.jsx("div",{className:"flex-1 flex items-center justify-center select-none",children:a.jsxs("div",{className:"text-center select-none",children:[a.jsx(Oh,{size:48,className:"text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 select-none",children:"Loading items..."})]})}):a.jsxs("div",{className:"flex-1 flex flex-col bg-gray-50 overflow-hidden select-none",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm p-4 select-none",children:h?a.jsxs("form",{onSubmit:G,className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200 w-full max-w-2xl mx-auto select-none",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"itemName",className:"block text-base font-medium text-gray-700 mb-2 select-none",children:"Item Name"}),a.jsx("input",{id:"itemName",type:"text",value:f,onChange:ce=>{const oe=ce.target.value.replace(/(^|\s|\/)([a-z])/g,(ve,ke,_e)=>ke+_e.toUpperCase());p(oe)},disabled:x,className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",style:{WebkitAppearance:"none",WebkitUserSelect:"text",userSelect:"text"},placeholder:"Enter item name",autoFocus:!0})]}),c&&a.jsx("p",{className:"text-red-500 text-base mb-4 select-none",children:c}),a.jsxs("div",{className:"flex gap-4 select-none",children:[a.jsx("button",{type:"submit",disabled:x,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white py-3 px-6 text-lg rounded-md transition-colors duration-200 disabled:bg-orange-300 disabled:cursor-not-allowed select-none",children:x?"Adding...":"Add Item"}),a.jsx("button",{type:"button",onClick:()=>{d(!1),p("")},disabled:x,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 px-6 text-lg rounded-md transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed select-none",children:"Cancel"})]})]}):a.jsxs("button",{onClick:()=>d(!0),className:"w-full max-w-md mx-auto bg-orange-500 hover:bg-orange-600 text-white py-3 px-6 rounded-lg flex items-center justify-center transition-colors duration-200 shadow-sm text-lg select-none",children:[a.jsx(Bt,{size:22,className:"mr-3"}),a.jsx("span",{className:"select-none",children:"Add Item to Buy"})]})}),a.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 shadow-sm select-none",children:[a.jsx("div",{className:"space-y-4 select-none",children:a.jsxs("div",{className:"flex items-center gap-3 max-w-2xl mx-auto",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Au,{size:20,className:"text-gray-400"})}),a.jsx("input",{type:"text",value:s,onChange:ce=>{const oe=ce.target.value.replace(/(^|\s|\/)([a-z])/g,(ve,ke,_e)=>ke+_e.toUpperCase());i(oe)},placeholder:"Search items...",className:"block w-full pl-10 pr-4 py-4 text-xl border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-3 focus:ring-orange-500 focus:border-orange-500 shadow-sm select-text"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>b(!y),className:"px-4 py-4 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl border-2 border-gray-300 transition-colors flex items-center gap-2 whitespace-nowrap",children:[a.jsxs("span",{className:"text-sm font-medium",children:["Sort: ",(ie=se.find(ce=>ce.value===w))==null?void 0:ie.label]}),a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&a.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden z-50",children:a.jsx("div",{className:"py-1",children:se.map(ce=>a.jsx("button",{onClick:()=>{m(ce.value),b(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors ${w===ce.value?"bg-orange-50 text-orange-700 font-medium":"text-gray-700"}`,children:ce.label},ce.value))})})]})]})}),y&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>b(!1)})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 select-none",children:[V.length===0&&!s&&a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center select-none",children:[a.jsx("div",{className:"bg-orange-50 p-6 rounded-full mb-6",children:a.jsx(Ih,{size:48,className:"text-orange-500"})}),a.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-3 select-none",children:"No items to buy"}),a.jsx("p",{className:"text-gray-600 mb-8 max-w-md text-lg select-none",children:"Add items that are over or out of stock using the button above"})]}),V.length===0&&s&&a.jsx("div",{className:"text-center py-12 select-none",children:a.jsxs("p",{className:"text-gray-500 text-lg select-none",children:['No items found matching "',s,'"']})}),S.length>0&&a.jsxs("div",{className:"mb-8 select-none",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 select-none",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center select-none",children:[a.jsx(Ih,{size:20,className:"mr-2 text-orange-500"}),"Need to Buy (",S.length,")"]}),a.jsxs("button",{onClick:q,className:"flex items-center gap-1 px-3 py-1 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors select-none",title:`Clear all ${S.length} items`,children:[a.jsx(Yr,{size:14}),a.jsx("span",{className:"select-none",children:"Clear All"})]})]}),a.jsx("div",{className:"space-y-2 select-none",children:S.map(ce=>a.jsx(_0,{item:ce,onToggle:D,onDelete:ne,onEdit:ae,isEditing:T===ce.id,editingItemId:T,editingItemName:B,onSaveEdit:Se,onCancelEdit:ee,onEditNameChange:H,isEditingInProgress:P},ce.id))})]}),W.length>0&&a.jsxs("div",{className:"select-none",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 select-none",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center select-none",children:[a.jsx(Za,{size:20,className:"mr-2 text-green-500"}),"Bought (",W.length,")"]}),a.jsxs("button",{onClick:K,className:"flex items-center gap-1 px-3 py-1 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors select-none",title:`Clear all ${W.length} items`,children:[a.jsx(Yr,{size:14}),a.jsx("span",{className:"select-none",children:"Clear All"})]})]}),a.jsx("div",{className:"space-y-2 select-none",children:W.map(ce=>a.jsx(_0,{item:ce,onToggle:D,onDelete:ne,onEdit:ae,isEditing:T===ce.id,editingItemId:T,editingItemName:B,onSaveEdit:Se,onCancelEdit:ee,onEditNameChange:H,isEditingInProgress:P},ce.id))})]})]}),y&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>b(!1)}),a.jsx(vr,{isOpen:v,title:"Delete Item",message:`Are you sure you want to delete "${C==null?void 0:C.name}"?`,confirmText:$?"Deleting...":"Delete",cancelText:"Cancel",type:"danger",onConfirm:F,onCancel:()=>{_(!1),j(null)}}),a.jsx(vr,{isOpen:k,title:"Clear All Items",message:`Are you sure you want to clear all ${S.length} items from "Need to Buy"? This action cannot be undone.`,confirmText:$?"Clearing...":"Clear All",cancelText:"Cancel",type:"danger",onConfirm:Y,onCancel:()=>E(!1)}),a.jsx(vr,{isOpen:M,title:"Clear All Bought Items",message:`Are you sure you want to clear all ${W.length} bought items? This action cannot be undone.`,confirmText:$?"Clearing...":"Clear All",cancelText:"Cancel",type:"danger",onConfirm:Q,onCancel:()=>A(!1)})]})},_0=({item:n,onToggle:e,onDelete:t,onEdit:r,isEditing:s,editingItemName:i,onSaveEdit:o,onCancelEdit:l,onEditNameChange:c,isEditingInProgress:u})=>a.jsx("div",{className:`bg-white rounded-lg shadow-sm border p-4 transition-all duration-200 select-none ${n.isCompleted?"bg-green-50 border-green-200":"border-gray-200 hover:shadow-md"}`,children:a.jsxs("div",{className:"flex items-center justify-between select-none",children:[a.jsxs("div",{className:"flex items-center flex-1 select-none",children:[a.jsxs("button",{onClick:()=>e(n.id),className:`mr-3 p-1 rounded-full transition-colors select-none ${n.isCompleted?"bg-green-500 text-white":"border-2 border-gray-300 hover:border-orange-500"}`,children:[n.isCompleted&&a.jsx(Za,{size:16}),!n.isCompleted&&a.jsx("div",{className:"w-4 h-4"})]}),a.jsx("div",{className:"flex-1 select-none",children:s?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:i,onChange:h=>{const f=h.target.value.replace(/(^|\s|\/)([a-z])/g,(p,x,g)=>x+g.toUpperCase());c(f)},className:"flex-1 px-3 py-2 border-2 border-gray-300 rounded-md focus:outline-none focus:ring-3 focus:ring-orange-500 focus:border-orange-500 bg-white",disabled:u,autoFocus:!0,placeholder:"Edit item name...",onKeyDown:h=>{h.key==="Enter"?o():h.key==="Escape"&&l()}}),a.jsx("button",{onClick:o,disabled:u||!i.trim(),className:"p-1 text-green-600 hover:text-green-700 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Save changes",children:a.jsx(Za,{size:16})}),a.jsx("button",{onClick:l,disabled:u,className:"p-1 text-gray-600 hover:text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Cancel editing",children:a.jsx($e,{size:16})})]}):a.jsxs(a.Fragment,{children:[a.jsx("h4",{className:`font-medium select-none ${n.isCompleted?"text-gray-500 line-through":"text-gray-800"}`,children:n.name}),a.jsx("p",{className:"text-sm text-gray-500 select-none",children:n.isCompleted&&n.completedAt?`Bought on ${n.completedAt.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/\s/g,"-")} ${n.completedAt.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}`:`Added on ${n.createdAt.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/\s/g,"-")} ${n.createdAt.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}`})]})})]}),!s&&a.jsxs("div",{className:"flex items-center gap-1 ml-3",children:[a.jsx("button",{onClick:()=>r(n.id,n.name),className:"p-2 text-gray-400 hover:text-blue-500 transition-colors select-none",title:"Edit item name",children:a.jsx(wi,{size:16})}),a.jsx("button",{onClick:()=>t(n.id,n.name),className:"p-2 text-gray-400 hover:text-red-500 transition-colors select-none",title:"Delete item",children:a.jsx($e,{size:18})})]})]})}),k2=()=>{const{categories:n,addCategory:e,updateCategory:t,deleteCategory:r,itemTemplates:s,getItemTemplatesByCategory:i,addItemTemplate:o,updateItemTemplate:l,deleteItemTemplate:c,orders:u,getOrdersByCategory:h,addOrder:d,updateOrder:f,deleteOrder:p,searchCategories:x,isLoading:g,error:w}=Du(),{showAlert:m}=ji(),[y,b]=N.useState(""),[v,_]=N.useState(null),[C,j]=N.useState("manage"),[k,E]=N.useState(!1),[M,A]=N.useState(!1),[$,O]=N.useState(!1),[T,I]=N.useState(""),[B,H]=N.useState("15"),[P,z]=N.useState(""),[U,L]=N.useState("");N.useState(!1);const[V,S]=N.useState("15"),[W,G]=N.useState(null),[D,ne]=N.useState(null),[ae,Se]=N.useState(null),[ee,F]=N.useState(!1),[q,Y]=N.useState(!1),[K,Q]=N.useState(null),[se,ie]=N.useState(!1),[ce,he]=N.useState(null),[oe,ve]=N.useState(!1),[ke,_e]=N.useState(null),[Xe,Wt]=N.useState(!1),[Tr,pr]=N.useState(""),[Ct,Me]=N.useState(""),[zs,Zt]=N.useState("15"),[Fo,Ar]=N.useState(!1),[Ht,Fs]=N.useState(!1),[Jn,qt]=N.useState(!1),[en,tt]=N.useState(null),[Bs,Zr]=N.useState(!1),[Ei,R]=N.useState(""),[Z,X]=N.useState(!1),[te,le]=N.useState("");Le.useEffect(()=>{const J=ye=>{_e(ye.detail),ve(!0)};return window.addEventListener("showDuplicateOrderModal",J),()=>{window.removeEventListener("showDuplicateOrderModal",J)}},[]);const fe=x(y),be=async J=>{if(J.preventDefault(),!T.trim()||!B.trim()){m({type:"warning",message:"Please enter a category name and VAT percentage"});return}const ye=parseFloat(B);if(isNaN(ye)||ye<0||ye>100){m({type:"warning",message:"Please enter a valid VAT percentage (0-100)"});return}try{F(!0),await e(T.trim(),ye),I(""),H("15"),E(!1)}catch(de){m({type:"error",message:de instanceof Error?de.message:"Failed to add category"})}finally{F(!1)}},me=async(J,ye=!1,de=15,Re=!1)=>{if(J.preventDefault(),!v||!P.trim()||!U.trim()){m({type:"warning",message:"Please fill in all fields"});return}const Ge=parseFloat(U);if(isNaN(Ge)||Ge<0){m({type:"warning",message:"Please enter a valid price"});return}const Je=parseFloat(V);if(isNaN(Je)||Je<0||Je>100){m({type:"warning",message:"Please enter a valid VAT percentage (0-100)"});return}try{F(!0),await o(v.id,P.trim(),Ge,ye,Re,de),z(""),L(""),S("15"),A(!1),R(`"${P.trim()}" has been successfully added to the list`),Zr(!0)}catch(Fe){const Zn=Fe instanceof Error?Fe.message:"Unknown error occurred";le(`Failed to add item: ${Zn}`),X(!0),console.error("Error adding item template:",Fe)}finally{F(!1)}},Ne=async(J,ye,de)=>{try{await t(J.id,ye,de),G(null)}catch{m({type:"error",message:"Failed to update category"})}},je=async(J,ye,de,Re,Ge,Je)=>{try{console.log(" handleEditItem called with:",{itemId:J.id,newName:ye,newPrice:de,isVatNil:Re,isVatIncluded:Ge,newVatPercentage:Je}),console.log(" handleEditItem called with:",{itemId:J.id,newName:ye,newPrice:de,isVatNil:Re,isVatIncluded:Ge,newVatPercentage:Je}),await l(J.id,ye,de,Re,Ge,Je),console.log(" updateItemTemplate call completed"),ne(null),Wt(!1),pr(""),Me(""),Zt("15"),console.log(" handleEditItem completed successfully")}catch(Fe){console.error(" handleEditItem failed:",Fe),m({type:"error",message:"Failed to update item"})}},Ie=async J=>{Q(J),Y(!0)},tn=async()=>{if(K)try{await r(K.id),Y(!1),Q(null)}catch{m({type:"error",message:"Failed to delete category. Please try again."})}},nn=()=>{Y(!1),Q(null)},xn=async J=>{he(J),ie(!0)},Rt=async()=>{if(ce)try{await p(ce.id),ie(!1),he(null)}catch{m({type:"error",message:"Failed to delete order. Please try again."})}},In=()=>{ie(!1),he(null)},dt=async J=>{tt(J),qt(!0)},Qe=async()=>{if(en)try{await c(en.id),qt(!1),tt(null)}catch(J){console.error("Error deleting item:",J),qt(!1),tt(null),setTimeout(()=>{m({type:"error",message:`Failed to delete "${en.name}". Please try again.`})},100)}},pe=()=>{qt(!1),tt(null)};return g?a.jsx("div",{className:"flex-1 flex items-center justify-center select-none",children:a.jsxs("div",{className:"text-center select-none",children:[a.jsx(Oh,{size:48,className:"text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 select-none",children:"Loading orders..."})]})}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex-1 flex flex-col bg-gray-50 overflow-hidden select-none",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm p-4 select-none",children:v?a.jsxs("div",{className:"flex items-center justify-between select-none",children:[a.jsxs("div",{className:"flex items-center gap-4 select-none",children:[a.jsx("button",{onClick:()=>_(null),className:"text-purple-600 hover:text-purple-700 mb-2 select-none consistent-arrow",children:" Back to Categories"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2 select-none",children:v.name})]}),a.jsxs("div",{className:"flex gap-2 select-none",children:[a.jsxs("button",{onClick:()=>j("manage"),className:`px-4 py-2 rounded-lg font-medium transition-colors select-none ${C==="manage"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[a.jsx(wi,{size:16,className:"inline mr-1"}),a.jsx("span",{className:"select-none",children:"Manage"})]}),a.jsxs("button",{onClick:()=>j("order"),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors select-none ${C==="order"?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[a.jsx(Bt,{size:16}),a.jsx("span",{className:"select-none",children:"Order"})]})]})]}):a.jsx(a.Fragment,{children:k?a.jsxs("form",{onSubmit:be,className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200 w-full max-w-2xl mx-auto select-none",children:[a.jsxs("div",{className:"mb-4 select-none",children:[a.jsx("label",{htmlFor:"categoryName",className:"block text-base font-medium text-gray-700 mb-2 select-none",children:"Category Name"}),a.jsx("input",{id:"categoryName",type:"text",value:T,onChange:J=>{const ye=J.target.value.split(" ").map(de=>de.charAt(0).toUpperCase()+de.slice(1).toLowerCase()).join(" ");I(ye)},disabled:ee,className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed select-text",placeholder:"Enter category name",autoFocus:!0})]}),a.jsxs("div",{className:"flex gap-3 select-none",children:[a.jsx("button",{type:"submit",disabled:ee,className:"flex-1 bg-purple-500 hover:bg-purple-600 text-white py-3 px-6 text-lg rounded-md transition-colors duration-200 disabled:bg-purple-300 disabled:cursor-not-allowed select-none",children:ee?"Adding...":"Add Category"}),a.jsx("button",{type:"button",onClick:()=>{E(!1),I(""),H("15")},disabled:ee,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 px-6 text-lg rounded-md transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed select-none",children:"Cancel"})]})]}):a.jsxs("button",{onClick:()=>E(!0),className:"w-full max-w-md mx-auto bg-purple-500 hover:bg-purple-600 text-white py-3 px-6 rounded-lg flex items-center justify-center transition-colors duration-200 shadow-sm text-lg select-none",children:[a.jsx(Bt,{size:22,className:"mr-3"}),a.jsx("span",{className:"select-none",children:"Add Order Category"})]})})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 select-none",children:v?a.jsx("div",{className:"select-none",children:C==="manage"?a.jsxs("div",{className:"space-y-6 select-none",children:[a.jsxs("div",{className:"flex items-center justify-between select-none",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 select-none",children:"Manage Items"}),a.jsxs("button",{onClick:()=>A(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 select-none",children:[a.jsx(Bt,{size:16}),a.jsx("span",{className:"select-none",children:"Add Item"})]})]}),a.jsx("div",{className:"space-y-2 select-none",children:i(v.id).map(J=>a.jsx(T2,{item:J,onEdit:()=>{ne(J),pr(J.name),Me(J.unitPrice.toString()),Zt(J.vatPercentage.toString()),Ar(J.isVatIncluded||!1),Fs(J.isVatNil||!1),Wt(!0)},onDelete:()=>dt(J)},J.id))})]}):a.jsxs("div",{className:"space-y-6 select-none",children:[a.jsxs("div",{className:"flex items-center justify-between select-none",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 select-none",children:"Orders"}),a.jsxs("button",{onClick:()=>O(!0),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 select-none",children:[a.jsx(Bt,{size:16}),a.jsx("span",{className:"select-none",children:"Create New Order"})]})]}),a.jsx("div",{className:"space-y-4 select-none",children:h(v.id).map(J=>a.jsx(A2,{order:J,itemTemplates:i(v.id),onDelete:()=>xn(J),onUpdate:f},J.id))}),a.jsx("div",{className:"flex-1 min-h-[2rem]"})]})}):a.jsxs("div",{className:"select-none",children:[fe.length===0&&!y&&a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center select-none",children:[a.jsx("div",{className:"bg-purple-50 p-6 rounded-full mb-6",children:a.jsx(Oh,{size:48,className:"text-purple-500"})}),a.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-3 select-none",children:"No order categories"}),a.jsx("p",{className:"text-gray-600 mb-8 max-w-md text-lg select-none",children:"Add your first order category using the button above"})]}),fe.length===0&&y&&a.jsx("div",{className:"text-center py-12 select-none",children:a.jsxs("p",{className:"text-gray-500 text-lg select-none",children:['No categories found matching "',y,'"']})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 select-none",children:fe.map(J=>a.jsx(E2,{category:J,itemsCount:i(J.id).length,ordersCount:h(J.id).length,vatPercentage:J.vatPercentage,onManage:()=>{_(J),j("manage")},onOrder:()=>{_(J),j("order")},onEdit:()=>G(J),onDelete:()=>Ie(J),isEditing:(W==null?void 0:W.id)===J.id,onSaveEdit:(ye,de)=>Ne(J,ye,de),onCancelEdit:()=>G(null)},J.id))})]})}),M&&v&&a.jsx(P2,{category:v,onClose:()=>{A(!1),z(""),L("")},onAdd:me,itemName:P,setItemName:z,itemPrice:U,setItemPrice:L,isSubmitting:ee,showAlert:m}),$&&v&&a.jsx(D2,{category:v,itemTemplates:i(v.id),onClose:()=>O(!1),onAdd:d,showAlert:m}),ae&&v&&a.jsx(O2,{order:ae,itemTemplates:i(v.id),onClose:()=>Se(null),onUpdate:f,showAlert:m}),Xe&&D&&v&&a.jsx(I2,{category:v,item:D,onClose:()=>{Wt(!1),ne(null),pr(""),Me(""),Zt("15"),Ar(!1),Fs(!1)},onSave:je,itemName:Tr,setItemName:pr,itemPrice:Ct,setItemPrice:Me,itemVatPercentage:zs,setItemVatPercentage:Zt,itemVatIncluded:Fo,setItemVatIncluded:Ar,itemVatNil:Ht,setItemVatNil:Fs,isSubmitting:ee,showAlert:m}),a.jsx(vr,{isOpen:q,title:"Delete Category",message:K?`Are you sure you want to delete "${K.name}"?

This will also delete:
 All item templates in this category
 All orders in this category

This action cannot be undone.`:"",confirmText:"Delete Category",cancelText:"Cancel",type:"danger",onConfirm:tn,onCancel:nn}),a.jsx(vr,{isOpen:se,title:"Delete Order",message:ce?(()=>{const J=n.find(Re=>Re.id===ce.categoryId),ye=(J==null?void 0:J.name)||"Unknown",de=ce.orderDate.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});return`Are you sure you want to delete the order for "${ye}" dated ${de}?

This action cannot be undone.`})():"",confirmText:"Delete Order",cancelText:"Cancel",type:"danger",onConfirm:Rt,onCancel:In}),a.jsx(vr,{isOpen:Jn,title:"Delete Item",message:en?`Are you sure you want to delete "${en.name}"?

This will also remove this item from all existing orders in this category.

This action cannot be undone.`:"",confirmText:"Delete Item",cancelText:"Cancel",type:"danger",onConfirm:Qe,onCancel:pe}),a.jsx(vr,{isOpen:oe,title:"Duplicate Order Not Allowed",message:ke?`An order for "${ke.categoryName}" already exists for ${ke.orderDate}.

Duplicate orders for the same date are not allowed. Please choose a different date or edit the existing order.`:"",confirmText:"OK",type:"warning",onConfirm:()=>{ve(!1),_e(null)},onCancel:()=>{ve(!1),_e(null)}}),a.jsx(vr,{isOpen:Bs,title:"Success",message:Ei,confirmText:"OK",type:"info",onConfirm:()=>Zr(!1),onCancel:()=>Zr(!1)}),a.jsx(vr,{isOpen:Z,title:"Error",message:te,confirmText:"OK",type:"danger",onConfirm:()=>X(!1),onCancel:()=>X(!1)})]})})},E2=({category:n,itemsCount:e,ordersCount:t,vatPercentage:r,onManage:s,onOrder:i,onEdit:o,onDelete:l,isEditing:c,onSaveEdit:u,onCancelEdit:h})=>{const{getOrdersByCategory:d}=Du(),[f,p]=N.useState(n.name),x=d(n.id),g=x.length>0?x[0]:null,w=()=>{f.trim()&&u(f.trim(),15)};return c?a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200 select-none",children:[a.jsx("div",{className:"mb-4 select-none",children:a.jsx("input",{type:"text",value:f,onChange:m=>p(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 select-text",placeholder:"Category name",autoFocus:!0})}),a.jsxs("div",{className:"flex gap-2 select-none",children:[a.jsx("button",{onClick:w,className:"flex-1 bg-green-500 text-white px-3 py-2 rounded text-sm hover:bg-green-600 transition-colors select-none",children:"Save"}),a.jsx("button",{onClick:h,className:"flex-1 bg-gray-500 text-white px-3 py-2 rounded text-sm hover:bg-gray-600 transition-colors select-none",children:"Cancel"})]})]}):a.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition-shadow select-none flex flex-col h-64",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3 p-4 pb-0 select-none",children:[a.jsx("h4",{className:"font-semibold text-gray-800 text-lg select-none",children:n.name}),a.jsxs("div",{className:"flex gap-1 select-none",children:[a.jsx("button",{onClick:o,className:"text-blue-500 hover:text-blue-700 p-1 select-none",children:a.jsx(wi,{size:16})}),a.jsx("button",{onClick:l,className:"text-red-500 hover:text-red-700 p-1 select-none",children:a.jsx(Yr,{size:16})})]})]}),a.jsxs("div",{className:"flex-1 px-4 select-none",children:[a.jsx("div",{className:"h-20 mb-3 select-none",children:g?a.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200 h-full flex flex-col justify-center select-none",children:[a.jsxs("div",{className:"flex items-center justify-between select-none",children:[a.jsxs("span",{className:"text-sm font-medium text-green-800 select-none",children:["Rs ",g.totalCost.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),a.jsx("span",{className:"text-xs text-green-600 select-none",children:g.orderDate.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/\s/g,"-")})]}),a.jsx("p",{className:"text-xs text-green-600 mt-1 select-none",children:"Latest Order"})]}):a.jsx("div",{className:"h-full flex items-center justify-center select-none",children:a.jsx("p",{className:"text-gray-400 text-sm select-none",children:"No orders yet"})})}),a.jsx("div",{className:"text-sm text-gray-600 mb-4 select-none",children:a.jsxs("p",{className:"select-none",children:[e," items  ",t," orders"]})})]}),a.jsx("div",{className:"p-4 pt-0 select-none",children:a.jsxs("div",{className:"flex gap-2 select-none",children:[a.jsxs("button",{onClick:s,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-md transition-colors flex items-center justify-center gap-1 select-none",children:[a.jsx(wi,{size:16}),a.jsx("span",{className:"select-none",children:"Manage"})]}),a.jsxs("button",{onClick:i,className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-md transition-colors flex items-center justify-center gap-1 select-none",children:[a.jsx(Bt,{size:16}),a.jsx("span",{className:"select-none",children:"Order"})]})]})})]})},T2=({item:n,onEdit:e,onDelete:t})=>(N.useState(n.name),N.useState(n.unitPrice.toString()),N.useState(n.isVatNil),a.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200 select-none",children:a.jsxs("div",{className:"flex justify-between items-center select-none",children:[a.jsxs("div",{className:"flex flex-col select-none",children:[a.jsx("h5",{className:"font-medium text-gray-800 select-none",children:n.name}),a.jsx("div",{className:"text-sm text-gray-600 select-none",children:n.isVatIncluded?a.jsxs("p",{className:"select-none",children:["Rs ",n.unitPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})," (VAT Included)  Rs ",n.unitPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}):n.isVatNil?a.jsxs("p",{className:"select-none",children:["Rs ",n.unitPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})," (VAT Nil)  Rs ",n.unitPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}):(()=>{const r=n.unitPrice*n.vatPercentage/100,s=n.unitPrice+r;return a.jsxs("p",{className:"select-none",children:["Rs ",n.unitPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})," + VAT ",n.vatPercentage,"% (Rs ",r.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),")  Rs ",s.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})})()})]}),a.jsxs("div",{className:"flex gap-1 select-none",children:[a.jsx("button",{onClick:e,className:"text-blue-500 hover:text-blue-700 p-1 select-none",children:a.jsx(wi,{size:14})}),a.jsx("button",{onClick:t,className:"text-red-500 hover:text-red-700 p-1 select-none",children:a.jsx(Yr,{size:14})})]})]})})),A2=({order:n,itemTemplates:e,onDelete:t,onUpdate:r})=>{const[s,i]=N.useState(n.items),[o,l]=N.useState(!1),[c,u]=N.useState(!1),h=m=>{const y=e.find(b=>b.id===m);return(y==null?void 0:y.name)||"Unknown Item"},d=m=>{const y=m.unitPrice,b=m.isVatIncluded||!1,v=m.isVatNil||b?0:y*(m.vatPercentage||15)/100,_={id:crypto.randomUUID(),templateId:m.id,quantity:1,unitPrice:m.unitPrice,isVatNil:m.isVatNil,isVatIncluded:b,vatAmount:v,totalPrice:b||m.isVatNil?m.unitPrice:m.unitPrice+v,isAvailable:!0},C=[...s,_];i(C),x(C),u(!1)},f=(m,y,b)=>{const v=s.map(_=>{if(_.id===m){const C={..._,[y]:b};if(y==="quantity"||y==="unitPrice"||y==="isAvailable"){const j=C.quantity*C.unitPrice,k=C.isVatIncluded||!1;C.vatAmount=C.isVatNil||k?0:j*.15,C.totalPrice=k?j:j+C.vatAmount,C.isAvailable||(C.vatAmount=0,C.totalPrice=0)}return C}return _});i(v),x(v)},p=m=>{const y=s.filter(b=>b.id!==m);y.length===0?t():(i(y),x(y))},x=async m=>{try{l(!0),await r(n.id,n.orderDate,m)}catch(y){console.error("Failed to auto-save order:",y)}finally{l(!1)}},g=s.filter(m=>m.isAvailable).reduce((m,y)=>m+y.totalPrice,0),w=e.filter(m=>!s.some(y=>y.templateId===m.id));return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200 select-none",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3 select-none",children:[a.jsxs("div",{className:"flex items-center gap-2 select-none",children:[a.jsx(Gc,{size:16,className:"text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 select-none",children:n.orderDate.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/\s/g,"-")}),o&&a.jsx("span",{className:"text-xs text-blue-500 select-none",children:"Saving..."})]}),a.jsxs("div",{className:"flex gap-1 select-none",children:[a.jsx("button",{onClick:()=>u(!0),className:"text-green-500 hover:text-green-700 p-1 select-none",title:"Add items to order",children:a.jsx(Bt,{size:16})}),a.jsx("button",{onClick:t,className:"text-red-500 hover:text-red-700 p-1 select-none",children:a.jsx(Yr,{size:16})})]})]}),a.jsx("div",{className:"space-y-2 mb-3 select-none",children:s.map(m=>a.jsxs("div",{className:"flex items-center justify-between text-sm bg-gray-50 p-2 rounded select-none",children:[a.jsxs("div",{className:"flex items-center gap-2 select-none",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",onClick:()=>f(m.id,"quantity",Math.max(0,m.quantity-1)),disabled:m.quantity===0,className:"w-6 h-6 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 rounded-full flex items-center justify-center transition-colors",children:a.jsx($o,{size:12})}),a.jsx("input",{type:"number",value:m.quantity===0?"":m.quantity.toString(),onChange:y=>f(m.id,"quantity",parseInt(y.target.value)||0),onFocus:y=>y.target.select(),className:"w-16 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400 select-text",placeholder:"0",style:{textAlign:"center"},min:"0"}),a.jsx("button",{type:"button",onClick:()=>f(m.id,"quantity",m.quantity+1),className:"w-6 h-6 bg-blue-500 hover:bg-blue-600 text-white rounded-full flex items-center justify-center transition-colors",children:a.jsx(Bt,{size:12})})]}),a.jsxs("div",{className:"flex flex-col select-none",children:[a.jsx("span",{className:`font-medium select-none ${m.isAvailable?"":"line-through text-gray-400"}`,children:h(m.templateId)}),a.jsxs("div",{className:"text-xs text-gray-600 select-none",children:["Rs ",m.unitPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),m.isVatNil?" (VAT Nil) ":m.isVatIncluded?a.jsx("span",{children:" (VAT Included) "}):` + VAT 15% (Rs ${m.vatAmount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}) `,a.jsx("span",{className:"consistent-arrow",children:""})," Rs ",m.totalPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 select-none",children:[a.jsx("button",{type:"button",onClick:()=>f(m.id,"isAvailable",!m.isAvailable),className:`w-6 h-6 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-full flex items-center justify-center transition-colors ${m.isAvailable?"bg-green-500 text-white":""}`,children:a.jsx(aN,{size:12})}),a.jsx("button",{type:"button",onClick:()=>p(m.id),className:"w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors",title:s.length===1?"Remove item and delete order":"Remove item",children:a.jsx(Yr,{size:12})})]})]},m.id))}),c&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 select-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden select-none",children:[a.jsx("div",{className:"p-4 border-b select-none",children:a.jsxs("div",{className:"flex justify-between items-center select-none",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 select-none",children:"Add Items to Order"}),a.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 select-none",children:a.jsx($e,{size:20})})]})}),a.jsx("div",{className:"p-4 max-h-64 overflow-y-auto select-none",children:w.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500 select-none",children:a.jsx("p",{className:"select-none",children:"All available items are already in this order"})}):a.jsx("div",{className:"space-y-2 select-none",children:w.map(m=>a.jsxs("button",{onClick:()=>d(m),className:"w-full flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-left select-none",children:[a.jsx("span",{className:"font-medium text-gray-800 select-none",children:m.name}),a.jsxs("span",{className:"text-sm text-gray-600 select-none",children:["Rs ",m.unitPrice.toFixed(2)]})]},m.id))})})]})}),a.jsxs("div",{className:"border-t pt-3 flex justify-between items-center select-none",children:[a.jsx("span",{className:"font-semibold text-gray-800 select-none",children:"Total Amount:"}),a.jsxs("span",{className:"font-bold text-green-600 text-lg select-none",children:["Rs ",g.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})},P2=({category:n,onClose:e,onAdd:t,itemName:r,setItemName:s,itemPrice:i,setItemPrice:o,isSubmitting:l,showAlert:c})=>{const[u,h]=Le.useState("15"),[d,f]=Le.useState(!1),[p,x]=Le.useState(!1),g=()=>{const k=parseFloat(i)||0,E=parseFloat(u)||0,M=p||E===0,A=M?0:k*E/100,$=k+A;return{price:k,vatPercent:E,isVatNil:M,vatAmount:A,totalPrice:$}},{price:w,vatPercent:m,isVatNil:y,vatAmount:b,totalPrice:v}=g(),_=k=>{f(k),k&&x(!1)},C=k=>{x(k),k?(f(!1),h("0")):h("15")},j=k=>{if(k.preventDefault(),!r.trim()){c({type:"warning",message:"Please enter an item name"});return}if(isNaN(w)||w<0){c({type:"warning",message:"Please enter a valid price"});return}if(isNaN(m)||m<0||m>100){c({type:"warning",message:"Please enter a valid VAT percentage (0-100)"});return}t(k,p,m,d)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 select-none",children:a.jsx("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden select-none",children:a.jsxs("div",{className:"p-6 select-none",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 select-none",children:a.jsxs("div",{className:"text-center select-none",children:["Add Item to ",n.name]})}),a.jsxs("form",{onSubmit:j,className:"select-none",children:[a.jsxs("div",{className:"mb-4 select-none",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 select-none",children:"Item Name"}),a.jsx("input",{type:"text",value:r,onChange:k=>{const E=k.target.value.split(" ").map(M=>/^\d+(\.\d+)?L$/i.test(M)?M.toUpperCase():M.charAt(0).toUpperCase()+M.slice(1)).join(" ");s(E)},placeholder:"e.g., Matinee, Palmal, Rothman",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 select-text",autoFocus:!0})]}),a.jsxs("div",{className:"mb-4 select-none",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 select-none",children:"Unit Price (Rs)"}),a.jsx("input",{type:"number",value:i,onChange:k=>o(k.target.value),min:"0",step:"0.01",placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 select-text"})]}),a.jsxs("div",{className:"mb-4 space-y-3 select-none",children:[a.jsxs("div",{className:"flex items-center justify-between select-none",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 select-none",children:"VAT Exempt"}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer select-none",children:[a.jsx("input",{type:"checkbox",checked:p,onChange:k=>C(k.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${p?"bg-red-500":"bg-gray-300"}`,children:a.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${p?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]})]}),a.jsxs("div",{className:"flex items-center justify-between select-none",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 select-none",children:"VAT Included"}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer select-none",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:k=>_(k.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${d?"bg-green-500":"bg-gray-300"}`,children:a.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${d?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]})]})]}),a.jsxs("div",{className:"mb-4 select-none",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 select-none",children:"VAT (%)"}),a.jsx("input",{type:"number",value:u,onChange:k=>h(k.target.value),min:"0",max:"100",step:"0.0001",disabled:d||p,className:`w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 select-text ${d||p?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}`}),a.jsx("p",{className:"text-xs text-gray-500 mt-1 select-none",children:d?"VAT percentage is disabled when VAT is included":p?"VAT percentage is disabled for VAT exempt items":"Enter 0 for VAT Nil items"})]}),w>0&&a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200 select-none",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2 select-none",children:"Price Breakdown:"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1 select-none",children:[a.jsxs("div",{className:"flex justify-between select-none",children:[a.jsx("span",{className:"select-none",children:"Unit Price:"}),a.jsxs("span",{className:"select-none",children:["Rs ",w.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.jsxs("div",{className:"flex justify-between select-none",children:[a.jsxs("span",{className:"select-none",children:["VAT (",m,"%):"]}),a.jsx("span",{className:"select-none",children:p?"VAT Nil":d?"VAT Included (No Additional VAT)":`Rs ${b.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`})]}),a.jsxs("div",{className:"flex justify-between font-medium text-gray-800 pt-1 border-t border-gray-300 select-none",children:[a.jsx("span",{className:"select-none",children:"Total Price:"}),a.jsxs("span",{className:"select-none",children:["Rs ",(d?w:v).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),a.jsxs("div",{className:"flex gap-3 select-none",children:[a.jsx("button",{type:"button",onClick:e,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 select-none",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:l||!r.trim()||!i.trim(),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 select-none",children:l?"Adding...":"Add Item"})]})]})]})})})},D2=({category:n,itemTemplates:e,onClose:t,onAdd:r,showAlert:s})=>{const[i,o]=N.useState(new Date().toISOString().split("T")[0]),[l,c]=N.useState([]);N.useState(!1),N.useState(null),N.useState(!1);const[u,h]=N.useState(!1);Du(),Le.useEffect(()=>{const p=e.map(x=>({id:x.id,templateId:x.id,quantity:0,unitPrice:x.unitPrice,isVatNil:x.isVatNil,isVatIncluded:x.isVatIncluded||!1,vatAmount:0,totalPrice:0,isAvailable:!0}));c(p)},[e]);const d=async p=>{p.preventDefault();const x=l.filter(w=>w.quantity>0);if(x.length===0){s({type:"warning",message:"Please add at least one item with quantity greater than 0"});return}if(l.filter(w=>w.isAvailable).reduce((w,m)=>w+m.totalPrice,0)===0){s({type:"warning",message:"Cannot create an order with Rs 0.00 total cost. Please add items or mark items as available."});return}try{h(!0),await r(n.id,new Date(i),x),t()}catch(w){if(w instanceof Error&&w.message.includes("already exists for")){const m=new Date(i).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),y={categoryName:n.name,orderDate:m};window.dispatchEvent(new CustomEvent("showDuplicateOrderModal",{detail:y}))}else s({type:"error",message:"Failed to create order"})}finally{h(!1)}},f=l.filter(p=>p.isAvailable).reduce((p,x)=>p+x.totalPrice,0);return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 select-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-6xl max-h-[90vh] overflow-hidden select-none",children:[a.jsx("div",{className:"p-6 border-b select-none",children:a.jsxs("div",{className:"flex justify-between items-center select-none",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 select-none",children:["Create Order - ",n.name]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 select-none",children:a.jsx($e,{size:24})})]})}),a.jsxs("form",{onSubmit:d,className:"flex flex-col h-full select-none",children:[a.jsxs("div",{className:"p-6 border-b select-none",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 select-none",children:"Order Date"}),a.jsx("input",{type:"date",value:i,onChange:p=>o(p.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 select-none"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 select-none",children:e.length===0?a.jsx("div",{className:"text-center py-12 select-none",children:a.jsxs("div",{className:"bg-yellow-50 p-6 rounded-lg border border-yellow-200 select-none",children:[a.jsx("h4",{className:"text-lg font-medium text-yellow-800 mb-2 select-none",children:"No Items Available"}),a.jsx("p",{className:"text-yellow-700 select-none",children:"Please add items to this category first before creating an order."})]})}):a.jsx("div",{className:"overflow-x-auto select-none",children:a.jsxs("table",{className:"w-full border-collapse select-none",children:[a.jsx("thead",{className:"select-none",children:a.jsxs("tr",{className:"bg-gray-50 select-none",children:[a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left select-none",children:"Item"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center select-none",children:"Quantity"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center select-none",children:"Unit Price"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center select-none",children:"VAT (15%)"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center select-none",children:"Total Price"})]})}),a.jsx("tbody",{className:"select-none",children:e.map(p=>a.jsxs("tr",{className:"hover:bg-gray-50 select-none",children:[a.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center select-none",children:a.jsx("div",{className:"select-none",children:a.jsx("div",{className:"font-medium text-gray-800 select-none",children:p.name})})}),a.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center select-none",children:a.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[a.jsx("button",{type:"button",onClick:()=>{var m;const x=((m=l.find(y=>y.templateId===p.id))==null?void 0:m.quantity)||0,g=Math.max(0,x-1),w=l.findIndex(y=>y.templateId===p.id);if(g===0)w>=0&&c(y=>y.filter((b,v)=>v!==w));else{const y=p.isVatNil||p.isVatIncluded?0:p.unitPrice*g*p.vatPercentage/100,b=p.isVatIncluded?p.unitPrice*g:p.unitPrice*g+y,v={id:w>=0?l[w].id:crypto.randomUUID(),templateId:p.id,quantity:g,unitPrice:p.unitPrice,isVatNil:p.isVatNil,isVatIncluded:p.isVatIncluded||!1,vatAmount:y,totalPrice:b,isAvailable:!0};w>=0?c(_=>_.map((C,j)=>j===w?v:C)):c(_=>[..._,v])}},disabled:(()=>{var g;return(((g=l.find(w=>w.templateId===p.id))==null?void 0:g.quantity)||0)===0})(),className:"w-6 h-6 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 rounded-full flex items-center justify-center transition-colors",children:a.jsx($o,{size:12})}),a.jsx("input",{type:"number",min:"0",value:(()=>{var g;const x=((g=l.find(w=>w.templateId===p.id))==null?void 0:g.quantity)||0;return x===0?"":x.toString()})(),onChange:x=>{const g=parseInt(x.target.value)||0,w=l.findIndex(m=>m.templateId===p.id);if(g===0)w>=0&&c(m=>m.filter((y,b)=>b!==w));else{const m=p.isVatNil||p.isVatIncluded?0:p.unitPrice*g*p.vatPercentage/100,y=p.isVatIncluded?p.unitPrice*g:p.unitPrice*g+m,b={id:w>=0?l[w].id:crypto.randomUUID(),templateId:p.id,quantity:g,unitPrice:p.unitPrice,isVatNil:p.isVatNil,isVatIncluded:p.isVatIncluded||!1,vatAmount:m,totalPrice:y,isAvailable:!0};w>=0?c(v=>v.map((_,C)=>C===w?b:_)):c(v=>[...v,b])}},onFocus:x=>x.target.select(),className:"w-16 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400 select-text",placeholder:"0",style:{textAlign:"center"}}),a.jsx("button",{type:"button",onClick:()=>{var v;const g=(((v=l.find(_=>_.templateId===p.id))==null?void 0:v.quantity)||0)+1,w=l.findIndex(_=>_.templateId===p.id),m=p.isVatNil||p.isVatIncluded?0:p.unitPrice*g*p.vatPercentage/100,y=p.isVatIncluded?p.unitPrice*g:p.unitPrice*g+m,b={id:w>=0?l[w].id:crypto.randomUUID(),templateId:p.id,quantity:g,unitPrice:p.unitPrice,isVatNil:p.isVatNil,isVatIncluded:p.isVatIncluded||!1,vatAmount:m,totalPrice:y,isAvailable:!0};w>=0?c(_=>_.map((C,j)=>j===w?b:C)):c(_=>[..._,b])},className:"w-6 h-6 bg-blue-500 hover:bg-blue-600 text-white rounded-full flex items-center justify-center transition-colors",children:a.jsx(Bt,{size:12})})]})}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-center select-none",children:["Rs ",p.unitPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),a.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center select-none",children:(()=>{const x=l.find(g=>g.templateId===p.id);return!x||x.quantity===0?"Rs 0.00":p.isVatNil?"(VAT Nil)":p.isVatIncluded?a.jsx("span",{children:"(VAT Included)"}):`VAT(Rs ${x.vatAmount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})})`})()}),a.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center font-semibold select-none",children:(()=>{const x=l.find(g=>g.templateId===p.id);return!x||x.quantity===0?"Rs 0.00":`Rs ${x.totalPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`})()})]},p.id))})]})})}),a.jsxs("div",{className:"p-6 border-t bg-gray-50 select-none",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 select-none",children:[a.jsx("span",{className:"text-xl font-semibold text-gray-800 select-none",children:"Total Amount:"}),a.jsxs("span",{className:"text-2xl font-bold text-green-600 select-none",children:["Rs ",f.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.jsxs("div",{className:"flex gap-3 select-none",children:[a.jsx("button",{type:"button",onClick:t,disabled:u,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 select-none",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:u||e.length===0||f===0,className:`flex-1 px-4 py-2 rounded-lg transition-colors select-none ${f===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:u?"Creating...":"Create Order"})]})]})]})]})})},O2=({order:n,itemTemplates:e,onClose:t,onUpdate:r,showAlert:s})=>{const[i,o]=N.useState(n.orderDate.toISOString().split("T")[0]),[l,c]=N.useState(n.items),[u,h]=N.useState(!1),d=(g,w,m)=>{c(y=>y.map(b=>{if(b.id===g){const v={...b,[w]:m};if(w==="quantity"||w==="unitPrice"||w==="isAvailable"){const _=v.quantity*v.unitPrice,C=e.find(E=>E.id===v.templateId),j=C&&C.isVatIncluded,k=C&&(C.isVatNil||j)?0:_*(C&&C.vatPercentage||15)/100;v.vatAmount=v.isVatNil||j?0:k,v.totalPrice=j?_:_+k,v.isAvailable||(v.vatAmount=0,v.totalPrice=0)}return v}return b}))},f=async g=>{if(g.preventDefault(),e.length===0){s({type:"error",message:"Cannot update order: No items available in this category"});return}const w=l.filter(m=>m.quantity>0);if(w.length===0){s({type:"warning",message:"Please add at least one item with quantity greater than 0"});return}try{h(!0),await r(n.id,new Date(i),w),t()}catch{s({type:"error",message:"Failed to update order"})}finally{h(!1)}},p=l.filter(g=>g.isAvailable).reduce((g,w)=>g+w.totalPrice,0),x=g=>{const w=e.find(m=>m.id===g);return(w==null?void 0:w.name)||"Unknown Item"};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 select-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-6xl max-h-[90vh] overflow-hidden select-none",children:[a.jsx("div",{className:"p-6 border-b select-none",children:a.jsxs("div",{className:"flex justify-between items-center select-none",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 select-none",children:"Edit Order"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 select-none",children:a.jsx($e,{size:24})})]})}),a.jsxs("form",{onSubmit:f,className:"flex flex-col h-full select-none",children:[a.jsxs("div",{className:"p-6 border-b select-none",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 select-none",children:"Order Date"}),a.jsx("input",{type:"date",value:i,onChange:g=>o(g.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 select-none"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 select-none",children:e.length===0?a.jsx("div",{className:"text-center py-12 select-none",children:a.jsxs("div",{className:"bg-red-50 p-6 rounded-lg border border-red-200 select-none",children:[a.jsx("h4",{className:"text-lg font-medium text-red-800 mb-2 select-none",children:"No Items Available"}),a.jsx("p",{className:"text-red-700 select-none",children:"Cannot edit this order because there are no items in this category."}),a.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 select-none",children:"Close"})]})}):a.jsx("div",{className:"space-y-3 select-none",children:l.map(g=>a.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg select-none",children:[a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",onClick:()=>d(g.id,"quantity",Math.max(0,g.quantity-1)),disabled:g.quantity===0,className:"w-6 h-6 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 rounded-full flex items-center justify-center transition-colors",children:a.jsx($o,{size:12})}),a.jsx("input",{type:"number",min:"0",value:g.quantity===0?"":g.quantity.toString(),onChange:w=>d(g.id,"quantity",parseInt(w.target.value)||0),onFocus:w=>w.target.select(),className:"w-16 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400 select-text",placeholder:"0",style:{textAlign:"center"}}),a.jsx("button",{type:"button",onClick:()=>d(g.id,"quantity",g.quantity+1),className:"w-6 h-6 bg-blue-500 hover:bg-blue-600 text-white rounded-full flex items-center justify-center transition-colors",children:a.jsx(Bt,{size:12})})]}),a.jsx("span",{className:`font-medium select-none ${g.isAvailable?"":"line-through text-gray-400"}`,children:x(g.templateId)}),a.jsxs("div",{className:"text-xs text-gray-600 mt-1 select-none",children:["Rs ",g.unitPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),g.isVatNil?" (VAT Nil) ":g.isVatIncluded?a.jsx("span",{children:" (VAT Included) "}):` + VAT 15% (Rs ${g.vatAmount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}) `,a.jsx("span",{className:"consistent-arrow",children:""})," Rs ",g.totalPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.jsxs("div",{className:"flex items-center gap-3 select-none",children:[a.jsx("span",{className:`text-xs select-none ${g.isAvailable?"":"line-through text-gray-400"}`,children:g.isVatNil?"(VAT Nil)":g.isVatIncluded?a.jsx("span",{children:"(VAT Included)"}):`VAT(Rs ${g.vatAmount.toFixed(2)})`}),a.jsxs("span",{className:`font-medium select-none ${g.isAvailable?"":"line-through text-gray-400"}`,children:["Rs ",g.totalPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),a.jsx("input",{type:"checkbox",checked:g.isAvailable,onChange:w=>d(g.id,"isAvailable",w.target.checked),className:"w-4 h-4"})]})]},g.id))})}),a.jsxs("div",{className:"p-6 border-t bg-gray-50 select-none",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 select-none",children:[a.jsx("span",{className:"text-xl font-semibold text-gray-800 select-none",children:"Total Amount:"}),a.jsxs("span",{className:"text-2xl font-bold text-green-600 select-none",children:["Rs ",p.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.jsxs("div",{className:"flex gap-3 select-none",children:[a.jsx("button",{type:"button",onClick:t,disabled:u,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 select-none",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:u||e.length===0||p===0,className:`flex-1 px-4 py-2 rounded-lg transition-colors select-none ${p===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:u?"Updating...":"Update Order"})]})]})]})]})})},I2=({category:n,item:e,onClose:t,onSave:r,itemName:s,setItemName:i,itemPrice:o,setItemPrice:l,itemVatPercentage:c,setItemVatPercentage:u,itemVatIncluded:h,setItemVatIncluded:d,itemVatNil:f,setItemVatNil:p,isSubmitting:x,showAlert:g})=>{const[w,m]=N.useState(e.isVatIncluded||!1),[y,b]=N.useState(e.isVatNil||!1),v=()=>{const O=parseFloat(o)||0,T=parseFloat(c)||0,I=y||T===0,B=I?0:O*T/100,H=O+B;return{price:O,vatPercent:T,isVatNil:I,vatAmount:B,totalPrice:H}},{price:_,vatPercent:C,isVatNil:j,vatAmount:k,totalPrice:E}=v(),M=O=>{m(O),O&&b(!1)},A=O=>{b(O),O?(m(!1),u("0")):u("15")},$=async O=>{if(O.preventDefault(),!s.trim()){g({type:"warning",message:"Please enter an item name"});return}if(isNaN(_)||_<0){g({type:"warning",message:"Please enter a valid price"});return}if(isNaN(C)||C<0||C>100){g({type:"warning",message:"Please enter a valid VAT percentage (0-100)"});return}try{await r(e,s.trim(),_,y,w,C)}catch(T){g({type:"error",message:T instanceof Error?T.message:"Failed to update item"})}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 select-none",children:a.jsx("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden select-none",children:a.jsxs("div",{className:"p-6 select-none",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 select-none",children:a.jsxs("div",{className:"text-center select-none",children:["Edit Item in ",n.name]})}),a.jsxs("form",{onSubmit:$,className:"select-none",children:[a.jsxs("div",{className:"mb-4 select-none",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 select-none",children:"Item Name"}),a.jsx("input",{type:"text",value:s,onChange:O=>{const T=O.target.value.split(" ").map(I=>/^\d+(\.\d+)?L$/i.test(I)?I.toUpperCase():I.charAt(0).toUpperCase()+I.slice(1)).join(" ");i(T)},placeholder:"e.g., Matinee, Palmal, Rothman",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 select-text",autoFocus:!0})]}),a.jsxs("div",{className:"mb-4 select-none",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 select-none",children:"Unit Price (Rs)"}),a.jsx("input",{type:"number",value:o,onChange:O=>l(O.target.value),min:"0",step:"0.01",placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 select-text"})]}),a.jsxs("div",{className:"mb-4 space-y-3 select-none",children:[a.jsxs("div",{className:"flex items-center justify-between select-none",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 select-none",children:"VAT Exempt"}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer select-none",children:[a.jsx("input",{type:"checkbox",checked:y,onChange:O=>A(O.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${y?"bg-red-500":"bg-gray-300"}`,children:a.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${y?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]})]}),a.jsxs("div",{className:"flex items-center justify-between select-none",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 select-none",children:"VAT Included"}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer select-none",children:[a.jsx("input",{type:"checkbox",checked:w,onChange:O=>M(O.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${w?"bg-green-500":"bg-gray-300"}`,children:a.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${w?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]})]})]}),a.jsxs("div",{className:"mb-4 select-none",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 select-none",children:"VAT (%)"}),a.jsx("input",{type:"number",value:c,onChange:O=>u(O.target.value),min:"0",max:"100",step:"0.0001",disabled:w||y,className:`w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 select-text ${w||y?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}`}),a.jsx("p",{className:"text-xs text-gray-500 mt-1 select-none",children:w?"VAT percentage is disabled when VAT is included":y?"VAT percentage is disabled for VAT exempt items":"Enter 0 for VAT Nil items"})]}),_>0&&a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200 select-none",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2 select-none",children:"Price Breakdown:"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1 select-none",children:[a.jsxs("div",{className:"flex justify-between select-none",children:[a.jsx("span",{className:"select-none",children:"Unit Price:"}),a.jsxs("span",{className:"select-none",children:["Rs ",_.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.jsxs("div",{className:"flex justify-between select-none",children:[a.jsxs("span",{className:"select-none",children:["VAT (",C,"%):"]}),a.jsx("span",{className:"select-none",children:y?"VAT Nil":w?"VAT Included (No Additional VAT)":`Rs ${k.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`})]}),a.jsxs("div",{className:"flex justify-between font-medium text-gray-800 pt-1 border-t border-gray-300 select-none",children:[a.jsx("span",{className:"select-none",children:"Total Price:"}),a.jsxs("span",{className:"select-none",children:["Rs ",(w?_:E).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),a.jsxs("div",{className:"flex gap-3 select-none",children:[a.jsx("button",{type:"button",onClick:t,disabled:x,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 select-none",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:x||!s.trim()||!o.trim(),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 select-none",children:x?"Saving...":"Save Changes"})]})]})]})})})},R2=()=>{const[n,e]=N.useState([]),[t,r]=N.useState(!1),[s,i]=N.useState(!1);let o=0;N.useEffect(()=>{const u=console.log,h=console.error,d=console.warn;console.log=(...x)=>{u(...x),l("log",x.join(" "))},console.error=(...x)=>{h(...x),l("error",x.join(" "))},console.warn=(...x)=>{d(...x),l("warn",x.join(" "))};let f=0;const p=x=>{x.touches.length===3&&(f++,f===1&&setTimeout(()=>{f===1&&r(!0),f=0},300))};return document.addEventListener("touchstart",p),()=>{console.log=u,console.error=h,console.warn=d,document.removeEventListener("touchstart",p)}},[]);const l=(u,h)=>{const d={id:o++,type:u,message:h,timestamp:new Date};e(f=>[d,...f].slice(0,100))},c=()=>{e([])};return t?a.jsxs("div",{className:`fixed inset-0 bg-black bg-opacity-90 z-50 flex flex-col ${s?"h-16":""}`,children:[a.jsxs("div",{className:"bg-gray-800 text-white p-3 flex justify-between items-center",children:[a.jsxs("h3",{className:"font-bold",children:["Debug Console (",n.length,")"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>i(!s),className:"p-1 hover:bg-gray-700 rounded",children:s?a.jsx(uv,{size:16}):a.jsx(dN,{size:16})}),a.jsx("button",{onClick:c,className:"px-2 py-1 bg-red-600 rounded text-xs",children:"Clear"}),a.jsx("button",{onClick:()=>r(!1),className:"p-1 hover:bg-gray-700 rounded",children:a.jsx($e,{size:16})})]})]}),!s&&a.jsx("div",{className:"flex-1 overflow-y-auto p-3 bg-black text-green-400 font-mono text-xs",children:n.length===0?a.jsx("div",{className:"text-gray-500",children:"No logs yet..."}):n.map(u=>a.jsxs("div",{className:`mb-2 p-2 rounded ${u.type==="error"?"bg-red-900 text-red-200":u.type==="warn"?"bg-yellow-900 text-yellow-200":"bg-gray-900 text-green-200"}`,children:[a.jsxs("div",{className:"text-gray-400 text-xs mb-1",children:[u.timestamp.toLocaleTimeString()," [",u.type.toUpperCase(),"]"]}),a.jsx("div",{className:"whitespace-pre-wrap break-words",children:u.message})]},u.id))})]}):null},M2=({className:n=""})=>{const[e,t]=N.useState("connecting"),[r,s]=N.useState(new Date);N.useEffect(()=>{let l=!0,c;const u=async()=>{var f,p,x;if(l)try{if(!ue){t("disconnected"),s(new Date);return}t("connecting");const{data:g,error:w}=await Promise.race([ue.from("price_items").select("id").limit(1),new Promise((m,y)=>setTimeout(()=>y(new Error("Connection timeout")),5e3))]);if(!l)return;w?((f=w.message)!=null&&f.includes("timeout")||(p=w.message)!=null&&p.includes("fetch")||(x=w.message)!=null&&x.includes("Failed to fetch"),t("error")):t("connected"),s(new Date)}catch{if(!l)return;t("error"),s(new Date)}};u(),c=setInterval(u,3e4);const h=()=>{l&&u()},d=()=>{l&&(t("disconnected"),s(new Date))};return window.addEventListener("online",h),window.addEventListener("offline",d),()=>{l=!1,clearInterval(c),window.removeEventListener("online",h),window.removeEventListener("offline",d)}},[]);const o=(()=>{switch(e){case"connected":return{color:"bg-green-500",glow:"shadow-green-500/50",pulse:"",title:"Connected to Supabase"};case"connecting":return{color:"bg-yellow-500",glow:"shadow-yellow-500/50",pulse:"animate-pulse",title:"Connecting to Supabase..."};case"disconnected":return{color:"bg-gray-500",glow:"shadow-gray-500/50",pulse:"",title:"Offline - Using local storage"};case"error":return{color:"bg-red-500",glow:"shadow-red-500/50",pulse:"animate-pulse",title:"Connection error - Using local storage"};default:return{color:"bg-gray-500",glow:"shadow-gray-500/50",pulse:"",title:"Unknown status"}}})();return a.jsxs("div",{className:`relative ${n}`,title:`${o.title} (Last checked: ${r.toLocaleTimeString()})`,children:[a.jsx("div",{className:`
          w-4 h-4 rounded-full 
          ${o.color} 
          shadow-lg ${o.glow}
          ${o.pulse}
          transition-all duration-300
        `,style:{boxShadow:`0 0 20px ${e==="connected"?"#10b981":e==="connecting"?"#f59e0b":e==="error"?"#ef4444":"#6b7280"}`}}),a.jsx("div",{className:`
          absolute inset-0 w-4 h-4 rounded-full 
          ${o.color} 
          opacity-30 
          ${o.pulse}
          transition-all duration-300
        `,style:{transform:"scale(1.5)",filter:"blur(2px)"}})]})},L2=({className:n=""})=>{const[e,t]=N.useState({lastBackup:null,nextScheduled:null,isEnabled:!0,pendingBackups:0,lastError:null}),[r,s]=N.useState(navigator.onLine);N.useEffect(()=>{const l=()=>{const d=js.getBackupStatus();t(d),s(navigator.onLine)};l();const c=setInterval(l,6e4),u=()=>{s(!0),l()},h=()=>{s(!1),l()};return window.addEventListener("online",u),window.addEventListener("offline",h),()=>{clearInterval(c),window.removeEventListener("online",u),window.removeEventListener("offline",h)}},[]);const i=()=>e.isEnabled?e.lastError?a.jsx(ov,{size:16,className:"text-red-500"}):e.pendingBackups>0?a.jsx(vN,{size:16,className:"text-yellow-500 animate-pulse"}):e.lastBackup&&(Date.now()-e.lastBackup.getTime())/36e5<24?a.jsx(Fr,{size:16,className:"text-green-500"}):a.jsx(Dh,{size:16,className:"text-blue-500"}):a.jsx(Dh,{size:16,className:"text-gray-400"}),o=()=>{if(!e.isEnabled)return"Auto backup disabled";if(e.lastError)return`Backup error: ${e.lastError}`;if(e.pendingBackups>0)return`${e.pendingBackups} backup(s) pending`;if(e.lastBackup){const c=Math.floor((new Date().getTime()-e.lastBackup.getTime())/(1e3*60*60));return c<1?"Backed up recently":c<24?`Backed up ${c}h ago`:`Backed up ${Math.floor(c/24)}d ago`}if(e.nextScheduled){const l=new Date,c=e.nextScheduled.getTime()-l.getTime(),u=Math.floor(c/(1e3*60*60)),h=Math.floor(c%(1e3*60*60)/(1e3*60));return u>0?`Next backup in ${u}h ${h}m`:h>0?`Next backup in ${h}m`:"Backup due now"}return"Auto backup ready"};return a.jsxs("div",{className:`flex items-center gap-2 ${n}`,title:o(),children:[a.jsx("div",{className:"flex items-center",children:r?a.jsx(CN,{size:14,className:"text-green-500"}):a.jsx(SN,{size:14,className:"text-red-500"})}),a.jsx("div",{className:"flex items-center",children:i()}),e.pendingBackups>0&&a.jsx("div",{className:"bg-yellow-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:e.pendingBackups})]})};function $2(){const{user:n,loading:e}=Cp();return e?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx(fv,{message:"Initializing app..."})}):a.jsx(HN,{children:a.jsx(AN,{children:a.jsx(Nj,{children:a.jsx(jj,{children:a.jsx(BN,{children:a.jsx(z2,{})})})})})})}function z2(){const[n,e]=N.useState(()=>localStorage.getItem("activeTab")||"Credit");Cp(),ji();const t=s=>{e(s),localStorage.setItem("activeTab",s)};zo();const r=()=>{switch(n){case"Over":return a.jsx(j2,{});case"PriceList":return a.jsxs(a.Fragment,{children:[a.jsx(PN,{}),a.jsx(LN,{}),a.jsx(MN,{})]});case"Order":return a.jsx(k2,{});case"Credit":return a.jsx(N2,{});default:return null}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col w-full",children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center",children:[a.jsx("div",{className:"w-7"})," ",a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsx("h1",{className:"text-xl font-semibold text-gray-900 text-center",children:a.jsx("span",{className:"select-none",children:"Golden Store"})})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(M2,{className:"ml-3"}),a.jsx(L2,{className:"ml-3"})]})]}),a.jsx(WN,{activeTab:n,onTabChange:t}),a.jsx("div",{className:"flex-1 overflow-hidden",children:r()}),a.jsx(VN,{}),a.jsx(R2,{})]})}class F2{constructor(){this.serviceWorker=null,this.isRegistered=!1,this.init()}async init(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("./sw.js",{scope:"./"});this.serviceWorker=e,this.isRegistered=!0,e.addEventListener("updatefound",()=>{})}catch(e){(e instanceof Error?e.message:String(e)).includes("Service Workers are not yet supported on StackBlitz")}}async registerBackgroundSync(e){if(!(!this.serviceWorker||!("sync"in window.ServiceWorkerRegistration.prototype)))try{await this.serviceWorker.sync.register(e)}catch{}}get isServiceWorkerRegistered(){return this.isRegistered}get registration(){return this.serviceWorker}}new F2;class B2 extends Le.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("React Error Boundary caught an error:",e,t)}render(){var e;return this.state.hasError?a.jsxs("div",{style:{padding:"20px",textAlign:"center",fontFamily:"Arial, sans-serif",backgroundColor:"#f8f9fa",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[a.jsx("h1",{style:{color:"#dc3545",marginBottom:"20px"},children:"Something went wrong"}),a.jsxs("p",{style:{color:"#6c757d",marginBottom:"20px"},children:["Error: ",((e=this.state.error)==null?void 0:e.message)||"Unknown error"]}),a.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",n=>{n.data.type==="PROCESS_AUTO_BACKUP"&&js.forceBackupNow().catch(()=>{})});Ed.createRoot(document.getElementById("root")).render(a.jsx(Le.StrictMode,{children:a.jsx(B2,{children:a.jsx(YC,{children:a.jsx($2,{})})})}));
